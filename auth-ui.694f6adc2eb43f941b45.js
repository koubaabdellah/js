!function(){var e={88821:function(e,t,r){"use strict";r.d(t,{l_:function(){return f},Ob:function(){return E}});var n,i,o,a=r(20643),s=r.n(a),l=r(16624),c=r.n(l),p=r(50137),u=r.n(p),d=r(59549),m=r(32837),h=r(5013);const y=(0,m.kg)("navigator"),g=/(?:^(https?|craft|invision-studio-2x):$)/,b=/\.((invisionapp|invisionbeta)\.com|invision\.works)$/;(0,d.En)("navigator")(n=(0,d.RR)("features/context/request","flow/manager","router","window")(n=(0,d.ri)(n=class{constructor(e,t,r,n){this.request=e,this.router=r,this.flows=t,this.window=n}goTo(e,t={unsafe:!1}){if(!e)throw new Error("A URL or route name is required");const r=this.router.getRoute(e);if(r&&!t.subdomain)return this.goToRoute(r,t);const n=((e,t)=>{const r=new(u())(e,!0);if(!g.test(r.protocol))throw new Error("Invalid Protocol");if(!t&&/^https?:$/.test(r.protocol)&&!b.test(r.hostname))throw new Error("Invalid host");return r})(e,t.unsafe);if(t.subdomain){const{hostdomain:e}=this.request;n.set("host",`${t.subdomain}.${e}`)}return this.goToLocation(n,t)}goToRoute(e,t={}){this.router.navigate(e,t)}goToNotFound(e={}){this.goToRoute(this.router.notFound,e)}goToOrigin(e){const t=this.request.get("originURL")||"/";return e?this.goTo(t,e):this.goTo(t)}goToLocation(e,{query:t,replace:r=!1}={}){e.set("query",{...e.query,...t});const n=this.request.normalize(e),i=this.router.matchRoute(n),o=s()(this.window,"location.host")===n.host;if(i&&o){this.request.updateLocation(n);const{route:e,params:t}=i;return this.router.navigate(e,{params:t,query:n.query})}const a={};r&&(a.shouldReplace=!0),this.window.inGlobalContext.appShell.navigate(e.toString(),a)}})||n)||n);let f=(0,d.f3)("navigator")(i=class extends c().PureComponent{render(){const{navigator:e,destination:t,options:r}=this.props;if(t){const n=t.toString();y("Redirecting to: %s",n),r?e.goTo(n,r):e.goTo(n)}return c().createElement(h.gb,null)}})||i,E=(0,d.f3)("navigator")(o=class extends c().PureComponent{render(){const{navigator:e,params:t}=this.props;return e.goToOrigin(t),c().createElement(h.gb,null)}})||o},6895:function(e,t,r){"use strict";var n=r(16624),i=r.n(n);class o extends i().Component{componentDidMount(){const{action:e}=this.props;e()}render(){const{children:e}=this.props;return e||null}}t.Z=o},50209:function(e,t,r){"use strict";r.d(t,{k:function(){return a}});var n=r(33626),i=r.n(n);const o=(0,r(32837).kg)("disposable");class a{constructor(){this.disposers=[]}track(...e){for(const t of e)i()(t)?this.disposers.push((async()=>t())):o("WARNING: Registered disposable was not a function %O",t)}dispose(){const e=this.disposers.map((e=>e()));return Promise.all(e)}}},5260:function(e,t,r){"use strict";r.d(t,{ls:function(){return T},_V:function(){return j}});var n,i,o,a,s,l,c=r(8383),p=r.n(c),u=r(66190),d=r.n(u),m=r(29154),h=r.n(m),y=r(64267),g=r(59549),b=r(32837);function f(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const E=(0,b.kg)("flow:manager");n=(0,g.En)("flow/manager"),i=y.aD.bound,o=y.aD.bound,n(a=(0,g.ri)((l=f((s=class{constructor(){var e,t,r,n;e=this,t="stack",n=this,(r=l)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}get current(){return h()(this.stack)}get entry(){return d()(this.stack)}getStore(e){return g.ZP.current.resolve(e)}enter({store:e}){const{name:t}=e.meta;this.stack.push({name:t,store:e}),E("↧ %s",t)}exit({store:e}){const t=p()(this.stack,{store:e}),[r]=this.stack.splice(t,1);E("↥ %s",r.name)}}).prototype,"stack",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f(s.prototype,"current",[y.Fl],Object.getOwnPropertyDescriptor(s.prototype,"current"),s.prototype),f(s.prototype,"entry",[y.Fl],Object.getOwnPropertyDescriptor(s.prototype,"entry"),s.prototype),f(s.prototype,"enter",[i],Object.getOwnPropertyDescriptor(s.prototype,"enter"),s.prototype),f(s.prototype,"exit",[o],Object.getOwnPropertyDescriptor(s.prototype,"exit"),s.prototype),a=s))||a);var v=r(16624),O=r.n(v),w=r(76069),S=r(48743),D=r(50209);function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const C=(0,b.kg)("flow");function T(e){return t=>{t=(0,w.Pi)(t);class r extends O().Component{constructor(t){super(t),this.meta={name:e,type:"flow"};const{"flow/manager":r,onTransition:n=(()=>{}),onEnter:i=(()=>{}),onExit:o=(()=>{})}=t;this.manager=r,this.store=r.getStore(e),this.store.init({props:t}),this.disposer=new D.k,this.disposer.track(this.store.on("transition",((...e)=>n(...e))),this.store.on("enter",((...e)=>i(...e))),this.store.on("exit",((...e)=>o(...e)))),this.manager.enter({store:this.store})}componentDidMount(){this.store.enter({props:this.props,store:this.store})}componentWillUnmount(){this.manager.exit({props:this.props,store:this.store}),this.store.exit({props:this.props,store:this.store}),this.disposer.dispose().catch((t=>C(`Unable to dispose of flow '${e}'`,t)))}render(){const{animate:e,...r}=this.props,n=O().createElement(t,I({store:this.store},r));return e?O().createElement(S.Z,{speed:"medium",order:"drop-in-bottom",passThrough:"true"},n):n}}return(0,w.Pi)((0,g.f3)("flow/manager")(r))}}var P=r(41590),A=r.n(P),_=r(33626),N=r.n(_);function R(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function k(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const z=(0,b.kg)("flow");var j=function(e,{initialState:t,lifecycle:r=g.H3}={}){return n=>{var i,o,a,s,l,c,p,u;const d=new(A());e=e||n.name;let m=(i=y.aD.bound,o=y.aD.bound,a=y.aD.bound,s=y.aD.bound,c=k((l=class extends n{constructor(...t){super(...t),this.meta={name:e,type:"flowStore"},R(this,"state",c,this),R(this,"active",p,this),R(this,"transitioning",u,this)}on(e,t){return d.on(e,t),()=>d.removeListener(e,t)}transition(t){const r=this.state;z("→|← (%s)  %s → %s",e,r,t),this.transitioning=!0,this.state=t,this.transitioning=!1,N()(this.onTransition)&&this.onTransition({prevState:r,nextState:t}),d.emit("transition",{prevState:r,nextState:t})}init(t){z("ctor (%s)",e),N()(this.onInit)&&this.onInit(t),d.emit("init",t)}enter(t){z("→| (%s)  %s",e,this.state),this.active=!0,N()(this.onEnter)&&this.onEnter(t),d.emit("enter",t)}exit(t){z("←| (%s)",e),this.active=!1,d.emit("exit",t),N()(this.onExit)&&this.onExit(t)}}).prototype,"state",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t}}),p=k(l.prototype,"active",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=k(l.prototype,"transitioning",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k(l.prototype,"transition",[i],Object.getOwnPropertyDescriptor(l.prototype,"transition"),l.prototype),k(l.prototype,"init",[o],Object.getOwnPropertyDescriptor(l.prototype,"init"),l.prototype),k(l.prototype,"enter",[a],Object.getOwnPropertyDescriptor(l.prototype,"enter"),l.prototype),k(l.prototype,"exit",[s],Object.getOwnPropertyDescriptor(l.prototype,"exit"),l.prototype),l);return(0,g.En)(e)(r(m))}}},80733:function(e,t,r){"use strict";r.d(t,{l0:function(){return De},xv:function(){return Ce.xv},qH:function(){return Ie.Z}});var n=r(16624),i=r.n(n),o=r(33626),a=r.n(o),s=r(64267),l=r(76069),c=r(29966),p=r.n(c),u=r(20643),d=r.n(u),m=r(82641),h=r.n(m),y=r(2202),g=r(50569),b=r.n(g),f=r(24302),E=r.n(f),v=r(32837);const O={PENDING:Symbol("Pending"),VALID:Symbol("Valid"),INVALID:Symbol("Invalid")};var w,S,D,I,C,T,P=r(43670),A=r.n(P),_=r(28223),N=r.n(_),R=r(3522),k=r(75692),z=r.n(k);function j(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function x(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const L=(0,v.kg)("validation");let M=(w=s.aD.bound,S=s.aD.bound,I=x((D=class{constructor(e,{fn:t,initialState:r,remote:n=!1}){j(this,"messages",I,this),j(this,"state",C,this),j(this,"dependencies",T,this),this.key=e,this.fn=t,this.initialState=r,this.remote=n,this.state=r}reset(){this.state=this.initialState}validate(e,t={}){const r=this.fn;if(!r)throw new Error(`Validator for '${this.key}' is missing a 'fn' property`);const n=e=>{let t=e;if(N()(t)?t=t?[]:[`${this.key} is invalid`]:z()(e)&&(t=h()(e)?[]:[e]),t&&!A()(t))throw new Error(`Expected a boolean, message, or array of messages, but recieved: ${e}`);const r=h()(t);return(0,s.z)((()=>{this.messages=t,this.state=r?O.VALID:O.INVALID,L(`State '${this.key}': %s %O`,this.state,t)})),r},i=e=>(L("Error running validation: %O",e),(0,s.z)((()=>{this.messages=["Unable to validate.  Please try again"],this.state=O.INVALID})),!1),o=()=>{(0,s.z)((()=>{this.messages=[],this.state=O.VALID,L(`State '${this.key}': Allowed empty`)}))};try{if(t.allowEmpty&&h()(e.get(this.key)))return o();const a=r(e,{key:this.key,remote:this.remote,...t});return(0,R.Z)(a)?(L(`Async '${this.key}'`),this.state=O.PENDING,a.then(n,i)):n(a)}catch(e){return i(e)}}}).prototype,"messages",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=x(D.prototype,"state",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=x(D.prototype,"dependencies",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x(D.prototype,"reset",[w],Object.getOwnPropertyDescriptor(D.prototype,"reset"),D.prototype),x(D.prototype,"validate",[S],Object.getOwnPropertyDescriptor(D.prototype,"validate"),D.prototype),D);var F,Z,U,V,G;function q(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const W=(0,v.kg)("validation");let B=(F=s.aD.bound,Z=s.aD.bound,U=s.aD.bound,G=q((V=class{constructor(e,t){var r,n,i,o;r=this,n="validators",o=this,(i=G)&&Object.defineProperty(r,n,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0}),this.key=e,this.inputOptions=t}get valid(){return!this.validators.length||p()(this.validators,(e=>e.state===O.VALID))}get invalid(){return!!this.validators.length&&E()(this.validators,(e=>e.state===O.INVALID))}get pending(){return!!this.validators.length&&E()(this.validators,(e=>e.state===O.PENDING))}get remote(){return!!this.validators.length&&E()(this.validators,(e=>e.remote))}get messages(){return this.validators.length?this.validators.flatMap((e=>(0,s.ZN)(e.messages))):[]}reset(){this.validators.forEach((e=>e.reset()))}register(e){const t=e.debounce||e.remote?500:50;this._debouncedValidate&&this._debouncedValidate.cancel(),this._debouncedValidate=b()((e=>{this.reset(),W("Running validation: %O",{key:this.key,validators:this.validators.length});for(const t of this.validators)t.validate(e,this.inputOptions)}),t),this.validators.push(new M(this.key,e))}validate(e){this._debouncedValidate&&this._debouncedValidate(e)}}).prototype,"validators",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q(V.prototype,"valid",[s.Fl],Object.getOwnPropertyDescriptor(V.prototype,"valid"),V.prototype),q(V.prototype,"invalid",[s.Fl],Object.getOwnPropertyDescriptor(V.prototype,"invalid"),V.prototype),q(V.prototype,"pending",[s.Fl],Object.getOwnPropertyDescriptor(V.prototype,"pending"),V.prototype),q(V.prototype,"remote",[s.Fl],Object.getOwnPropertyDescriptor(V.prototype,"remote"),V.prototype),q(V.prototype,"messages",[s.Fl],Object.getOwnPropertyDescriptor(V.prototype,"messages"),V.prototype),q(V.prototype,"reset",[F],Object.getOwnPropertyDescriptor(V.prototype,"reset"),V.prototype),q(V.prototype,"register",[Z],Object.getOwnPropertyDescriptor(V.prototype,"register"),V.prototype),q(V.prototype,"validate",[U],Object.getOwnPropertyDescriptor(V.prototype,"validate"),V.prototype),V);var $,H,K,Y,X,J,Q,ee,te,re;function ne(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ie(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let oe=($=s.aD.bound,H=s.aD.bound,K=s.aD.bound,Y=s.aD.bound,X=s.aD.bound,J=s.aD.bound,Q=s.aD.bound,te=ie((ee=class{constructor(){ne(this,"inputs",te,this),ne(this,"dependencies",re,this)}observe(e){return(0,y.jy)(this.inputs,((t,r)=>{switch(t.type){case"add":case"delete":case"splice":return e(t,r)}}))}get(e){return this.inputs.get(e)}get valid(){for(const e of this.inputs.values())if(!e.valid)return!1;return!0}register(e,t){if(this.registerValidator(e,t),t.dependencies){this.registerDependency(e,t.dependencies);for(const r of t.dependencies)this.registerDependency(r,[e])}}registerInput(e,t){const r=this.inputs.get(e)||new B(e,t);this.inputs.set(e,r)}registerDependency(e,t){const r=this.dependencies.get(e)||[];r.push(...t),this.dependencies.set(e,r)}registerValidator(e,{fn:t,initialState:r,remote:n}){const i=this.get(e);i.register({fn:t,initialState:r,remote:n}),this.inputs.set(e,i)}delete(e){this.inputs.delete(e),this.dependencies.delete(e)}reset(e){this.get(e).reset()}validate({touched:e,updated:t,values:r}){const n=(()=>Array.from(e||this.inputs.keys()).map((e=>({key:e,input:this.inputs.get(e)}))).filter((({key:e,input:r})=>{if(!r)return!1;if(!t||e===t)return!0;return(this.dependencies.get(t)||[]).includes(e)})).map((({input:e})=>e)))();for(const e of n)e.validate(r)}}).prototype,"inputs",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),re=ie(ee.prototype,"dependencies",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),ie(ee.prototype,"valid",[s.Fl],Object.getOwnPropertyDescriptor(ee.prototype,"valid"),ee.prototype),ie(ee.prototype,"register",[$],Object.getOwnPropertyDescriptor(ee.prototype,"register"),ee.prototype),ie(ee.prototype,"registerInput",[H],Object.getOwnPropertyDescriptor(ee.prototype,"registerInput"),ee.prototype),ie(ee.prototype,"registerDependency",[K],Object.getOwnPropertyDescriptor(ee.prototype,"registerDependency"),ee.prototype),ie(ee.prototype,"registerValidator",[Y],Object.getOwnPropertyDescriptor(ee.prototype,"registerValidator"),ee.prototype),ie(ee.prototype,"delete",[X],Object.getOwnPropertyDescriptor(ee.prototype,"delete"),ee.prototype),ie(ee.prototype,"reset",[J],Object.getOwnPropertyDescriptor(ee.prototype,"reset"),ee.prototype),ie(ee.prototype,"validate",[Q],Object.getOwnPropertyDescriptor(ee.prototype,"validate"),ee.prototype),ee);var ae,se,le,ce,pe,ue,de,me,he,ye,ge;function be(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function fe(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Ee=(0,v.kg)("form");var ve,Oe=(ae=s.aD.bound,se=s.aD.bound,le=s.aD.bound,ce=s.aD.bound,pe=s.aD.bound,ue=s.aD.bound,de=s.aD.bound,he=fe((me=class{constructor(){this.clearableFields=[],this.errorOptions=new Map,this.errorTimeout=null,this.validation=new oe,be(this,"errorVisibility",he,this),be(this,"values",ye,this),be(this,"touched",ge,this),this.validate=({name:e,type:t})=>{this.validation.validate({touched:this.touched.keys(),updated:"update"===t&&e,values:this.values})},this.values.observe(((...e)=>this.validate(...e))),this.validation.observe(((...e)=>{this.validate(...e)}))}dispose(){this.validate&&this.validate.cancel()}clear(){for(const e of this.values.keys())this.clearField(e)}clearField(e){this.touched.delete(e),this.values.set(e,""),this.validation.reset(e)}empty(e){return"number"!=typeof e&&"boolean"!=typeof e&&h()(e)}get filled(){const e=Array.from(this.values.entries());return p()(e,(([e,t])=>{const r=this.touched.has(e),n=this.empty(t);return r&&!n}))}get valid(){return this.validation.valid}showErrorWithDelay(e){d()(this.errorOptions.get(e),"delay")?(clearTimeout(this.errorTimeout),this.errorTimeout=setTimeout((()=>{this.errorVisibility.set(e,!0)}),2e3)):this.errorVisibility.set(e,!0)}handleChange(e,t){this.touched.set(t,!0),this.values.set(t,e.target.value),Ee("Field updated: %O",t,e.target.value)}handleBlur(e,t){this.touched.set(t,!0),this.values.set(t,e.target.value)}handleSubmit(e,t){if(e&&e.preventDefault(),clearTimeout(this.errorTimeout),this.valid){t((e=>{const t={};for(const[r,n]of e)t[r]=n;return t})(this.values)),this.clearableFields.forEach((e=>this.clearField(e)))}}registerInput(e,{allowClear:t=!1,allowEmpty:r=!1,defaultValue:n}={}){this.values.set(e,""),this.validation.registerInput(e,{allowEmpty:r}),t&&this.clearableFields.push(e),r&&this.touched.set(e,!0),n&&(this.touched.set(e,!0),this.values.set(e,n))}unregisterInput(e){this.touched.delete(e),this.values.delete(e),this.validation.delete(e)}registerValidator(e,t){this.validation.register(e,t)}}).prototype,"errorVisibility",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),ye=fe(me.prototype,"values",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),ge=fe(me.prototype,"touched",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),fe(me.prototype,"clear",[s.aD],Object.getOwnPropertyDescriptor(me.prototype,"clear"),me.prototype),fe(me.prototype,"clearField",[s.aD],Object.getOwnPropertyDescriptor(me.prototype,"clearField"),me.prototype),fe(me.prototype,"filled",[s.Fl],Object.getOwnPropertyDescriptor(me.prototype,"filled"),me.prototype),fe(me.prototype,"valid",[s.Fl],Object.getOwnPropertyDescriptor(me.prototype,"valid"),me.prototype),fe(me.prototype,"showErrorWithDelay",[ae],Object.getOwnPropertyDescriptor(me.prototype,"showErrorWithDelay"),me.prototype),fe(me.prototype,"handleChange",[se],Object.getOwnPropertyDescriptor(me.prototype,"handleChange"),me.prototype),fe(me.prototype,"handleBlur",[le],Object.getOwnPropertyDescriptor(me.prototype,"handleBlur"),me.prototype),fe(me.prototype,"handleSubmit",[ce],Object.getOwnPropertyDescriptor(me.prototype,"handleSubmit"),me.prototype),fe(me.prototype,"registerInput",[pe],Object.getOwnPropertyDescriptor(me.prototype,"registerInput"),me.prototype),fe(me.prototype,"unregisterInput",[ue],Object.getOwnPropertyDescriptor(me.prototype,"unregisterInput"),me.prototype),fe(me.prototype,"registerValidator",[de],Object.getOwnPropertyDescriptor(me.prototype,"registerValidator"),me.prototype),me);function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const Se=(0,v.kg)("form");var De=(0,l.Pi)(ve=class extends i().Component{constructor(e){super(e),this.form=new Oe}handleSubmit(e){const t=this.props.onSubmit||this.props.submit||(()=>{});this.form.handleSubmit(e,t)}componentDidMount(){this.props.autoSubmit&&(Se("Auto-submission: enabled"),this.cancelAutoSubmit=(0,s.U5)((()=>this.form.filled&&this.form.valid),(e=>e&&this.handleSubmit())))}componentWillUnmount(){this.cancelAutoSubmit&&this.cancelAutoSubmit()}render(){const{children:e,disabled:t,autoSubmit:r,submit:n,onSubmit:o,...s}=this.props;return i().createElement(l.zt,{form:this.form},i().createElement("form",we({"data-component":"form",method:"POST",onSubmit:e=>this.handleSubmit(e)},s),a()(e)?e(this.form):e))}})||ve,Ie=r(34591),Ce=r(41899)},34591:function(e,t,r){"use strict";var n,i,o,a,s,l=r(66190),c=r.n(l),p=r(16624),u=r.n(p),d=r(87860),m=r(25817),h=r(95863),y=r(26330),g=r(81772),b=r(29024),f=r(64267),E=r(76069);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function O(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let w=(n=f.aD.bound,(0,E.Pi)((s=class extends u().Component{constructor(...e){var t,r,n,i;super(...e),t=this,r="visible",i=this,(n=a)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}setVisible(e){this.visible=e}componentDidUpdate(e){const{delay:t=2e3}=this.props,r=this.props.message||"";r!==(e.message||"")&&(clearTimeout(this.timeout),this.setVisible(!1),r&&(this.timeout=setTimeout((()=>this.setVisible(!0)),t)))}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{alternate:e,message:t}=this.props;return this.visible&&t?u().createElement(I,null,t):e?u().createElement(m.Z,{order:"body",size:"smallest"},e):null}},a=O((o=s).prototype,"visible",[f.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O(o.prototype,"setVisible",[n],Object.getOwnPropertyDescriptor(o.prototype,"setVisible"),o.prototype),i=o))||i);t.Z=e=>{var t,r,n,i,o,a;return t=(0,E.f3)("form"),r=f.aD.bound,n=f.aD.bound,i=f.aD.bound,t(o=(0,E.Pi)((O((a=class extends u().Component{constructor(e){if(super(e),!e.name)throw new Error("A name is required for form inputs");if(!e.form)throw new Error("A form store is required for form inputs.  Was it injected?");this.name=e.name,this.form=e.form,this.form.registerInput(e.name,{allowClear:e.allowClear,allowEmpty:e.allowEmpty,defaultValue:e.defaultValue})}componentWillUnmount(){this.form.unregisterInput(this.name)}get empty(){return this.form.empty(this.value)}get value(){return this.form.values.get(this.name)}get touched(){return this.form.touched.get(this.name)}get validator(){return this.form.validation.get(this.name)}handleBlur(e){return this.form.handleBlur(e,this.name)}handleChange(e){return this.form.handleChange(e,this.name)}registerValidator(e){return this.form.registerValidator(this.name,e)}render(){let{allowEmpty:t,children:r,errorDelay:n,id:i,form:o,helper:a,label:s,name:l,...p}=this.props;i=i||l;const d=null!=n?n:this.validator.remote?1e3:2e3,m=this.validator.remote&&(this.validator.pending||this.validator.valid),b=this.empty||!this.validator.invalid;return u().createElement(D,{"data-component":`form-input-${i}`},s&&u().createElement(h.Z,{"data-component":`form-input-${i}-label`,htmlFor:i},s),u().createElement(y.Z,{alignItems:"center"},u().createElement(e,v({id:i,name:this.name,store:this},p)),m&&u().createElement(S,{"data-component":"input-spinner",loaded:!this.validator.pending})),u().createElement(g.Z,{top:"xxs"},u().createElement(w,{alternate:a,delay:d,message:b?null:c()(this.validator.messages)})),r)}}).prototype,"empty",[f.Fl],Object.getOwnPropertyDescriptor(a.prototype,"empty"),a.prototype),O(a.prototype,"value",[f.Fl],Object.getOwnPropertyDescriptor(a.prototype,"value"),a.prototype),O(a.prototype,"touched",[f.Fl],Object.getOwnPropertyDescriptor(a.prototype,"touched"),a.prototype),O(a.prototype,"validator",[f.Fl],Object.getOwnPropertyDescriptor(a.prototype,"validator"),a.prototype),O(a.prototype,"handleBlur",[r],Object.getOwnPropertyDescriptor(a.prototype,"handleBlur"),a.prototype),O(a.prototype,"handleChange",[n],Object.getOwnPropertyDescriptor(a.prototype,"handleChange"),a.prototype),O(a.prototype,"registerValidator",[i],Object.getOwnPropertyDescriptor(a.prototype,"registerValidator"),a.prototype),o=a))||o)||o};const S=(0,d.ZP)(b.Z).withConfig({displayName:"input__AsyncSpinner",componentId:"sc-1hbf5r5-0"})(["position:absolute;right:-",";"],(({theme:e})=>e.spacing.l)),D=d.ZP.div.withConfig({displayName:"input__InputGroup",componentId:"sc-1hbf5r5-1"})(["margin-bottom:",";position:relative;"],(({theme:e})=>e.spacing.m)),I=(0,d.ZP)(m.Z).withConfig({displayName:"input__ErrorText",componentId:"sc-1hbf5r5-2"})(["color:",";animation-duration:0.5s;animation-name:fadein;@keyframes fadein{from{opacity:0;}to{opacity:1;}}"],(({theme:e})=>e.palette.danger.darker));I.defaultProps={order:"body",size:"smallest"}},41899:function(e,t,r){"use strict";r.d(t,{XZ:function(){return y},GT:function(){return T},ro:function(){return M},LP:function(){return B},rL:function(){return he},Ph:function(){return Oe},k4:function(){return Ne},xv:function(){return S},Kx:function(){return ze}});var n,i,o,a,s=r(16624),l=r.n(s),c=r(64267),p=r(12334),u=r(76069);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var h,y=(n=(0,u.f3)("form"),i=c.aD.bound,n(o=(0,u.Pi)((m((a=class extends l().Component{constructor(e){if(super(e),!e.name)throw new Error("A name is required for a checkbox");if(!e.form)throw new Error("A form store is required for checkboxes.  Was it injected?");this.name=e.name,this.form=e.form,this.form.registerInput(e.name),this.form.touched.set(e.name,!0),this.form.values.set(e.name,e.checked||!1)}get checked(){return this.form.values.get(this.name)}handleToggle(){this.form.values.set(this.name,!this.form.values.get(this.name))}render(){const{id:e,checked:t,form:r,name:n,defaultValue:i,children:o,...a}=this.props;return l().createElement(p.Z,d({id:e||n,name:n,checked:this.checked,onChange:this.handleToggle},a),o)}}).prototype,"checked",[c.Fl],Object.getOwnPropertyDescriptor(a.prototype,"checked"),a.prototype),m(a.prototype,"handleToggle",[i],Object.getOwnPropertyDescriptor(a.prototype,"handleToggle"),a.prototype),o=a))||o)||o),g=r(57745),b=r.n(g),f=r(20314),E=r(30195),v=r(34591);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var w,S=(0,v.Z)(h=(0,u.Pi)(h=class extends l().Component{constructor(e){super(e),e.validator&&e.store.registerValidator(e.validator)}render(){const{id:e,name:t,store:r,defaultValue:n,isUncontrolled:i,...o}=this.props;return l().createElement(E.Z,O({id:e,isUncontrolled:null==i||i,name:t,type:"text",onChange:r.handleChange,onBlur:r.handleBlur,defaultValue:n},o))}})||h)||h;function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const I=(e,{key:t})=>{const r=e.get(t);return b().single(r,{email:{message:f.As}})};var C,T=(0,u.Pi)(w=class extends l().Component{render(){const{id:e,name:t,validator:r,...n}=this.props;return l().createElement(S,D({id:e,name:t,type:"text",delay:1500,validator:r||{fn:I}},n))}})||w,P=r(7120),A=r.n(P),_=r(63902),N=r.n(_);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const k=e=>(t,{key:r})=>{const n=t.get(r);return!e||e.validate(n)},z=e=>(t,{key:r})=>{const n=t.get(r);let i=e;N()(i)||(i={name:e,message:"This field needs to match the one above it."});if(!A()(n,t.get(i.name)))return i.message},j=(e,t)=>e||(t?`${t.minLength}+ characters`:null),x=({policy:e,match:t})=>e?{fn:k(e)}:t?{fn:z(t),dependencies:[N()(t)?t.name:t]}:void 0;var L,M=(0,u.Pi)(C=class extends l().Component{render(){const{name:e,store:t,placeholder:r,validator:n,match:i,policy:o,...a}=this.props;return l().createElement(S,R({name:e,type:"password",placeholder:j(r,o),validator:x({policy:o,match:i})},a))}})||C,F=r(82380),Z=r.n(F);function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var V,G,q,W,B=(0,v.Z)(L=(0,u.Pi)(L=class extends l().Component{constructor(e){super(e),e.store.registerValidator(e.validator||{fn:()=>!0})}render(){const{id:e,name:t,store:r,defaultValue:n,...i}=this.props;return l().createElement(Z(),U({fieldId:e,fieldName:t,telInputProps:{"data-component":"phone-number"},inputClassName:"form-control",onPhoneNumberChange:(e,t,n)=>{r.handleChange({target:{value:{isValid:e,region:n.iso2,number:t}}})},defaultValue:n,separateDialCode:!0},i))}})||L)||L,$=r(92506);function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function K(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Y,X,J=(V=(0,u.f3)("form"),G=c.aD.bound,V(q=(0,u.Pi)((K((W=class extends l().Component{constructor(e){if(super(e),!e.name)throw new Error("A name is required for a radio input");if(!e.value)throw new Error("A value is required for a radio input");if(!e.form)throw new Error("A form store is required for a radio input. Was it injected?");this.name=e.name,this.value=e.value,this.form=e.form}get checked(){return this.form.values.get(this.name)===this.value}handleSelect(e){if(this.value!==e.currentTarget.value)return;const{name:t,value:r}=this;this.form.values.set(t,r)}render(){const{id:e,form:t,name:r,value:n,children:i,...o}=this.props;return l().createElement($.Z,H({id:e||`${r}-${n}`,name:r,value:n,checked:this.checked,onChange:this.handleSelect},o),i)}}).prototype,"checked",[c.Fl],Object.getOwnPropertyDescriptor(W.prototype,"checked"),W.prototype),K(W.prototype,"handleSelect",[G],Object.getOwnPropertyDescriptor(W.prototype,"handleSelect"),W.prototype),q=W))||q)||q),Q=r(87860),ee=r(81772),te=r(95863);let re=(0,u.f3)("form")(Y=(0,u.Pi)((X=class extends l().Component{constructor(e){if(super(e),!e.name)throw new Error("A name is required for a radio list");if(!e.form)throw new Error("A form store is required for a radio list. Was it injected?");this.name=e.name,this.form=e.form,this.form.registerInput(e.name),this.form.touched.set(e.name,!0),this.form.values.set(e.name,e.defaultValue)}componentDidMount(){const{name:e,form:t,onChange:r=(()=>{})}=this.props;this.dispose=(0,c.U5)((()=>t.values.get(e)),(e=>r(e)))}componentWillUnmount(){this.dispose&&this.dispose()}get value(){return this.form.values.get(this.name)}render(){const{id:e,name:t,label:r,options:n,unstyled:i}=this.props;return l().createElement("div",{id:e},l().createElement(ee.Z,{vertical:"xxs"},r&&l().createElement(ce,{htmlFor:t},r),n.map(((r,n)=>l().createElement(J,{key:`${e||t}-${n}`,name:t,value:r.value,unstyled:i},r.children)))))}},ne=X.prototype,ie="value",oe=[c.Fl],ae=Object.getOwnPropertyDescriptor(X.prototype,"value"),se=X.prototype,le={},Object.keys(ae).forEach((function(e){le[e]=ae[e]})),le.enumerable=!!le.enumerable,le.configurable=!!le.configurable,("value"in le||le.initializer)&&(le.writable=!0),le=oe.slice().reverse().reduce((function(e,t){return t(ne,ie,e)||e}),le),se&&void 0!==le.initializer&&(le.value=le.initializer?le.initializer.call(se):void 0,le.initializer=void 0),void 0===le.initializer&&(Object.defineProperty(ne,ie,le),le=null),Y=X))||Y)||Y;var ne,ie,oe,ae,se,le;const ce=(0,Q.ZP)(te.Z).withConfig({displayName:"RadioList__RadioLabel",componentId:"ufgy4y-0"})([""," line-height:","px;"],(({theme:e})=>e.text.subtitle),(({theme:e})=>e.text.subtitle.lineHeight));var pe,ue,de,me,he=re,ye=r(26330),ge=r(30104);function be(){return(be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let fe=(pe=(0,u.f3)("form"),ue=c.aD.bound,pe(de=(0,u.Pi)((function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((me=class extends l().Component{constructor(e){if(super(e),!e.name)throw new Error("A name is required for a select");if(!e.form)throw new Error("A form store is required for a select. Was it injected?");this.name=e.name,this.form=e.form,this.form.registerInput(e.name),this.form.touched.set(e.name,!0),this.form.values.set(e.name,e.defaultValue)}handleSelect(e){this.form.values.set(this.name,e.currentTarget.value)}render(){const{id:e,form:t,name:r,label:n,defaultValue:i,children:o,...a}=this.props;return l().createElement(Ee,{"data-component":`form-input-${e}`},n&&l().createElement(te.Z,{"data-component":`form-input-${e}-label`,htmlFor:e},n),l().createElement(ye.Z,{alignItems:"center"},l().createElement(ge.Z,be({id:e||r,name:r,onChange:this.handleSelect,defaultValue:i},a),o)))}}).prototype,"handleSelect",[ue],Object.getOwnPropertyDescriptor(me.prototype,"handleSelect"),me.prototype),de=me))||de)||de);const Ee=Q.ZP.div.withConfig({displayName:"Select__InputGroup",componentId:"zt705c-0"})(["margin-bottom:",";position:relative;"],(({theme:e})=>e.spacing.m));var ve,Oe=fe,we=r(28223),Se=r.n(we),De=r(33626),Ie=r.n(De),Ce=r(77877),Te=r(97674);function Pe(){return(Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const Ae=(0,r(32837).kg)("form");var _e,Ne=(0,u.f3)("form")(ve=(0,u.Pi)(ve=class extends l().Component{render(){const{form:e,children:t,disabled:r,...n}=this.props;let i=!e.valid;return Ie()(r)&&(i=r(e)),Se()(r)&&(i=r),Ae("Submit: %O",i?"disabled":"enabled"),l().createElement(ee.Z,{top:"l"},l().createElement(Ce.Z,{horizontal:"center"},l().createElement(Te.KM,Pe({type:"submit",disabled:i},n),t)))}})||ve)||ve,Re=r(95197);function ke(){return(ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ze=(0,v.Z)(_e=(0,u.Pi)(_e=class extends l().Component{constructor(e){super(e),e.validator&&e.store.registerValidator(e.validator)}render(){const{id:e,name:t,store:r,defaultValue:n,validator:i,...o}=this.props;return l().createElement(Re.Z,ke({id:e,name:t,onChange:r.handleChange,onBlur:r.handleBlur,defaultValue:n},o))}})||_e)||_e},57819:function(e,t,r){"use strict";r.d(t,{W:function(){return n.Z},u:function(){return a}});var n=r(6895),i=r(33626),o=r.n(i);function a(e){return(...t)=>o()(e)?e(...t):e}},35902:function(e,t,r){"use strict";r.d(t,{A:function(){return s},Z:function(){return l}});var n=r(20643),i=r.n(n),o=r(89193);const a="dependencies";function s(e){return i()((0,o.s)(e),a)}function l(...e){return t=>((0,o.y)(t,{[a]:e}),t)}},32827:function(e,t,r){"use strict";r.d(t,{En:function(){return o},RR:function(){return a.Z},f3:function(){return u},ri:function(){return m},H3:function(){return h}});var n=r(89193),i=r(35366);function o(e){return t=>(function(e,t){const r=(0,n.s)(t);r&&i.Z.register(e,r)}(e,t),t)}var a=r(35902),s=r(16624),l=r.n(s),c=r(76069);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(...e){return t=>{class r extends l().Component{constructor(t){super(t),this.injected={};for(const t of e)this.injected[t]=i.Z.resolve(t)}render(){return l().createElement(t,p({},this.injected,this.props))}}return(0,c.Pi)(r)}}var d=r(77319);function m(e){return(0,n.y)(e,{type:d.S.AsClass,lifecycle:d.R.Singleton,value:e}),e}function h(e){return(0,n.y)(e,{type:d.S.AsClass,lifecycle:d.R.Transient,value:e}),e}},89193:function(e,t,r){"use strict";r.d(t,{s:function(){return i},y:function(){return o}});const n=Symbol("__ioc-meta__");function i(e){return e[n]||{}}function o(e,t){e[n]=i(e),e[n]=Object.assign(e[n],t)}},59549:function(e,t,r){"use strict";r.d(t,{S7:function(){return n.S},En:function(){return i.En},RR:function(){return i.RR},f3:function(){return i.f3},ri:function(){return i.ri},H3:function(){return i.H3},ZP:function(){return o.Z}});var n=r(77319),i=r(32827),o=r(35366)},35366:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var n=r(39982),i=r.n(n),o=r(63902),a=r.n(o);class s{constructor(e,t){this._pending={},this._registrations={},this._instance=e,this._opt=t}get registrations(){return this._ensureRegistrations(),this._registrations}register(e,t){return this._pending=a()(e)?Object.assign(this._pending,e):Object.assign(this._pending,{[e]:t}),this}resolve(e){return this._ensureRegistrations(),this._instance.resolve(e)}child(){this._ensureRegistrations();const e=new s(this._instance.child(),this._opt);return this._opt.onChild(e),e}dispose(){this._disposed||this._opt.onDispose(this),this._disposed=!0}_ensureRegistrations(){i()(this._pending,((e,t)=>{this._registrations[t]=e,this._instance.register(t,e)})),this._pending={}}}var l=s,c=r(49202),p=r(77319),u=r(35902);class d{constructor(e){this.scope=e||new c.W2}child(){return new d(this.scope.createChild())}register(e,{type:t,value:r,lifecycle:n,inject:i}){const o={token:e};switch(t){case p.S.AsClass:{const e=(0,u.A)(r);(0,c.GS)(e)(r),o.useClass=r;break}case p.S.AsFunction:o.useFactory=r,i&&(o.inject=i);break;case p.S.AsValue:o.useValue=r;break;default:throw new Error(`Unknown registration type: ${t}`)}switch(n){case p.R.Transient:o.lifeTime=c.hH.PerRequest;break;case p.R.Singleton:default:o.lifeTime=c.hH.Persistent}this.scope.register(o)}resolve(e){return this.scope.resolve(e)}}var m=d;var h=new class{constructor(){this._scopes=[]}get current(){return this._scopes.length||(e=>{const t=new l(new m,{onDispose:()=>{e.pop()},onChild:t=>{e.push(t)}});e.push(t)})(this._scopes),this._scopes[this._scopes.length-1]}get scopes(){return this._scopes}register(...e){this.current.register(...e)}resolve(e){return this.current.resolve(e)}}},77319:function(e,t,r){"use strict";r.d(t,{S:function(){return n},R:function(){return i}});const n={AsClass:Symbol("AsClass"),AsFunction:Symbol("AsFuntion"),AsValue:Symbol("AsValue")},i={Singleton:Symbol("Singleton"),Transient:Symbol("Transient")}},32837:function(e,t,r){"use strict";r.d(t,{kg:function(){return o},yN:function(){return a}});var n=r(72849),i=r.n(n);function o(e){const t=e?`:${e}`:"";return i()(`auth-ui${t}`)}function a(e){return t=>class extends t{constructor(...t){super(...t),this.log=o(e)}}}},88104:function(e,t,r){"use strict";r.d(t,{i1:function(){return n},ei:function(){return m},oe:function(){return w}});var n={};r.r(n),r.d(n,{cS:function(){return u},eW:function(){return p}});var i=r(16624),o=r.n(i),a=r(76069),s=r(50209),l=r(32837),c=r(59549);function p({viewName:e}){return c.ZP.current.resolve(e)}function u(){return{init:()=>{},enter:()=>{},exit:()=>{},on:()=>function(){}}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var m=function(e,{storeStrategy:t=p}={}){const r=(0,l.kg)(e);return n=>{var i;return n=(0,a.Pi)(n),(0,a.Pi)(i=class extends o().Component{constructor(r){super(r);const{onEnter:n=(()=>{}),onExit:i=(()=>{})}=r;this.store=t({viewName:e,props:r}),this.store.init({props:r}),this.disposer=new s.k,this.disposer.track(this.store.on("enter",((...e)=>n(...e))),this.store.on("exit",((...e)=>i(...e))))}componentDidMount(){this.store.enter({props:this.props,store:this.store})}componentWillUnmount(){this.store.exit({props:this.props,store:this.store}),this.disposer.dispose().catch((t=>r(`Unable to dispose view '${e}'`,t)))}render(){return o().createElement(n,d({store:this.store},this.props))}})||i}},h=r(41590),y=r.n(h),g=r(33626),b=r.n(g),f=r(64267);function E(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const v=(0,l.kg)("view"),O=new(y());var w=function(e,{lifecycle:t=c.H3}={}){return r=>{var n,i,o,a,s;let l=(n=f.aD.bound,i=f.aD.bound,o=f.aD.bound,s=E((a=class extends r{constructor(...t){var r,n,i,o;super(...t),this.meta={name:e,type:"view"},r=this,n="active",o=this,(i=s)&&Object.defineProperty(r,n,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0})}on(e,t){return O.on(e,t),()=>O.removeListener(e,t)}init(t){v("ctor (%s)",e),b()(this.onInit)&&this.onInit(t)}enter(t){v("→| (%s)",e),this.active=!0,O.emit("enter",t),b()(this.onEnter)&&this.onEnter(t)}exit(){v("←| (%s)",e),this.active=!1,O.emit("exit"),b()(this.onExit)&&this.onExit()}}).prototype,"active",[f.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E(a.prototype,"init",[n],Object.getOwnPropertyDescriptor(a.prototype,"init"),a.prototype),E(a.prototype,"enter",[i],Object.getOwnPropertyDescriptor(a.prototype,"enter"),a.prototype),E(a.prototype,"exit",[o],Object.getOwnPropertyDescriptor(a.prototype,"exit"),a.prototype),a);return(0,c.En)(e)(t(l))}}},54638:function(e,t,r){"use strict";var n,i,o,a,s,l,c,p,u,d,m=r(20643),h=r.n(m),y=r(64267),g=r(59549),b=r(28511);function f(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const E=(0,r(32837).kg)("features:2fa");n=(0,g.En)("features/2fa/api"),i=(0,g.RR)("features/analytics","features/http"),o=y.aD.bound,a=y.aD.bound,s=y.aD.bound,l=y.aD.bound,c=y.aD.bound,n(p=(0,g.ri)(p=i((d=f((u=class{constructor(e,t){var r,n,i,o;r=this,n="settings",o=this,(i=d)&&Object.defineProperty(r,n,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0}),this.analytics=e,this.http=t}get enabled(){return h()(this.settings,"enabled",!1)}get method(){return h()(this.settings,"method")}get recoveryCodes(){return h()(this.settings,"recoveryCodes",[])}get teams(){return h()(this.settings,"teams",[])}get required(){return Boolean(this.teams.length)}updateSettings(e){e||(e={}),this.settings=e}updateCodes(e){this.settings.recoveryCodes=e}async disable(){this.settings=await this.http.post("/auth-api/2fa/settings/disable"),E("Disabled: (200) %O",(0,y.ZN)(this.settings)),this.analytics.track(b.zW.TWO_FACTOR_SETTINGS,"Disabled")}async enable(){this.settings.enabled=!0}async load(){try{const e=await this.http.get("/auth-api/2fa/settings",{errorKey:"global"}).then((e=>e.data));this.updateSettings(e),E("Loaded: (200) %O",(0,y.ZN)(this.settings))}catch(e){throw E("Load failed: %s",e.message),e}}setupComplete({recoveryCodes:e}){this.recoveryCodes=e}}).prototype,"settings",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),f(u.prototype,"enabled",[y.Fl],Object.getOwnPropertyDescriptor(u.prototype,"enabled"),u.prototype),f(u.prototype,"method",[y.Fl],Object.getOwnPropertyDescriptor(u.prototype,"method"),u.prototype),f(u.prototype,"recoveryCodes",[y.Fl],Object.getOwnPropertyDescriptor(u.prototype,"recoveryCodes"),u.prototype),f(u.prototype,"teams",[y.Fl],Object.getOwnPropertyDescriptor(u.prototype,"teams"),u.prototype),f(u.prototype,"required",[y.Fl],Object.getOwnPropertyDescriptor(u.prototype,"required"),u.prototype),f(u.prototype,"updateSettings",[o],Object.getOwnPropertyDescriptor(u.prototype,"updateSettings"),u.prototype),f(u.prototype,"updateCodes",[a],Object.getOwnPropertyDescriptor(u.prototype,"updateCodes"),u.prototype),f(u.prototype,"disable",[s],Object.getOwnPropertyDescriptor(u.prototype,"disable"),u.prototype),f(u.prototype,"enable",[l],Object.getOwnPropertyDescriptor(u.prototype,"enable"),u.prototype),f(u.prototype,"setupComplete",[c],Object.getOwnPropertyDescriptor(u.prototype,"setupComplete"),u.prototype),p=u))||p)||p)},64060:function(e,t,r){"use strict";r.d(t,{Ar:function(){return $r},ZP:function(){return qr}});r(54638);var n,i,o,a,s,l,c,p,u,d,m,h=r(16624),y=r.n(h),g=r(64267),b=r(5260),f=r(59549),E=r(28511),v=r(47714),O=r(81281),w=r(5013),S=r(8253),D=r(20643),I=r.n(D),C=r(7426),T=r(41779),P=r(59953),A=r(94002),_=r(26330),N=r(25746),R=r(25817),k=r(13361),z=r(55291),j=r(87860),x=r(32837),L=r(88104),M=r(56217),F=r(97674);r(64404);function Z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const U=(0,x.kg)("2fa:recovery-codes"),V={INITIAL:Symbol("2FA Codes: Initial"),GENERATING:Symbol("2FA Codes: Generating"),GENERATE_SUCCESS:Symbol("2FA Codes: Generate success"),GENERATE_FAILURE:Symbol("2FA Codes: Generate failure")},G="Your new codes could not be generated.  Please try again later.",q="Your new recovery codes have been successfully generated";n=(0,L.oe)("features/2fa/recovery-codes"),i=(0,f.RR)("features/2fa/api","features/analytics","features/context/client","features/download","features/http","features/notification","window"),o=g.aD.bound,a=g.aD.bound,s=g.aD.bound,l=g.aD.bound,c=g.aD.bound,n(p=i((d=Z((u=class{constructor(e,t,r,n,i,o,a){var s,l,c,p;s=this,l="state",p=this,(c=d)&&Object.defineProperty(s,l,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(p):void 0}),this.analytics=t,this.api=e,this.client=r,this.download=n,this.http=i,this.notification=o,this.window=a}get codes(){return this.api.recoveryCodes}get codesText(){return this.api.recoveryCodes.join("\n")}transition(e){this.state=e}async downloadFile(){await this.download.file("/auth-api/2fa/recovery",{file:"InVision-Recovery-Codes.txt",event:E.zW.TWO_FACTOR_RECOVERY_CODES})}copied(){this.analytics.track(E.zW.TWO_FACTOR_RECOVERY_CODES,"Copied")}print(){this.analytics.track(E.zW.TWO_FACTOR_RECOVERY_CODES,"Printed"),this.window.print()}async generate(){let e=this.codes;this.notification.clear(),this.transition(V.GENERATING);try{this.api.updateCodes(this.codes.map((()=>null))),e=await this.http.post("/auth-api/2fa/recovery",{errorKey:"global"}).then((e=>I()(e,"data.recoveryCodes",[]))),this.client.isEmbedded?this.notification.notify(q,"success"):this.transition(V.GENERATE_SUCCESS),U("Generate: (200) %O",e),this.analytics.track(E.zW.TWO_FACTOR_RECOVERY_CODES,"Generated")}catch(e){this.client.isEmbedded?this.notification.notify(G):this.transition(V.GENERATE_FAILURE),U("Generate failed: %s",e.message)}this.api.updateCodes(e)}}).prototype,"state",[g.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.INITIAL}}),Z(u.prototype,"codes",[g.Fl],Object.getOwnPropertyDescriptor(u.prototype,"codes"),u.prototype),Z(u.prototype,"codesText",[g.Fl],Object.getOwnPropertyDescriptor(u.prototype,"codesText"),u.prototype),Z(u.prototype,"transition",[o],Object.getOwnPropertyDescriptor(u.prototype,"transition"),u.prototype),Z(u.prototype,"downloadFile",[a],Object.getOwnPropertyDescriptor(u.prototype,"downloadFile"),u.prototype),Z(u.prototype,"copied",[s],Object.getOwnPropertyDescriptor(u.prototype,"copied"),u.prototype),Z(u.prototype,"print",[l],Object.getOwnPropertyDescriptor(u.prototype,"print"),u.prototype),Z(u.prototype,"generate",[c],Object.getOwnPropertyDescriptor(u.prototype,"generate"),u.prototype),p=u))||p);let W=(0,L.ei)("features/2fa/recovery-codes")(m=class extends y().Component{render(){const{store:e,onDone:t}=this.props;return y().createElement(Q,null,e.client.isEmbedded?y().createElement(te,null,y().createElement(M.Z,null)):{[V.GENERATE_SUCCESS]:y().createElement(w.FN.V,{status:"success"},q),[V.GENERATE_FAILURE]:y().createElement(w.FN.V,{status:"danger"},G)}[e.state],y().createElement(ne,{size:"40"}),y().createElement(w.X6,{align:"center",className:"recovery-code-header",heading:"Your recovery codes",subheading:"Keep these codes somewhere secure. "+(e.client.isEmbedded?"":"When 2FA is enabled, they're the only way to sign in without your phone.")}),y().createElement(X,{withPadding:!1},y().createElement(re,{flexWrap:"wrap"},e.codes.map(((e,t)=>y().createElement(J,{key:t},y().createElement(C.Z,null,e&&y().createElement(Y,null,e)))))),y().createElement(T.Z,null),y().createElement(B,null,y().createElement(H,{justifyContent:"center"},y().createElement($,{order:"info",onClick:()=>e.generate()},"New codes"),y().createElement(K,{stringToCopy:e.codesText,onCopy:()=>e.copied()})),!e.client.isEmbedded&&y().createElement(ee,null,y().createElement(P.Z,{order:"primary",onClick:()=>e.print()},"Print")," or ",y().createElement(P.Z,{order:"primary",onClick:()=>e.downloadFile()},"download")))),y().createElement(ie,{onClick:()=>{e.notification.clear(),t()},className:"no-print"},"Done"))}})||m;const B=j.ZP.div.withConfig({displayName:"View__Actions",componentId:"sc-1545cz5-0"})(["padding:"," ",";@media print{display:none;}"],(({theme:e})=>e.spacing.s),(({theme:e})=>e.spacing.m)),$=(0,j.ZP)(A.Z).withConfig({displayName:"View__ActionButton",componentId:"sc-1545cz5-1"})(["max-height:24px;"]),H=(0,j.ZP)(_.Z).withConfig({displayName:"View__ActionGroup",componentId:"sc-1545cz5-2"})(["flex-wrap:wrap;gap:",";@media (max-width:","px){button + button{margin-left:",";}& > *{font-size:0.7rem !important;line-height:0.7rem;}}"],(({theme:e})=>e.spacing.xs),(({theme:e})=>e.breakpoints.s),(({theme:e})=>e.spacing.s)),K=(0,j.ZP)(N.Z).withConfig({displayName:"View__CopyButton",componentId:"sc-1545cz5-3"})(["max-height:25px;"]),Y=(0,j.ZP)(R.Z).withConfig({displayName:"View__Code",componentId:"sc-1545cz5-4"})(['font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;']),X=(0,j.ZP)(k.Z).withConfig({displayName:"View__CodePanel",componentId:"sc-1545cz5-5"})(["width:80%;min-width:380px;margin:0 auto;@media (max-width:","px){min-width:300px;}"],(({theme:e})=>e.breakpoints.s)),J=j.ZP.div.withConfig({displayName:"View__CodeSkeleton",componentId:"sc-1545cz5-6"})(["height:30px;line-height:30px;overflow:hidden;text-align:center;width:50%;@media (max-width:","px){font-size:0.8rem;height:25px;line-height:normal;padding:4px ",";}"],(({theme:e})=>e.breakpoints.s),(({theme:e})=>e.spacing.s)),Q=j.ZP.div.withConfig({displayName:"View__FlexContainer",componentId:"sc-1545cz5-7"})(["align-items:center;display:flex;flex-direction:column;@media (max-width:","px){h1,h2{text-align:center;}h1{font-size:1.1rem;margin:8px 0 0;}h2{font-size:0.8rem;line-height:normal;margin-top:0;}.recovery-code-header{margin-bottom:",";}.notification{margin:0;padding:8px 16px;}}"],(({theme:e})=>e.breakpoints.s),(({theme:e})=>e.spacing.s)),ee=j.ZP.div.withConfig({displayName:"View__Links",componentId:"sc-1545cz5-8"})(["margin-top:",";text-align:center;width:100%;"],(({theme:e})=>e.spacing.xs)),te=j.ZP.div.withConfig({displayName:"View__NotificationContainer",componentId:"sc-1545cz5-9"})(["height:50px;margin-top:",";"],(({theme:e})=>e.spacing.s)),re=(0,j.ZP)(_.Z).withConfig({displayName:"View__PaddedFlex",componentId:"sc-1545cz5-10"})(["padding:",";@media (max-width:","px){padding:5px;}"],(({theme:e})=>e.spacing.s),(({theme:e})=>e.breakpoints.s)),ne=(0,j.ZP)(z.Z).withConfig({displayName:"View__PrintOnlyLogo",componentId:"sc-1545cz5-11"})(["display:none;@media print{display:inline;}"]),ie=(0,j.ZP)(F.KM).withConfig({displayName:"View__SpacedButton",componentId:"sc-1545cz5-12"})(["margin:"," 0 0;text-align:center;@media (max-width:","px){margin:"," 0 0;}"],(({theme:e})=>e.spacing.l),(({theme:e})=>e.breakpoints.s),(({theme:e})=>e.spacing.m));var oe,ae,se,le,ce,pe,ue,de,me,he=W;function ye(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const ge="sms",be="totp",fe={LOADING:Symbol("Loading"),TOTP:Symbol("2FA Setup: TOTP"),SMS:Symbol("2FA Setup: SMS"),RECOVERY_CODES:Symbol("2FA: Recovery Codes")};oe=(0,b._V)("features/2fa/setup",{initialState:fe.LOADING}),ae=(0,f.RR)("features/2fa/api","features/context/client","features/context/request","features/notification","navigator"),se=(0,E.UO)({flow:"AccountSettings"}),le=g.aD.bound,ce=g.aD.bound,pe=g.aD.bound,ue=g.aD.bound,oe(de=ae(de=se((ye((me=class{constructor(e,t,r,n,i){this.api=e,this.client=t,this.request=r,this.nav=i,this.notification=n}onEnter(){switch(this.api.enabled?this.api.method:be){case ge:return this.transition(fe.SMS);case be:return this.transition(fe.TOTP)}}handleShowTOTP(){this.transition(fe.TOTP)}handleShowSMS(){this.transition(fe.SMS)}handleSetupComplete(){this.transition(fe.RECOVERY_CODES),this.notification.notify("Two-Factor Authentication has been enabled for your account","success")}onTransition(){this.notification.clear()}}).prototype,"onEnter",[le],Object.getOwnPropertyDescriptor(me.prototype,"onEnter"),me.prototype),ye(me.prototype,"handleShowTOTP",[ce],Object.getOwnPropertyDescriptor(me.prototype,"handleShowTOTP"),me.prototype),ye(me.prototype,"handleShowSMS",[pe],Object.getOwnPropertyDescriptor(me.prototype,"handleShowSMS"),me.prototype),ye(me.prototype,"handleSetupComplete",[ue],Object.getOwnPropertyDescriptor(me.prototype,"handleSetupComplete"),me.prototype),de=me))||de)||de);var Ee,ve,Oe,we,Se,De,Ie,Ce;function Te(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Pe=(0,x.kg)("features:2fa"),Ae={LOADING:Symbol("Loading")};Ee=(0,b._V)("features/2fa/setup/totp",{initialState:Ae.LOADING}),ve=(0,f.RR)("features/2fa/api","features/analytics","features/http"),Oe=g.aD.bound,we=g.aD.bound,Se=g.aD.bound,Ee(De=ve((Ce=Te((Ie=class{constructor(e,t,r){var n,i,o,a;n=this,i="settings",a=this,(o=Ce)&&Object.defineProperty(n,i,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(a):void 0}),this.analytics=t,this.api=e,this.http=r}async onInit({props:e}){this.notifyError=e.onError||(()=>{}),this.notifySuccess=e.onSuccess||(()=>{})}async onEnter(){try{this.settings=await this.http.post("/auth-api/2fa/totp/settings",{errorKey:"global"}).then((e=>I()(e,"data.settings"))),Pe("TOTP settings: %O",(0,g.ZN)(this.settings))}catch(e){Pe("Failed to get TOTP settings: %s",e.message),this.notifyError(e)}}async handleSuccess(e){try{this.analytics.track(E.zW.TWO_FACTOR_SETUP,E.p$.SUCCEEDED,{"2faType":"TOTP"}),this.api.updateSettings(e),Pe("Successfully setup TOTP"),this.notifySuccess()}catch(e){this.notifyError(e)}}}).prototype,"settings",[g.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Te(Ie.prototype,"onInit",[Oe],Object.getOwnPropertyDescriptor(Ie.prototype,"onInit"),Ie.prototype),Te(Ie.prototype,"onEnter",[we],Object.getOwnPropertyDescriptor(Ie.prototype,"onEnter"),Ie.prototype),Te(Ie.prototype,"handleSuccess",[Se],Object.getOwnPropertyDescriptor(Ie.prototype,"handleSuccess"),Ie.prototype),De=Ie))||De);var _e,Ne,Re,ke,ze,je,xe=r(32827);function Le(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Me=(0,x.kg)("features:2fa");_e=(0,L.oe)("features/2fa/setup/totp/form"),Ne=(0,xe.RR)("features/analytics","features/http"),Re=g.aD.bound,ke=g.aD.bound,_e(ze=Ne((Le((je=class{constructor(e,t){this.analytics=e,this.http=t}async onInit({props:e}){this.notifyError=e.onError||(()=>{}),this.notifySuccess=e.onSuccess||(()=>{})}async verify(e,t){Me("Verification clicked: %O",t),this.analytics.track(E.zW.TWO_FACTOR_SETUP,E.p$.SUBMITTED,{"2faType":"TOTP"});try{const r=I()(e,"transactionId"),n=I()(t,"verificationCode"),i=await this.http.post("/auth-api/2fa/settings/enable",{data:{transactionId:r,code:n},errorKey:"verificationCode"}).then((e=>I()(e,"data",{})));Me("Verification successful: %O",i),this.notifySuccess(i)}catch(e){Me("Verification failed: %s",e.message),this.analytics.track(E.zW.TWO_FACTOR_SETUP,E.p$.FAILED,{"2faType":"TOTP"}),this.notifyError(e)}}}).prototype,"onInit",[Re],Object.getOwnPropertyDescriptor(je.prototype,"onInit"),je.prototype),Le(je.prototype,"verify",[ke],Object.getOwnPropertyDescriptor(je.prototype,"verify"),je.prototype),ze=je))||ze);var Fe,Ze=r(39561),Ue=r(36638),Ve=r(29515),Ge=r(59407),qe=r(41899),We=r(44527);let Be=(0,L.ei)("features/2fa/setup/totp/form")(Fe=class extends y().Component{render(){const{store:e,settings:t}=this.props;return y().createElement(Je,null,y().createElement(w.X6,{align:"center",className:"totp-form-header",heading:"Configure Two-Factor Authentication",subheading:"When 2FA is configured, you will need to enter a verification code as well as your password to sign into InVision"}),y().createElement(We.l0,{"data-component":"2fa-totp-form",submit:r=>e.verify(t,r)},y().createElement($e,{size:"larger",order:"ordered",items:[y().createElement(y().Fragment,{key:"totp-1"},y().createElement(R.Z,{element:"h3",order:"subtitle"},"Go to your authentication app of choice"),y().createElement(R.Z,{element:"p",order:"body",prose:!0},"Download an authentication app such as"," ",y().createElement(P.Z,{role:"link",href:"https://authy.com/download/"},"Authy"),","," ",y().createElement(P.Z,{role:"link",href:"https://support.google.com/accounts/answer/1066447"},"Google Authenticator"),","," ",y().createElement(P.Z,{role:"link",href:"https://www.microsoft.com/en-us/account/authenticator#getapp"},"Windows Authenticator"),","," ","or any TOTP authentication app.")),y().createElement(y().Fragment,{key:"totp-2"},y().createElement(R.Z,{element:"h3",order:"subtitle"},"Scan this barcode"),y().createElement(Ke,{spacing:"m"},t.dataUrl?y().createElement(Ye,{src:t.dataUrl,width:"185",height:"185",alt:"QR Code"}):y().createElement(Xe,null,y().createElement(C.Z,{height:185,ratio:1})),y().createElement(R.Z,{order:"body",prose:!0},y().createElement("p",null,"Open your authentication app and scan the barcode ",y().createElement("br",null)," to the left."),y().createElement("p",null,"If you can't scan this code, enter this key into your authenticator app."),y().createElement(He,null,y().createElement(C.Z,{height:20},t.secret))))),y().createElement(y().Fragment,{key:"totp-3"},y().createElement(R.Z,{element:"h3",order:"subtitle"},"Enter your verification code"),y().createElement(R.Z,{element:"p",order:"body",prose:!0},"Once you scan the barcode, enter the 6 digit code below."),y().createElement(Ge.HK,{requestKey:"verificationCode"}),y().createElement(qe.xv,{name:"verificationCode","data-component":"verification-code"}))]}),y().createElement(qe.k4,{"data-component":"primary-button"},"Verify")))}})||Fe;const $e=(0,j.ZP)(Ze.Z).withConfig({displayName:"Form__SectionList",componentId:"sc-1h5yi8s-0"})(["padding-left:0px;margin:"," 0;li{font-weight:bold;margin:"," 0;}"],(({theme:e})=>e.spacing.xl),(({theme:e})=>e.spacing.xl)),He=(0,j.ZP)(Ue.Z).withConfig({displayName:"Form__AuthCode",componentId:"sc-1h5yi8s-1"})(["border:1px solid ",";padding:"," ",';font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;min-width:168px;@media (max-width:',"px){margin-top:",";padding:2px 0;text-align:center;}"],(({theme:e})=>e.palette.structure.darker),(({theme:e})=>e.spacing.xs),(({theme:e})=>e.spacing.s),(({theme:e})=>e.breakpoints.s),(({theme:e})=>e.spacing.s)),Ke=(0,j.ZP)(Ve.Z).withConfig({displayName:"Form__CodeContainer",componentId:"sc-1h5yi8s-2"})(["@media (max-width:","px){p{font-size:0.8rem;& + p{margin-top:4px;}}}"],(({theme:e})=>e.breakpoints.s)),Ye=j.ZP.img.withConfig({displayName:"Form__QRCode",componentId:"sc-1h5yi8s-3"})(["border:1px solid ",";@media (max-width:","px){height:120px;margin-right:",";min-width:120px;width:120px;}"],(({theme:e})=>e.palette.structure.darker),(({theme:e})=>e.breakpoints.s),(({theme:e})=>e.spacing.s)),Xe=j.ZP.div.withConfig({displayName:"Form__QRLoader",componentId:"sc-1h5yi8s-4"})(["border:1px solid ",";min-width:185px;@media (max-width:","px){min-width:120px;}"],(({theme:e})=>e.palette.structure.darker),(({theme:e})=>e.breakpoints.s)),Je=j.ZP.div.withConfig({displayName:"Form__FormContainer",componentId:"sc-1h5yi8s-5"})(["@media (max-width:","px){margin-bottom:",";padding-top:",";h1{font-size:1.1rem;margin-bottom:0;}h2{font-size:0.8rem;line-height:normal;}p,h3{font-size:0.8rem;line-height:normal;margin:0;}ol{margin:0 0 "," 20px !important;li{margin:"," 0 !important;h3{margin-bottom:4px;}input{margin-top:",";}}}.totp-form-header{margin:0;text-align:center;}}"],(({theme:e})=>e.breakpoints.s),(({theme:e})=>e.spacing.m),(({theme:e})=>e.spacing.s),(({theme:e})=>e.spacing.s),(({theme:e})=>e.spacing.s),(({theme:e})=>e.spacing.s));var Qe,et=Be;var tt,rt,nt,it,ot,at,st=(0,b.ls)("features/2fa/setup/totp")(Qe=class extends y().Component{render(){const{store:e,onError:t,onSMS:r}=this.props;return y().createElement(y().Fragment,null,y().createElement(et,{settings:e.settings,onError:t,onSuccess:e.handleSuccess}),y().createElement(w.$_.VY,null,y().createElement(R.Z,{order:"body"},"Don't have a smartphone?"," ",y().createElement(P.Z,{key:"setup-sms",role:"link",element:"a",onClick:r},"Use an SMS text message to setup 2FA"))))}})||Qe;function lt(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const ct=(0,x.kg)("features:2fa"),pt={LOADING:Symbol("Loading")};tt=(0,b._V)("features/2fa/setup/sms",{initialState:pt.LOADING}),rt=(0,f.RR)("features/2fa/api","features/analytics","features/http"),nt=g.aD.bound,it=g.aD.bound,tt(ot=rt((lt((at=class{constructor(e,t,r){this.analytics=t,this.api=e,this.http=r}async onInit({props:e}){this.notifyError=e.onError||(()=>{}),this.notifySuccess=e.onSuccess||(()=>{})}async handleSuccess(e){try{this.analytics.track(E.zW.TWO_FACTOR_SETUP,E.p$.SUCCEEDED,{"2faType":"SMS"}),this.api.updateSettings(e),ct("Successfully setup SMS"),this.notifySuccess()}catch(e){this.notifyError(e)}}}).prototype,"onInit",[nt],Object.getOwnPropertyDescriptor(at.prototype,"onInit"),at.prototype),lt(at.prototype,"handleSuccess",[it],Object.getOwnPropertyDescriptor(at.prototype,"handleSuccess"),at.prototype),ot=at))||ot);var ut,dt,mt,ht,yt,gt,bt,ft,Et,vt;function Ot(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function wt(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const St=(0,x.kg)("features:2fa");ut=(0,L.oe)("features/2fa/setup/sms/form"),dt=(0,xe.RR)("features/analytics","features/http"),mt=g.aD.bound,ht=g.aD.bound,yt=g.aD.bound,gt=g.aD.bound,ut(bt=dt((Et=wt((ft=class{constructor(e,t){Ot(this,"settings",Et,this),Ot(this,"showVerify",vt,this),this.analytics=e,this.http=t}get transactionId(){return I()(this.settings,"transactionId","")}async onInit({props:e}){this.notifyError=e.onError||(()=>{}),this.notifySuccess=e.onSuccess||(()=>{})}async submit(e){const{number:t,region:r}=e;try{const e=await this.http.post("/auth-api/2fa/sms/settings",{data:{number:t,region:r},errorKey:"phoneNumber"}).then((e=>I()(e,"data.settings")));this.analytics.track(E.zW.TWO_FACTOR_SETUP,"SMSRequested",{countryCode:r}),this.settings=Object.assign({},e,{number:t,region:r}),St("SMS settings: %O",this.settings),(0,g.z)((()=>{this.showVerify=!0}))}catch(e){St("Failed to post SMS settings: %s",e.message),this.notifyError(e)}}async verify(e){St("Verification clicked: %O",e),this.analytics.track(E.zW.TWO_FACTOR_SETUP,E.p$.SUBMITTED,{"2faType":"SMS"});try{const t=this.transactionId,r=I()(e,"verificationCode"),n=await this.http.post("/auth-api/2fa/settings/enable",{data:{transactionId:t,code:r},errorKey:"verificationCode"}).then((e=>I()(e,"data",{})));St("Verification successful: %O",n),this.notifySuccess(n)}catch(e){St("Verification failed: %s",e.message),this.analytics.track(E.zW.TWO_FACTOR_SETUP,E.p$.FAILED,{"2faType":"SMS"}),this.notifyError(e)}}async handleResendCode(){const{number:e,region:t}=this.settings;await this.submit({number:e,region:t})}}).prototype,"settings",[g.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),vt=wt(ft.prototype,"showVerify",[g.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),wt(ft.prototype,"transactionId",[g.Fl],Object.getOwnPropertyDescriptor(ft.prototype,"transactionId"),ft.prototype),wt(ft.prototype,"onInit",[mt],Object.getOwnPropertyDescriptor(ft.prototype,"onInit"),ft.prototype),wt(ft.prototype,"submit",[ht],Object.getOwnPropertyDescriptor(ft.prototype,"submit"),ft.prototype),wt(ft.prototype,"verify",[yt],Object.getOwnPropertyDescriptor(ft.prototype,"verify"),ft.prototype),wt(ft.prototype,"handleResendCode",[gt],Object.getOwnPropertyDescriptor(ft.prototype,"handleResendCode"),ft.prototype),bt=ft))||bt);var Dt,It,Ct,Tt,Pt,At=r(88692),_t=r(48743),Nt=r(20314);let Rt=(Dt=(0,f.f3)("features/notification","features/context/client"),It=(0,L.ei)("features/2fa/setup/sms/form"),Ct=g.aD.bound,Dt(Tt=It((function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((Pt=class extends y().Component{get notification(){return this.props["features/notification"]}validator(e=new Map){const t=e.get("phone");if(!I()(t,"isValid",!1))return[Nt.Vu]}render(){const{"features/context/client":e,store:t}=this.props;return y().createElement(kt,null,y().createElement(w.X6,{align:"center",className:"sms-form-header",heading:"Configure Two-Factor Authentication",subheading:"When 2FA is configured, you will need to enter a verification code as well as your password to sign into InVision"}),y().createElement(We.l0,{"data-component":"2fa-sms-form",submit:t.showVerify?e=>t.verify(e):e=>{const{number:r,region:n}=I()(e,"phone",{});t.submit({number:r,region:n})}},y().createElement(R.Z,{element:"h3",order:"subtitle"},"Add your phone number and we'll text you a verification code"),y().createElement(Ge.HK,{requestKey:"phoneNumber"}),y().createElement(R.Z,{order:"body"},y().createElement(qe.LP,{name:"phone",autoFocus:!0,validator:{fn:this.validator}})),t.showVerify?y().createElement(y().Fragment,null,!e.isEmbedded&&y().createElement(At.Z,{status:"success",placement:"top-center"},"We just sent a verification code to the number you provided"),y().createElement(_t.Z,{speed:"medium",order:"simple-fade-in"},y().createElement(zt,null,y().createElement(R.Z,{element:"h3",order:"subtitle"},"Enter the verification code we just sent you"),y().createElement(Ge.HK,{requestKey:"verificationCode"}),y().createElement(qe.xv,{name:"verificationCode","data-component":"verification-code",autoFocus:!0,helper:y().createElement(R.Z,null,"Make sure to keep this window open while you check your phone."," ",y().createElement(P.Z,{element:"a",onClick:t.handleResendCode},"Resend code"))})))):null,y().createElement(qe.k4,{"data-component":"primary-button"},t.showVerify?"Enable 2FA":"Continue")))}}).prototype,"validator",[Ct],Object.getOwnPropertyDescriptor(Pt.prototype,"validator"),Pt.prototype),Tt=Pt))||Tt)||Tt);const kt=j.ZP.div.withConfig({displayName:"Form__FormContainer",componentId:"sc-145dchy-0"})(["position:relative;top:-",";@media (max-width:","px){padding-top:",";h1{font-size:1.1rem;}h2{font-size:0.8rem;line-height:normal;}h3{font-size:0.8rem !important;line-height:normal;margin:0 0 ",";}.sms-form-header{margin:0;text-align:center;}}"],(({theme:e})=>e.spacing.s),(({theme:e})=>e.breakpoints.s),(({theme:e})=>e.spacing.m),(({theme:e})=>e.spacing.s)),zt=j.ZP.div.withConfig({displayName:"Form__VerificationContainer",componentId:"sc-145dchy-1"})(["padding-top:",";@media (max-width:","px){padding-top:0;}"],(({theme:e})=>e.spacing.xl),(({theme:e})=>e.breakpoints.s));var jt,xt=Rt;var Lt,Mt=(0,b.ls)("features/2fa/setup/sms")(jt=class extends y().Component{render(){const{store:e,onError:t,onTOTP:r}=this.props;return y().createElement(y().Fragment,null,y().createElement(xt,{onError:t,onSuccess:e.handleSuccess}),y().createElement(w.$_.VY,null,y().createElement(R.Z,{order:"body"},"Can't receive text messages?"," ",y().createElement(P.Z,{key:"setup-totp",role:"link",element:"a",onClick:r},"Use an authentication app"))))}})||jt;var Ft,Zt,Ut,Vt,Gt,qt,Wt,Bt=(0,b.ls)("features/2fa/setup")(Lt=class extends y().Component{render(){const{back:e,store:t,onError:r,onSuccess:n}=this.props;return{[fe.TOTP]:y().createElement(st,{onError:r,onSuccess:t.handleSetupComplete,onSMS:t.handleShowSMS}),[fe.SMS]:y().createElement(y().Fragment,null,y().createElement(v.h4.eJ,{onClick:e||t.showTOTP}),y().createElement(Mt,{onError:r,onSuccess:t.handleSetupComplete,onTOTP:t.handleShowTOTP})),[fe.RECOVERY_CODES]:y().createElement(y().Fragment,null,!t.client.isEmbedded&&y().createElement(w.FN.V,{status:"success"},"Two-Factor Authentication has been enabled for your account"),y().createElement(he,{onError:r,onDone:n}))}[t.state]||y().createElement(w.gb,null)}})||Lt,$t=r(50650),Ht=r(81772),Kt=r(50902),Yt=r(97653),Xt=r(76539),Jt=r(90660);function Qt(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Ft=(0,L.oe)("features/2fa/settings/view"),Zt=(0,f.RR)("features/2fa/api","features/context/team"),Ut=g.aD.bound,Vt=g.aD.bound,Ft(Gt=Zt((Qt((qt=class{constructor(e,t){this.api=e,this.team=t}get current(){return this.api.teams.find((e=>e.team_id===I()(this.team,"id")))}get enabled(){return this.api.enabled}get method(){return this.api.method}get required(){return this.api.required}get smsNumber(){return I()(this.api,"settings.smsNumber","")}async onInit({props:e}){this.onError=e.onError||(()=>{})}async toggle(e){try{return e?await this.api.enable():await this.api.disable(),e}catch(e){this.onError(e)}}}).prototype,"current",[g.Fl],Object.getOwnPropertyDescriptor(qt.prototype,"current"),qt.prototype),Qt(qt.prototype,"enabled",[g.Fl],Object.getOwnPropertyDescriptor(qt.prototype,"enabled"),qt.prototype),Qt(qt.prototype,"method",[g.Fl],Object.getOwnPropertyDescriptor(qt.prototype,"method"),qt.prototype),Qt(qt.prototype,"required",[g.Fl],Object.getOwnPropertyDescriptor(qt.prototype,"required"),qt.prototype),Qt(qt.prototype,"smsNumber",[g.Fl],Object.getOwnPropertyDescriptor(qt.prototype,"smsNumber"),qt.prototype),Qt(qt.prototype,"onInit",[Ut],Object.getOwnPropertyDescriptor(qt.prototype,"onInit"),qt.prototype),Qt(qt.prototype,"toggle",[Vt],Object.getOwnPropertyDescriptor(qt.prototype,"toggle"),qt.prototype),Gt=qt))||Gt);let er=(0,L.ei)("features/2fa/settings/view")(Wt=class extends y().Component{alert(e,t){return e?t?y().createElement(Jt.un,{permissionName:"Team.ChangeEnterpriseSettings",rejected:"You cannot disable 2FA for your account because your team requires it"},"To turn off 2FA for your account you must first"," ",y().createElement(P.Z,{element:"a",role:"link",onClick:this.props.onDisableForTeam},"disable it for your team")):"You cannot disable 2FA because another team you belong to requires it":"If disabled, you will need to set up your verification method to re-enable it"}render(){const{store:e,onSuccess:t,onToggle:r,onUpdateMethod:n,onViewCodes:i}=this.props;return y().createElement(y().Fragment,null,y().createElement(w.X6,{align:"center",heading:"Two-Factor Authentication"}),y().createElement(We.l0,{"data-component":"2fa-settings",submit:()=>t()},y().createElement(Ht.Z,{vertical:"m"},y().createElement(Kt.Z,{status:"info"},this.alert(e.required,e.current)),y().createElement(y().Fragment,null,y().createElement(T.Z,{spacing:"s"}),y().createElement(Yt.Z,{horizontal:"l"},y().createElement(Xt.Z,{id:"2fa-toggle","data-component":"2fa-enabled","data-checked":e.enabled,checked:e.enabled,onChange:t=>e.toggle(t).then(r),disabled:e.required},y().createElement(tr,{order:"body"},"Require Two-Factor Authentication"))),y().createElement(T.Z,{spacing:"s"})),y().createElement(w.Zr.Z,{"data-component":"2fa-settings-update",title:"Authentication method",subtitle:"sms"===e.method?`Receive a text message at ${e.smsNumber}`:"Receive your codes from an authentication app",action:"Update",onClick:()=>n()}),y().createElement(w.Zr.Z,{title:"Recovery codes",subtitle:"Save these codes to sign in without your phone",action:"View",onClick:()=>i()}),y().createElement(qe.k4,{"data-component":"primary-button"},"Close"))))}})||Wt;const tr=(0,j.ZP)(R.Z).withConfig({displayName:"View__ToggleText",componentId:"sc-1kg126e-0"})(["font-weight:bold;"]);var rr,nr,ir,or,ar,sr,lr,cr,pr,ur,dr,mr,hr,yr,gr,br=er,fr=r(9282);function Er(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const vr="2FA-Settings: Disable for team",Or="2FA-Settings: View",wr="2FA-Settings: Recovery codes",Sr="2FA-Settings: Update method";rr=(0,b._V)("features/2fa/settings",{initialState:Or}),nr=(0,f.RR)("features/2fa/api","features/analytics","features/context/request","features/context/team","navigator"),ir=(0,E.UO)({flow:"AccountSettings"}),or=g.aD.bound,ar=g.aD.bound,sr=g.aD.bound,lr=g.aD.bound,cr=g.aD.bound,pr=g.aD.bound,ur=g.aD.bound,dr=g.aD.bound,mr=g.aD.bound,rr(hr=nr(hr=ir((Er((yr=class{constructor(e,t,r,n,i){this.analytics=t,this.api=e,this.request=r,this.team=n,this.nav=i}onInit({props:e}){this.notifyError=e.onError||(()=>{}),this.notifySuccess=e.onSuccess||(()=>{})}onEnter(){switch(this.request.get("action")){case"view.codes":return this.transition(wr)}}async closeSettings(){return{query:{}}}async toggleSettings(e){if(e)throw new Error("Unexpected toggle state");return{query:{action:"2FA_DISABLED"}}}handleDisableForTeam(){this.transition(vr)}handleViewSettings(){this.transition(Or)}handleViewCodes(){this.analytics.track(E.zW.TWO_FACTOR_SETTINGS,"ViewCodesSelected"),this.transition(wr)}handleUpdateMethod(){this.analytics.track(E.zW.TWO_FACTOR_SETTINGS,"UpdateAuthSelected"),this.transition(Sr)}async handleReloadSettings(){try{await this.api.load(),this.transition(Or)}catch(e){this.notifyError(e)}}}).prototype,"onInit",[or],Object.getOwnPropertyDescriptor(yr.prototype,"onInit"),yr.prototype),Er(yr.prototype,"onEnter",[ar],Object.getOwnPropertyDescriptor(yr.prototype,"onEnter"),yr.prototype),Er(yr.prototype,"closeSettings",[sr],Object.getOwnPropertyDescriptor(yr.prototype,"closeSettings"),yr.prototype),Er(yr.prototype,"toggleSettings",[lr],Object.getOwnPropertyDescriptor(yr.prototype,"toggleSettings"),yr.prototype),Er(yr.prototype,"handleDisableForTeam",[cr],Object.getOwnPropertyDescriptor(yr.prototype,"handleDisableForTeam"),yr.prototype),Er(yr.prototype,"handleViewSettings",[pr],Object.getOwnPropertyDescriptor(yr.prototype,"handleViewSettings"),yr.prototype),Er(yr.prototype,"handleViewCodes",[ur],Object.getOwnPropertyDescriptor(yr.prototype,"handleViewCodes"),yr.prototype),Er(yr.prototype,"handleUpdateMethod",[dr],Object.getOwnPropertyDescriptor(yr.prototype,"handleUpdateMethod"),yr.prototype),Er(yr.prototype,"handleReloadSettings",[mr],Object.getOwnPropertyDescriptor(yr.prototype,"handleReloadSettings"),yr.prototype),hr=yr))||hr)||hr);var Dr,Ir,Cr,Tr,Pr,Ar,_r,Nr,Rr=(0,b.ls)("features/2fa/settings")(gr=class extends y().Component{render(){const{store:e,onClose:t,onError:r}=this.props;return{[vr]:y().createElement(fr.Z,{onDone:e.handleReloadSettings}),[Or]:y().createElement($t.Z,{stores:[e.team],loading:y().createElement(w.gb,null)},y().createElement(br,{onDisableForTeam:e.handleDisableForTeam,onError:r,onSuccess:t,onToggle:r=>e.toggleSettings(r).then(t),onUpdateMethod:e.handleUpdateMethod,onViewCodes:e.handleViewCodes})),[Sr]:y().createElement(Bt,{back:()=>e.handleViewSettings(),onError:r,onSuccess:e.handleViewSettings,animate:!0}),[wr]:y().createElement(y().Fragment,null,y().createElement(v.h4.eJ,{onClick:e.handleViewSettings}),y().createElement(he,{onDone:e.handleViewSettings}))}[e.state]||null}})||gr;function kr(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const zr={ELEVATE_SESSION:Symbol("Session elevate"),ERROR:Symbol("Error"),SETTINGS:Symbol("Settings"),SETUP:Symbol("Setup")};Dr=(0,b._V)("features/2fa",{initialState:zr.ELEVATE_SESSION}),Ir=(0,f.RR)("navigator","features/context/request","features/2fa/api"),Cr=g.aD.bound,Tr=g.aD.bound,Pr=g.aD.bound,Dr(Ar=Ir((kr((_r=class{constructor(e,t,r){this.nav=e,this.request=t,this.api=r}async handleError(e){var t,r;(null==e||null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.errorCode)===O.SM.CLAIM_ASSERTION&&this.transition(zr.ELEVATE_SESSION)}async handleSessionElevated(){try{await this.api.load(),this.api.enabled?this.transition(zr.SETTINGS):this.transition(zr.SETUP)}catch(e){this.transition(zr.ERROR)}}setupSuccess(){this.transition(zr.SETTINGS)}}).prototype,"handleError",[Cr],Object.getOwnPropertyDescriptor(_r.prototype,"handleError"),_r.prototype),kr(_r.prototype,"handleSessionElevated",[Tr],Object.getOwnPropertyDescriptor(_r.prototype,"handleSessionElevated"),_r.prototype),kr(_r.prototype,"setupSuccess",[Pr],Object.getOwnPropertyDescriptor(_r.prototype,"setupSuccess"),_r.prototype),Ar=_r))||Ar);let jr=(0,b.ls)("features/2fa")(Nr=class extends y().Component{render(){const{store:e,onClose:t}=this.props,r=this.props.onSuccess||e.setupSuccess,n={[zr.ELEVATE_SESSION]:y().createElement(S.Z,{intent:O.Qv.Intentions.Update2FA,scopes:[O.Qv.Scopes.Update2FA],onSuccess:e.handleSessionElevated}),[zr.ERROR]:y().createElement(w.ox,null),[zr.SETTINGS]:y().createElement(Rr,{onClose:t,onError:e.handleError,animate:!0}),[zr.SETUP]:y().createElement(Bt,{onSuccess:r,onError:e.handleError,animate:!0})}[e.state]||y().createElement(w.gb,null);return y().createElement(y().Fragment,null,y().createElement(w.FN.A,{"data-component":"2fa-toast"}),n)}})||Nr;var xr,Lr,Mr,Fr,Zr,Ur,Vr,Gr,qr=e=>y().createElement(jr,e);function Wr(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Br={INIT:Symbol("Email Update: Initialized")};xr=(0,b._V)("features/2fa/layout",{initialState:Br.INIT}),Lr=(0,f.RR)("features/context/request","navigator"),Mr=(0,E.UO)({flow:"AccountSettings"}),Fr=g.aD.bound,Zr=g.aD.bound,xr(Ur=Lr(Ur=Mr((Wr((Vr=class{constructor(e,t){this.request=e,this.navigator=t}onInit(){this.redirectTo=this.request.get("originURL")||this.request.referrer||"/auth/sign-in"}handleClose(e){this.navigator.goTo(this.redirectTo,e)}}).prototype,"onInit",[Fr],Object.getOwnPropertyDescriptor(Vr.prototype,"onInit"),Vr.prototype),Wr(Vr.prototype,"handleClose",[Zr],Object.getOwnPropertyDescriptor(Vr.prototype,"handleClose"),Vr.prototype),Ur=Vr))||Ur)||Ur);var $r=(0,b.ls)("features/2fa/layout")(Gr=class extends y().Component{render(){const{store:e}=this.props;return y().createElement(v.wC.A,{"data-component":"2fa-modal"},y().createElement(v.h4.x8,{onClick:e.handleClose}),y().createElement(qr,{onClose:e.handleClose}))}})||Gr},30730:function(e,t,r){"use strict";r.d(t,{u:function(){return D}});var n,i,o,a,s,l,c=r(16624),p=r.n(c),u=r(64267),d=r(5260),m=r(59549),h=r(47714),y=r(5013),g=r(90660),b=r(9282);n=(0,d._V)("features/2fa/team/modal"),i=(0,m.RR)("navigator","features/context/request"),o=u.aD.bound,n(a=i((f=(s=class{constructor(e,t){this.nav=e,this.request=t}handleClose(e){const t=this.request.get("originURL")||"/";e?this.nav.goTo(t,e):this.nav.goTo(t)}}).prototype,E="handleClose",v=[o],O=Object.getOwnPropertyDescriptor(s.prototype,"handleClose"),w=s.prototype,S={},Object.keys(O).forEach((function(e){S[e]=O[e]})),S.enumerable=!!S.enumerable,S.configurable=!!S.configurable,("value"in S||S.initializer)&&(S.writable=!0),S=v.slice().reverse().reduce((function(e,t){return t(f,E,e)||e}),S),w&&void 0!==S.initializer&&(S.value=S.initializer?S.initializer.call(w):void 0,S.initializer=void 0),void 0===S.initializer&&(Object.defineProperty(f,E,S),S=null),a=s))||a);var f,E,v,O,w,S;var D=(0,d.ls)("features/2fa/team/modal")(l=class extends p().Component{render(){const{store:e}=this.props;return p().createElement(g.U_,null,p().createElement(y.FN.A,{"data-component":"2fa-toast"}),p().createElement(h.OW.Ar,{"data-component":"2fa-modal"},p().createElement(h.OW.x8,{onClick:e.handleClose}),p().createElement(b.Z,{onDone:e.handleClose,animate:!0}),p().createElement(y.$_.Ar,{"data-component":"2fa-footer"})))}})||l},9282:function(e,t,r){"use strict";r.d(t,{Z:function(){return ee}});var n,i,o,a,s,l,c,p,u=r(16624),d=r.n(u),m=r(20643),h=r.n(m),y=r(64267),g=r(6895),b=r(59549),f=r(5260),E=r(5013),v=r(90660),O=r(28511),w=r(64060),S=r(81772),D=r(50902),I=r(59953),C=r(41779),T=r(97653),P=r(76539),A=r(25817),_=r(87860),N=r(88104),R=r(41899),k=r(44527);function z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n=(0,N.oe)("features/2fa/team/settings/view"),i=(0,b.RR)("features/analytics"),o=y.aD.bound,a=y.aD.bound,n(s=i((c=z((l=class{constructor(e){var t,r,n,i;t=this,r="enabled",i=this,(n=c)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0}),this.analytics=e}async viewed(){this.analytics.track(O.zW.TWO_FACTOR_SETTINGS,O.p$.VIEWED)}toggle(e){void 0!==e&&(this.enabled=e)}}).prototype,"enabled",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z(l.prototype,"viewed",[o],Object.getOwnPropertyDescriptor(l.prototype,"viewed"),l.prototype),z(l.prototype,"toggle",[a],Object.getOwnPropertyDescriptor(l.prototype,"toggle"),l.prototype),s=l))||s);let j=(0,N.ei)("features/2fa/team/settings/view")(p=class extends d().Component{constructor(e){super(e);const{enabled:t,store:r}=e;r.enabled=t}componentDidMount(){this.props.store.viewed()}render(){const{enabled:e,userEnabled:t,store:r,onSetup:n,onUpdate:i}=this.props;return d().createElement(d().Fragment,null,d().createElement(E.X6,{heading:"Two-Factor Authentication",subheading:"When enabled, all users will be required to sign into InVision with 2FA",align:"center"}),d().createElement(k.l0,{"data-component":"2fa-team-settings",submit:()=>i(r.enabled),disabled:()=>!t||r.enabled===e},d().createElement(S.Z,{vertical:"m"},!t&&d().createElement(D.Z,{status:"info"},"Before enabling 2FA for this team you need to"," ",d().createElement(I.Z,{element:"a",role:"link","data-component":"user-setup",onClick:n},"enable 2FA for your account")),d().createElement(d().Fragment,null,d().createElement(C.Z,{spacing:"s"}),d().createElement(T.Z,{horizontal:"l"},d().createElement(P.Z,{id:"2fa-toggle","data-component":"2fa-required","data-checked":r.enabled,checked:r.enabled,onChange:e=>r.toggle(e),disabled:!t},d().createElement(x,{order:"body"},"Require Two-Factor Authentication for this team"))),d().createElement(C.Z,{spacing:"s"})),d().createElement(R.k4,{"data-component":"primary-button"},"Update"))))}})||p;const x=(0,_.ZP)(A.Z).withConfig({displayName:"View__ToggleText",componentId:"vf0oq-0"})(["font-weight:bold;"]);var L,M,F,Z,U,V,G,q,W,B,$,H,K,Y=j;function X(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const J=(0,r(32837).kg)("features:2fa"),Q={LOADING:"2FA-Team-Settings: Loading",VIEW_SETTINGS:"2FA-Team-Settings: View"};L=(0,f._V)("features/2fa/team/settings",{initialState:Q.LOADING}),M=(0,b.RR)("features/2fa/api","features/analytics","features/http"),F=(0,O.UO)({flow:"TeamSettings"}),Z=y.aD.bound,U=y.aD.bound,V=y.aD.bound,G=y.aD.bound,q=y.aD.bound,W=y.aD.bound,L(B=M(B=F((H=X(($=class{constructor(e,t,r){var n,i,o,a;n=this,i="settings",a=this,(o=H)&&Object.defineProperty(n,i,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(a):void 0}),this.analytics=t,this.http=r,this.userSettingsApi=e}get enabled(){return h()(this.settings,"enabled",!1)}get userEnabled(){return h()(this.userSettingsApi,"enabled",!1)}updateSettings(e={}){this.settings=e}async onEnter(){await this.load(),this.transition(Q.VIEW_SETTINGS)}async needsSetup(){this.transition(Q.NEEDS_SETUP)}async viewSettings(){this.transition(Q.VIEW_SETTINGS)}async update(e){const t=await this.http.post("/auth-api/2fa/team/settings",{data:{enabled:e}}).then((e=>e.data));return this.updateSettings(t),J("Updated: (200) %O",(0,y.ZN)(t)),await this.analytics.track(O.zW.TWO_FACTOR_SETTINGS,O.p$.UPDATED,{status:e?"enabled":"disabled"}),{action:e?"2FA_TEAM_ENABLED":"2FA_TEAM_DISABLED"}}async load(){try{const e=await this.http.get("/auth-api/2fa/team/settings",{errorKey:"global"}).then((e=>e.data));this.updateSettings(e),J("Loaded: (200) %O",(0,y.ZN)(e))}catch(e){J("Load failed: %s",e.message)}}}).prototype,"settings",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),X($.prototype,"enabled",[y.Fl],Object.getOwnPropertyDescriptor($.prototype,"enabled"),$.prototype),X($.prototype,"userEnabled",[y.Fl],Object.getOwnPropertyDescriptor($.prototype,"userEnabled"),$.prototype),X($.prototype,"updateSettings",[Z],Object.getOwnPropertyDescriptor($.prototype,"updateSettings"),$.prototype),X($.prototype,"onEnter",[U],Object.getOwnPropertyDescriptor($.prototype,"onEnter"),$.prototype),X($.prototype,"needsSetup",[V],Object.getOwnPropertyDescriptor($.prototype,"needsSetup"),$.prototype),X($.prototype,"viewSettings",[G],Object.getOwnPropertyDescriptor($.prototype,"viewSettings"),$.prototype),X($.prototype,"update",[q],Object.getOwnPropertyDescriptor($.prototype,"update"),$.prototype),X($.prototype,"load",[W],Object.getOwnPropertyDescriptor($.prototype,"load"),$.prototype),B=$))||B)||B);var ee=(0,f.ls)("features/2fa/team/settings")(K=class extends d().Component{render(){const{store:e,onDone:t=(()=>{})}=this.props,r=e=>t({query:e});return{[Q.NEEDS_SETUP]:d().createElement(w.ZP,{onSuccess:()=>e.viewSettings(),animate:!0}),[Q.VIEW_SETTINGS]:d().createElement(v.un,{permissionName:"Team.ChangeEnterpriseSettings",loading:d().createElement(E.gb,null),rejected:d().createElement(g.Z,{action:()=>t({query:{action:"2FA_TEAM_SETTINGS_UNAUTHORIZED"}})},d().createElement(E.gb,null))},d().createElement(v.ur,{stores:[e.userSettingsApi],loading:d().createElement(E.gb,null)},d().createElement(Y,{enabled:e.enabled,userEnabled:e.userEnabled,onSetup:()=>e.needsSetup(),onUpdate:t=>e.update(t).then(r),animate:!0})))}[e.state]||d().createElement(E.gb,null)}})||K},4477:function(e,t,r){"use strict";var n=r(16624),i=r.n(n),o=r(87860),a=r(81772),s=r(25817),l=r(63001),c=r.n(l);const p=o.ZP.img.withConfig({displayName:"AndroidBlocker__Toolbox",componentId:"wiwxz-0"})(["width:100vw;max-width:480px;"]),u=(0,o.ZP)(s.Z).withConfig({displayName:"AndroidBlocker__Heading",componentId:"wiwxz-1"})(["margin-top:",";margin-bottom:",";"],(({theme:e})=>e.spacing.l),(({theme:e})=>e.spacing.m));t.Z=()=>i().createElement(i().Fragment,null,i().createElement(p,{src:c()}),i().createElement(a.Z,{horizontal:"m"},i().createElement(u,{order:"title",size:"larger"},"InVision for Android is no longer available"),i().createElement(s.Z,{size:"larger"},i().createElement("p",null,"As of April 28, 2022 the InVision Android app is longer supported or available."),i().createElement("p",null,"Thank you for experiencing InVision using the Android App. Our teams have been collecting feedback and are putting effort toward the future of InVision mobile experiences. We hope to see you there."),"See you at www.invisionapp.com")))},64404:function(e,t,r){"use strict";var n,i,o,a=r(32837),s=r(59549);const l=(0,a.kg)("download");n=(0,s.En)("features/download"),i=(0,s.RR)("features/analytics","features/http","window","document"),n(o=(0,s.H3)(o=i(o=class{constructor(e,t,r,n){this.analytics=e,this.http=t,this.window=r,this.document=n}async file(e,{errorKey:t="global",file:r,event:n}){try{var i;const o=await this.http.get(e,{errorKey:t,headers:{Accept:"text/plain"},responseType:"blob"}),a=null===(i=o.headers)||void 0===i?void 0:i["Content-Disposition"],s=/filename="([^"]*)"/.exec(a),c=null!==s&&s[1]?s[1]:r,p=this.document.createElement("a");p.href=this.window.URL.createObjectURL(o.data),p.setAttribute("download",c),this.document.body.appendChild(p),p.click(),this.window.URL.revokeObjectURL(o.data),l("Download: (200) %O",o),n&&this.analytics.track(n,"Downloaded")}catch(e){l("Download failed: %s",e.message)}}})||o)||o)},50650:function(e,t,r){"use strict";var n=r(43670),i=r.n(n),o=r(7976),a=r.n(o),s=r(16624),l=r.n(s),c=r(58273);class p extends l().PureComponent{constructor(e){super(e);const t=i()(e.stores)?e.stores:[e.stores];this.promises=a()(t,(e=>e.load()))}render(){const{loading:e,rejected:t,children:r}=this.props;return l().createElement(c.Z,{promises:this.promises,loading:e,rejected:t},r)}}t.Z=p},58273:function(e,t,r){"use strict";var n,i,o,a,s=r(43670),l=r.n(s),c=r(33626),p=r.n(c),u=r(16624),d=r.n(u),m=r(64267),h=r(76069),y=r(2202);let g=(0,h.Pi)((a=class extends d().Component{constructor(...e){var t,r,n,i;super(...e),t=this,r="promise",i=this,(n=o)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}componentDidMount(){const{promises:e}=this.props;if(!e)throw new Error("Expected a 'promises' property");this.promise=(0,y.p4)(l()(e)?Promise.all(e):e)}render(){if(!this.promise)return null;const{loading:e=null,rejected:t=null,children:r=null}=this.props,n=e=>()=>p()(e)?e():e;return this.promise.case({pending:()=>n(e)(),rejected:()=>n(t)(),fulfilled:()=>n(r)()})}},b=(i=a).prototype,f="promise",E=[m.LO],v={configurable:!0,enumerable:!0,writable:!0,initializer:null},w={},Object.keys(v).forEach((function(e){w[e]=v[e]})),w.enumerable=!!w.enumerable,w.configurable=!!w.configurable,("value"in w||w.initializer)&&(w.writable=!0),w=E.slice().reverse().reduce((function(e,t){return t(b,f,e)||e}),w),O&&void 0!==w.initializer&&(w.value=w.initializer?w.initializer.call(O):void 0,w.initializer=void 0),void 0===w.initializer&&(Object.defineProperty(b,f,w),w=null),o=w,n=i))||n;var b,f,E,v,O,w;t.Z=g},98021:function(e,t,r){"use strict";r.d(t,{Z:function(){return me}});var n=r(64267),i=r(59549);const o="EMAIL_SENT",a="SIGN_IN";var s=()=>({event:{name:o,version:"1.0.0"}}),l=e=>({event:{name:a,version:"1.0.0"},redirect:e,shouldRedirect:!0}),c=r(5013),p=r(5260),u=r(32837),d=r(88821);const m="EXTERNAL_COLLABORATOR";var h,y,g,b,f,E,v,O,w,S,D,I=r(28511),C=r(48743),T=r(81772),P=r(26330),A=r(25817),_=r(59953),N=r(41899),R=r(80733),k=r(88104),z=r(96290),j=r.n(z),x=r(16624),L=r.n(x),M=r(87860),F=r(81281);function Z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const U=(0,u.kg)("features:access-document:enter-email");h=(0,k.oe)("features/access-document/enter-email"),y=(0,i.RR)("features/analytics","features/context/request","features/context/team","features/http","features/toggles"),g=(0,I.UO)("Visitors"),b=n.aD.bound,f=n.aD.bound,E=n.aD.bound,v=n.aD.bound,h(O=y(O=g((S=Z((w=class{constructor(e,t,r,n,i){var o,a,s,l;this._modalCopy={control:{headerText:"Collaborate as a visitor",subheaderText:"Join as a visitor and gain editing access for 48 hours.",termsText:'clicking "continue as a visitor"',actionLabel:"Continue as visitor"},autoProvision:{headerText:"Quick access to get collaborating",subheaderText:"To get started, we need to verify your email.",termsText:'clicking "Continue"',actionLabel:"Continue"}},o=this,a="modalCopy",l=this,(s=S)&&Object.defineProperty(o,a,{enumerable:s.enumerable,configurable:s.configurable,writable:s.writable,value:s.initializer?s.initializer.call(l):void 0}),this.analytics=e,this.request=t,this.team=r,this.http=n,this.toggles=i}handleSignIn(){this.notifySignIn()}onEnter(){this.analytics.track(I.zW.ENTER_EMAIL,I.p$.VIEWED)}async onInit({props:e}){this.notifyError=e.onError||(()=>{}),this.notifySignIn=e.onSignIn||(()=>{}),this.notifySuccess=e.onSuccess||(()=>{}),this.autoProvisionEnabled=await this.toggles.fetch(F.vU.AUTO_PROVISION),this.modalCopy=this.autoProvisionEnabled?this._modalCopy.autoProvision:this._modalCopy.control}async submit({email:e,name:t}){let r;try{var n;this.analytics.identify({email:e,date:Date.now()}),this.analytics.track(I.zW.ENTER_EMAIL,I.p$.SUBMITTED);let i="/auth-api/access-document/email";this.autoProvisionEnabled&&(i="/auth-api/auto-provision/email");const o=await this.http.post(i,{data:{name:t,email:e},errorKey:"global"});(null==o||null===(n=o.data)||void 0===n?void 0:n.emailType)&&(r=o.data.emailType)}catch(e){return U("Failed to send email: %O",e),this.analytics.track(I.zW.ENTER_EMAIL,I.p$.FAILED,{variant:this.autoProvisionEnabled?"auto-provision":"control"}),this.notifyError()}this.analytics.track(I.zW.ENTER_EMAIL,I.p$.SUCCEEDED,{variant:this.autoProvisionEnabled?"auto-provision":"control",emailTypeSent:r}),this.notifySuccess()}}).prototype,"modalCopy",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Z(w.prototype,"handleSignIn",[b],Object.getOwnPropertyDescriptor(w.prototype,"handleSignIn"),w.prototype),Z(w.prototype,"onEnter",[f],Object.getOwnPropertyDescriptor(w.prototype,"onEnter"),w.prototype),Z(w.prototype,"onInit",[E],Object.getOwnPropertyDescriptor(w.prototype,"onInit"),w.prototype),Z(w.prototype,"submit",[v],Object.getOwnPropertyDescriptor(w.prototype,"submit"),w.prototype),O=w))||O)||O);let V=(0,k.ei)("features/access-document/enter-email")(D=class extends L().Component{render(){const{store:e}=this.props,t=L().createElement(L().Fragment,null,e.modalCopy.subheaderText+" ","Already a member of ",e.team.name,"?"," ",L().createElement(Y,{role:"link",element:"a",onClick:e.handleSignIn},"Sign in"));return L().createElement(W,{justifyContent:"center",alignItems:"center"},L().createElement(B,null),L().createElement($,{justifyContent:"center",alignItems:"center"},L().createElement(q,null,L().createElement(C.Z,{speed:"medium",order:"drop-in-bottom",passThrough:"true"},L().createElement(T.Z,{bottom:"l"},L().createElement("div",null,L().createElement(T.Z,{bottom:"xs"},L().createElement(H,{element:"h1",order:"subtitle",size:"larger",align:"left"},e.modalCopy.headerText)),L().createElement(T.Z,{bottom:"m"},L().createElement(K,{element:"h2",order:"body",size:"larger",align:"left"},t)))),L().createElement(R.l0,{submit:e.submit},L().createElement(N.xv,{id:"access_name",name:"name",label:"Name",autoFocus:!0,autoComplete:"name",tabIndex:"1",placeholder:"What should we call you?"}),L().createElement(N.GT,{id:"access_email",name:"email",label:"Email address",autoComplete:"username",tabIndex:"2"}),L().createElement(N.k4,null,e.modalCopy.actionLabel)),L().createElement(G,{justifyContent:"center"},L().createElement(c.Fe,{override:!0,actionText:e.modalCopy.termsText,align:"center",size:"smallest"}))))))}})||D;const G=(0,M.ZP)(P.Z).withConfig({displayName:"EnterEmail__Footer",componentId:"sc-1b8y5dc-0"})(["padding:"," 0 0;"],(e=>e.theme.spacing.m)),q=M.ZP.div.withConfig({displayName:"EnterEmail__FormContainer",componentId:"sc-1b8y5dc-1"})(["height:100%;width:80%;"]),W=(0,M.ZP)(P.Z).withConfig({displayName:"EnterEmail__FullScreen",componentId:"sc-1b8y5dc-2"})(["height:100vh;width:100vw;"]),B=M.ZP.div.withConfig({displayName:"EnterEmail__LeftPanel",componentId:"sc-1b8y5dc-3"})(["background-image:url(",");background-size:cover;min-height:100vh;padding:0 !important;width:40vw;"],j()),$=(0,M.ZP)(P.Z).withConfig({displayName:"EnterEmail__RightPanel",componentId:"sc-1b8y5dc-4"})(["width:60vw;"]),H=(0,M.ZP)(A.Z).withConfig({displayName:"EnterEmail__Title",componentId:"sc-1b8y5dc-5"})(["margin-top:0;"]),K=(0,M.ZP)(A.Z).withConfig({displayName:"EnterEmail__Subtitle",componentId:"sc-1b8y5dc-6"})(["margin-top:0;"]),Y=(0,M.ZP)(_.Z).withConfig({displayName:"EnterEmail__BoldLink",componentId:"sc-1b8y5dc-7"})(["font-weight:500;"]);var X,J,Q,ee,te,re,ne,ie,oe,ae,se,le,ce=V;function pe(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const ue=(0,u.kg)("features:access-document"),de={ENTER_EMAIL:Symbol("Access Document: Enter Email"),ERROR:Symbol("Access Document: Error"),LOADING:Symbol("Access Document: Loading"),REDIRECT:Symbol("Access Document: Redirect")};X=(0,p._V)("features/access-document",{initialState:de.LOADING}),J=(0,i.RR)("features/analytics","features/context/response","features/context/request","features/context/team","features/context/token","features/http"),Q=(0,I.UO)({flow:"Visitors"}),ee=n.aD.bound,te=n.aD.bound,re=n.aD.bound,ne=n.aD.bound,ie=n.aD.bound,X(oe=J(oe=Q((se=pe((ae=class{constructor(e,t,r,n,i,o){var a,s,l,c;a=this,s="redirect",c=this,(l=se)&&Object.defineProperty(a,s,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(c):void 0}),this.analytics=e,this.response=t,this.request=r,this.team=n,this.tokenApi=i,this.http=o}async grantSession(){this.transition(de.LOADING);try{const{redirect:e,user:t,userCreated:r}=await this.http.post("/auth-api/access-document",{data:{token:this.tokenApi.token},maxRedirects:1}).then((e=>e.data));return this.redirect=e,await this.analytics.identify(null==t?void 0:t.vendorID,{email:null==t?void 0:t.email}),this.analytics.track(I.zW.SIGN_IN,I.p$.SUCCEEDED,{userCreated:r}),this.transition(de.REDIRECT)}catch(e){return ue("Failed to validate access token: %O",e),this.analytics.track(I.zW.SIGN_IN,I.p$.FAILED),this.transition(de.ERROR)}}async onEnter(){if(await this.team.load(),this.tokenApi.type===m)return this.grantSession();this.transition(de.ENTER_EMAIL)}async handleEmailSent(){this.transition(de.LOADING),await this.response.sendMessageSafe(s())}async handleSignIn(){this.transition(de.LOADING);const e=this.request.redirectTo;await this.response.sendMessageSafe(l(`https://${this.team.host}/auth/sign-in?redirectTo=${e}`))}handleError(){this.transition(de.ERROR)}}).prototype,"redirect",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe(ae.prototype,"grantSession",[ee],Object.getOwnPropertyDescriptor(ae.prototype,"grantSession"),ae.prototype),pe(ae.prototype,"onEnter",[te],Object.getOwnPropertyDescriptor(ae.prototype,"onEnter"),ae.prototype),pe(ae.prototype,"handleEmailSent",[re],Object.getOwnPropertyDescriptor(ae.prototype,"handleEmailSent"),ae.prototype),pe(ae.prototype,"handleSignIn",[ne],Object.getOwnPropertyDescriptor(ae.prototype,"handleSignIn"),ae.prototype),pe(ae.prototype,"handleError",[ie],Object.getOwnPropertyDescriptor(ae.prototype,"handleError"),ae.prototype),oe=ae))||oe)||oe);var me=(0,p.ls)("features/access-document")(le=class extends L().Component{render(){const{store:e}=this.props;return{[de.ERROR]:L().createElement(c.jj,null),[de.ENTER_EMAIL]:L().createElement(ce,{onSuccess:e.handleEmailSent,onSignIn:e.handleSignIn,onError:e.handleError}),[de.REDIRECT]:L().createElement(d.l_,{destination:e.redirect})}[e.state]||L().createElement(c.gb,null)}})||le},29890:function(e,t){"use strict";t.Z={CLOSED:"Closed",FAILED:"Failed",SELECTED:"Selected",SUBMITTED:"Submitted",SUCCEEDED:"Succeeded",UPDATED:"Updated",URL_COPIED:"URLCopied",VIEWED:"Viewed",SKIPPED:"Skipped"}},28511:function(e,t,r){"use strict";r.d(t,{p$:function(){return f.Z},zW:function(){return b},UO:function(){return p}});var n=r(20643),i=r.n(n),o=r(40104),a=r.n(o),s=r(32837),l=r(59549);const c=Symbol("tracking-meta");function p({flow:e}={}){return t=>class extends t{constructor(...t){super(...t),this[c]={flow:e}}}}var u,d,m;const h=(0,s.kg)("analytics"),y=e=>new Promise((t=>setTimeout(t,e))),g=async(e,{interval:t=500,retries:r=5}={})=>{for(let n=0;n<r;n++)try{const r=await Promise.resolve(e());if(r)return r;await y(t)}catch(e){await y(t)}throw new Error("Timeout trying to wait")};u=(0,l.En)("features/analytics"),d=(0,l.RR)("window","features/context/client","features/context/config","features/context/request","flow/manager"),u(m=(0,l.ri)(m=d(m=class{constructor(e,t,r,n,o){this.window=e,this.client=t,this.config=r,this.request=n,this.flows=o,this._measure=a()((async()=>g((()=>i()(this.window,"measure")),{interval:500,retries:10}))),this._call=async(e,...t)=>{try{const r=await this._measure();(0,r[e])(...t)}catch(t){h(`measure.${e} error: %O`,t.message)}}}async page(...e){try{(await this._measure()).page(...e)}catch(e){h("page: error %0",e)}}collect(e,t={}){const{type:r,version:n,build:i}=this.client,o=`${r}.${e}`;return n&&(t.clientVersion=n),i&&(t.clientBuild=i),t.appVersion=this.config.get("COMMIT_ID"),h(`track: ${o} %o`,t),this._call("collect",o,t)}track(e,t,r={}){const n=`${function(e){const t=i()(e,"stack",[]);for(let e=t.length-1;e>=0;e--){const r=t[e].store[c];if(r)return r.flow}return h("WARNING: Could not find an analytics name to use for the current flow!"),"Unknown"}(this.flows)}.${e}.${t}`;return this.collect(n,r)}trackLegacy(e,t={}){return this.collect(e,t)}identify(...e){return h("identify: %O",{...e}),this._call("identify",...e)}async identifyUser(){try{const e=await this._measure();e.identifyUser(e.dequeue)}catch(e){h("identify: error %O",e)}}async flush(){try{const e=await this._measure();if(!e.identifyAttempted)return!1;await g((()=>0===i()(e,"queue",[]).length),{interval:300,retries:5}),h("flush: complete")}catch(e){h("flush: error %O",e)}}})||m)||m);var b={CREATE_ACCOUNT:"CreateAccount",CREATE_PASSWORD:"CreatePassword",DOMAIN_CONTROL_SETTINGS:"DomainControlSettings",ENABLE_APPROVED_DOMAINS:"EnableApprovedDomains",ENTER_EMAIL:"EnterEmail",GET_STARTED:"GetStarted",HOME:"Home",INVITES:"Invites",PASSWORD_REQUEST_RESET:"ForgotPassword",RESET_PASSWORD:"ResetPassword",SCHEDULE_A_DEMO:"ScheduleADemo",SCIM_SETTING:"SCIMSetting",SCIM_TOKEN:"SCIMToken",SELF_INVITE:"SelfInvite",SIGN_IN_TO_CONTINUE:"SignInToContinue",SIGN_IN:"SignIn",SIGN_OUT:"SignOut",SWITCH_EMAIL:"SwitchEmail",TEAM_CREATE:"TeamCreate",TEAM_SELECTOR:"TeamSelector",TWO_FACTOR_SETTINGS:"2FASettings",TWO_FACTOR_SETUP:"2FASetup",TWO_FACTOR_RECOVERY_CODES:"2FARecoveryCodes",TWO_FACTOR_VERIFICATION:"2FAVerification",UPDATE_PASSWORD:"UpdatePassword",USER_JOIN:"UserJoin",VERIFY_EMAIL:"VerifyEmail"},f=r(29890)},7419:function(e,t,r){"use strict";r.d(t,{P:function(){return n},L:function(){return i}});const n={COMPLETED:"COMPLETED",FAILED:"FAILED",IN_PROGRESS:"IN_PROGRESS"},i={ONBOARDING_WALKTHROUGH:"nux_tour",V6_MKTG:"INV_CUSTOMER_ACTIVE_V6"}},32600:function(e,t,r){"use strict";r.d(t,{Z:function(){return et}});var n,i,o,a,s,l=r(16624),c=r.n(l),p=r(64267),u=r(48743),d=r(59549),m=r(5260),h=r(6895),y=r(5013),g=r(90660),b=r(87860),f=r(88692),E=r(59953),v=r(25817),O=r(81772),w=r(77877),S=r(32837),D=r(88104),I=r(47714),C=r(44527),T=r(28511),P=r(76069),A=r(30195),_=r(41779),N=r(39561),R=r(65235);function k(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let z=(n=p.aD.bound,(0,P.Pi)((s=class extends c().Component{constructor(...e){var t,r,n,i;super(...e),t=this,r="method",i=this,(n=a)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}get httpSteps(){const{downloadFile:e}=this.props;return[c().createElement(v.Z,{key:"http-1"},"Download your unique HTTP verification file ",c().createElement(E.Z,{element:"a",onClick:e},"from here")),"Upload the file to the root folder of the domain you want to verify",c().createElement(v.Z,{key:"http-2"},"Once uploaded return here, click ",c().createElement("b",null,"+ New domain"),", and follow the instructions")]}get dnsSteps(){const{code:e}=this.props;return[c().createElement(c().Fragment,{key:"dns-1"},c().createElement(v.Z,null,"Copy and add the TXT record to your domain host for any domains you want to verify."),c().createElement(x,null,c().createElement(A.Z,{id:"domain-control-code",compact:!0,disabled:!0,value:e,withCopy:!0}))),c().createElement(c().Fragment,{key:"dns-2"},c().createElement(v.Z,null,"Once added, add your domains to the list below to verify them with InVision."),c().createElement(O.Z,{top:"s"},c().createElement(v.Z,null,c().createElement("b",null,"This process can take up to 72 hours in some cases so please give it some time and try again if your domain does not verify right away."))))]}setMethod(e="http"){this.method=e}render(){return c().createElement(c().Fragment,null,c().createElement(O.Z,{top:"xxl"},c().createElement(v.Z,{order:"subtitle",size:"larger"},"Verifying a domain")),c().createElement(L,{orientation:"horizontal",items:[{label:"File upload",active:"http"===this.method,onClick:()=>this.setMethod("http")},{label:"DNS TXT record",active:"dns"===this.method,onClick:()=>this.setMethod("dns")}]}),c().createElement(j,{order:"ordered",items:{http:this.httpSteps,dns:this.dnsSteps}[this.method]}),c().createElement(_.Z,{spacing:"xl"}))}},a=k((o=s).prototype,"method",[p.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"http"}}),k(o.prototype,"setMethod",[n],Object.getOwnPropertyDescriptor(o.prototype,"setMethod"),o.prototype),i=o))||i);const j=(0,b.ZP)(N.Z).withConfig({displayName:"VerificationMethod__StyledList",componentId:"sc-1syx5xs-0"})(["li{margin:"," 0;}"],(({theme:e})=>e.spacing.m)),x=b.ZP.div.withConfig({displayName:"VerificationMethod__Code",componentId:"sc-1syx5xs-1"})(["margin-top:",";"],(({theme:e})=>e.spacing.s)),L=(0,b.ZP)(R.Z).withConfig({displayName:"VerificationMethod__StyledNav",componentId:"sc-1syx5xs-2"})(["margin:",";border-bottom:1px solid ",";"],(({theme:e})=>`${e.spacing.m} 0 ${e.spacing.xl}`),(({theme:e})=>e.palette.structure.regular));var M=z,F=r(94002),Z=r(26330),U=r(59407);class V extends c().Component{render(){const{onCancel:e,onSubmit:t}=this.props;return c().createElement(W,null,c().createElement(C.l0,{submit:t},c().createElement(Z.Z,null,c().createElement(q,null,c().createElement(C.xv,{name:"domain",label:"Domain"})),c().createElement(C.Ph,{id:"method",name:"method",label:"Verification method",defaultValue:"http"},c().createElement("option",{value:"http"},"File upload"),c().createElement("option",{value:"dns"},"DNS"))),c().createElement(Z.Z,{alignItems:"center",justifyContent:"flex-end"},c().createElement(G,{element:"a",order:"tertiary",onClick:e},"Cancel"),c().createElement(F.Z,{order:"secondary",size:"smaller"},"Verify"))))}}const G=(0,b.ZP)(E.Z).withConfig({displayName:"AddDomain__Cancel",componentId:"vva6cj-0"})(["margin-right:",";"],(({theme:e})=>e.spacing.s)),q=b.ZP.div.withConfig({displayName:"AddDomain__Domain",componentId:"vva6cj-1"})(["flex:1 1 auto;margin-right:",";"],(({theme:e})=>e.spacing.m)),W=b.ZP.div.withConfig({displayName:"AddDomain__Wrapper",componentId:"vva6cj-2"})(["margin-top:",";padding:",";width:100%;border:1px solid #EDEDED;border-radius:",";background-color:#F9F9FB;"],(({theme:e})=>e.spacing.xs),(({theme:e})=>`${e.spacing.l} ${e.spacing.l}`),(({theme:e})=>e.radii.rounded));var B=V,$=r(17723),H=r(66711),K=r(77814),Y=r(88832),X=r(71825);const J=({verified:e,method:t})=>e?c().createElement(ne,{color:"success"},"Verified"):c().createElement(ee,{trigger:c().createElement(ne,{color:"danger"},"Unverified"),maxWidth:260},"http"===t?"Make sure you uploaded the file to the correct folder of your domain, then try again from the menu on the right.":"It can take up to 72 hours to update. You can try to verify or remove this domain from the menu on the right.");class Q extends c().PureComponent{domainRows(e=[],t,r){return e.map((({domain:e,method:n,verified:i},o)=>({data:{id:`row-${o}`},status:c().createElement(J,{method:n,verified:i}),method:n.toUpperCase(),domain:e,menu:c().createElement($.Z,{trigger:c().createElement(X.Z,null),unstyledTrigger:!0,closeOnClick:!0,items:[!i&&{label:"Verify","data-component":`verify-${o}`,onClick:()=>t(e,n),type:"item"},{label:"Remove","data-component":`remove-${o}`,onClick:()=>r(e),type:"item"}]})})))}render(){const{domains:e,onFilter:t,onVerify:r,onRemove:n}=this.props;return c().createElement(re,{"data-component":"domain-control-list",columns:[{align:"left",id:"domain",title:c().createElement(te,{id:"domain-filter",onChange:t})},{align:"left",id:"status",title:"Status"},{align:"left",id:"method",title:"Method"},{align:"center",id:"menu"}],rows:this.domainRows(e,r,n)})}}const ee=(0,b.ZP)(H.Z).withConfig({displayName:"List__StyledTooltip",componentId:"ojp3ir-0"})(["text-align:center;width:260px;"]),te=(0,b.ZP)(K.Z).withConfig({displayName:"List__StyledSearch",componentId:"ojp3ir-1"})(["width:100%;"]),re=(0,b.ZP)(Y.Z).withConfig({displayName:"List__StyledTable",componentId:"ojp3ir-2"})(["th:first-of-type{width:300px;}"]),ne=(0,b.ZP)(v.Z).withConfig({displayName:"List__StatusTag",componentId:"ojp3ir-3"})(["text-align:center;background-color:",";border:1px solid ",";line-height:","px;border-radius:",";width:100%;"],(({theme:e,color:t})=>e.palette[t].lighter),(({theme:e,color:t})=>e.palette[t].regular),(({theme:e})=>e.text.bodyLarger.lineHeight),(({theme:e})=>e.radii.rounded));var ie=Q;const oe=b.ZP.div.withConfig({displayName:"NoResults__NoResultsWrapper",componentId:"sc-1gtsado-0"})(["display:flex;flex-direction:column;align-items:center;text-align:center;margin-top:",";"],(({theme:e})=>e.spacing.xxl));var ae,se,le,ce,pe,ue,de,me,he,ye=()=>c().createElement(oe,null,c().createElement(v.Z,{order:"subtitle",size:"larger"},"You haven't verified any domains yet"),c().createElement(v.Z,null,"To add your first domain follow the verification instructions",c().createElement("br",null),"above, then click the ",c().createElement("b",null,"+ New domain")," button"));function ge(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function be(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}ae=(0,D.oe)("features/domain-control/domains"),se=p.aD.bound,le=p.aD.bound,ae((ue=be((pe=class{constructor(){ge(this,"filter",ue,this),ge(this,"showAddDomain",de,this)}handleToggleAddDomain(){this.showAddDomain=!this.showAddDomain}setFilter(e=""){this.filter=e.trim()}}).prototype,"filter",[p.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),de=be(pe.prototype,"showAddDomain",[p.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),be(pe.prototype,"handleToggleAddDomain",[se],Object.getOwnPropertyDescriptor(pe.prototype,"handleToggleAddDomain"),pe.prototype),be(pe.prototype,"setFilter",[le],Object.getOwnPropertyDescriptor(pe.prototype,"setFilter"),pe.prototype),ce=pe));let fe=(0,D.ei)("features/domain-control/domains")((be((he=class extends c().Component{get domains(){const{domains:e,store:t}=this.props;return t.filter?e.filter((({domain:e})=>e.includes(t.filter))):e}render(){const{addDomain:e,domains:t,verifyDomain:r,removeDomain:n,store:i}=this.props;return c().createElement(c().Fragment,null,c().createElement(Ee,{justifyContent:"space-between"},c().createElement(v.Z,{order:"subtitle",size:"larger"},"Domains"),!i.showAddDomain&&c().createElement(F.Z,{"data-component":"add-domain",order:"tertiary",size:"smaller",onClick:i.handleToggleAddDomain},"+ New domain")),c().createElement(y.kb,{isOpened:i.showAddDomain,unmount:!0},c().createElement(B,{onCancel:i.handleToggleAddDomain,onSubmit:t=>e(t).then(i.handleToggleAddDomain)})),t.length?c().createElement(c().Fragment,null,c().createElement(U.HK,{requestKey:"domainControlList"}),c().createElement(ie,{domains:this.domains,onFilter:e=>i.setFilter(e.currentTarget.value),onVerify:r,onRemove:n})):c().createElement(ye,null))}}).prototype,"domains",[p.Fl],Object.getOwnPropertyDescriptor(he.prototype,"domains"),he.prototype),me=he))||me;const Ee=(0,b.ZP)(Z.Z).withConfig({displayName:"Domains__SectionHeader",componentId:"sc-12sdhma-0"})(["margin-top:",";margin-bottom:",";"],(({theme:e})=>e.spacing.xl),(({theme:e})=>e.spacing.m));var ve,Oe,we,Se,De,Ie,Ce,Te,Pe,Ae,_e,Ne,Re,ke,ze,je,xe=fe;r(64404);function Le(){return(Le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Me(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Fe(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Ze=(0,S.kg)("features:domain-control");ve=(0,D.oe)("features/domain-control/settings"),Oe=(0,d.RR)("features/analytics","features/context/team","features/download","features/http"),we=p.aD.bound,Se=p.aD.bound,De=p.aD.bound,Ie=p.aD.bound,Ce=p.aD.bound,Te=p.aD.bound,ve(Pe=Oe((_e=Fe((Ae=class{constructor(e,t,r,n){Me(this,"code",_e,this),Me(this,"domains",Ne,this),Me(this,"domainRemoved",Re,this),Me(this,"removalFailed",ke,this),Me(this,"verificationFailed",ze,this),this.analytics=e,this.team=t,this.download=r,this.http=n}async onInit(){await this.refreshDomains(),this.code=await this.http.put("/auth-api/domain-control/verification-code").then((e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.code})),this.analytics.track(T.zW.DOMAIN_CONTROL_SETTINGS,T.p$.VIEWED)}async refreshDomains(){this.domains=await this.http.get("/auth-api/domain-control/verified-domains").then((e=>e.data))}async downloadFile(){await this.download.file("/auth-api/domain-control/verification-file",{file:`invisionapp-verification-${this.team.id}.txt`})}async addDomain({domain:e,method:t}){return await this.http.put("/auth-api/domain-control/verified-domains",{errorKey:"global",data:{domain:e,method:t}}),this.refreshDomains()}async verifyDomain(e,t){const{verified:r}=await this.http.get("/auth-api/domain-control/verify",{errorKey:"domainControlList",params:{domain:e}}).then((e=>e.data));this.verificationFailed=!r&&t,await this.refreshDomains()}async removeDomain(e){this.removalFailed=!1;try{await this.http.delete("/auth-api/domain-control/verified-domains",{errorKey:"domainControlList",data:{domain:e}}),await this.refreshDomains(),this.domainRemoved=!0}catch(e){e.message=`Failed to remove verified domain: ${e.message}`,Ze("Failed to remove verified domain: %O",e),this.removalFailed=!0}}}).prototype,"code",[p.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ne=Fe(Ae.prototype,"domains",[p.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re=Fe(Ae.prototype,"domainRemoved",[p.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ke=Fe(Ae.prototype,"removalFailed",[p.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ze=Fe(Ae.prototype,"verificationFailed",[p.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fe(Ae.prototype,"onInit",[we],Object.getOwnPropertyDescriptor(Ae.prototype,"onInit"),Ae.prototype),Fe(Ae.prototype,"refreshDomains",[Se],Object.getOwnPropertyDescriptor(Ae.prototype,"refreshDomains"),Ae.prototype),Fe(Ae.prototype,"downloadFile",[De],Object.getOwnPropertyDescriptor(Ae.prototype,"downloadFile"),Ae.prototype),Fe(Ae.prototype,"addDomain",[Ie],Object.getOwnPropertyDescriptor(Ae.prototype,"addDomain"),Ae.prototype),Fe(Ae.prototype,"verifyDomain",[Ce],Object.getOwnPropertyDescriptor(Ae.prototype,"verifyDomain"),Ae.prototype),Fe(Ae.prototype,"removeDomain",[Te],Object.getOwnPropertyDescriptor(Ae.prototype,"removeDomain"),Ae.prototype),Pe=Ae))||Pe);const Ue=({status:e="success",children:t,...r})=>c().createElement(f.Z,Le({status:e,placement:"top-center","data-component":"domain-control-toast"},r),t);let Ve=(0,D.ei)("features/domain-control/settings")(je=class extends c().Component{render(){const{onClose:e=(()=>{}),store:t}=this.props;return c().createElement(I.wC.A,{"data-component":"domain-control-settings",alignItems:"flex-start"},c().createElement(I.h4.x8,{onClick:e,tooltipPlacement:"left",tooltip:"Close"}),t.domainRemoved&&c().createElement(Ue,null,"1 domain has been successfully removed"),t.removalFailed&&c().createElement(Ue,{status:"danger",withTimeout:!1,dismissable:!0},"Your verified domain couldn't be removed. Please try again."),t.verificationFailed&&{dns:c().createElement(Ue,{status:"danger",withTimeout:!1,dismissable:!0},"Your domain couldn't be verified. DNS records can take 72 hours to update, after that reach out to your IT team or our ",c().createElement(E.Z,{element:"a",href:"https://support.invisionapp.com/hc/en-us"},"support team")),http:c().createElement(Ue,{status:"danger",withTimeout:!1,dismissable:!0},"Your domain couldn't be verified. Please make sure you placed the TXT file in the root folder of your domain")}[t.verificationFailed],c().createElement(Ge,null,c().createElement(y.X6,{heading:"Domain control",subheading:c().createElement(v.Z,{element:"span",order:"body",size:"larger"},"Verify your organization's domains with one of the methods below, and control which InVision teams people from your organization can join."," ",c().createElement(E.Z,{role:"link",element:"a",href:"https://support.invisionapp.com/hc/en-us/articles/360051194912-Enterprise-Domain-Control-beta-"},"Learn more.")),align:"center"}),c().createElement(M,{downloadFile:t.downloadFile,code:t.code}),t.domains&&c().createElement(xe,{domains:t.domains,addDomain:t.addDomain,verifyDomain:t.verifyDomain,removeDomain:t.removeDomain}),c().createElement(O.Z,{top:"l"},c().createElement(w.Z,{horizontal:"center"},c().createElement(C.KM,{onClick:e},"Done")))))}})||je;const Ge=b.ZP.div.withConfig({displayName:"Settings__Wrapper",componentId:"k43sz4-0"})(["margin-top:148px;"]);var qe,We,Be,$e,He,Ke,Ye,Xe=Ve;function Je(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Qe={LOADING:Symbol("Loading"),VIEW_SETTINGS:Symbol("View Settings")};qe=(0,m._V)("features/domain-control",{initialState:Qe.LOADING}),We=(0,d.RR)("features/context/request","features/context/team","navigator"),Be=(0,T.UO)({flow:"AccountSettings"}),$e=p.aD.bound,qe(He=We(He=Be((Je((Ke=class{constructor(e,t,r){this.nav=r,this.request=e,this.team=t}async onEnter(){return this.team.isGlobal?this.nav.goTo("sign-in"):this.transition(Qe.VIEW_SETTINGS)}handleClose(e){const t=this.request.get("originURL")||"/";e?this.nav.goTo(t,e):this.nav.goTo(t)}}).prototype,"onEnter",[p.aD],Object.getOwnPropertyDescriptor(Ke.prototype,"onEnter"),Ke.prototype),Je(Ke.prototype,"handleClose",[$e],Object.getOwnPropertyDescriptor(Ke.prototype,"handleClose"),Ke.prototype),He=Ke))||He)||He);var et=(0,m.ls)("features/domain-control")(Ye=class extends c().Component{render(){const{store:e}=this.props;return{[Qe.VIEW_SETTINGS]:c().createElement(u.Z,{speed:"medium",order:"drop-in-bottom"},c().createElement(g.un,{permissionName:"Team.ChangeEnterpriseSettings",loading:c().createElement(y.gb,null),rejected:c().createElement(h.Z,{action:()=>e.handleClose({query:{action:"DOMAIN_CONTROL_SETTINGS_UNAUTHORIZED"}})},c().createElement(y.gb,null))},c().createElement(Xe,{onClose:e.handleClose})))}[e.state]||c().createElement(y.gb,null)}})||Ye},627:function(e,t,r){"use strict";r.d(t,{Z:function(){return De}});var n,i,o,a,s,l,c,p,u,d=r(16624),m=r.n(d),h=r(64267),y=r(5260),g=r(59549),b=r(28511),f=r(47714),E=r(50137),v=r.n(E),O=r(81281),w=r(32837),S=r(88821),D=r(90660),I=r(5013),C=r(8253),T=r(57745),P=r.n(T),A=r(48743),_=r(25817),N=r(88104),R=r(44527),k=r(20314);function z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n=(0,N.oe)("features/email-update/enter-email"),i=(0,g.RR)("features/http"),o=h.aD.bound,a=h.aD.bound,s=h.aD.bound,n(l=i((p=z((c=class{constructor(e){var t,r,n,i;t=this,r="user",i=this,(n=p)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0}),this.http=e}onInit({props:e}){this.user=e.user,this.onSuccess=e.onSuccess||(()=>{})}validateEmail(e){const t=e.get("email");return this.user.email.toLowerCase()===t.toLowerCase()?["This email looks just like your current email."]:P().single(t,{email:{message:k.As}})}submit(e){const{email:t}=e;this.onSuccess(t)}}).prototype,"user",[h.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z(c.prototype,"onInit",[o],Object.getOwnPropertyDescriptor(c.prototype,"onInit"),c.prototype),z(c.prototype,"validateEmail",[a],Object.getOwnPropertyDescriptor(c.prototype,"validateEmail"),c.prototype),z(c.prototype,"submit",[s],Object.getOwnPropertyDescriptor(c.prototype,"submit"),c.prototype),l=c))||l);var j,x,L,M,F,Z,U,V,G,q=(0,N.ei)("features/email-update/enter-email")(u=class extends m().Component{render(){const{store:e}=this.props;return m().createElement(A.Z,{speed:"medium",order:"drop-in-bottom"},m().createElement(I.X6,{align:"center",heading:"Update your email address",subheading:m().createElement(_.Z,null,"Your current email is ",m().createElement("strong",null,e.user.email))}),m().createElement(R.l0,{"data-component":"email-update-new-email",submit:e.submit},m().createElement(R.GT,{name:"email",label:"New email",validator:{fn:e.validateEmail},autoFocus:!0}),m().createElement(R.k4,null,"Continue")))}})||u,W=r(8038);function B(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}j=(0,N.oe)("features/email-update/verify-email"),x=(0,g.RR)("features/http"),L=h.aD.bound,M=h.aD.bound,F=h.aD.bound,Z=h.aD.bound,j(U=x((B((V=class{constructor(e){this.http=e}onInit({props:e}){this.notifySuccess=e.onSuccess||(()=>{})}async handleSendEmail({email:e}){await this.http.post("/auth-api/challenges/verify-email",{data:{email:e},errorKey:"global",errorMap:{429:()=>({data:{errorCode:O.SM.TOO_MANY_REQUESTS}})}})}async handleVerifyEmail({email:e,value:t}){await this.http.put("/auth-api/challenges/verify-email",{data:{code:t,email:e},errorMap:{429:()=>({data:{errorCode:O.SM.TOO_MANY_REQUESTS}})}})}handleVerified(){this.notifySuccess()}}).prototype,"onInit",[L],Object.getOwnPropertyDescriptor(V.prototype,"onInit"),V.prototype),B(V.prototype,"handleSendEmail",[M],Object.getOwnPropertyDescriptor(V.prototype,"handleSendEmail"),V.prototype),B(V.prototype,"handleVerifyEmail",[F],Object.getOwnPropertyDescriptor(V.prototype,"handleVerifyEmail"),V.prototype),B(V.prototype,"handleVerified",[Z],Object.getOwnPropertyDescriptor(V.prototype,"handleVerified"),V.prototype),U=V))||U);var $,H,K,Y,X,J,Q,ee,te,re,ne,ie,oe,ae,se=(0,N.ei)("features/email-update/verify-email")(G=class extends m().Component{render(){const{store:e,email:t}=this.props;return m().createElement(A.Z,{speed:"medium",order:"drop-in-bottom"},m().createElement(I.FN.V,{status:"success"},"Your account has been verified successfully.  Check your email for your new code."),m().createElement(I.X6,{align:"center",heading:"Please verify your new email address, too",subheading:m().createElement(_.Z,{order:"body",prose:!0},"We just emailed another six-digit code to ",m().createElement("b",null,t),".",m().createElement("br",null),"Enter the code below to confirm your new email address.")}),m().createElement(W.Z,{align:"center",email:t,onSend:e.handleSendEmail,onVerify:e.handleVerifyEmail,onSuccess:e.handleVerified}))}})||G;function le(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ce(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const pe=(0,w.kg)("email-update"),ue={ENTER_EMAIL:Symbol("Enter Email"),VERIFY_ACCOUNT:Symbol("Verify Account"),VERIFY_EMAIL:Symbol("Verify Email"),REDIRECT:Symbol("Redirect")};$=(0,y._V)("features/email-update",{initialState:ue.ENTER_EMAIL}),H=(0,g.RR)("features/analytics","features/context/request","features/context/user","features/http"),K=h.aD.bound,Y=h.aD.bound,X=h.aD.bound,J=h.aD.bound,Q=h.aD.bound,ee=h.aD.bound,te=h.aD.bound,$(re=H((ie=ce((ne=class{constructor(e,t,r,n){le(this,"email",ie,this),le(this,"redirectTo",oe,this),this.analytics=e,this.request=t,this.user=r,this.http=n}onInit({props:e}){this.notifySuccess=e.onSuccess;const t=this.request.get("originURL")||this.request.referrer;this.redirectTo=new(v())(t,!0),this.redirectTo.set("query",{action:"EMAIL_UPDATED"})}handleEmailEntered(e){this.email=e,this.transition(ue.VERIFY_ACCOUNT)}handleAccountVerified(){this.transition(ue.VERIFY_EMAIL)}handleEmailVerified(){this.notifySuccess?this.notifySuccess():this.updateEmail()}async updateEmail(){try{await this.http.patch("/auth-api/profile",{data:{email:this.email},errorKey:"global"}),this.analytics.trackLegacy("AccountSettings.EmailChange.Succeeded"),this.redirect()}catch(e){pe("Unable to update: %O",e)}}redirect(){this.transition(ue.REDIRECT)}handleBack(){this.transition(ue.ENTER_EMAIL)}}).prototype,"email",[h.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=ce(ne.prototype,"redirectTo",[h.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce(ne.prototype,"onInit",[K],Object.getOwnPropertyDescriptor(ne.prototype,"onInit"),ne.prototype),ce(ne.prototype,"handleEmailEntered",[Y],Object.getOwnPropertyDescriptor(ne.prototype,"handleEmailEntered"),ne.prototype),ce(ne.prototype,"handleAccountVerified",[X],Object.getOwnPropertyDescriptor(ne.prototype,"handleAccountVerified"),ne.prototype),ce(ne.prototype,"handleEmailVerified",[J],Object.getOwnPropertyDescriptor(ne.prototype,"handleEmailVerified"),ne.prototype),ce(ne.prototype,"updateEmail",[Q],Object.getOwnPropertyDescriptor(ne.prototype,"updateEmail"),ne.prototype),ce(ne.prototype,"redirect",[ee],Object.getOwnPropertyDescriptor(ne.prototype,"redirect"),ne.prototype),ce(ne.prototype,"handleBack",[te],Object.getOwnPropertyDescriptor(ne.prototype,"handleBack"),ne.prototype),re=ne))||re);let de=(0,y.ls)("features/email-update")(ae=class extends m().Component{render(){const{store:e}=this.props;return m().createElement(m().Fragment,null,m().createElement(I.FN.A,{"data-component":"toast"}),{[ue.ENTER_EMAIL]:m().createElement(q,{user:e.user,onSuccess:e.handleEmailEntered}),[ue.VERIFY_ACCOUNT]:m().createElement(m().Fragment,null,m().createElement(f.h4.eJ,{onClick:e.handleBack}),m().createElement(C.Z,{intent:O.Qv.Intentions.UpdateEmail,scopes:[O.Qv.Scopes.UpdateEmail],onSuccess:e.handleAccountVerified})),[ue.VERIFY_EMAIL]:m().createElement(se,{email:e.email,onSuccess:e.handleEmailVerified}),[ue.REDIRECT]:m().createElement(S.l_,{destination:e.redirectTo})}[e.state]||m().createElement(I.gb,null))}})||ae;var me,he,ye,ge,be,fe,Ee,ve,Oe=e=>m().createElement(D.U_,{loading:m().createElement(I.gb,null)},m().createElement(de,e));function we(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Se={INIT:Symbol("Email Update: Initialized")};me=(0,y._V)("features/email-update/layout",{initialState:Se.INIT}),he=(0,g.RR)("features/context/request","navigator"),ye=(0,b.UO)({flow:"EmailUpdate"}),ge=h.aD.bound,be=h.aD.bound,me(fe=he(fe=ye((we((Ee=class{constructor(e,t){this.request=e,this.navigator=t}onInit(){this.redirectTo=this.request.referrer||"sign-in"}handleGoBack(){this.navigator.goTo(this.redirectTo)}}).prototype,"onInit",[ge],Object.getOwnPropertyDescriptor(Ee.prototype,"onInit"),Ee.prototype),we(Ee.prototype,"handleGoBack",[be],Object.getOwnPropertyDescriptor(Ee.prototype,"handleGoBack"),Ee.prototype),fe=Ee))||fe)||fe);var De=(0,y.ls)("features/email-update/layout")(ve=class extends m().Component{render(){const{store:e}=this.props;return m().createElement(f.wC.A,null,m().createElement(f.h4.x8,{onClick:e.handleGoBack}),m().createElement(Oe,null))}})||ve},95714:function(e,t,r){"use strict";r.d(t,{Z:function(){return A}});var n=r(16624),i=r.n(n),o=r(3074),a=r.n(o),s=r(81772),l=r(50902),c=r(87860),p=r(76069),u=r(86953),d=r(20643),m=r.n(d),h=r(33626),y=r.n(h),g=r(75692),b=r.n(g),f=r(61178),E=r.n(f),v=r(40104),O=r.n(v),w=r(94446);var S,D={translate(e,t={}){if(e){const r=w.Z[e]||w.Z.default;if(b()(r))return((e,t)=>{try{return O()(E()(e))(t)}catch(t){return e}})(r,t);if(y()(r))return((e,t)=>{try{return e(t)}catch(e){return""}})(r,t)}return""},translateError(e){const t=m()(e,"response.data",{}),r=t.message;if(r)return r;const n=m()(e,"errorCode");return this.translate(n,t)}},I=r(59549);const C=(0,c.F4)(["from{height:0px;}to{height:75px;}"]),T=c.ZP.div.withConfig({displayName:"RequestErrors__Expanding",componentId:"jlwvdb-0"})(["animation:"," 0.2s ease-in-out"],C);let P=(0,I.f3)("features/http")(S=(0,p.Pi)(S=class extends i().Component{componentDidMount(){const{"features/http":e,requestKey:t,preserveTransitionErrors:r}=this.props;r||e.clearErrors(t)}render(){const{"features/http":e,requestKey:t}=this.props,r=e.errors.get(t);return r?i().createElement(T,null,i().createElement(u.Z,{"data-component":"request-error",order:"simple-fade-in",fillMode:"forwards"},i().createElement(s.Z,{bottom:"m"},i().createElement(l.Z,{status:"danger"},D.translateError(r))))):null}})||S)||S;P.propTypes={requestKey:a().string,"features/http":a().shape({clearErrors:a().func,errors:a().any})};var A=P},59407:function(e,t,r){"use strict";r.d(t,{HK:function(){return ie.Z},ew:function(){return oe}});var n=r(20643),i=r.n(n),o=r(64267),a=r(81281),s=r(59549),l=r(32837),c=r(48397),p=r.n(c);var u=r(4427),d=r.n(u),m=r(14473),h=r.n(m);var y=r(24559),g=r.n(y),b=r(63742),f=r.n(b),E=r(63902),v=r.n(E);g().defaults.timeout=12e3;var O={httpRequest:[async function(e,t){d()(e.req,"headers.Request-Source","auth-ui-browser"),d()(e.req,"headers.Calling-Service","auth-ui-browser"),d()(e.req,"headers.Request-ID",h()());const r=e.req.client;if(r){const{type:t,version:n,build:i,semver:o}=r;t&&d()(e.req,"headers.X-Client-Type",t),n&&d()(e.req,"headers.X-Client-Version",n),i&&d()(e.req,"headers.X-Client-Build",i),o&&d()(e.req,"headers.X-Client-Semver",o)}await t()},async function(e,t){await t()},async function(e,t){try{await t()}catch(e){const t=i()(e,"response",{});throw"ECONNABORTED"!==e.code&&408!==t.status||(e.timedOut=!0),t.status>=400&&(e.clientError=!0),t.status>=500&&(e.serverError=!0),e}},async function(e,t){const{req:r}=e;if(!r)throw new Error("Malformed request");if(r.retry){const e=Object.assign({retryDelay:b.exponentialDelay,retries:3},v()(r.retry)?r.retry:{});f()(g(),e)}e.res=await g().request({cancelToken:new(g().CancelToken)((t=>{e.cancel=t})),...r}),await t()}]};const w=p()(O.httpRequest);var S={request(e){const t={req:e},r=w(t).then((()=>t.res));return r.cancel=()=>t.cancel(),r},async get(e,t){return this.request({method:"GET",url:e,...t})},async patch(e,t){return this.request({method:"PATCH",url:e,...t})},async post(e,t){return this.request({method:"POST",url:e,...t})},async put(e,t){return this.request({method:"PUT",url:e,...t})},async delete(e,t){return this.request({method:"DELETE",url:e,...t})},async head(e,t){return this.request({method:"HEAD",url:e,...t})},async options(e,t){return this.request({method:"OPTIONS",url:e,...t})}},D=r(43670),I=r.n(D),C=r(33626),T=r.n(C),P=r(7976),A=r.n(P),_=r(40104),N=r.n(_),R=r(57727),k=r.n(R);const z=/^\/(.*)\/([gmiyus]*)$/i,j=N()((e=>{const t=z.exec(e);if(t){const[,e,r]=t;return new RegExp(e,r)}return new RegExp(e.toString().replace(/\*/g,".+"))}));var x,L,M,F,Z,U,V,G,q,W,B,$,H,K,Y,X=class{constructor(e){this.transforms=(e=>{const t=I()(e)?e=>{const t=Object.keys(e)[0];return{pattern:t,transform:e[t]}}:(e,t)=>({pattern:t,transform:e});return A()(e,((e,r)=>{const{pattern:n,transform:i}=t(e,r);return{regex:j(n),transform:i}}))})(e)}key(e){return e.key}mergeUpdate(e,t){return k()(e,t)}transform(e){for(const t of function*(e,t){for(const{regex:r,transform:n}of e)r.test(t)&&(yield n)}(this.transforms,this.key(e))){if(!T()(t))throw new Error("Transforms must be pure functions");const r=t(e);e=this.mergeUpdate(e,r)}return e}};class J extends X{key(e){return e.status}}function Q(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ee(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const te=(0,l.kg)("http"),re="__SUPPRESS_MESSAGE__",ne="__SUPPRESS_ERROR__";x=(0,s.En)("features/http"),L=(0,s.RR)("features/context/client","features/context/cloud-ui"),M=o.aD.bound,F=o.aD.bound,Z=o.aD.bound,U=o.aD.bound,V=o.aD.bound,G=o.aD.bound,q=o.aD.bound,W=o.aD.bound,B=o.aD.bound,x($=(0,s.ri)($=L((K=ee((H=class{constructor(e,t){Q(this,"errors",K,this),Q(this,"requests",Y,this),this.clientContext=e,this.cloudContext=t}clearErrors(e){e?this.errors.delete(e):this.errors.clear()}get active(){return this.requests>0}async request(e,{errorKey:t,errorMap:r,errorHandler:n,preloadId:s,...l}){if(!l.method)throw new Error("HTTP method is required");const c=async e=>{try{return(0,o.z)((()=>{this.requests++,this.clearErrors(t)})),await e}finally{(0,o.z)((()=>this.requests--))}},p=async e=>{try{return await e}catch(e){var r;const n=null!==(r=e.response)&&void 0!==r?r:{};if(!i()(n,`config.${re}`,!1)){const r=()=>{const e=i()(n,"data.errorCode",a.SM.UNEXPECTED);return a.SM[e]?e:a.SM.UNEXPECTED},s=e.timedOut?a.SM.TIMED_OUT:a.SM[r()];(0,o.z)((()=>this.errors.set(t,{errorCode:s,response:n})))}if(i()(n,`config.${ne}`,!1))return n;throw e}};try{const n=this.clientContext.current,i=()=>S[l.method](e,{...l,client:n}),o=async()=>{const t=await this.cloudContext.fetchPreloadedData(s);return t?t.response?t.url!==e?(te(`"${s}" request: A preloaded request with URL "${t.url}" was\n            found, but the URL needed in the SPA is "${e}".\n            The preload request will not be used.\n            Please make sure the preload URL in the feature-config is the same one\n            you're using in the SPA.`),i()):t.response:(te(`"${s}" request: A preloaded request with URL "${t.url}" was\n            found, but the response needed in the SPA was undefined.\n            The preload request will not be used.`),i()):(te(`Preloaded request was not found with URL "${e}".`),i())};let a=s?o():i();r&&(a=(async e=>{if(!r)return e;try{return await e}catch(e){const t=new J(r);throw e.response=t.transform(e.response),e}})(a)),t&&(a=c(p(a)));const u=await a;return te("Success: %O",u),u}catch(e){return te("Error: %O",e),(e=>{if(n)return n(e);throw e})(e)}}get(e,t){return this.request(e,{...t,method:"get"})}patch(e,t){return this.request(e,{...t,method:"patch"})}post(e,t){return this.request(e,{...t,method:"post"})}put(e,t){return this.request(e,{...t,method:"put"})}delete(e,t){return this.request(e,{...t,method:"delete"})}head(e,t){return this.request(e,{...t,method:"head"})}options(e,t){return this.request(e,{...t,method:"options"})}}).prototype,"errors",[o.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Y=ee(H.prototype,"requests",[o.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ee(H.prototype,"clearErrors",[M],Object.getOwnPropertyDescriptor(H.prototype,"clearErrors"),H.prototype),ee(H.prototype,"active",[o.Fl],Object.getOwnPropertyDescriptor(H.prototype,"active"),H.prototype),ee(H.prototype,"request",[F],Object.getOwnPropertyDescriptor(H.prototype,"request"),H.prototype),ee(H.prototype,"get",[Z],Object.getOwnPropertyDescriptor(H.prototype,"get"),H.prototype),ee(H.prototype,"patch",[U],Object.getOwnPropertyDescriptor(H.prototype,"patch"),H.prototype),ee(H.prototype,"post",[V],Object.getOwnPropertyDescriptor(H.prototype,"post"),H.prototype),ee(H.prototype,"put",[G],Object.getOwnPropertyDescriptor(H.prototype,"put"),H.prototype),ee(H.prototype,"delete",[q],Object.getOwnPropertyDescriptor(H.prototype,"delete"),H.prototype),ee(H.prototype,"head",[W],Object.getOwnPropertyDescriptor(H.prototype,"head"),H.prototype),ee(H.prototype,"options",[B],Object.getOwnPropertyDescriptor(H.prototype,"options"),H.prototype),$=H))||$)||$);var ie=r(95714);const oe=re},90660:function(e,t,r){"use strict";r.d(t,{g2:function(){return O},ur:function(){return s.Z},un:function(){return A},U_:function(){return R},hA:function(){return L},h$:function(){return F}});var n,i,o,a,s=r(50650),l=r(16624),c=r.n(l),p=r(33626),u=r.n(p),d=r(64267),m=r(76069),h=r(59549);var y,g,b,f,E,v,O=(0,h.f3)("features/context/domain")(n=(0,m.Pi)((a=class extends c().Component{constructor(e){var t,r,n,i;super(e),t=this,r="active",i=this,(n=o)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0}),this.domain=e["features/context/domain"]}render(){const{onControlled:e=null,onUncontrolled:t=null,loading:r,rejected:n}=this.props;return c().createElement(s.Z,{stores:[this.domain],loading:r,rejected:n},this.domain.isControlled?u()(e)?e():e:u()(t)?t():t)}},y=(i=a).prototype,g="active",b=[d.LO],f={configurable:!0,enumerable:!0,writable:!0,initializer:null},v={},Object.keys(f).forEach((function(e){v[e]=f[e]})),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=b.slice().reverse().reduce((function(e,t){return t(y,g,e)||e}),v),E&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(E):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(y,g,v),v=null),o=v,n=i))||n)||n,w=r(20643),S=r.n(w),D=r(32837),I=r(59407),C=r(58273);const T=(0,D.kg)("authz");var P,A=(0,h.f3)("features/http")((function(e){const{"features/http":t,permissionName:r,children:n,loading:i,rejected:o}=e;return c().createElement(C.Z,{promises:(async()=>{try{const e=await t.get("/auth-api/permissions/authorize",{params:{permissionName:r},errorKey:"global",errorMap:{"*":()=>({config:{[I.ew]:!0}})}}),n=!!S()(e,`data['${r}']`);return T(`${r}: ${n?"authorized":"unauthorized"}`),n}catch(e){throw T(`${r}: 'unauthorized'`),e}})(),loading:i,rejected:o},n)})),_=r(88821);var N,R=(0,h.f3)("features/context/user")(P=(0,m.Pi)(P=class extends c().Component{render(){const{"features/context/user":e,loading:t,children:r}=this.props;return c().createElement(s.Z,{stores:[e],loading:t,rejected:c().createElement(_.l_,{destination:"sign-in"})},r)}})||P)||P,k=r(50137),z=r.n(k);const j=(0,D.kg)("subdomain");var x,L=(0,h.f3)("features/context/request")(N=(0,m.Pi)(N=class extends c().Component{get request(){return this.props["features/context/request"]}render(){const{subdomain:e,children:t}=this.props;if(e===this.request.subdomain)return t;j("Invalid subdomain for this flow: %s",e);const r=new(z())(this.request.location);return r.set("host",`${e}.${this.request.hostdomain}`),c().createElement(_.l_,{destination:r})}})||N)||N;const M=(0,D.kg)("domain:team");var F=(0,h.f3)("features/context/team")(x=(0,m.Pi)(x=class extends c().Component{render(){const{"features/context/team":e,loading:t,children:r}=this.props;return e.isGlobal?(M("Invalid subdomain for this flow: %s",e.subdomain),c().createElement(_.l_,{destination:"sign-in"})):c().createElement(s.Z,{stores:[e],loading:t,rejected:c().createElement(_.l_,{destination:"sign-in"})},r)}})||x)||x},65346:function(e,t,r){"use strict";r.d(t,{Z:function(){return le}});var n,i,o,a,s,l,c,p,u,d,m,h=r(16624),y=r.n(h),g=r(5260),b=r(64267),f=r(59549),E=r(75415),v=r(28511),O=r(94446),w=r(81281),S=r(4427),D=r.n(S);function I(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const C={ACCOUNT_MISSING:Symbol("Account Missing"),ACCOUNT_WITHOUT_PASSWORD:Symbol("Account w/o Password"),IDENTIFY:Symbol("Identify"),LOADING:Symbol("Loading"),MEMBER:Symbol("Already Member"),SAML_SUCCESS:Symbol("SAML Success"),SIGN_IN_TO_CONTINUE:Symbol("Sign in to Continue"),SIGN_IN_SUCCESS:Symbol("Sign in Success")};n=(0,g._V)("features/join-team/document",{initialState:C.LOADING}),i=(0,f.RR)("features/context/cloud-ui","features/context/team","features/context/request","features/join-team/api","features/notification","features/toggles"),o=(0,v.UO)({flow:"JoinDocument"}),a=b.aD.bound,s=b.aD.bound,l=b.aD.bound,c=b.aD.bound,p=b.aD.bound,n(u=i(u=o((m=I((d=class{constructor(e,t,r,n,i,o){var a,s,l,c;a=this,s="user",c=this,(l=m)&&Object.defineProperty(a,s,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(c):void 0}),this.cloud=e,this.team=t,this.request=r,this.api=n,this.notification=i,this.toggles=o}get email(){var e,t;return null!==(e=null==this||null===(t=this.user)||void 0===t?void 0:t.email)&&void 0!==e?e:""}handleComplete(){this.transition(C.SIGN_IN_SUCCESS)}markData(){this.cloud.markDataLoaded()}async onEnter(){var e,t,r,n;this.api.setJoinType(w.ND.DOCUMENT_LINK),await this.team.load(),this.markData();switch(this.request.get("entry")){case E.LH.SUCCESS:return this.transition(C.SAML_SUCCESS)}return null!==(e=null===(t=this.team)||void 0===t||null===(r=t.samlInfo)||void 0===r?void 0:r.enabled)&&void 0!==e&&e&&!(null===(n=this.team)||void 0===n?void 0:n.useAltAuth)?this.transition(C.SIGN_IN_TO_CONTINUE):this.transition(C.IDENTIFY)}onTransition({nextState:e}){switch(e){case C.MEMBER:this.notification.notify(O.Z[w.SM.JOIN_TEAM_EXISTING_MEMBER],"info")}}handleIdentified(e){return D()(e,"user.role","guest"),this.api.setJoinType(w.ND.DOCUMENT_LINK),this.api.setJoinData(e),this.user=e.user,this.user.isMember?this.transition(C.MEMBER):this.user.hasAccount?this.user.hasPassword?this.transition(C.SIGN_IN_TO_CONTINUE):this.transition(C.ACCOUNT_WITHOUT_PASSWORD):this.transition(C.ACCOUNT_MISSING)}async samlSuccess(){await this.api.samlSuccess(),this.handleComplete()}}).prototype,"user",[b.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I(d.prototype,"email",[b.Fl],Object.getOwnPropertyDescriptor(d.prototype,"email"),d.prototype),I(d.prototype,"handleComplete",[a],Object.getOwnPropertyDescriptor(d.prototype,"handleComplete"),d.prototype),I(d.prototype,"markData",[s],Object.getOwnPropertyDescriptor(d.prototype,"markData"),d.prototype),I(d.prototype,"onEnter",[b.aD],Object.getOwnPropertyDescriptor(d.prototype,"onEnter"),d.prototype),I(d.prototype,"onTransition",[l],Object.getOwnPropertyDescriptor(d.prototype,"onTransition"),d.prototype),I(d.prototype,"handleIdentified",[c],Object.getOwnPropertyDescriptor(d.prototype,"handleIdentified"),d.prototype),I(d.prototype,"samlSuccess",[p],Object.getOwnPropertyDescriptor(d.prototype,"samlSuccess"),d.prototype),u=d))||u)||u);var T,P,A,_,N,R,k,z=r(6895),j=r(88104),x=r(44527),L=r(5013),M=r(47714);function F(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}T=(0,j.oe)("features/join-team/document/form/identity"),P=(0,f.RR)("features/analytics","features/http","features/context/team"),A=b.aD.bound,_=b.aD.bound,T(N=P((F((R=class{constructor(e,t,r){this.analytics=e,this.http=t,this.team=r}async onEnter(){const{subdomain:e}=this.team;this.analytics.track(v.zW.ENTER_EMAIL,v.p$.VIEWED,{subdomain:e})}async submit(e){this.analytics.track(v.zW.ENTER_EMAIL,v.p$.SUBMITTED);try{var t;const r=await this.http.get("/auth-api/join-team",{params:{joinType:w.ND.DOCUMENT_LINK,email:e.email,teamID:this.team.id},errorKey:"global"}),{hasAccount:n,hasPassword:i,isMember:o}=null==r||null===(t=r.data)||void 0===t?void 0:t.user;return this.analytics.track(v.zW.ENTER_EMAIL,v.p$.SUCCEEDED,{hasAccount:n,hasPassword:i,isMember:o}),r.data}catch(e){var r;const{response:t}=e,n=null==t||null===(r=t.data)||void 0===r?void 0:r.errorCode;throw this.analytics.track(v.zW.ENTER_EMAIL,v.p$.FAILED,{errorCode:n}),e}}}).prototype,"onEnter",[A],Object.getOwnPropertyDescriptor(R.prototype,"onEnter"),R.prototype),F(R.prototype,"submit",[_],Object.getOwnPropertyDescriptor(R.prototype,"submit"),R.prototype),N=R))||N);var Z,U,V=(0,j.ei)("features/join-team/document/form/identity")(k=class extends y().Component{render(){const{store:e,onSuccess:t,onError:r=(()=>{})}=this.props,n=e.team.current;return y().createElement(M.wC.A,null,y().createElement(x.l0,{submit:n=>e.submit(n).then(t,r)},y().createElement(L.Ir,{name:n.name,src:n.logo}),y().createElement(L.X6,{heading:"Tell us about yourself",subheading:y().createElement("span",null,"You're moments away from collaborating with ",y().createElement("b",null,n.name)),align:"center"}),y().createElement(x.GT,{id:"document_signup_email",label:"Email address",name:"email",autoFocus:!0,tabIndex:"0"}),y().createElement(x.k4,null,"Next")))}})||k,G=r(73683),q=r(20643),W=r.n(q),B=r(32837);const $={LOADING:Symbol("LOADING"),LOADED:Symbol("LOADED"),SIGN_IN_TO_CONTINUE:Symbol("SIGN_IN_TO_CONTINUE")};(0,g._V)("features/join-team/document/identity",{initialState:$.LOADING})(Z=(0,B.yN)("features:join-team:document")(Z=(0,f.RR)("features/http","features/context/request","features/context/team","navigator")((H=(U=class{constructor(e,t,r,n){this.http=e,this.request=t,this.team=r,this.navigator=n}async onEnter(){if(await this.team.load(),this.team.isGlobal||!this.request.get("redirectTo"))return this.navigator.goTo("sign-in");const e=await this.http.get("/auth-api/join-team/document-settings").then((e=>e.data));if(!W()(e,"allowPublicLinkAccess",!1))return this.navigator.goTo("sign-in");this.transition($.LOADED)}}).prototype,K="onEnter",Y=[b.aD],X=Object.getOwnPropertyDescriptor(U.prototype,"onEnter"),J=U.prototype,Q={},Object.keys(X).forEach((function(e){Q[e]=X[e]})),Q.enumerable=!!Q.enumerable,Q.configurable=!!Q.configurable,("value"in Q||Q.initializer)&&(Q.writable=!0),Q=Y.slice().reverse().reduce((function(e,t){return t(H,K,e)||e}),Q),J&&void 0!==Q.initializer&&(Q.value=Q.initializer?Q.initializer.call(J):void 0,Q.initializer=void 0),void 0===Q.initializer&&(Object.defineProperty(H,K,Q),Q=null),Z=U))||Z)||Z);var H,K,Y,X,J,Q,ee;var te,re=(0,g.ls)("features/join-team/document/identity")(ee=class extends y().Component{render(){const{store:e,onSuccess:t,onError:r}=this.props;return{[$.LOADED]:y().createElement(V,{onSuccess:t,onError:r}),[$.LOADING]:y().createElement(G.Z,null)}[e.state]}})||ee,ne=r(45203),ie=r(68611),oe=r(17921),ae=r(48031),se=r(36050);var le=(0,g.ls)("features/join-team/document")(te=class extends y().Component{render(){const{store:e}=this.props;return{[C.IDENTIFY]:y().createElement(re,{onSuccess:e.handleIdentified}),[C.ACCOUNT_MISSING]:y().createElement(ne.Z,{onSuccess:e.handleComplete}),[C.ACCOUNT_WITHOUT_PASSWORD]:y().createElement(oe.Z,{onSuccess:e.handleComplete}),[C.MEMBER]:y().createElement(ae.ZP,{email:e.email}),[C.SAML_SUCCESS]:y().createElement(z.Z,{action:e.samlSuccess},y().createElement(G.Z,null)),[C.SIGN_IN_TO_CONTINUE]:y().createElement(ie.Z,{onSuccess:e.handleComplete}),[C.SIGN_IN_SUCCESS]:y().createElement(se.Z,{onboard:!1})}[e.state]||y().createElement(G.Z,null)}})||te},96990:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(16624),i=r.n(n),o=(r(5720),r(8130));class a extends i().PureComponent{render(){const{onSuccess:e=(()=>{}),onError:t=(()=>{})}=this.props;return i().createElement(o.Z,{onSuccess:e,onError:t})}}var s=a},41901:function(e,t,r){"use strict";r.d(t,{Z:function(){return ke}});var n,i,o,a,s,l,c,p,u,d,m,h,y,g=r(16624),b=r.n(g),f=r(5260),E=r(64267),v=r(59549),O=r(75415),w=r(32837),S=r(28511),D=r(64870),I=r.n(D),C=r(94446),T=r(20643),P=r.n(T),A=r(79684),_=r.n(A),N=r(4427),R=r.n(N);function k(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const z=(0,w.kg)("features:join-team:approved-domains"),j={ACCOUNT_WITHOUT_PASSWORD:Symbol("Approved Domains: Account Without Password"),MEMBER:Symbol("Approved Domains: Member"),REQUIRE_MFA:Symbol("Approved Domains: MFA Setup Required"),SAML_SUCCESS:Symbol("Approved Domains: SAML Success"),SELF_INVITE:Symbol("Approved Domains: Self-Invite"),SELF_INVITE_SENT:Symbol("Approved Domains: Self-Invite Sent"),SIGN_IN_TO_CONTINUE:Symbol("Approved Domains: Account With Password"),SIGN_IN_SUCCESS:Symbol("Approved Domains: Account With Password"),LOCKED_TEAM:Symbol("Approved Domains: Locked Team"),LOADING:Symbol("Approved Domains: Loading"),TEAM_SELECTED:Symbol("Approved Domains: Team Selected")};n=(0,w.yN)("features:join-team:approved-domains"),i=(0,f._V)("features/join-team/approved-domains",{initialState:j.LOADING}),o=(0,v.RR)("features/join-team/api","features/context/request","features/context/team","features/http","features/notification","navigator"),a=(0,S.UO)({flow:"ApprovedDomains"}),s=E.aD.bound,l=E.aD.bound,c=E.aD.bound,p=E.aD.bound,u=E.aD.bound,d=E.aD.bound,m=E.aD.bound,n(h=i(h=o(h=a((k((y=class{constructor(e,t,r,n,i,o){this.api=e,this.request=t,this.team=r,this.http=n,this.notification=i,this.navigator=o,this.token=this.request.get("token"),this.api.setToken(this.token)}get selectedTeam(){return this.team.current}handleComplete(){this.transition(j.SIGN_IN_SUCCESS)}async onEnter(){if(await this.team.load(),this.team.isLocked)return this.transition(j.LOCKED_TEAM);if(this.request.get("entry")===O.LH.SUCCESS)return this.transition(j.SAML_SUCCESS);const e=P()(this.team,"openEnrollment.enabled",!1),{token:t}=this;return!e||this.team.isGlobal?this.navigator.goTo("sign-in"):t?void this.http.get("/auth-api/join-team",{params:{token:t,joinType:_().OPEN_ENROLLMENT}}).then(this.onSuccess,this.onError):this.transition(j.SELF_INVITE)}onTransition({nextState:e}){switch(e){case j.MEMBER:this.notification.notify(C.Z[I().JOIN_TEAM_EXISTING_MEMBER],"info")}}async onSuccess(e){const{data:t}=e;if(t.user.isMember)return this.transition(j.MEMBER);if(R()(t,"user.role","member"),this.api.setJoinType(_().OPEN_ENROLLMENT),this.api.setJoinData(t),await this.team.load(),this.team.samlInfo.enabled)return this.transition(j.SIGN_IN_TO_CONTINUE);if(t.user.isAuthenticated){await this.api.ensureToken();try{await this.api.confirmJoin()}catch(e){const{response:t}=e;if(P()(t,"data.errorCode")===I().MFA_CONFIGURATION_REQUIRED)return this.transition(j.REQUIRE_MFA);throw e}return this.transition(j.TEAM_SELECTED)}return t.user.hasAccount?t.user.hasPassword?this.transition(j.SIGN_IN_TO_CONTINUE):this.transition(j.ACCOUNT_WITHOUT_PASSWORD):void 0}onError(e){return z(`Error validating OE token: ${this.inviteToken}`,e),this.navigator.goTo("sign-in")}async samlSuccess(){await this.api.samlSuccess(),this.handleComplete()}async handleMFAConfigSuccess(){return this.transition(j.TEAM_SELECTED)}async handleMFAConfigError(){this.notification.notify(I().SERVER_ERROR),this.navigator.goTo("sign-in")}}).prototype,"selectedTeam",[E.Fl],Object.getOwnPropertyDescriptor(y.prototype,"selectedTeam"),y.prototype),k(y.prototype,"handleComplete",[s],Object.getOwnPropertyDescriptor(y.prototype,"handleComplete"),y.prototype),k(y.prototype,"onEnter",[E.aD],Object.getOwnPropertyDescriptor(y.prototype,"onEnter"),y.prototype),k(y.prototype,"onTransition",[l],Object.getOwnPropertyDescriptor(y.prototype,"onTransition"),y.prototype),k(y.prototype,"onSuccess",[c],Object.getOwnPropertyDescriptor(y.prototype,"onSuccess"),y.prototype),k(y.prototype,"onError",[p],Object.getOwnPropertyDescriptor(y.prototype,"onError"),y.prototype),k(y.prototype,"samlSuccess",[u],Object.getOwnPropertyDescriptor(y.prototype,"samlSuccess"),y.prototype),k(y.prototype,"handleMFAConfigSuccess",[d],Object.getOwnPropertyDescriptor(y.prototype,"handleMFAConfigSuccess"),y.prototype),k(y.prototype,"handleMFAConfigError",[m],Object.getOwnPropertyDescriptor(y.prototype,"handleMFAConfigError"),y.prototype),h=y))||h)||h)||h);var x,L,M,F,Z,U,V,G,q=r(6895),W=r(17921),B=r(47714),$=r(5013),H=r(77877);function K(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Y={SELF_INVITE:Symbol("SELF_INVITE"),SELF_INVITE_SENT:Symbol("SELF_INVITE_SENT")};x=(0,f._V)("features/join-team/approved-domains/self-invite",{initialState:Y.SELF_INVITE}),L=(0,w.yN)("features:join-team:approved-domains:self-invite"),M=(0,v.RR)("features/analytics","features/context/team","features/notification","navigator"),F=E.aD.bound,Z=E.aD.bound,U=E.aD.bound,x(V=L(V=M((K((G=class{constructor(e,t,r,n){this.analytics=e,this.teamContext=t,this.notification=r,this.navigator=n}handleGoBack(){this.transition(Y.SELF_INVITE)}handleClose(){this.navigator.goTo("sign-in")}handleSuccess(){this.transition(Y.SELF_INVITE_SENT)}}).prototype,"handleGoBack",[F],Object.getOwnPropertyDescriptor(G.prototype,"handleGoBack"),G.prototype),K(G.prototype,"handleClose",[Z],Object.getOwnPropertyDescriptor(G.prototype,"handleClose"),G.prototype),K(G.prototype,"handleSuccess",[U],Object.getOwnPropertyDescriptor(G.prototype,"handleSuccess"),G.prototype),V=G))||V)||V);var X,J=r(81772),Q=r(25817),ee=r(59953),te=r(8502),re=r(87860);let ne=(0,v.f3)("features/context/team")(X=class extends b().Component{render(){const{flowStore:e,"features/context/team":t}=this.props;return b().createElement(te.Z,{flowStore:e},b().createElement(ie,null,b().createElement(J.Z,{bottom:"m"},b().createElement($.Ir,{name:null==t?void 0:t.current.name,src:null==t?void 0:t.current.logo})),b().createElement(Q.Z,{align:"center",element:"h1",order:"title",size:"smaller"},"Keep an eye out"),b().createElement(Q.Z,{align:"center",element:"p",order:"body"},"Your ",P()(e,"teamContext.name")," invite is headed to your inbox.",b().createElement("br",null),"Don't see one? Check your spam folder or ",b().createElement(ee.Z,{onClick:e.handleGoBack},"go back")," and try again.")))}})||X;const ie=re.ZP.div.withConfig({displayName:"InviteSent__StyledDiv",componentId:"sc-1lga3su-0"})(["margin:0 auto;max-width:580px;width:97%;"]);var oe,ae,se,le,ce,pe,ue=ne,de=r(73683),me=r(50650),he=r(88104);function ye(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}oe=(0,he.oe)("features/join-team/approved-domains/form/self-invite"),ae=(0,v.RR)("features/analytics","features/context/team","features/http","features/join-team/approved-domains/self-invite","features/context/request"),se=E.aD.bound,oe(le=ae((pe=ye((ce=class{constructor(e,t,r,n,i){var o,a,s,l;o=this,a="submitting",l=this,(s=pe)&&Object.defineProperty(o,a,{enumerable:s.enumerable,configurable:s.configurable,writable:s.writable,value:s.initializer?s.initializer.call(l):void 0}),this.analytics=e,this.team=t,this.http=r,this.flowStore=n,this.request=i}get approvedDomains(){var e,t,r;return null!==(e=null===(t=this.team)||void 0===t||null===(r=t.openEnrollment)||void 0===r?void 0:r.domains)&&void 0!==e?e:[]}async submit(e){if(this.submitting)return;this.submitting=!0;const t=e.email,r=t.split("@")[1];try{this.trackSubmitted(r);const e=this.request.get("redirectTo");this.inviteID=await this.http.post("/auth-api/team/invite-self",{withCredentials:!1,data:{email:t,redirectTo:e},errorKey:"global"}),this.trackSuccess()}catch(e){throw this.trackFailure(),e}finally{(0,E.z)((()=>{this.submitting=!1}))}}track(e,t={}){this.analytics.track(S.zW.SELF_INVITE,e,{...t})}trackViewed(){this.track(S.p$.VIEWED,{teamId:this.team.id})}trackSubmitted(e){this.track(S.p$.SUBMITTED,{emailDomain:e,teamId:this.team.id})}trackSuccess(){this.track(S.p$.SUCCEEDED)}trackFailure(){this.track(S.p$.FAILED)}}).prototype,"submitting",[E.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ye(ce.prototype,"approvedDomains",[E.Fl],Object.getOwnPropertyDescriptor(ce.prototype,"approvedDomains"),ce.prototype),ye(ce.prototype,"submit",[se],Object.getOwnPropertyDescriptor(ce.prototype,"submit"),ce.prototype),le=ce))||le);var ge,be=r(41899),fe=r(80733),Ee=r(76069),ve=r(56217),Oe=r(95714),we=r(95708),Se=r(22074);var De,Ie=(0,he.ei)("features/join-team/approved-domains/form/self-invite")(ge=(0,v.f3)("features/context/team")(ge=(0,Ee.Pi)(ge=class extends b().Component{componentDidMount(){const{store:e}=this.props;e.trackViewed()}render(){var e;const{flowStore:t,store:r,onSuccess:n=(()=>{}),onError:i=(()=>{}),"features/context/team":o}=this.props,{submitting:a}=r;return b().createElement(te.Z,{flowStore:t},b().createElement(we.Z,{title:`Join ${o.name}`,subtitle:b().createElement(J.Z,{top:"xs"},b().createElement(Q.Z,{order:"body",size:"larger",align:"center",element:"div"},"Enter your email address ending in ",b().createElement(Se.$y,{domains:r.approvedDomains,enabled:!0}),", ",(null===(e=r.approvedDomains)||void 0===e?void 0:e.length)>5&&b().createElement(Se.DL,{domains:r.approvedDomains,enabled:!0})," and we'll send you an invite to the team."))},b().createElement(fe.l0,{"data-component":"self-invite-form",submit:e=>r.submit(e).then(n,i),disabled:a},b().createElement(ve.Z,null),b().createElement(Oe.Z,{requestKey:"global"}),b().createElement(be.GT,{id:"self_invite_email",label:"Email address",name:"email",tabIndex:"0"}),b().createElement(be.k4,null,a?"Submitting...":"Continue"))))}})||ge)||ge)||ge;var Ce,Te=(0,f.ls)("features/join-team/approved-domains/self-invite")(De=class extends b().Component{render(){const{store:e}=this.props;return b().createElement(me.Z,{stores:[e.teamContext],loading:b().createElement(de.Z,null)},b().createElement(B.wC.A,null,b().createElement(B.h4.SK,{withTooltip:!1,withBackground:!1}),b().createElement(B.h4.x8,{onClick:e.handleClose}),b().createElement(H.Z,{horizontal:"center",vertical:"center"},{[Y.SELF_INVITE]:b().createElement(Ie,{flowStore:e,onSuccess:e.handleSuccess}),[Y.SELF_INVITE_SENT]:b().createElement(ue,{flowStore:e})}[e.state])))}})||De,Pe=r(68611),Ae=r(48031),_e=r(36050),Ne=r(96990),Re=r(9343);var ke=(0,f.ls)("features/join-team/approved-domains")(Ce=class extends b().Component{render(){const{store:e}=this.props;return{[j.ACCOUNT_WITHOUT_PASSWORD]:b().createElement(W.Z,{onSuccess:e.handleComplete}),[j.MEMBER]:b().createElement(Ae.ZP,{email:e.email}),[j.REQUIRE_MFA]:b().createElement(B.wC.A,{"data-component":"2fa-setup"},b().createElement(Ne.Z,{onSuccess:e.handleMFAConfigSuccess,onError:e.handleMFAConfigError})),[j.SAML_SUCCESS]:b().createElement(q.Z,{action:e.samlSuccess},b().createElement($.gb,null)),[j.SELF_INVITE]:b().createElement(Te,null),[j.SIGN_IN_TO_CONTINUE]:b().createElement(Pe.Z,{onSuccess:e.handleComplete}),[j.SIGN_IN_SUCCESS]:b().createElement(_e.Z,null),[j.LOCKED_TEAM]:b().createElement(B.wC.A,{"data-component":"team-sign-in"},b().createElement(B.h4.SK,{withBackground:!1}),b().createElement($.nY,null)),[j.LOADING]:b().createElement($.gb,null),[j.TEAM_SELECTED]:b().createElement(Re.c,{team:e.selectedTeam})}[e.state]||null}})||Ce},17921:function(e,t,r){"use strict";r.d(t,{Z:function(){return q}});var n,i,o,a,s,l,c=r(16624),p=r.n(c),u=r(59549),d=r(5013),m=r(47714),h=r(76262),y=r(79684),g=r.n(y),b=r(95708),f=r(16720),E=r(88104),v=r(64267),O=r(28511);function w(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n=(0,E.oe)("features/join-team/form/password"),i=(0,u.RR)("features/analytics","features/context/team","features/join-team/api"),o=v.aD.bound,a=v.aD.bound,n(s=i((w((l=class{constructor(e,t,r){this.analytics=e,this.teamContext=t,this.api=r}get team(){return this.teamContext.current}viewed(){this.analytics.track(O.zW.CREATE_PASSWORD,O.p$.VIEWED)}async submit(e){const t={email:e.email,name:e.name,password:e.password,marketingOptOut:e.marketingOptOut||!1};return this.analytics.track(O.zW.CREATE_PASSWORD,O.p$.SUBMITTED,{success:!0}),t}}).prototype,"team",[v.Fl],Object.getOwnPropertyDescriptor(l.prototype,"team"),l.prototype),w(l.prototype,"viewed",[o],Object.getOwnPropertyDescriptor(l.prototype,"viewed"),l.prototype),w(l.prototype,"submit",[a],Object.getOwnPropertyDescriptor(l.prototype,"submit"),l.prototype),s=l))||s);var S;var D,I,C,T,P,A,_,N,R=(0,E.ei)("features/join-team/form/password")(S=class extends p().Component{componentDidMount(){this.props.store.viewed()}getSubtitle(){const{store:e}=this.props;return e.api.joinType===g().INVITATION?p().createElement("span",null,"Your InVision account currently uses Single Sign-On.",p().createElement("br",null),"Please add a password to accept the invitation."):p().createElement("span",null,"Your InVision account currently uses Single Sign-On.  To join and collaborate with ",p().createElement("b",null,e.team.name),", you'll need to add a password.")}render(){const{store:e,email:t,passwordPolicy:r,onSubmit:n=(()=>{}),onError:i=(()=>{})}=this.props;return p().createElement(b.Z,{title:"Add a password",subtitle:this.getSubtitle()},p().createElement(f.Z,{onSubmit:t=>e.submit(t).then(n,i),submitText:"Join team",email:t,emailDisplayed:!0,policy:r}))}})||S,k=r(20643),z=r.n(k),j=r(50703),x=r(5260),L=r(64870),M=r.n(L),F=r(75415);function Z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const U={LOADING:Symbol("LOADING"),VERIFY_EMAIL:Symbol("VERIFY_EMAIL"),CREATE_PASSWORD:Symbol("CREATE_PASSWORD"),REQUIRE_MFA:Symbol("REQUIRE MFA")};D=(0,x._V)("features/join-team/account-without-password",{initialState:U.LOADING}),I=(0,u.RR)("features/join-team/api","features/analytics","features/context/team","features/context/user","features/notification","navigator"),C=v.aD.bound,T=v.aD.bound,P=v.aD.bound,A=v.aD.bound,D(_=I((Z((N=class{constructor(e,t,r,n,i,o){this.api=e,this.analytics=t,this.teamContext=r,this.user=n,this.notification=i,this.navigator=o}get team(){return this.teamContext.current}get passwordPolicy(){return j.Z.from(this.team.passwordPolicy)}track(e,t={}){this.analytics.track(O.zW.CREATE_PASSWORD,e,{...t})}async emailVerified(e,{email:t,token:r}){e.emailVerified({email:t,token:r}),this.transition(U.CREATE_PASSWORD)}async join(e,{password:t},r=(()=>{})){this.transition(U.LOADING),e.passwordCreated({password:t});try{await this.api.confirmJoin(F.xl.ACCOUNT_WITHOUT_PASSWORD)}catch(e){const{response:t}=e;if(z()(t,"data.errorCode")===M().MFA_CONFIGURATION_REQUIRED)return this.transition(U.REQUIRE_MFA);throw e}await this.success().then(r)}async success(){await this.api.ensureV7Session()&&(await this.analytics.identify(this.user.analyticsID,{email:this.user.email}),await this.track(O.p$.SUCCEEDED))}onEnter(){this.api.joinType===g().DOCUMENT_LINK?this.transition(U.VERIFY_EMAIL):this.transition(U.CREATE_PASSWORD)}async handleMFAConfigError(){this.notification.notify(M().SERVER_ERROR),this.navigator.goTo("sign-in")}}).prototype,"team",[v.Fl],Object.getOwnPropertyDescriptor(N.prototype,"team"),N.prototype),Z(N.prototype,"passwordPolicy",[v.Fl],Object.getOwnPropertyDescriptor(N.prototype,"passwordPolicy"),N.prototype),Z(N.prototype,"emailVerified",[C],Object.getOwnPropertyDescriptor(N.prototype,"emailVerified"),N.prototype),Z(N.prototype,"join",[T],Object.getOwnPropertyDescriptor(N.prototype,"join"),N.prototype),Z(N.prototype,"success",[P],Object.getOwnPropertyDescriptor(N.prototype,"success"),N.prototype),Z(N.prototype,"handleMFAConfigError",[A],Object.getOwnPropertyDescriptor(N.prototype,"handleMFAConfigError"),N.prototype),_=N))||_);var V,G=r(96990);var q=(0,u.f3)("features/join-team/api")(V=(0,x.ls)("features/join-team/account-without-password")(V=class extends p().Component{render(){const{store:e,"features/join-team/api":t,onError:r=(()=>{}),onSuccess:n=(()=>{})}=this.props,i={[U.CREATE_PASSWORD]:p().createElement(R,{email:t.user.email,passwordPolicy:e.passwordPolicy,onSubmit:i=>e.join(t,i,n).catch(r)}),[U.VERIFY_EMAIL]:p().createElement(h.Z,{id:"document_signup_email",email:t.user.email,team:e.team,isClosing:e.transitioning,onClose:()=>e.transitionComplete(),onSuccess:r=>e.emailVerified(t,r)}),[U.REQUIRE_MFA]:p().createElement(G.Z,{onSuccess:()=>e.success().then(n),onError:e.handleMFAConfigError})}[e.state]||p().createElement(d.gb,null);return p().createElement(m.wC.A,null,p().createElement(m.h4.SK,null),i)}})||V)||V},45203:function(e,t,r){"use strict";r.d(t,{Z:function(){return re}});var n=r(16624),i=r.n(n),o=r(59549),a=r(79684),s=r.n(a),l=r(73683),c=r(47714);var p,u,d,m,h,y,g,b,f,E={toPossessive:e=>/s$/i.test(e)?`${e}'`:`${e}'s`},v=r(76262),O=r(5260),w=r(20643),S=r.n(w),D=r(64267),I=r(28511),C=r(50703),T=r(32837),P=r(64870),A=r.n(P),_=r(75415);function N(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const R={VERIFY_EMAIL:Symbol("VERIFY_EMAIL"),CREATE_ACCOUNT:Symbol("CREATE_ACCOUNT"),REQUIRE_MFA:Symbol("REQUIRE MFA")};p=(0,O._V)("features/join-team/no-account",{initialState:R.LOADING}),u=(0,T.yN)("features:join-team:no-account"),d=(0,o.RR)("features/analytics","features/context/team","features/context/user","features/join-team/api","features/notification","features/tracking","navigator"),m=D.aD.bound,h=D.aD.bound,y=D.aD.bound,g=D.aD.bound,p(b=u(b=d((N((f=class{constructor(e,t,r,n,i,o,a){this.analytics=e,this.teamContext=t,this.user=r,this.api=n,this.notification=i,this.navigator=a,this.tracking=o}track(e,t={}){this.analytics.track(I.zW.CREATE_ACCOUNT,e,{...t})}get team(){return this.teamContext.current}get passwordPolicy(){return C.Z.from(this.team.passwordPolicy)}emailVerified(e,{email:t,token:r}){e.emailVerified({email:t,token:r}),this.transition(R.CREATE_ACCOUNT)}async submit(e,{name:t,role:r,password:n,marketingOptOut:i},o=(()=>{})){e.accountCreated({name:t,password:n,role:r,marketingOptOut:i}),this.transition(R.LOADING);try{await this.api.confirmJoin(_.xl.ACCOUNT_MISSING)}catch(e){const{response:t}=e;if(S()(t,"data.errorCode")===A().MFA_CONFIGURATION_REQUIRED)return this.transition(R.REQUIRE_MFA);throw e}return this.success().then(o)}onEnter(){var e,t;this.tracking.load({thirdParty:null===(e=this.tracking)||void 0===e||null===(t=e.thirdParties)||void 0===t?void 0:t.BIZIBLE}),this.api.joinType===s().DOCUMENT_LINK?this.transition(R.VERIFY_EMAIL):this.transition(R.CREATE_ACCOUNT)}async success(){await this.api.ensureV7Session()&&await this.track(I.p$.SUCCEEDED)}async handleMFAConfigError(){this.notification.notify(A().SERVER_ERROR),this.navigator.goTo("sign-in")}}).prototype,"team",[D.Fl],Object.getOwnPropertyDescriptor(f.prototype,"team"),f.prototype),N(f.prototype,"passwordPolicy",[D.Fl],Object.getOwnPropertyDescriptor(f.prototype,"passwordPolicy"),f.prototype),N(f.prototype,"emailVerified",[m],Object.getOwnPropertyDescriptor(f.prototype,"emailVerified"),f.prototype),N(f.prototype,"submit",[h],Object.getOwnPropertyDescriptor(f.prototype,"submit"),f.prototype),N(f.prototype,"success",[y],Object.getOwnPropertyDescriptor(f.prototype,"success"),f.prototype),N(f.prototype,"handleMFAConfigError",[g],Object.getOwnPropertyDescriptor(f.prototype,"handleMFAConfigError"),f.prototype),b=f))||b)||b);var k,z,j,x,L,M,F,Z,U=r(88104),V=r(81281);function G(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}k=(0,U.oe)("features/join-team/document/form/account"),z=(0,o.RR)("features/context/request","features/http","features/toggles","features/analytics"),j=D.aD.bound,x=D.aD.bound,L=D.aD.bound,k(M=z((Z=G((F=class{constructor(e,t,r,n){var i,o,a,s;i=this,o="roleEntry",s=this,(a=Z)&&Object.defineProperty(i,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(s):void 0}),this.request=e,this.http=t,this.toggles=r,this.analytics=n}async onEnter({props:e}){const t=await this.http.get(`/auth-meta/flags/${V.vU.FREE_HAND_TEAM_ROLE_COLLECTION.ID}`,{params:{inviteToken:this.request.get("inviteToken"),doc:this.request.get("redirectTo"),email:e.email}}).catch((()=>({data:{value:!1}})));this.roleEntry=S()(t,"data.value")}viewed(){this.analytics.track(I.zW.CREATE_ACCOUNT,I.p$.VIEWED)}async submit(e){const t={email:e.email,name:e.name,password:e.password,role:e.role,marketingOptOut:e.marketingOptOut||!1};return this.analytics.track(I.zW.CREATE_ACCOUNT,I.p$.SUBMITTED,{success:!0}),t}}).prototype,"roleEntry",[D.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G(F.prototype,"onEnter",[j],Object.getOwnPropertyDescriptor(F.prototype,"onEnter"),F.prototype),G(F.prototype,"viewed",[x],Object.getOwnPropertyDescriptor(F.prototype,"viewed"),F.prototype),G(F.prototype,"submit",[L],Object.getOwnPropertyDescriptor(F.prototype,"submit"),F.prototype),M=F))||M);var q,W=r(41899),B=r(80733),$=r(81772),H=r(74591),K=r(66025),Y=r(95708),X=r(9729),J=r(66313);var Q,ee=(0,U.ei)("features/join-team/document/form/account")(q=class extends i().Component{componentDidMount(){this.props.store.viewed()}render(){const{store:e,email:t,name:r,passwordPolicy:n,marketingOptOut:o,title:a,subtitle:s,submitText:l,onSuccess:c,onError:p=(()=>{})}=this.props;return i().createElement(Y.Z,{title:a,subtitle:s},i().createElement(B.l0,{"data-component":"join-team-create-account-form",submit:t=>e.submit(t).then(c,p)},i().createElement(K.Z,{policy:n}),i().createElement(W.GT,{id:"create_account_email",name:"email",label:"Email address",defaultValue:t,autoComplete:"username",disabled:!0}),i().createElement(W.xv,{id:"create_account_name",name:"name",label:"Name",autoFocus:!0,defaultValue:r,autoComplete:"name",tabIndex:"1"}),e.roleEntry?i().createElement(J.J6,{name:"role",label:"Your role",placeholder:"Select your role"}):null,i().createElement(W.ro,{id:"create_account_password",name:"password",label:"Password",policy:n,autoComplete:"password",tabIndex:"2"}),i().createElement(H.Z,{compact:"true",id:"signup_marketing_opt_out",name:"marketingOptOut",value:o,tabIndex:"3"}),i().createElement($.Z,{bottom:"l"},i().createElement(W.k4,null,l)),i().createElement(X.Z,{actionText:`clicking "${l}"`})))}})||q,te=r(96990);var re=(0,o.f3)("features/join-team/api")(Q=(0,O.ls)("features/join-team/no-account")(Q=class extends i().Component{getSubtitle(){const{"features/join-team/api":e,store:t}=this.props;return e.joinType===s().DOCUMENT_LINK?i().createElement("span",null,"We'll send you directly to ",i().createElement("b",null,E.toPossessive(t.team.name))," document from here."):""}getTitle(){const{"features/join-team/api":e,store:t}=this.props;return e.joinType===s().DOCUMENT_LINK?"Sign up for InVision":`Sign up to accept the invitation and join ${t.team.name}`}render(){const{"features/join-team/api":e,store:t,name:r,onError:n=(()=>{}),onSuccess:o=(()=>{})}=this.props,a=r=>t.submit(e,r,o).catch(n),s=()=>t.success().then(o);switch(t.state){case R.CREATE_ACCOUNT:return i().createElement(c.wC.A,null,i().createElement(c.h4.SK,{withTooltip:!1,withBackground:!1}),i().createElement(ee,{title:this.getTitle(),subtitle:this.getSubtitle(),email:e.user.email,name:r,passwordPolicy:t.passwordPolicy,submitText:"Sign up",onSuccess:a}));case R.REQUIRE_MFA:return i().createElement(c.wC.A,null,i().createElement(te.Z,{onSuccess:s,onError:t.handleMFAConfigError}));case R.LOADING:return i().createElement(l.Z,null);case R.VERIFY_EMAIL:default:return i().createElement(c.wC.A,null,i().createElement(c.h4.SK,{withTooltip:!1,withBackground:!1}),i().createElement(v.Z,{id:"document_signup_email",email:e.user.email,team:t.team,isClosing:t.transitioning,onClose:()=>t.transitionComplete(),onSuccess:(...r)=>t.emailVerified(e,...r)}))}}})||Q)||Q},75415:function(e,t,r){"use strict";r.d(t,{xl:function(){return o},LH:function(){return a},ZT:function(){return s}});var n=r(79684),i=r.n(n);const o={ACCOUNT_MISSING:"Account Missing",ACCOUNT_WITHOUT_PASSWORD:"Account Without Password",SIGN_IN_TO_CONTINUE:"Sign in to Continue"},a={SUCCESS:"success"},s={[i().DOCUMENT_LINK]:"/auth/join-team/document",[i().INVITATION]:"/auth/join-team/invite",[i().OPEN_ENROLLMENT]:"/auth/join-team/open-enrollment"}},98715:function(e,t,r){"use strict";r.d(t,{Ko:function(){return oe}});var n,i,o,a,s,l,c,p,u,d,m=r(20643),h=r.n(m),y=r(64267),g=r(59549),b=r(28511),f=r(32837),E=r(66313),v=r(81281),O=r(19277),w=r(75415),S=r(21490),D=r(64870),I=r.n(D),C=r(12020),T=r(79684),P=r.n(T);function A(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const N=(0,f.kg)("features:join-team");n=(0,g.En)("features/join-team/api"),i=(0,g.RR)("features/analytics","features/context/client","features/context/request","features/context/team","features/context/user","features/http","features/sign-in/api","features/tracking/marketo","navigator"),o=y.aD.bound,a=y.aD.bound,s=y.aD.bound,n(l=(0,g.ri)(l=i((p=_((c=class{constructor(e,t,r,n,i,o,a,s,l){A(this,"joinData",p,this),A(this,"joinType",u,this),A(this,"user",d,this),this.emailClaims=null,this.inviteToken=null,this.joinClaims=null,this.token=null,this.analytics=e,this.client=t,this.request=r,this.team=n,this.userContext=i,this.http=o,this.signInApi=a,this.navigator=l,this.marketo=s}accountCreated({name:e,role:t,password:r,marketingOptOut:n=!1}){this.user.name=e,this.user.password=r,this.user.role=t,this.marketingOptOut=n}get isFreehandSeat(){return 3===this.user.seatTypeID}async confirmJoin(e){try{switch(await this.ensureToken(),e){case w.xl.ACCOUNT_MISSING:await this.ensureAccount(),await this.ensureSession();break;case w.xl.ACCOUNT_WITHOUT_PASSWORD:await this.ensurePassword(),await this.ensureSession()}const t={joinType:this.joinType,token:this.joinClaims,inviteToken:this.inviteToken},r=await this.http.post("/auth-api/join-team/confirm-join",{data:t,errorKey:"global",errorMap:{417:()=>({data:{errorCode:I().MFA_CONFIGURATION_REQUIRED}})}});this.analytics.track(b.zW.USER_JOIN,b.p$.SUCCEEDED,{teamId:this.team.id,role:O.RoleNames[h()(r,"data.role","")]})}catch(e){const{response:t}=e;throw h()(t,"data.errorCode")===I().MFA_CONFIGURATION_REQUIRED?this.analytics.track(b.zW.USER_JOIN,b.p$.SUCCEEDED,{teamId:this.team.id,role:O.RoleNames[h()(t,"data.role","")]}):this.analytics.track(b.zW.USER_JOIN,b.p$.FAILED,{teamId:this.team.id}),e}}emailVerified({email:e,token:t}){if(this.user.email!==e)throw new Error("The verified email doesn't match the input email");this.emailClaims=t}async ensureAccount(){const{role:e}=this.user,t={joinType:this.joinType,name:this.user.name,password:this.user.password,token:this.joinClaims,marketingOptOut:this.marketingOptOut,role:e},r=await this.http.post("/auth-api/join-team/create-account",{data:t,withCredentials:!0,errorKey:"global",timeout:3e3}).then((e=>e.data));this.marketo.submit({userId:r.vendorID,email:this.user.email,name:this.user.name,marketingOptOut:this.marketingOptOut}),this.setUserID({id:h()(r,"id")});const n=h()(r,"vendorID")||this.user.id,i=v.vU.FREE_HAND_TEAM_ROLE_COLLECTION,o={...(0,E._t)({variantId:this.isForFreehand?Boolean(e):i.DEFAULT,experiment:i,role:e}),opt_out:this.marketingOptOut,email:h()(r,"profile.email",this.user.email),name:h()(r,"profile.name",this.user.name),date:h()(r,"createdAt",Date.now())};await this.analytics.identify(n,o,{integrations:{Marketo:!1,"Marketo V2":!1}})}async ensurePassword(){const e={joinType:this.joinType,userID:this.user.id,password:this.user.newPassword,token:this.joinClaims};await this.http.post("/auth-api/join-team/set-password",{data:e,withCredentials:!0,errorKey:"global",timeout:3e3})}async ensureSession(){const{email:e,isAuthenticated:t,password:r}=this.user;if(t&&this.joinType===P().OPEN_ENROLLMENT)return;const n=this.client.isEmbedded?{withcookie:"true"}:{};await this.http.post("/login-api/api/v2/login",{data:{deviceID:S.Z.WEB,email:e,password:r},maxRedirects:0,params:n,withCredentials:!0,errorKey:"global",errorMap:C.Z.SignInV2({team:!0,log:N})});const{jwt:i}=await this.http.post("/auth-api/session/jwt").then((e=>e.data));i&&this.userContext.usingAuthToken(i)}async ensureToken(){if(this.joinClaims)return;const e={inviteToken:this.inviteToken?this.inviteToken:void 0,joinType:this.joinType,token:this.emailClaims||this.token||void 0};this.emailClaims||this.inviteToken||this.token||(e.user={...this.user,password:h()(this.userContext,"credentials.password",void 0)}),this.joinClaims=await this.http.post("/auth-api/join-team/authorize",{data:e,errorKey:"global",errorMap:{401:()=>({data:{errorCode:I().SIGN_IN_UNAUTHORIZED}})}}).then((e=>h()(e,"data.token")))}async ensureV7Session(){try{return await this.userContext.load(),!0}catch(e){return N("V7 user session is invalid: %s",e.message),this.navigator.goTo("/auth/sign-in"),!1}}get role(){switch(this.joinType){case P().DOCUMENT_LINK:return O.RoleNames[O.MemberRoles.GUEST];case P().OPEN_ENROLLMENT:return O.RoleNames[O.MemberRoles.MEMBER];case P().INVITATION:return h()(this,"user.role","unknown");default:return"unknown"}}passwordCreated({password:e}){this.user.password=e,this.user.newPassword=e}async samlSuccess(){N("Join team sign in to continue complete"),await this.userContext.load(),await this.analytics.identify(this.userContext.analyticsID,{email:this.userContext.email}),this.signInApi.track(b.p$.SUCCEEDED,{teamId:this.team.id,role:this.request.get("role")||"unknown"}),this.analytics.track(b.zW.USER_JOIN,b.p$.SUCCEEDED,{teamId:this.team.id,role:this.request.get("role")||"unknown"})}setJoinData(e){this.joinData=e,this.user=e.user}setInviteToken(e){this.inviteToken=e}setToken(e){this.token=e}setJoinType(e){this.joinType=e}setUserID({id:e}){this.user.id=e}signInWith({password:e}){this.user.password=e}}).prototype,"joinData",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=_(c.prototype,"joinType",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P().OPEN_ENROLLMENT}}),d=_(c.prototype,"user",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{id:null,email:null}}}),_(c.prototype,"accountCreated",[y.aD],Object.getOwnPropertyDescriptor(c.prototype,"accountCreated"),c.prototype),_(c.prototype,"confirmJoin",[y.aD],Object.getOwnPropertyDescriptor(c.prototype,"confirmJoin"),c.prototype),_(c.prototype,"emailVerified",[y.aD],Object.getOwnPropertyDescriptor(c.prototype,"emailVerified"),c.prototype),_(c.prototype,"ensureAccount",[y.aD],Object.getOwnPropertyDescriptor(c.prototype,"ensureAccount"),c.prototype),_(c.prototype,"ensureSession",[o],Object.getOwnPropertyDescriptor(c.prototype,"ensureSession"),c.prototype),_(c.prototype,"ensureToken",[a],Object.getOwnPropertyDescriptor(c.prototype,"ensureToken"),c.prototype),_(c.prototype,"role",[y.Fl],Object.getOwnPropertyDescriptor(c.prototype,"role"),c.prototype),_(c.prototype,"passwordCreated",[y.aD],Object.getOwnPropertyDescriptor(c.prototype,"passwordCreated"),c.prototype),_(c.prototype,"samlSuccess",[s],Object.getOwnPropertyDescriptor(c.prototype,"samlSuccess"),c.prototype),_(c.prototype,"setJoinData",[y.aD],Object.getOwnPropertyDescriptor(c.prototype,"setJoinData"),c.prototype),_(c.prototype,"setInviteToken",[y.aD],Object.getOwnPropertyDescriptor(c.prototype,"setInviteToken"),c.prototype),_(c.prototype,"setToken",[y.aD],Object.getOwnPropertyDescriptor(c.prototype,"setToken"),c.prototype),_(c.prototype,"setJoinType",[y.aD],Object.getOwnPropertyDescriptor(c.prototype,"setJoinType"),c.prototype),_(c.prototype,"setUserID",[y.aD],Object.getOwnPropertyDescriptor(c.prototype,"setUserID"),c.prototype),_(c.prototype,"signInWith",[y.aD],Object.getOwnPropertyDescriptor(c.prototype,"signInWith"),c.prototype),l=c))||l)||l);r(65346),r(41901);var R,k,z,j,x,L,M,F,Z,U,V,G=r(16624),q=r.n(G),W=r(5260),B=r(94446);function $(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const H=(0,f.kg)("features:join-team:invite"),K={ACCOUNT_MISSING:Symbol("Invites: Account Missing"),ACCOUNT_WITHOUT_PASSWORD:Symbol("Invites: Account w/o Password"),MEMBER:Symbol("Invites: Member"),LOADING:Symbol("Invites: Loading"),SAML_SUCCESS:Symbol("Invites: SAML Success"),SIGN_IN_TO_CONTINUE:Symbol("Invites: Sign in to Continue"),SIGN_IN_SUCCESS:Symbol("Invites: Sign in Success"),LOCKED_TEAM:Symbol("Invites: Locked Team")};R=(0,f.yN)("features:join-team:invite"),k=(0,W._V)("features/join-team/invite",{initialState:K.LOADING}),z=(0,g.RR)("features/http","features/context/request","features/context/team","features/notification","features/join-team/api","navigator","route"),j=(0,b.UO)({flow:"AcceptInvite"}),x=y.aD.bound,L=y.aD.bound,M=y.aD.bound,F=y.aD.bound,Z=y.aD.bound,R(U=k(U=z(U=j(($((V=class{constructor(e,t,r,n,i,o,a){this.http=e,this.request=t,this.team=r,this.notification=n,this.api=i,this.navigator=o,this.route=a;const s=this.request.get("name");if(s)try{this.name=window.atob(s)}catch(e){}}handleComplete(){this.transition(K.SIGN_IN_SUCCESS)}async onError(e){return H(`Error checking invite ${this.inviteToken}`,e),404===h()(e,"response.status")&&setTimeout((()=>{this.notification.notify(B.Z[v.SM.INVALID_INVITATION])}),0),this.navigator.goTo("sign-in")}async onSuccess(e){const t=this.team.samlInfo.enabled,{data:r}=e;return r.user.isMember?this.transition(K.MEMBER):(this.api.setJoinType(v.ND.INVITATION),this.api.setJoinData(r),t?this.joinWithSSO(r.user):this.joinWithPassword(r.user))}joinWithSSO(e){return this.team.useAltAuth?this.joinWithPassword(e):this.transition(K.SIGN_IN_TO_CONTINUE)}joinWithPassword(e){return e.hasAccount?e.hasPassword?this.transition(K.SIGN_IN_TO_CONTINUE):this.transition(K.ACCOUNT_WITHOUT_PASSWORD):this.transition(K.ACCOUNT_MISSING)}async onEnter(){var e;return await this.team.load(),this.team.isLocked?this.transition(K.LOCKED_TEAM):this.request.get("entry")===w.LH.SUCCESS?this.transition(K.SAML_SUCCESS):(this.inviteToken=null!==(e=h()(this.route,"params.inviteToken"))&&void 0!==e?e:this.request.get("inviteToken"),!this.inviteToken||this.team.isGlobal?this.navigator.goTo("sign-in"):(this.api.setInviteToken(this.inviteToken),void this.http.get("/auth-api/join-team",{params:{inviteToken:this.inviteToken,joinType:v.ND.INVITATION}}).then(this.onSuccess,this.onError)))}onTransition({nextState:e}){switch(e){case K.MEMBER:this.notification.notify(B.Z[v.SM.JOIN_TEAM_EXISTING_MEMBER],"info")}}async samlSuccess(){await this.api.samlSuccess(),this.handleComplete()}}).prototype,"handleComplete",[x],Object.getOwnPropertyDescriptor(V.prototype,"handleComplete"),V.prototype),$(V.prototype,"onError",[L],Object.getOwnPropertyDescriptor(V.prototype,"onError"),V.prototype),$(V.prototype,"onSuccess",[M],Object.getOwnPropertyDescriptor(V.prototype,"onSuccess"),V.prototype),$(V.prototype,"onTransition",[F],Object.getOwnPropertyDescriptor(V.prototype,"onTransition"),V.prototype),$(V.prototype,"samlSuccess",[Z],Object.getOwnPropertyDescriptor(V.prototype,"samlSuccess"),V.prototype),U=V))||U)||U)||U);var Y,X=r(6895),J=r(45203),Q=r(17921),ee=r(47714),te=r(5013),re=r(68611),ne=r(48031),ie=r(36050);var oe=(0,W.ls)("features/join-team/invite")(Y=class extends q().Component{render(){const{store:e}=this.props;return{[K.ACCOUNT_MISSING]:q().createElement(J.Z,{name:e.name,onSuccess:e.handleComplete}),[K.ACCOUNT_WITHOUT_PASSWORD]:q().createElement(Q.Z,{onSuccess:e.handleComplete}),[K.LOADING]:q().createElement(te.gb,null),[K.MEMBER]:q().createElement(ne.ZP,{email:e.email}),[K.SAML_SUCCESS]:q().createElement(X.Z,{action:e.samlSuccess},q().createElement(te.gb,null)),[K.SIGN_IN_TO_CONTINUE]:q().createElement(re.Z,{onSuccess:e.handleComplete}),[K.SIGN_IN_SUCCESS]:q().createElement(ie.Z,null),[K.LOCKED_TEAM]:q().createElement(ee.wC.A,{"data-component":"team-sign-in"},q().createElement(ee.h4.SK,{withBackground:!1}),q().createElement(te.nY,null))}[e.state]||null}})||Y},68611:function(e,t,r){"use strict";r.d(t,{Z:function(){return _e}});var n,i,o,a,s,l,c=r(16624),p=r.n(c),u=r(64267),d=r(5260),m=r(59549),h=r(5013),y=r(47714),g=r(28511),b=r(81281),f=r(91587),E=r(59953),v=r(88104),O=r(79684),w=r.n(O),S=r(87860);function D(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n=(0,v.oe)("features/join-team/sign-in-to-continue/password-entry"),i=(0,m.RR)("features/context/team","features/join-team/api","navigator"),o=u.aD.bound,n(a=i((D((s=class{constructor(e,t,r){this.team=e,this.api=t,this.nav=r}onInit({props:e}){this.handleNotifyForgotPassword=e.onForgotPassword||(()=>{})}get email(){var e,t;return(null==this||null===(e=this.api)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.email)||""}get subtitle(){return this.api.joinType===w().INVITATION?"Sign in to your existing InVision account to accept the invitation.":`Sign in to your current InVision account, and we'll add you to ${this.team.name}.`}}).prototype,"onInit",[o],Object.getOwnPropertyDescriptor(s.prototype,"onInit"),s.prototype),D(s.prototype,"email",[u.Fl],Object.getOwnPropertyDescriptor(s.prototype,"email"),s.prototype),a=s))||a);let I=(0,v.ei)("features/join-team/sign-in-to-continue/password-entry")(l=class extends p().Component{render(){const{store:e,renderForm:t}=this.props;return p().createElement(p().Fragment,null,p().createElement(h.Ir,{name:e.team.name,src:e.team.logo}),p().createElement(h.X6,{align:"center",heading:"Welcome back!",subheading:e.subtitle}),t({passwordHelper:p().createElement(C,{type:"button",order:"tertiary",onClick:e.handleNotifyForgotPassword},"Forgot your password?"),email:e.email}))}})||l;const C=(0,S.ZP)(E.Z).withConfig({displayName:"PasswordEntry__HelperLink",componentId:"mk0j0y-0"})(["position:absolute;top:0;right:0;font-size:12px;"]);var T,P,A,_,N,R,k,z,j,x,L=I,M=r(57741),F=r(48526),Z=r(50081),U=r(96990),V=r(20643),G=r.n(V),q=r(52867),W=r.n(q),B=r(64870),$=r.n(B),H=r(32837),K=r(75415);function Y(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const X=(0,H.kg)("features:join-team:sign-in-to-continue"),J={LOADING:Symbol("Loading"),FORGOT_PASSWORD:Symbol("Forgot Password"),REQUIRE_MFA:Symbol("Require MFA"),SIGN_IN:Symbol("Sign In")};T=(0,d._V)("features/join-team/sign-in-to-continue/password",{initialState:J.SIGN_IN}),P=(0,m.RR)("features/sign-in/api","features/analytics","features/context/team","features/context/user","features/join-team/api","features/notification","features/toggles","navigator","window"),A=u.aD.bound,_=u.aD.bound,N=u.aD.bound,R=u.aD.bound,k=u.aD.bound,z=u.aD.bound,T(j=P((Y((x=class{constructor(e,t,r,n,i,o,a,s,l){this.signInApi=e,this.analytics=t,this.team=r,this.user=n,this.api=i,this.navigator=s,this.notification=o,this.toggles=a,this.window=l}track(e,t={}){const r={[W().EMAIL]:"password",[W().SAML]:"saml"}[this.team.type]||"unknown";this.signInApi.track(e,{authenticationType:r,...t})}handleAuthenticate(){this.transition(J.SIGN_IN)}handleForgotPassword(){this.transition(J.FORGOT_PASSWORD)}async complete(e=(()=>{})){this.transition(J.LOADING);try{await this.api.confirmJoin(K.xl.SIGN_IN_TO_CONTINUE)}catch(e){const{response:t}=e;if(G()(t,"data.errorCode")===$().MFA_CONFIGURATION_REQUIRED)return this.transition(J.REQUIRE_MFA);throw e}await this.success().then(e)}async success(){await this.signInApi.ensureV7Session()&&(await this.analytics.identify(this.user.analyticsID,{email:G()(this,"api.user.email",""),date:Date.now(),userId:G()(this,"api.user.id","")}),await this.track(g.p$.SUCCEEDED))}handleFailure(e){const t=G()(e,"response.data.errorCode");X("Sign in to continue failed: (%o) %s",t,e.message),this.track(g.p$.FAILED,{errorCode:t}),this.transition(J.SIGN_IN)}async handleMFAConfigError(){this.notification.notify($().SERVER_ERROR),this.navigator.goTo("sign-in")}}).prototype,"handleAuthenticate",[A],Object.getOwnPropertyDescriptor(x.prototype,"handleAuthenticate"),x.prototype),Y(x.prototype,"handleForgotPassword",[_],Object.getOwnPropertyDescriptor(x.prototype,"handleForgotPassword"),x.prototype),Y(x.prototype,"complete",[N],Object.getOwnPropertyDescriptor(x.prototype,"complete"),x.prototype),Y(x.prototype,"success",[R],Object.getOwnPropertyDescriptor(x.prototype,"success"),x.prototype),Y(x.prototype,"handleFailure",[k],Object.getOwnPropertyDescriptor(x.prototype,"handleFailure"),x.prototype),Y(x.prototype,"handleMFAConfigError",[z],Object.getOwnPropertyDescriptor(x.prototype,"handleMFAConfigError"),x.prototype),j=x))||j);var Q,ee=r(90660);var te,re,ne,ie=(0,d.ls)("features/join-team/sign-in-to-continue/password")(Q=class extends p().Component{render(){const{store:e,onSuccess:t=(()=>{})}=this.props,r={[J.FORGOT_PASSWORD]:p().createElement(F.Z,{onBack:e.handleAuthenticate}),[J.SIGN_IN]:p().createElement(p().Fragment,null,p().createElement(M.Z,{renderEntryForm:t=>p().createElement(L,{renderForm:t,onForgotPassword:e.handleForgotPassword}),renderUpdateForm:(e,{transaction:t})=>p().createElement(Z.Z,{renderForm:e,transaction:t}),renderMFAForm:(e,{transaction:t})=>p().createElement(f.Z,{renderForm:e,transaction:t}),onSuccess:()=>e.complete(t),onError:e.handleFailure}),p().createElement(h.$_.Ar,{"data-component":"sign-in-footer"})),[J.REQUIRE_MFA]:p().createElement(U.Z,{onSuccess:()=>e.success().then(t),onError:e.handleMFAConfigError})}[e.state]||p().createElement(h.gb,null);return p().createElement(ee.ur,{stores:e.team},r)}})||Q,oe=r(96130);function ae(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}(0,v.oe)("features/join-team/sign-in-to-continue/saml/prompt")(te=(0,m.RR)("features/context/team")((ae((re=class{constructor(e){this.team=e}get samlTitles(){const{current:e}=this.team;return{title:`Sign up to join ${e.name}`,subtitle:"For added security, this team requires Single Sign-On (SSO) to sign up"}}get name(){return this.team.name}get logo(){return this.team.logo}}).prototype,"samlTitles",[u.Fl],Object.getOwnPropertyDescriptor(re.prototype,"samlTitles"),re.prototype),ae(re.prototype,"name",[u.Fl],Object.getOwnPropertyDescriptor(re.prototype,"name"),re.prototype),ae(re.prototype,"logo",[u.Fl],Object.getOwnPropertyDescriptor(re.prototype,"logo"),re.prototype),te=re))||te);var se,le,ce,pe,ue,de=(0,v.ei)("features/join-team/sign-in-to-continue/saml/prompt")(ne=class extends p().Component{render(){const{store:e,render:t}=this.props,{samlTitles:r}=e;return p().createElement(p().Fragment,null,p().createElement(h.Ir,{name:e.name,src:e.logo}),p().createElement(h.X6,{align:"center",heading:r.title,subheading:r.subtitle}),t({buttonLabel:"Sign up with SSO"}))}})||ne;function me(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const he=(0,H.kg)("features:sign-in");se=(0,d._V)("features/join-team/sign-in-to-continue/saml"),le=(0,m.RR)("features/sign-in/api","features/analytics","features/context/request","features/context/team","features/context/user","features/join-team/api","features/sign-in/api","features/toggles","window"),ce=u.aD.bound,se(pe=le((me((ue=class{constructor(e,t,r,n,i,o,a,s,l){this.api=e,this.analytics=t,this.request=r,this.team=n,this.user=i,this.joinTeamApi=o,this.signInApi=a,this.toggles=s,this.window=l}onEnter(){this.request.query.set("role",this.joinTeamApi.role)}get reentryPath(){return K.ZT[this.joinTeamApi.joinType]}track(e,t={}){const r={[W().EMAIL]:"password",[W().SAML]:"saml"}[this.team.type]||"unknown";this.signInApi.track(e,{authenticationType:r,...t})}failure(e){const t=G()(e,"response.data.errorCode");he("Sign in to continue failed: (%o) %s",t,e.message),this.track(g.p$.FAILED,{errorCode:t})}}).prototype,"reentryPath",[u.Fl],Object.getOwnPropertyDescriptor(ue.prototype,"reentryPath"),ue.prototype),me(ue.prototype,"failure",[ce],Object.getOwnPropertyDescriptor(ue.prototype,"failure"),ue.prototype),pe=ue))||pe);var ye;var ge,be,fe,Ee,ve,Oe,we=(0,d.ls)("features/join-team/sign-in-to-continue/saml")(ye=class extends p().Component{render(){const{onSuccess:e=(()=>{}),onError:t=(()=>{}),store:r}=this.props;return p().createElement(oe.Z,{reentryPath:r.reentryPath,renderPrompt:e=>p().createElement(de,{titles:r.samlTitles,render:e}),onSuccess:e,onError:t})}})||ye;const Se={LOADING:Symbol("Loading"),SIGN_IN_WITH_PASSWORD:Symbol("Password Sign In"),SIGN_IN_WITH_SAML:Symbol("SAML Sign In")};ge=(0,d._V)("features/join-team/sign-in-to-continue",{initialState:Se.LOADING}),be=(0,m.RR)("features/context/team","features/join-team/api","features/sign-in/api"),fe=u.aD.bound,ge(Ee=be((De=(ve=class{constructor(e,t,r){this.team=e,this.joinTeamApi=t,this.signInApi=r}async onEnter(){const{joinType:e}=this.joinTeamApi;return this.team.type===b.$u.EMAIL||e===b.ND.INVITATION&&this.team.useAltAuth?this.transition(Se.SIGN_IN_WITH_PASSWORD):this.transition(Se.SIGN_IN_WITH_SAML)}async onLoad(){await this.team.load()}async viewed(){const e=this.team.type===b.$u.EMAIL||this.team.useAltAuth?"password":"saml";this.signInApi.track(g.p$.VIEWED,{authenticationType:e})}}).prototype,Ie="viewed",Ce=[fe],Te=Object.getOwnPropertyDescriptor(ve.prototype,"viewed"),Pe=ve.prototype,Ae={},Object.keys(Te).forEach((function(e){Ae[e]=Te[e]})),Ae.enumerable=!!Ae.enumerable,Ae.configurable=!!Ae.configurable,("value"in Ae||Ae.initializer)&&(Ae.writable=!0),Ae=Ce.slice().reverse().reduce((function(e,t){return t(De,Ie,e)||e}),Ae),Pe&&void 0!==Ae.initializer&&(Ae.value=Ae.initializer?Ae.initializer.call(Pe):void 0,Ae.initializer=void 0),void 0===Ae.initializer&&(Object.defineProperty(De,Ie,Ae),Ae=null),Ee=ve))||Ee);var De,Ie,Ce,Te,Pe,Ae;var _e=(0,d.ls)("features/join-team/sign-in-to-continue")(Oe=class extends p().Component{componentDidMount(){this.props.store.viewed()}render(){const{store:e,onSuccess:t=(()=>{})}=this.props;return{[Se.SIGN_IN_WITH_PASSWORD]:p().createElement(y.wC.A,{"data-component":"team-sign-in"},p().createElement(ie,{onSuccess:t})),[Se.SIGN_IN_WITH_SAML]:p().createElement(y.wC.A,{"data-component":"team-sign-in"},p().createElement(we,{onSuccess:t})),[Se.LOADING]:p().createElement(h.gb,null)}[e.state]}})||Oe},86953:function(e,t,r){"use strict";var n=r(16624),i=r.n(n),o=r(3074),a=r.n(o),s=r(48743);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}class c extends i().Component{render(){let{order:e,speed:t,fillMode:r,isVisible:n,slideDown:o,children:a,...c}=this.props;return e=e||(o?"drop-in-top":"drop-in-bottom"),t=t||"medium",r=r||"both",n?i().createElement(s.Z,l({order:e,speed:t,fillMode:r,easing:"in-out"},c),a):null}}c.propTypes={children:a().any,isVisible:a().bool,slideDown:a().bool.isRequired},c.defaultProps={isVisible:!0,slideDown:!1},t.Z=c},8502:function(e,t,r){"use strict";var n,i,o,a,s=r(16624),l=r.n(s),c=r(64267),p=r(76069),u=r(3074),d=r.n(u),m=r(87860);let h=(0,p.Pi)((a=class extends l().Component{constructor(...e){var t,r,n,i;super(...e),t=this,r="open",i=this,(n=o)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0}),this.displayedComponent=null}componentDidMount(){this.timerMount=setTimeout((()=>{(0,c.z)((()=>{this.open=!0}))}),1)}componentWillUnmount(){this.timerMount&&clearTimeout(this.timerMount)}transition(e){if(!this.timerID&&e){const t=this.props.duration||500;this.timerID=setTimeout((()=>{delete this.timerID,e()}),t)}}render(){const{children:e,flowStore:t}=this.props,{transitioning:r,transitionComplete:n}=t;r?this.transition(n):this.displayedComponent=e;const i=`${this.open?"open":""} ${r?"isClosing":""}`;return l().createElement(O,{className:i},this.displayedComponent)}},y=(i=a).prototype,g="open",b=[c.LO],f={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}},v={},Object.keys(f).forEach((function(e){v[e]=f[e]})),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=b.slice().reverse().reduce((function(e,t){return t(y,g,e)||e}),v),E&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(E):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(y,g,v),v=null),o=v,n=i))||n;var y,g,b,f,E,v;h.propTypes={duration:d().number,children:d().node,flowStore:d().shape({transitioning:d().bool.isRequired,transitionComplete:d().func})},h.defaultProps={transitioning:!1,transitionComplete:()=>{}};const O=m.ZP.div.withConfig({displayName:"FlowTransition__Wrapper",componentId:"sc-1edxhhk-0"})(["opacity:0;transform:translate3d(0px,20px,0px);transition:all ","ms cubic-bezier(0.64,0.04,0.35,1);width:100%;&.open{opacity:1;transform:translate3d(0px,0px,0px);}&.isClosing{opacity:0;transform:translate3d(0px,0px,0px);}"],700);t.Z=h},62360:function(e,t,r){"use strict";r.d(t,{VY:function(){return T},Ar:function(){return I},Ei:function(){return P}});var n,i,o,a,s,l,c,p,u,d=r(16624),m=r.n(d),h=r(64267),y=r(25817),g=r(87860),b=r(59549),f=r(88104);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function O(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n=(0,f.oe)("components/footer",{lifecycle:b.ri}),i=h.aD.bound,o=h.aD.bound,a=h.aD.bound,n((c=O((l=class{constructor(){v(this,"content",c,this),v(this,"options",p,this)}get hasContent(){return!!this.content}show(e){this.content=e}hide(){this.content=null}updateOptions(e){this.options=e}}).prototype,"content",[h.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=O(l.prototype,"options",[h.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{forceRender:!1}}}),O(l.prototype,"hasContent",[h.Fl],Object.getOwnPropertyDescriptor(l.prototype,"hasContent"),l.prototype),O(l.prototype,"show",[i],Object.getOwnPropertyDescriptor(l.prototype,"show"),l.prototype),O(l.prototype,"hide",[o],Object.getOwnPropertyDescriptor(l.prototype,"hide"),l.prototype),O(l.prototype,"updateOptions",[a],Object.getOwnPropertyDescriptor(l.prototype,"updateOptions"),l.prototype),s=l));let w=(0,f.ei)("components/footer")(u=class extends m().Component{render(){const{store:e,className:t}=this.props;return e.content?m().createElement(S,{options:e.options,"data-component":"footer",className:t},e.content):null}})||u;const S=(0,g.ZP)((({options:e,...t})=>m().createElement(y.Z,E({order:"body",size:"smaller"},t)))).withConfig({displayName:"Layout__Footer",componentId:"sc-1bektcb-0"})(['[data-client-embedded="true"] &{display:',";}position:fixed;bottom:0;left:0;width:100%;padding:",";border-top:1px solid ",";background-color:white;text-align:center;box-sizing:border-box;@media (min-width:600px){box-sizing:content-box;margin-left:-16px;}"],(({options:e})=>e.forceRender?"block":"none"),(({theme:e})=>`${e.spacing.m} ${e.spacing.s}`),(({theme:e})=>e.palette.structure.lighter));var D,I=w;var C,T=(0,b.f3)("components/footer")(D=class extends m().PureComponent{componentDidMount(){const{"components/footer":e,children:t}=this.props;e.show(t)}componentWillUnmount(){const{"components/footer":e}=this.props;e.hide()}render(){return null}})||D;var P=(0,b.f3)("components/footer")(C=class extends m().PureComponent{componentDidMount(){const{"components/footer":e,forceRender:t=!1}=this.props;this.oldOptions=e.options||{},e.updateOptions({forceRender:t})}componentWillUnmount(){const{"components/footer":e}=this.props;e.updateOptions(this.oldOptions)}render(){return null}})||C},73683:function(e,t,r){"use strict";var n=r(16624),i=r.n(n),o=r(26330),a=r(64952);const s=(0,r(87860).ZP)(o.Z).withConfig({displayName:"Loading__PositionCenter",componentId:"sc-18u6uvu-0"})(["width:100%;height:100%;"]);t.Z=()=>i().createElement(s,{justifyContent:"center",alignItems:"center"},i().createElement(a.Z,{"data-component":"loading"}))},66025:function(e,t,r){"use strict";var n=r(16624),i=r.n(n),o=r(81772),a=r(50902);t.Z=({policy:e})=>(null==e?void 0:e.message)?i().createElement(o.Z,{bottom:"l"},i().createElement(a.Z,{status:"info"},null==e?void 0:e.message)):null},9729:function(e,t,r){"use strict";var n,i=r(16624),o=r.n(i),a=r(59549),s=r(59953),l=r(25817);let c=(0,a.f3)("features/context/geolocation")(n=class extends o().PureComponent{get geolocation(){return this.props["features/context/geolocation"]}getPrivacyLink(){return o().createElement(o().Fragment,null," and ",o().createElement(s.Z,{element:"a",href:"https://www.invisionapp.com/privacy",order:"secondary",target:"_blank",rel:"noreferrer"},"Privacy Policy"),".")}render(){const{actionText:e,override:t,align:r,size:n}=this.props,i=this.geolocation.underGDPR();return o().createElement(l.Z,{align:r||"center",color:"text-lighter",order:"body",size:n},"By ",i||t?e:"signing up",", I agree to InVision's"," ",o().createElement(s.Z,{element:"a",href:"https://www.invisionapp.com/terms",order:"secondary",target:"_blank",rel:"noreferrer"},"Terms of Service"),i?".":this.getPrivacyLink())}})||n;t.Z=c},5013:function(e,t,r){"use strict";r.d(t,{So:function(){return we},kb:function(){return Ce},jj:function(){return Re},dL:function(){return xe},$_:function(){return s},rN:function(){return Ze},Jr:function(){return Ue},X6:function(){return Xe},Q0:function(){return n},aV:function(){return i},gb:function(){return Je.Z},Z9:function(){return nt},ox:function(){return ht},nY:function(){return At},TX:function(){return ft},Ew:function(){return _t.Z},Zr:function(){return o},c6:function(){return vt},Ir:function(){return Dt},Fe:function(){return It.Z},FN:function(){return a},Yt:function(){return Pt}});var n={};r.r(n),r.d(n,{Ar:function(){return b},eB:function(){return N}});var i={};r.r(i),r.d(i,{A:function(){return G},v:function(){return Q}});var o={};r.r(o),r.d(o,{Z:function(){return re}});var a={};r.r(a),r.d(a,{V:function(){return fe},A:function(){return ge}});var s=r(62360),l=r(16624),c=r.n(l),p=r(48743),u=r(81772),d=r(77877),m=r(87860);class h extends c().PureComponent{render(){const{action:e,children:t,heading:r,subheading:n}=this.props;return c().createElement(y,null,c().createElement(p.Z,{"data-component":"illustration",order:"simple-fade-in",fillMode:"forwards"},c().createElement(u.Z,{bottom:"m"},t),(r||n)&&c().createElement(Xe,{align:"center",heading:r,subheading:n}),e&&c().createElement(d.Z,{horizontal:"center"},e)))}}const y=m.ZP.div.withConfig({displayName:"Layout__IllustrationContainer",componentId:"sc-1elcpfn-0"})(["@media (max-width:","px){h1{font-size:1.25rem;}h2{font-size:0.9rem;}svg{display:block;margin:0 auto;max-width:50%;}}"],(({theme:e})=>e.breakpoints.s));var g,b=h,f=r(59549),E=r(97674);(0,f.f3)("history")(g=class extends c().PureComponent{render(){const{history:e}=this.props;return c().createElement(E.KM,{onClick:t=>{t.preventDefault(),e.goBack()}},"Back")}});var v;var O,w,S,D,I,C,T,P,A,_,N=(0,f.f3)("window")(v=class extends c().PureComponent{render(){const{window:e}=this.props;return c().createElement(E.KM,{onClick:t=>{t.preventDefault(),e.location.reload()}},"Try Again")}})||v,R=r(33626),k=r.n(R),z=r(7426),j=r(25817),x=r(64267),L=r(57819),M=r(5260);function F(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Z(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const U={EMPTY:Symbol("List: Empty"),ERROR:Symbol("List: Error"),LOADING:Symbol("List: Loading"),LOADED:Symbol("List: Loaded"),SINGLE:Symbol("List: Single")};O=(0,M._V)("layout/components/list",{initialState:U.LOADING}),w=x.aD.bound,S=x.aD.bound,D=x.aD.bound,I=x.aD.bound,O((P=Z((T=class{constructor(){F(this,"error",P,this),F(this,"items",A,this)}setError(e){this.error=e}setItems(e){this.items=e}async onEnter({props:e}){this.load(e.items)}async load(e){let t=e;try{switch(this.transition(U.LOADING),t=await Promise.resolve(k()(e)?e():e),this.setItems(t),t.length){case 0:return this.transition(U.EMPTY);case 1:return this.transition(U.SINGLE);default:return this.transition(U.LOADED)}}catch(e){this.setError(e),this.transition(U.ERROR)}}}).prototype,"error",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=Z(T.prototype,"items",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z(T.prototype,"setError",[w],Object.getOwnPropertyDescriptor(T.prototype,"setError"),T.prototype),Z(T.prototype,"setItems",[S],Object.getOwnPropertyDescriptor(T.prototype,"setItems"),T.prototype),Z(T.prototype,"onEnter",[D],Object.getOwnPropertyDescriptor(T.prototype,"onEnter"),T.prototype),Z(T.prototype,"load",[I],Object.getOwnPropertyDescriptor(T.prototype,"load"),T.prototype),C=T));const V={renderEmpty:()=>c().createElement("h1",null,"Empty"),renderItem:(e,t)=>c().createElement("div",{key:t},e.toString()),renderList(e,t){var r;return t=null!==(r=t)&&void 0!==r?r:V.renderItem,e.map(t)},renderLoader:e=>c().createElement(z.Z,{height:55},e)};var G=(0,M.ls)("layout/components/list")(_=class extends c().Component{render(){var e,t,r,n,i,o;const{store:a,subtitle:s,onError:l=(()=>{})}=this.props,p=null!==(e=this.props.renderLoader)&&void 0!==e?e:V.renderLoader,d=null!==(t=this.props.renderEmpty)&&void 0!==t?t:V.renderEmpty,m=null!==(r=this.props.renderItem)&&void 0!==r?r:V.renderItem,h=null!==(n=this.props.renderList)&&void 0!==n?n:V.renderList,y=null!==(i=this.props.renderSingle)&&void 0!==i?i:h,g=null!==(o=this.props.renderError)&&void 0!==o?o:()=>c().createElement(L.W,{action:l}),b=({[U.EMPTY]:()=>d(),[U.ERROR]:()=>g(a.err),[U.LOADED]:()=>h(a.items,m),[U.SINGLE]:()=>y(a.items,m)}[a.state]||(()=>p()))();return c().createElement(u.Z,{vertical:"s"},s&&c().createElement(j.Z,{key:"subtitle",order:"subtitle"},s),b)}})||_,q=r(15082),W=r(47552),B=r(94002);class $ extends c().PureComponent{render(){const{team:e,onClick:t,action:r,className:n}=this.props;return c().createElement(H,{"data-component":"team-card",align:"left",onClick:()=>t(e),className:n},c().createElement(K,{color:"dark",name:e.name,order:"team",src:e.logo}),c().createElement(J,null,c().createElement(X,{"data-component":"team-name",order:"subtitle",color:"text-darker"},e.name),c().createElement(X,{"data-component":"team-domain",order:"subtitle",size:"smallest",color:"info"},e.host||e.domain)),c().createElement(Y,{order:"tertiary",size:"smaller",element:"span"},r||"Select"))}}const H=(0,m.ZP)(q.Z).withConfig({displayName:"TeamCard__Team",componentId:"sc-1wwoekv-0"})(["width:100%;display:flex;align-items:center;padding:",";margin-bottom:",";box-sizing:border-box;cursor:pointer;text-decoration:none;"],(({theme:e})=>e.spacing.m),(({theme:e})=>e.spacing.s)),K=(0,m.ZP)(W.Z).withConfig({displayName:"TeamCard__TeamAvatar",componentId:"sc-1wwoekv-1"})(["margin-right:",";"],(({theme:e})=>e.spacing.s)),Y=(0,m.ZP)(B.Z).withConfig({displayName:"TeamCard__TeamButton",componentId:"sc-1wwoekv-2"})(["margin-left:auto;"]),X=(0,m.ZP)(j.Z).withConfig({displayName:"TeamCard__TruncatedText",componentId:"sc-1wwoekv-3"})(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),J=m.ZP.div.withConfig({displayName:"TeamCard__TeamDetails",componentId:"sc-1wwoekv-4"})(["flex:1 1 auto;margin-right:20px;width:0;"]);var Q=$,ee=r(97653);function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function re({title:e,subtitle:t,action:r,...n}){return c().createElement(q.Z,te({element:"div"},n),c().createElement(d.Z,{vertical:"center",horizontal:"space-between"},c().createElement("div",null,c().createElement(j.Z,{order:"subtitle",align:"left"},e),c().createElement(ee.Z,{top:"xs"},c().createElement(j.Z,{order:"body",align:"left",color:"text-lighter"},t))),c().createElement(ne,{order:"tertiary",size:"smaller",element:"span"},r)))}const ne=(0,m.ZP)(B.Z).withConfig({displayName:"Card__CardAction",componentId:"sc-13009lk-0"})(["width:20%;"]);var ie,oe,ae,se,le,ce,pe,ue=r(88692),de=r(88104);function me(){return(me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function he(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}ie=(0,de.oe)("components/toast",{lifecycle:f.ri}),oe=x.aD.bound,ae=x.aD.bound,ie((ce=he((le=class{constructor(){var e,t,r,n;e=this,t="toast",n=this,(r=ce)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}show(e){this.toast=e}hide(){this.toast=null}}).prototype,"toast",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he(le.prototype,"show",[oe],Object.getOwnPropertyDescriptor(le.prototype,"show"),le.prototype),he(le.prototype,"hide",[ae],Object.getOwnPropertyDescriptor(le.prototype,"hide"),le.prototype),se=le));var ye,ge=(0,de.ei)("components/toast")(pe=class extends c().Component{render(){const{store:e,...t}=this.props;if(!e.toast)return null;const{children:r,status:n}=e.toast;return c().createElement(ue.Z,me({status:n,placement:"top-center"},t),r)}})||pe;var be,fe=(0,f.f3)("components/toast")(ye=class extends c().PureComponent{componentDidMount(){const{"components/toast":e,...t}=this.props;e.show({...t})}componentWillUnmount(){const{"components/toast":e}=this.props;e.hide()}render(){return null}})||ye,Ee=r(76069);function ve(){return(ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const Oe=m.ZP.div.withConfig({displayName:"ClientOverrides__Styled",componentId:"bp8nag-0"})(["width:100%;height:100%;",""],(({client:e})=>e.isEmbedded?(0,m.iv)(["& [data-client-hidden]{visibility:hidden;}& [data-embed-hidden]{visibility:hidden;}"]):""));var we=(0,f.f3)("features/context/client")(be=(0,Ee.Pi)(be=class extends c().Component{render(){const{"features/context/client":e,children:t,...r}=this.props;return c().createElement(Oe,ve({"data-component":"client-overrides","data-client-type":e.type,"data-client-version":e.version,"data-client-build":e.build,"data-client-embedded":e.isEmbedded,client:e},r),t)}})||be)||be,Se=r(12348);const De=(0,m.ZP)(Se.Collapse).withConfig({displayName:"DropAndFade__StyledCollapse",componentId:"sc-18pen0t-0"})(["opacity:",";transition:opacity 0.12s linear;"],(({isOpened:e})=>e?1:0)),Ie=(0,m.ZP)(Se.UnmountClosed).withConfig({displayName:"DropAndFade__StyledUnmountClosed",componentId:"sc-18pen0t-1"})(["opacity:",";transition:opacity 0.12s linear;"],(({isOpened:e})=>e?1:0));var Ce=({unmount:e,children:t,...r})=>{const n=e?Ie:De;return c().createElement(n,r,t)},Te=r(59953),Pe=r(71133),Ae=r.n(Pe),_e=r(47714);class Ne extends c().PureComponent{render(){return c().createElement(_e.wC.A,null,c().createElement(b,{action:c().createElement(N,null),heading:"Something went wrong.",subheading:c().createElement(j.Z,null,"If the problem persists, please contact"," ",c().createElement(Te.Z,{href:"mailto://support@invisionapp.com"},"support@invisionapp.com"))},c().createElement(Ae(),null)))}}var Re=Ne,ke=r(25064);(0,m.ZP)(ke.Z).withConfig({displayName:"ExternalButton__ExternalLinkIcon",componentId:"sc-1hu9l7q-0"})(["color:",";margin-left:-5px;margin-bottom:-10px;"],(({theme:e})=>e.palette.text.white));const ze=(0,m.ZP)(ke.Z).withConfig({displayName:"ExternalLink__ExternalLinkIcon",componentId:"sc-1g6mglh-0"})(["color:",";margin-left:-8px;margin-bottom:-12px;"],(({theme:e})=>e.palette.tertiary.regular));var je,xe=({onClick:e,children:t})=>c().createElement(Te.Z,{onClick:t=>{t.preventDefault(),e()}},t,c().createElement(ze,null)),Le=r(96497),Me=r.n(Le);var Fe,Ze=(0,f.f3)("history")(je=class extends c().PureComponent{handleOnClick(e){e.preventDefault(),this.props.history.goBack()}render(){return c().createElement(_e.wC.A,{"data-component":"not-authorized"},c().createElement(Me(),null),c().createElement(Xe,{heading:"Forbidden.",align:"center"}),c().createElement(d.Z,{horizontal:"center"},c().createElement(E.KM,{onClick:e=>this.handleOnClick(e)},"Back")))}})||je;var Ue=(0,f.f3)("features/context/geolocation")(Fe=class extends c().PureComponent{get geolocation(){return this.props["features/context/geolocation"]}render(){var e;const{children:t}=this.props,r=null!==(e=this.props.visible)&&void 0!==e?e:()=>this.geolocation.underGDPR();return(k()(r)?r(this.geolocation):!!r)?t:null}})||Fe;const Ve=m.ZP.div.withConfig({displayName:"Heading__HeadingWrapper",componentId:"junqdu-0"})(["margin-bottom:",";"],(({theme:e})=>e.spacing.l)),Ge=(0,m.ZP)(j.Z).withConfig({displayName:"Heading__Head",componentId:"junqdu-1"})(["margin-bottom:",";"],(({theme:e})=>e.spacing.xs)),qe=(0,m.ZP)(j.Z).withConfig({displayName:"Heading__SubHead",componentId:"junqdu-2"})(["margin-bottom:0;"]);var We,Be,$e,He,Ke,Ye,Xe=({heading:e,subheading:t,align:r,className:n})=>c().createElement(Ve,{className:n},e&&c().createElement(Ge,{"data-component":"heading",element:"h1",order:"title",size:"smaller",align:r},e),t&&c().createElement(qe,{"data-component":"subheading",element:"h2",order:"body",size:"larger",align:r},t)),Je=r(73683),Qe=r(62145),et=r(55291);function tt(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const rt=(0,r(32837).kg)("loading-complete");We=(0,de.oe)("loading-complete"),Be=x.aD.bound,We((Ke=tt((He=class{constructor(){var e,t,r,n;e=this,t="successful",n=this,(r=Ke)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}success(e){this.successful=e}async onEnter({props:e}){const{operation:t,onError:r=(()=>{}),onSuccess:n=(()=>{})}=e;try{const e=await(k()(t)?t():t);this.success(!0),await(i=1500,new Promise((e=>setTimeout(e,i)))),n(e)}catch(e){rt(e),this.success(!1),r(e)}var i}}).prototype,"successful",[x.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tt(He.prototype,"success",[Be],Object.getOwnPropertyDescriptor(He.prototype,"success"),He.prototype),$e=He));var nt=(0,de.ei)("loading-complete")(Ye=class extends c().Component{render(){const{store:e,children:t,className:r}=this.props,{successful:n}=e;return c().createElement(pt,{success:n,className:r},c().createElement("svg",{className:"circular",viewBox:"0 0 64 64"},c().createElement("circle",{className:"path",cx:"32",cy:"32",r:"30",fill:"none",strokeWidth:"1"})),c().createElement(ct,{fill:"primary",size:36,success:n}),c().createElement(Qe.Z,{size:48,fill:"info",className:"checkmark"}),!n&&c().createElement(p.Z,{order:"drop-in-top",speed:"medium"},c().createElement(u.Z,{top:"xxl"},t)))}})||Ye;const it=(0,m.F4)(["100%{transform:rotate(360deg);}"]),ot=(0,m.F4)(["from{opacity:0;}to{opacity:1;}"]),at=(0,m.F4)(["from{opacity:1;}to{opacity:0;}"]),st=(0,m.F4)(["from{transform:rotate(-100deg);opacity:0;}to{transform:rotate(0deg);opacity:1;}"]),lt=(0,m.F4)(["0%{stroke-dasharray:1,200;stroke-dashoffset:0;}50%{stroke-dasharray:150,200;stroke-dashoffset:-50;}100%{stroke-dasharray:150,200;stroke-dashoffset:-185;}"]),ct=(0,m.ZP)((({success:e,...t})=>c().createElement(et.Z,t))).withConfig({displayName:"LoadingComplete__StyledInLogo",componentId:"mofc6l-0"})(["animation:"," 0.3s cubic-bezier(0.645,0.045,0.155,0.77);animation-fill-mode:forwards;position:absolute;",";"],ot,(({success:e})=>e?(0,m.iv)(["animation:"," 0.6s cubic-bezier(0.645,0.045,0.155,0.77) forwards;"],at):"")),pt=m.ZP.div.withConfig({displayName:"LoadingComplete__LoadingWrapper",componentId:"mofc6l-1"})(["display:flex;text-align:center;align-items:center;justify-content:center;flex-direction:column;.spinningLoader{position:relative;height:100%;width:100%;zoom:1;margin:0 auto;}.heading{position:relative;top:88px;}.checkmark{position:absolute;opacity:0;",";color:",";}.circular{position:absolute;height:120px;width:120px;",";}.path{stroke-dashoffset:0;stroke-linecap:round;stroke:",";transition:stroke 300ms cubic-bezier(0.645,0.045,0.155,0.77);",";}"],(({success:e})=>e?(0,m.iv)(["animation:"," 0.6s cubic-bezier(0.645,0.045,0.155,0.77) forwards;"],st):""),(({theme:e})=>e.palette.info.regular),(({success:e})=>e?"":(0,m.iv)(["animation:"," 2s linear infinite;"],it)),(e=>e.theme.palette.primary.regular),(({success:e,theme:t})=>e?(0,m.iv)(["stroke:",";stroke-dasharray:190,200;"],t.palette.info.regular):(0,m.iv)(["animation:"," 1.5s ease-in-out infinite;stroke-dasharray:1,200;"],lt)));var ut,dt=r(97105),mt=r.n(dt);var ht=(0,f.f3)("window")(ut=class extends c().PureComponent{render(){const{window:e,onRefresh:t}=this.props,r=t||(()=>e.location.reload());return c().createElement(p.Z,{"data-component":"failed",order:"simple-fade-in",fillMode:"forwards"},c().createElement(u.Z,{bottom:"m"},c().createElement(mt(),null)),c().createElement(Xe,{align:"center",heading:"Sorry about that!",subheading:c().createElement(j.Z,{size:"larger",order:"body"},"We're having trouble loading this section.",c().createElement("br",null),"Try ",c().createElement(Te.Z,{role:"link",element:"a",onClick:r},"refreshing")," the page.")}))}})||ut,yt=r(21873),gt=r.n(yt);class bt extends c().PureComponent{render(){return c().createElement(p.Z,{"data-component":"not-found",order:"simple-fade-in",fillMode:"forwards"},c().createElement(u.Z,{bottom:"m"},c().createElement(gt(),null)),c().createElement(Xe,{align:"center",heading:"Looking for InVision?",subheading:c().createElement(j.Z,null,"Head on over to your"," ",c().createElement(Te.Z,{href:"https://projects.invisionapp.com/d/login/?origin=v7"},"sign-in page"))}))}}var ft=bt;c().PureComponent;var Et;function vt({user:e,onSwitch:t}){return e?c().createElement(j.Z,{"data-component":"switch-account"},"You're signed in as ",c().createElement("strong",null,e.email),"."," ",c().createElement(Te.Z,{element:"a",onClick:t,role:"link","data-component":"switch-account-link"},"Switch")):null}let Ot=(0,Ee.Pi)(Et=class extends c().Component{render(){const{name:e,src:t}=this.props;return c().createElement(wt,{"data-component":"team-avatar",color:"dark",name:e,order:"team",size:"larger",src:t})}})||Et;const wt=(0,m.ZP)(W.Z).withConfig({displayName:"TeamAvatar__StyledAvatar",componentId:"sc-194hgr8-0"})(["margin:0 auto ",";"],(({theme:e})=>e.spacing.l));var St,Dt=Ot,It=r(9729);function Ct(){return(Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Tt,Pt=(0,Ee.Pi)(St=class extends c().Component{render(){const{name:e,src:t,...r}=this.props,n=(0,m.ZP)(W.Z).withConfig({displayName:"UserAvatar__StyledAvatar",componentId:"sc-191dtd5-0"})(["margin:0 auto ",";"],(({theme:e})=>e.spacing.l));return c().createElement(n,Ct({"data-component":"user-avatar",color:"dark",name:e,order:"user",size:"larger",src:t},r))}})||St;var At=(0,f.f3)("features/context/team")(Tt=class extends c().Component{get team(){return this.props["features/context/team"]}render(){var e,t;const{name:r,logo:n,teamLogin:i}=this.team,o=null!==(e=null==i||null===(t=i.loginRestriction)||void 0===t?void 0:t.reason)&&void 0!==e?e:"";return c().createElement(c().Fragment,null,c().createElement(u.Z,{bottom:"m"},c().createElement(d.Z,{horizontal:"center"},c().createElement(Dt,{name:r,src:n}))),c().createElement(Xe,{heading:"This team is currently locked",subheading:c().createElement(j.Z,{size:"larger",order:"body"},"We've temporarily blocked access to ",c().createElement("strong",null,r),c().createElement("br",null),o&&c().createElement(c().Fragment,null,c().createElement("strong",null,"Reason:")," Team was locked because ",o,c().createElement("br",null)),"Please reach out to a team admin or"," ",c().createElement(Te.Z,{key:"support-link",role:"link",element:"a",href:"https://support.invisionapp.com"},"InVision Support")," with any questions."),align:"center"}))}})||Tt,_t=r(66025)},74591:function(e,t,r){"use strict";var n,i,o=r(16624),a=r.n(o),s=r(98934),l=r.n(s),c=r(41899),p=r(59549),u=r(76069),d=r(59953),m=r(25817),h=r(5013);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let g=(n=(0,p.f3)("features/context/geolocation"),(0,u.Pi)(i=n(i=class extends a().Component{get geolocation(){return this.props["features/context/geolocation"]}render(){const{id:e,name:t,checked:r,...n}=this.props,i=a().createElement(d.Z,{href:"http://www.invisionapp.com/privacy",rel:"noopener noreferrer",target:"_blank",order:"secondary"},"Privacy Policy");return a().createElement(h.Jr,{visible:this.geolocation.underGDPR()},a().createElement(m.Z,{element:"p",order:"body"},"Thanks for signing up to InVision! Based on your sign up, we would love to keep you posted with product news and tips for getting the most of InVision. You can opt out at any time. See our ",a().createElement("strong",null,i)," for more information."),a().createElement(c.XZ,y({id:e,name:t,checked:r,fullWidth:!0,unstyled:!0},l()(n,"features/context/geolocation")),"No thanks, please do not send me marketing emails."))}})||i)||i);t.Z=g},95708:function(e,t,r){"use strict";var n,i=r(16624),o=r.n(i),a=r(76069),s=r(3074),l=r.n(s),c=r(87860),p=r(81772),u=r(59549),d=r(5013);let m=(0,u.f3)("features/context/team")(n=(0,a.Pi)(n=class extends o().Component{render(){const{"features/context/team":e,children:t,title:r,titleAlign:n,subtitle:i}=this.props,{current:a={}}=e;return o().createElement(g,{"data-component":"team-form"},o().createElement(y,null,o().createElement(d.Ir,{name:a.name,src:a.logo})),r&&o().createElement(p.Z,{bottom:"l"},o().createElement(h,{titleAlign:n},o().createElement(d.X6,{heading:r,subheading:i}))),t)}})||n)||n;const h=c.ZP.div.withConfig({displayName:"TeamForm__TitleWrap",componentId:"sc-1hjo27u-0"})(["text-align:",";"],(e=>e.titleAlign)),y=c.ZP.div.withConfig({displayName:"TeamForm__LogoWrapper",componentId:"sc-1hjo27u-1"})(["text-align:center;"]),g=c.ZP.div.withConfig({displayName:"TeamForm__TeamFormWrapper",componentId:"sc-1hjo27u-2"})(["margin:0;max-width:580px;@media (min-width:600px){width:97%;margin:0 auto;}"]);m.propTypes={children:l().node,logo:l().node,title:l().oneOfType([l().string,l().node]),titleAlign:l().string,subtitle:l().oneOfType([l().string,l().node])},m.defaultProps={isClosing:!1,titleAlign:"center",title:"",onClose:()=>{},onSubmit:e=>e.preventDefault()},t.Z=m},58469:function(e,t,r){"use strict";r.d(t,{w:function(){return w}});var n=r(16624),i=r.n(n),o=r(3074),a=r.n(o),s=r(95714),l=r(56217);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}class p extends i().Component{render(){const{onSubmit:e,children:t,...r}=this.props;return i().createElement("form",c({"data-component":"form",className:"Bizible-Exclude",method:"POST",onSubmit:t=>{t.preventDefault(),e()}},r),i().createElement(l.Z,null),i().createElement(s.Z,{requestKey:"global"}),t)}}p.propTypes={children:a().node},p.defaultProps={onSubmit:()=>{},children:[]};var u=r(87860),d=r(26330),m=r(81772),h=r(25817),y=r(29024),g=r(59377),b=r.n(g);class f extends i().PureComponent{constructor(e){super(e),this.handleInputChange=(e,t)=>{const r=t.target.value;this.setState({inputs:this.updateAtIndex(e,r,this.state.inputs),isValid:null},(()=>{this.props.onChange(this.encodeInputs()),this.areAllInputsValid()?this.validateCode():""!==r&&this.focusNextInputOrByIndex(e)}))},this.handleInputKeyDown=(e,t)=>{8===t.keyCode&&""===t.target.value&&this.focusPreviousInput()},this.handleInputFocus=e=>this.setState({focusedInput:e,focusedGroup:e<3?0:1}),this.handleInputBlur=()=>this.setState({focusedGroup:null}),this.handleFocusFirstEditableInput=e=>(e.stopPropagation(),e.preventDefault(),""!==e.target.value?this.focusAndSelectElement(e.target):this.focusInput(this.getFirstEditableInputIndex())),this.input0Ref=i().createRef(),this.input1Ref=i().createRef(),this.input2Ref=i().createRef(),this.input3Ref=i().createRef(),this.input4Ref=i().createRef(),this.input5Ref=i().createRef(),this.state={isValid:null,validating:!1,focusedGroup:null,focusedInput:null,inputs:["","","","","",""]}}componentDidMount(){this.props.autoFocus&&this.focusInput(0)}getFirstEditableInputIndex(){const e=b()(this.state.inputs,(e=>""===e));return e>-1?e:0}focusAndSelectElement(e){"text"===e.type&&(e.focus(),e.value.length>0&&e.select())}focusNextInputOrByIndex(e){const t=e+1,r=b()(this.state.inputs,(r=>""===r&&e<t));this.focusInput(r>-1?r:t)}focusInput(e){const t=this[`input${e}Ref`];t&&t.current&&this.focusAndSelectElement(t.current)}focusFirstEmptyInput(){const e=b()((e=>""===e),this.state.inputs);void 0!==e&&this.focusInput(e)}focusPreviousInput(){const e=0===this.state.focusedInput?0:this.state.focusedInput-1;this.focusInput(e)}updateAtIndex(e,t,r){const n=[...r];return n[e]=t,n}validateCode(){const e=this.encodeInputs();this.setState({validating:!0},(()=>{this.props.validateCode(e,(t=>{this.setState({isValid:t,validating:!1,inputs:!0===t?this.state.inputs:["","","","","",""]},(()=>!1===t&&this.focusInput(0))),t?this.props.onSuccess(e):this.props.onError(e)}))}))}encodeInputs(){return this.state.inputs.join("")}groupIsFocused(e){return this.state.focusedGroup===e}areAllInputsValid(){return this.state.inputs.every((e=>""!==e))}blurAllInputs(){this.state.inputs.forEach(((e,t)=>{const r=this[`input${t}Ref`];r&&r.current&&(r.current.blur(),this.setState({focusedGroup:null}))}))}take(e,t){return[...t].splice(0,e)}handlePaste(e){if(!e.clipboardData)return;e.preventDefault(),e.stopPropagation();const t=e.clipboardData.getData("text").split("").splice(0,6),r=this.take(this.state.focusedInput,this.state.inputs),n=this.take(this.state.inputs.length-this.state.focusedInput,this.state.inputs).map(((e,r)=>t[r]||""));this.setState({inputs:r.concat(n),isValid:null},(()=>{this.blurAllInputs(),this.areAllInputsValid()?this.validateCode():this.focusFirstEmptyInput()}))}renderInput(e,t){return i().createElement(v,{"data-component":`verification-input-${t}`,type:"text",name:t,maxLength:"1",placeholder:"0",value:e,onFocus:()=>this.handleInputFocus(t),onKeyDown:e=>this.handleInputKeyDown(t,e),onChange:e=>this.handleInputChange(t,e),ref:this[`input${t}Ref`],autoFocus:this.props.autoFocus&&0===t,onPaste:e=>this.handlePaste(e)})}render(){return i().createElement(d.Z,{alignItems:"center",justifyContent:"center",onMouseDown:this.handleFocusFirstEditableInput,onBlur:this.handleInputBlur},i().createElement(m.Z,{left:"xl"},i().createElement(O,{hasFocus:this.groupIsFocused(0),isValid:this.state.isValid,validating:this.state.validating,submitted:!1},this.renderInput(this.state.inputs[0],0),this.renderInput(this.state.inputs[1],1),this.renderInput(this.state.inputs[2],2))),i().createElement(m.Z,{horizontal:"s"},i().createElement(h.Z,{order:"subtitle"},"—")),i().createElement(O,{hasFocus:this.groupIsFocused(1),isValid:this.state.isValid,validating:this.state.validating,submitted:!1},this.renderInput(this.state.inputs[3],3),this.renderInput(this.state.inputs[4],4),this.renderInput(this.state.inputs[5],5)),i().createElement(E,{left:"m",isVisible:this.state.validating},i().createElement(y.Z,{loaded:!0===this.state.isValid})))}}const E=(0,u.ZP)(m.Z).withConfig({displayName:"VerificationForm__ValidatingIcon",componentId:"sc-1ap9j3n-0"})(["visibility:",""],(({isVisible:e})=>e?"visible":"hidden"));f.propTypes={validating:a().bool,isValid:a().bool,hideError:a().bool,validateCode:a().func,validationRequested:a().bool,onComplete:a().func,autoFocus:a().bool,onSuccess:a().func,onError:a().func,onChange:a().func},f.defaultProps={validating:!1,isValid:!1,hideError:!1,validateCode(){},validationRequested:!1,onComplete(){},autoFocus:!1,onSuccess(){},onError(){},onChange(){}};const v=u.ZP.input.withConfig({displayName:"VerificationForm__Input",componentId:"sc-1ap9j3n-1"})(["border:1px solid ",";border-right:none;border-radius:0px;font-size:2rem;font-weight:300;height:70px;width:33.3%;padding:0 0 0 11.1%;color:",";transition:border-color 0.15s ease-in-out;&:first-child{border-radius:5px 0 0 5px;}&:last-of-type{border-radius:0 5px 5px 0;border-right:1px solid ",";}&::placeholder{color:",";}&:focus{outline:none;}@media (min-width:","px){font-size:2.5rem;height:80px;width:33.3%;max-width:55px;}@media (min-width:","px){font-size:3rem;height:110px;width:33.3%;max-width:80px;}@media (max-width:","px){font-size:1.2rem;padding:0 0 0 10%;}"],(({theme:e})=>e.palette.structure.regular),(({theme:e})=>e.palette.text.lightest),(({theme:e})=>e.palette.structure.regular),(({theme:e})=>e.palette.structure.lighter),(({theme:e})=>e.breakpoints.s),(({theme:e})=>e.breakpoints.m),(({theme:e})=>e.breakpoints.s)),O=u.ZP.div.withConfig({displayName:"VerificationForm__Group",componentId:"sc-1ap9j3n-2"})(["position:relative;","{"," ",";}",":last-of-type{"," ",";}"],v,(e=>e.hasFocus?`border-color: ${e.theme.palette.structure.regular};`:null),(e=>!0!==e.isValid||e.validating?null:`border-color: ${e.theme.palette.info.regular};`),v,(e=>e.hasFocus?`border-right: 1px solid ${e.theme.palette.structure.regular};`:null),(e=>!0!==e.isValid||e.validating?null:`border-color: ${e.theme.palette.info.regular};`));var w=f},47714:function(e,t,r){"use strict";r.d(t,{Vq:function(){return n},$_:function(){return Ke},OW:function(){return i},h4:function(){return o},wC:function(){return a},Zl:function(){return s}});var n={};r.r(n),r.d(n,{V:function(){return Z},A:function(){return A}});var i={};r.r(i),r.d(i,{x8:function(){return de},Ar:function(){return K}});var o={};r.r(o),r.d(o,{aU:function(){return Ae},eJ:function(){return Ue},x8:function(){return He},SK:function(){return We},Ar:function(){return we},O6:function(){return Ie}});var a={};r.r(a),r.d(a,{A:function(){return gt}});var s={};r.r(s),r.d(s,{K5:function(){return Lt},Ar:function(){return At},dv:function(){return Nt},O6:function(){return Rt}});var l,c,p,u,d,m,h,y,g,b,f=r(16624),E=r.n(f),v=r(984),O=r(64267),w=r(76069),S=r(59549),D=r(32827);function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function C(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function T(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}l=(0,S.En)("layout/templates/dialog"),c=O.LO.ref,p=O.aD.bound,u=O.aD.bound,d=O.aD.bound,l(m=(0,S.ri)((y=T((h=class{constructor(){C(this,"content",y,this),C(this,"options",g,this)}showContent(e){this.content=e}hideContent(){this.content=null}updateOptions(e){this.options=e}}).prototype,"content",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T(h.prototype,"showContent",[p],Object.getOwnPropertyDescriptor(h.prototype,"showContent"),h.prototype),T(h.prototype,"hideContent",[u],Object.getOwnPropertyDescriptor(h.prototype,"hideContent"),h.prototype),g=T(h.prototype,"options",[O.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),T(h.prototype,"updateOptions",[d],Object.getOwnPropertyDescriptor(h.prototype,"updateOptions"),h.prototype),m=h))||m);var P,A=(0,D.f3)("layout/templates/dialog")(b=(0,w.Pi)(b=class extends E().Component{render(){const{"layout/templates/dialog":e}=this.props;return e.content?E().createElement(v.Z,I({closeOnEsc:!0,closeOnOverlay:!0},e.options),e.content):null}})||b)||b;var _,N,R,k,z,j,x,L,M,F,Z=(0,S.f3)("layout/templates/dialog")(P=(0,w.Pi)(P=class extends E().Component{componentDidMount(){const{"layout/templates/dialog":e,children:t,className:r,open:n,onRequestClose:i}=this.props;e.updateOptions({open:n,onRequestClose:i}),e.showContent(E().createElement("div",{className:r},t))}componentDidUpdate(){const{"layout/templates/dialog":e,open:t,onRequestClose:r}=this.props;e.updateOptions({open:t,onRequestClose:r})}componentWillUnmount(){const{"layout/templates/dialog":e}=this.props;e.hideContent(),e.updateOptions({})}render(){return null}})||P)||P,U=r(73525),V=r(87860);function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function q(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function W(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}_=(0,S.En)("layout/templates/modal"),N=O.aD.bound,R=O.aD.bound,k=O.aD.bound,z=O.aD.bound,_(j=(0,S.ri)((L=W((x=class{constructor(){q(this,"back",L,this),q(this,"close",M,this)}showBack(e){this.back=e}hideBack(){this.back=null}showClose(e){this.close=e}hideClose(){this.close=null}}).prototype,"back",[O.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W(x.prototype,"showBack",[N],Object.getOwnPropertyDescriptor(x.prototype,"showBack"),x.prototype),W(x.prototype,"hideBack",[R],Object.getOwnPropertyDescriptor(x.prototype,"hideBack"),x.prototype),M=W(x.prototype,"close",[O.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W(x.prototype,"showClose",[k],Object.getOwnPropertyDescriptor(x.prototype,"showClose"),x.prototype),W(x.prototype,"hideClose",[z],Object.getOwnPropertyDescriptor(x.prototype,"hideClose"),x.prototype),j=x))||j);let B=(0,S.f3)("layout/templates/modal")(F=(0,w.Pi)(F=class extends E().Component{render(){const{children:e,...t}=this.props,{"layout/templates/modal":r}=this.props,{back:n,close:i}=r;return E().createElement(U.Z,G({"data-component":"fullscreen-modal",open:!0,fullWidth:!0,renderLogo:()=>n,renderClose:()=>i},t),E().createElement($,null,e))}})||F)||F;const $=V.ZP.div.withConfig({displayName:"Layout__Content",componentId:"g3tjdp-0"})(["margin:0 0 "," 0;max-width:580px;@media (min-width:600px){margin:0 auto ",";width:97%;}@media print{max-width:480px;margin:0 auto;}"],(({theme:e})=>e.spacing.xxl),(({theme:e})=>e.spacing.xxl));var H,K=B,Y=r(55806),X=r(66211);(0,S.f3)("layout/templates/modal")(H=class extends E().PureComponent{componentDidMount(){const{"layout/templates/modal":e,onClick:t}=this.props;e.showBack(E().createElement(Y.Z,{"data-component":"modal-back",tooltip:"Back",tooltipPlacement:"bottom",onClick:t,className:"no-print"},E().createElement(X.Z,{fill:"text",size:32})))}componentWillUnmount(){const{"layout/templates/modal":e}=this.props;e.hideBack()}render(){return null}});var J,Q=r(61004);var ee,te,re,ne,ie,oe,ae,se,le,ce,pe,ue,de=(0,S.f3)("layout/templates/modal")(J=class extends E().PureComponent{componentDidMount(){const{"layout/templates/modal":e,onClick:t}=this.props;e.showClose(E().createElement(Y.Z,{element:"a","data-component":"modal-close",tooltip:"Close",tooltipPlacement:"bottom",onClick:()=>t(),className:"no-print"},E().createElement(Q.Z,{fill:"text",size:32})))}componentWillUnmount(){const{"layout/templates/modal":e}=this.props;e.hideClose()}render(){return null}})||J,me=r(26330);function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ye(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ge(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}ee=(0,S.En)("layout/templates/header"),te=O.LO.ref,re=O.aD.bound,ne=O.aD.bound,ie=O.LO.ref,oe=O.aD.bound,ae=O.aD.bound,ee(se=(0,S.ri)((ce=ge((le=class{constructor(){ye(this,"left",ce,this),ye(this,"right",pe,this)}showLeft(e){this.left=e}hideLeft(){this.left=null}showRight(e){this.right=e}hideRight(){this.right=null}}).prototype,"left",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge(le.prototype,"showLeft",[re],Object.getOwnPropertyDescriptor(le.prototype,"showLeft"),le.prototype),ge(le.prototype,"hideLeft",[ne],Object.getOwnPropertyDescriptor(le.prototype,"hideLeft"),le.prototype),pe=ge(le.prototype,"right",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge(le.prototype,"showRight",[oe],Object.getOwnPropertyDescriptor(le.prototype,"showRight"),le.prototype),ge(le.prototype,"hideRight",[ae],Object.getOwnPropertyDescriptor(le.prototype,"hideRight"),le.prototype),se=le))||se);let be=(0,D.f3)("layout/templates/header")(ue=(0,w.Pi)(ue=class extends E().Component{render(){const{"layout/templates/header":e,...t}=this.props;return e.left||e.right?E().createElement(fe,null,E().createElement(Ee,he({justifyContent:"space-between",alignItems:"center"},t),E().createElement(ve,null,e.left),E().createElement(ve,null,e.right))):null}})||ue)||ue;const fe=V.ZP.div.withConfig({displayName:"Layout__HeaderWrapper",componentId:"sc-13g2q05-0"})(["@media (min-width:","px){position:absolute;width:97%;}"],(({theme:e})=>e.breakpoints.m)),Ee=(0,V.ZP)(me.Z).withConfig({displayName:"Layout__HeaderFlex",componentId:"sc-13g2q05-1"})(["position:relative;z-index:",";"],(({theme:e})=>e.zindex.base)),ve=V.ZP.div.withConfig({displayName:"Layout__HeaderPart",componentId:"sc-13g2q05-2"})([""]);var Oe,we=be;var Se,De=(0,S.f3)("layout/templates/header")(Oe=class extends E().PureComponent{get store(){return this.props["layout/templates/header"]}componentDidMount(){const{children:e,className:t}=this.props;this.store.showLeft(E().createElement("div",{className:t},e))}componentWillUnmount(){this.store.hideLeft()}render(){return null}})||Oe;var Ie=(0,S.f3)("layout/templates/header")(Se=class extends E().PureComponent{get store(){return this.props["layout/templates/header"]}componentDidMount(){const{children:e,className:t}=this.props;this.store.showRight(E().createElement("div",{className:t},e))}componentWillUnmount(){this.store.hideRight()}render(){return null}})||Se,Ce=r(94002);class Te extends E().PureComponent{render(){const{children:e,onClick:t}=this.props;return E().createElement(Ie,null,E().createElement(Pe,{"data-component":"header-action-button",onClick:t,order:"tertiary",size:"smaller",className:"no-print"},e))}}const Pe=(0,V.ZP)(Ce.Z).withConfig({displayName:"Action__StyledButton",componentId:"sc-1j04lde-0"})(['[data-client-embedded="true"] &{display:none;}']);var Ae=Te;const _e=E().createContext();_e.Layouts={OnePanel:"OnePanel",TwoPanel:"TwoPanel"};var Ne=_e,Re=r(3074),ke=r.n(Re);const ze=V.ZP.div.withConfig({displayName:"PositionCenter__Table",componentId:"u490aq-0"})(["display:table;width:100%;height:100%;"]),je=V.ZP.div.withConfig({displayName:"PositionCenter__TableCell",componentId:"u490aq-1"})(["position:relative;display:table-cell;vertical-align:middle;padding-top:100px;padding-bottom:100px;"]),xe=({children:e})=>E().createElement(ze,{"data-component":"position-center"},E().createElement(je,null,e));xe.propTypes={children:ke().any};var Le;let Me=(0,S.f3)("history")(Le=class extends E().PureComponent{render(){const e=this.props.onClick||(()=>this.props.history.goBack());return E().createElement(Ne.Consumer,null,(t=>E().createElement(De,null,E().createElement(Y.Z,{"data-component":"header-back",tooltip:"Back",tooltipPlacement:"bottom",onClick:e,className:"no-print"},E().createElement(Fe,{layout:t,size:32})))))}})||Le;const Fe=(0,V.ZP)(X.Z).withConfig({displayName:"Back__StyledBack",componentId:"sc-1r6nds2-0"})(["",""],(({layout:e,theme:t})=>(0,V.iv)(["color:",";",""],t.palette.text.regular,e===Ne.Layouts.TwoPanel&&(0,V.iv)(["@media (min-width:","px){color:",";}"],t.breakpoints.l,t.palette.text.white))));var Ze,Ue=Me,Ve=r(55291),Ge=r(28511);function qe(){return(qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var We=(0,S.f3)("features/analytics","features/context/client","navigator")(Ze=class extends E().PureComponent{render(){const{"features/analytics":e,"features/context/client":t,navigator:r,color:n="dark",onClick:i,disabled:o=!1,...a}=this.props,s=o||t.isEmbedded?null:i||(()=>{e.track(Ge.zW.HOME,Ge.p$.SELECTED),r.goTo("https://www.invisionapp.com/")});return E().createElement(De,null,E().createElement(Y.Z,qe({color:n,"data-component":"in-logo",onClick:s,tooltip:s?"Home":null,tooltipPlacement:s?"bottom":null,withBackground:!!s,withTooltip:!!s},a),E().createElement(Ve.Z,null)))}})||Ze;class Be extends E().PureComponent{render(){const{onClick:e,tooltipPlacement:t="bottom",tooltip:r="Close"}=this.props;return E().createElement(Ie,null,E().createElement(Y.Z,{element:"a","data-component":"header-close",tooltip:r,tooltipPlacement:t,onClick:()=>e(),className:"no-print"},E().createElement(Q.Z,{fill:"text",size:32})))}}var $e,He=Be,Ke=r(62360);function Ye(){return(Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let Xe=(0,S.f3)("components/footer")($e=(0,w.Pi)($e=class extends E().Component{render(){const{"components/footer":e,children:t,justifyContent:r="center",alignItems:n="center",...i}=this.props;return E().createElement(Ne.Provider,{value:Ne.Layouts.OnePanel},E().createElement(Qe,null),E().createElement(Je,Ye({"data-component":"one-panel-template",flexDirection:"column"},i),E().createElement(tt,null),E().createElement(rt,{hasFooter:e.hasContent,justifyContent:r,alignItems:n},E().createElement(nt,{className:"one-panel-content"},t)),E().createElement(et,null)))}})||$e)||$e;const Je=(0,V.ZP)(me.Z).withConfig({displayName:"Layout__FullScreen",componentId:"sc-1hv2e2r-0"})(["position:relative;height:100vh;width:100%;@media (max-width:","px){padding:0 "," !important;height:100vh !important;}"],(({theme:e})=>e.breakpoints.m),(({theme:e})=>e.spacing.m)),Qe=(0,V.ZP)(A).withConfig({displayName:"Layout__DialogFlex",componentId:"sc-1hv2e2r-1"})([""]),et=(0,V.ZP)(Ke.Ar).withConfig({displayName:"Layout__FooterFlex",componentId:"sc-1hv2e2r-2"})(["@media (max-width:","px){border:none;padding-top:0;position:static;a{display:block;}}"],(({theme:e})=>e.breakpoints.s)),tt=(0,V.ZP)(we).withConfig({displayName:"Layout__HeaderFlex",componentId:"sc-1hv2e2r-3"})(["margin:",";@media (max-width:","px){margin:"," 0;}"],(({theme:e})=>e.spacing.m),(({theme:e})=>e.breakpoints.m),(({theme:e})=>e.spacing.m)),rt=(0,V.ZP)(me.Z).withConfig({displayName:"Layout__ContentFlex",componentId:"sc-1hv2e2r-4"})(["position:relative;margin:0 0 "," 0;"," max-width:580px;flex:1 1 auto;flex-shrink:0;@media (min-width:600px){margin:0 auto ",";width:97%;}@media print{max-width:480px;padding-bottom:0;}"],(({theme:e})=>e.spacing.xxl),(({theme:e,hasFooter:t})=>t&&`\n    padding-bottom: ${e.spacing.xxl};\n  `),(({theme:e})=>e.spacing.xxl)),nt=V.ZP.div.withConfig({displayName:"Layout__Content",componentId:"sc-1hv2e2r-5"})(["width:100%;"]);var it,ot,at,st,lt,ct,pt,ut,dt,mt,ht,yt,gt=Xe,bt=r(88104),ft=r(5013);function Et(){return(Et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function vt(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Ot(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}it=(0,bt.oe)("layout/templates/two-panel",{lifecycle:S.ri}),ot=O.LO.ref,at=O.aD.bound,st=O.aD.bound,lt=O.LO.ref,ct=O.aD.bound,pt=O.aD.bound,it((mt=Ot((dt=class{constructor(){vt(this,"left",mt,this),vt(this,"right",ht,this)}showLeft(e){this.left=e}hideLeft(){this.left=null}showRight(e){this.right=e}hideRight(){this.right=null}}).prototype,"left",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ot(dt.prototype,"showLeft",[at],Object.getOwnPropertyDescriptor(dt.prototype,"showLeft"),dt.prototype),Ot(dt.prototype,"hideLeft",[st],Object.getOwnPropertyDescriptor(dt.prototype,"hideLeft"),dt.prototype),ht=Ot(dt.prototype,"right",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ot(dt.prototype,"showRight",[ct],Object.getOwnPropertyDescriptor(dt.prototype,"showRight"),dt.prototype),Ot(dt.prototype,"hideRight",[pt],Object.getOwnPropertyDescriptor(dt.prototype,"hideRight"),dt.prototype),ut=dt));let wt=(0,bt.ei)("layout/templates/two-panel")(yt=class extends E().Component{render(){const{store:e,children:t,...r}=this.props;return E().createElement(Ne.Provider,{value:Ne.Layouts.TwoPanel},E().createElement(Dt,null),E().createElement(St,Et({"data-component":"two-panel-template",flexDirection:"column"},r),e.left||e.right?E().createElement(E().Fragment,null,E().createElement(It,null),E().createElement(Ct,{key:"left-panel"},e.left),E().createElement(Tt,{key:"right-panel"},e.right||E().createElement(ft.gb,null))):E().createElement(ft.gb,null),t))}})||yt;const St=(0,V.ZP)(me.Z).withConfig({displayName:"Layout__FullScreen",componentId:"sc-1y2emw2-0"})(["position:relative;height:100vh;width:100%;@media (max-width:","px){padding:0 "," !important;height:100vh !important;}"],(({theme:e})=>e.breakpoints.m),(({theme:e})=>e.spacing.m)),Dt=(0,V.ZP)(A).withConfig({displayName:"Layout__DialogLayout",componentId:"sc-1y2emw2-1"})([""]),It=(0,V.ZP)(we).withConfig({displayName:"Layout__HeaderLayout",componentId:"sc-1y2emw2-2"})(["margin:",";@media (max-width:","px){width:100%;max-width:580px;margin:0 auto;padding:"," 0;}"],(({theme:e})=>e.spacing.m),(({theme:e})=>e.breakpoints.l-1),(({theme:e})=>e.spacing.m)),Ct=V.ZP.div.withConfig({displayName:"Layout__LeftPanel",componentId:"sc-1y2emw2-3"})(["display:none;align-items:center;justify-content:center;position:absolute;top:0;left:0;width:460px;height:100%;overflow:hidden;background:rgba(36,40,56,0.65);@media (min-width:","px){display:flex;}@media (min-height:600px){position:fixed;}"],(({theme:e})=>e.breakpoints.l)),Tt=V.ZP.div.withConfig({displayName:"Layout__RightPanel",componentId:"sc-1y2emw2-4"})(["position:relative;flex:auto;height:100%;@media (min-width:","px){margin-left:460px;padding:0 ",";}"],(({theme:e})=>e.breakpoints.l),(({theme:e})=>e.spacing.m));var Pt,At=wt;var _t,Nt=(0,S.f3)("layout/templates/two-panel")(Pt=class extends E().PureComponent{get store(){return this.props["layout/templates/two-panel"]}componentDidMount(){const{children:e}=this.props;this.store.showLeft(e)}componentWillUnmount(){this.store.hideLeft()}render(){return null}})||Pt;var Rt=(0,S.f3)("layout/templates/two-panel")(_t=class extends E().PureComponent{get store(){return this.props["layout/templates/two-panel"]}componentDidMount(){const{children:e}=this.props;this.store.showRight(e)}componentWillUnmount(){this.store.hideRight()}render(){return null}})||_t;class kt extends E().PureComponent{render(){const{children:e,dataComponent:t}=this.props;return E().createElement(zt,{justifyContent:"center",alignItems:"center"},E().createElement(jt,{"data-component":t},e))}}const zt=(0,V.ZP)(me.Z).withConfig({displayName:"CenteredContent__FullScreenFlex",componentId:"sc-1onz08r-0"})(["height:100%;width:100%;"]),jt=V.ZP.div.withConfig({displayName:"CenteredContent__ResponsivePanel",componentId:"sc-1onz08r-1"})(["width:100%;max-width:580px;padding:0 !important;"]);var xt,Lt=kt,Mt=r(48743);function Ft(){return(Ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}(0,S.f3)("document")(xt=class extends E().Component{constructor(e){super(e);const{document:t}=e;this.mountEl=t.body}render(){const{children:e,open:t=!0,fullWidth:r=!0,domNode:n=this.mountEl,...i}=this.props;return E().createElement(U.Z,Ft({open:t,fullWidth:r,domNode:n},i),E().createElement(Mt.Z,{speed:"medium",order:"drop-in-bottom"},e))}})},56217:function(e,t,r){"use strict";var n,i=r(16624),o=r.n(i),a=r(87860),s=r(76069),l=r(81772),c=r(50902),p=r(86953),u=r(59549);const d=(0,a.F4)(["from{height:0px;}to{height:75px;}"]),m=a.ZP.div.withConfig({displayName:"Notification__ExpandingGroup",componentId:"ywyxzm-0"})(["animation:"," 0.2s ease-in-out"],d);let h=(0,u.f3)("features/notification")(n=(0,s.Pi)(n=class extends o().Component{get notification(){return this.props["features/notification"]}componentWillUnmount(){this.notification.clear()}render(){const{message:e,type:t}=this.notification;return e?o().createElement(m,{isVisible:e},o().createElement(p.Z,{"data-component":"request-error",order:"simple-fade-in",fillMode:"forwards"},o().createElement(l.Z,{bottom:"m"},o().createElement(c.Z,{className:"notification",status:t},e)))):null}})||n)||n;t.Z=h},1177:function(e,t,r){"use strict";r.d(t,{Z:function(){return d.Z}});var n,i,o,a,s,l,c=r(64267),p=r(59549);function u(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n=(0,p.En)("features/notification"),i=c.aD.bound,o=c.aD.bound,n(a=(0,p.ri)((l=u((s=class{constructor(){var e,t,r,n;e=this,t="notification",n=this,(r=l)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}get message(){var e;return null===(e=this.notification)||void 0===e?void 0:e.message}get type(){var e;return null===(e=this.notification)||void 0===e?void 0:e.type}notify(e,t="danger"){setTimeout((()=>{(0,c.z)((()=>{this.notification={message:e,type:t}}))}),0)}clear(){this.notification={}}}).prototype,"notification",[c.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u(s.prototype,"message",[c.Fl],Object.getOwnPropertyDescriptor(s.prototype,"message"),s.prototype),u(s.prototype,"type",[c.Fl],Object.getOwnPropertyDescriptor(s.prototype,"type"),s.prototype),u(s.prototype,"notify",[i],Object.getOwnPropertyDescriptor(s.prototype,"notify"),s.prototype),u(s.prototype,"clear",[o],Object.getOwnPropertyDescriptor(s.prototype,"clear"),s.prototype),a=s))||a);var d=r(56217)},58428:function(e,t,r){"use strict";r.d(t,{Z:function(){return N}});var n,i,o,a,s,l,c,p,u,d,m=r(16624),h=r.n(m),y=r(50137),g=r.n(y),b=r(51351),f=r.n(b),E=r(64267),v=r(81281),O=r(88821),w=r(57819),S=r(5260),D=r(32837),I=r(59549),C=r(5013);function T(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const P=(0,D.kg)("actions"),A={immediate:!1,redirectPath:"/onboarding",shouldRedirect:!1},_={LOADING:Symbol("Loading"),REDIRECT:Symbol("Redirect"),SKIP:Symbol("Skip")};n=(0,S._V)("features/onboarding",{initialState:_.LOADING}),i=(0,I.RR)("features/context/client","features/context/response","features/context/request","features/context/team","features/context/user","features/join-team/api","features/http","features/toggles","features/analytics"),o=E.aD.bound,a=E.aD.bound,s=E.aD.bound,l=E.aD.bound,n(c=i((u=T((p=class{constructor(e,t,r,n,i,o,a,s,l){var c,p,d,m;c=this,p="settings",m=this,(d=u)&&Object.defineProperty(c,p,{enumerable:d.enumerable,configurable:d.configurable,writable:d.writable,value:d.initializer?d.initializer.call(m):void 0}),this.client=e,this.response=t,this.request=r,this.team=n,this.user=i,this.joinTeam=o,this.http=a,this.toggles=s,this.analytics=l}onInit({props:e}){this.notifySkip=e.onSkip||(()=>{})}async onEnter({props:e}){var t;const r="true"===this.request.get("skipRoleCollection");if(this.client.isEmbedded||this.joinTeam.isFreehandSeat||r)return this.transition(_.SKIP);const n=await this.load();let i=(0,w.u)(null!==(t=e.shouldSkip)&&void 0!==t?t:e=>!e.shouldRedirect),o=this.response.redirectUrl(),{redirectPath:a}=n;if(o.toString().endsWith("/docs/freehands")){const e=v.vU.FREEHAND_USECASES.ID;try{const t=await this.toggles.fetch(v.vU.FREEHAND_USECASES),r={TEMPLATE_SELECTION:"/onboarding/freehand",TEMPLATE:"/onboarding/freehand?template"}[t];this.analytics.trackLegacy("Auth.Experiment.Viewed",{experimentId:e,variantId:t}),r&&(a=r,i=()=>!1,o=null)}catch(t){P(`failed to get feature flag ${e}`,t)}}return(0,E.z)((()=>{this.settings=n,this.redirectUrl=this.generateRedirectUrl({redirectPath:a,redirectUrl:o})})),i(n)?this.transition(_.SKIP):this.transition(_.REDIRECT)}async load(){try{const e=await this.http.get("/auth-api/onboarding");return P("Loaded (%d) %O",e.status,(0,E.ZN)(e.data)),e.data}catch(e){return P("Load failed %O",e),A}}generateRedirectUrl({redirectPath:e,redirectUrl:t}){const r=new(g())(decodeURIComponent(e||"/onboarding"),{},!0);return r.set("protocol",this.request.protocol),r.set("host",this.team.host||this.request.host),r.set("query",{...f()(t,v.az.ALLOWED,"redirectTo"),...r.query,...t?{redirectTo:t.toString()}:{}}),r}}).prototype,"settings",[E.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T(p.prototype,"onInit",[o],Object.getOwnPropertyDescriptor(p.prototype,"onInit"),p.prototype),T(p.prototype,"onEnter",[a],Object.getOwnPropertyDescriptor(p.prototype,"onEnter"),p.prototype),T(p.prototype,"load",[s],Object.getOwnPropertyDescriptor(p.prototype,"load"),p.prototype),T(p.prototype,"generateRedirectUrl",[l],Object.getOwnPropertyDescriptor(p.prototype,"generateRedirectUrl"),p.prototype),c=p))||c);var N=(0,S.ls)("features/onboarding")(d=class extends h().Component{render(){const{store:e,onSkip:t=(()=>{})}=this.props;return{[_.REDIRECT]:h().createElement(O.l_,{destination:e.redirectUrl}),[_.SKIP]:h().createElement(w.W,{action:t})}[e.state]||h().createElement(C.gb,null)}})||d},48526:function(e,t,r){"use strict";r.d(t,{A:function(){return he},Z:function(){return de}});var n,i,o,a,s,l,c,p,u=r(16624),d=r.n(u),m=r(5260),h=r(47714),y=r(98934),g=r.n(y),b=r(64267),f=r(59549),E=r(28511),v=r(5013),O=r(48743),w=r(81772),S=r(77877),D=r(59953),I=r(41899),C=r(32837),T=r(88104),P=r(44527);function A(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const _=(0,C.kg)("password-reset");n=(0,T.oe)("features/password-reset/enter-email"),i=(0,f.RR)("features/analytics","features/http","features/context/team","features/join-team/api","features/notification","window"),o=b.aD.bound,a=b.aD.bound,s=b.aD.bound,n(l=i((A((c=class{constructor(e,t,r,n,i,o){this.analytics=e,this.http=t,this.joinTeamApi=n,this.notification=i,this.team=r,this.window=o}onInit({props:e}){this.handleNotifyBack=e.onBack||(()=>{}),this.notifyError=e.onError||(()=>{}),this.notifySuccess=e.onSuccess||(()=>{})}onEnter(){this.track(E.p$.VIEWED)}async submit(e){const{email:t}=e,{appName:r,appVersion:n,platform:i}=this.window.navigator||{};try{this.track(E.p$.SUBMITTED),await this.http.post("/auth-api/password/request-reset",{data:{email:t,inviteToken:this.joinTeamApi.inviteToken||"",browserName:`${r} ${n}`||"",operatingSystem:i||""},timeout:16e3,errorKey:"global"}),this.track(E.p$.SUCCEEDED),this.notification.notify(`If you have an account${this.team.isGlobal?"":" on this team"}, we'll email you a reset link.`,"success"),this.notifySuccess()}catch(e){var o,a;_("Failed to request reset: %o",e);const t=null==e||null===(o=e.response)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.errorCode;this.track(E.p$.FAILED,{errorCode:t}),this.notifyError(e)}}track(e,t={}){this.analytics.track(E.zW.PASSWORD_REQUEST_RESET,e,{...t,subdomain:this.team.subdomain})}}).prototype,"onInit",[o],Object.getOwnPropertyDescriptor(c.prototype,"onInit"),c.prototype),A(c.prototype,"onEnter",[a],Object.getOwnPropertyDescriptor(c.prototype,"onEnter"),c.prototype),A(c.prototype,"submit",[s],Object.getOwnPropertyDescriptor(c.prototype,"submit"),c.prototype),l=c))||l);var N,R,k,z,j,x,L,M,F,Z,U=(0,T.ei)("features/password-reset/enter-email")(p=class extends d().Component{render(){const{store:e}=this.props;return d().createElement(O.Z,{speed:"medium",order:"drop-in-bottom",passThrough:"true"},!e.team.isGlobal&&d().createElement(v.Ir,{name:e.team.name,src:e.team.logo}),d().createElement(v.X6,{heading:"Forgot your password?",subheading:"We’ll help you reset it and get back on track.",align:"center"}),d().createElement(P.l0,{"data-component":"password-reset-form",submit:e.submit},d().createElement(I.GT,{id:"request_email",name:"email",label:"Email address",autoFocus:!0,autoComplete:"username"}),d().createElement(I.k4,{"data-component":"primary-button"},"Reset password")),d().createElement(w.Z,{top:"s"},d().createElement(S.Z,{horizontal:"center"},d().createElement(D.Z,{type:"button",order:"tertiary",onClick:e.handleNotifyBack},"Back"))))}})||p,V=r(81281),G=r(43471),q=r(16720),W=r(94446);function B(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const $={LOADING:Symbol("Loading"),ENTRY:Symbol("Entry")};N=(0,m._V)("features/password-reset/enter-password",{initialState:$.LOADING}),R=(0,f.RR)("features/analytics","features/context/request","features/context/team","features/http","features/notification","navigator"),k=b.aD.bound,z=b.aD.bound,j=b.aD.bound,x=b.aD.bound,N(L=R((F=B((M=class{constructor(e,t,r,n,i,o){var a,s,l,c;a=this,s="policy",c=this,(l=F)&&Object.defineProperty(a,s,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(c):void 0}),this.analytics=e,this.request=t,this.team=r,this.http=n,this.notification=i,this.navigator=o}onInit({props:e}){this.handleNotifyBack=e.onBack||(()=>{}),this.notifyError=e.onError||(()=>{}),this.notifySuccess=e.onSuccess||(()=>{})}async onEnter({props:e}){this.track(E.p$.VIEWED),await this.loadPolicy(e.resetId),this.transition($.ENTRY)}async loadPolicy(e){try{const t=await this.http.get("/auth-api/password/policy",{params:{reset_id:e},errorMap:{404:()=>({data:{errorCode:V.SM.PASSWORD_RESET_NOT_FOUND,message:null}})}}).then((e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.policy}));(0,b.z)((()=>{this.policy=G.GC.from(t)}))}catch(e){var t,r;const n=null==e||null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.errorCode;this.notification.notify(W.Z[n]),this.notifyError(e)}}async submit(e){try{this.track(E.p$.SUBMITTED),await this.http.post("/auth-api/password/reset",{data:{email:this.request.get("email"),resetid:this.request.get("resetid"),password:e.password},errorMap:{400:e=>{var t;return{data:{errorCode:((e="")=>/Validation failure/i.test(e)?V.SM.INVALID_FORM_FIELD:V.SM.PASSWORD_RESET_NOT_FOUND)(null===(t=e.data)||void 0===t?void 0:t.message),message:null}}}}}),this.track(E.p$.SUCCEEDED),this.notification.notify("Your password was successfully updated.","success"),this.notifySuccess()}catch(e){var t,r;const n=null==e||null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.errorCode;this.track(E.p$.FAILED,{errorCode:n}),this.notification.notify(W.Z[n]),this.notifyError(e)}}track(e,t={}){this.analytics.track(E.zW.RESET_PASSWORD,e,{...t,subdomain:this.team.subdomain})}}).prototype,"policy",[b.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B(M.prototype,"onInit",[k],Object.getOwnPropertyDescriptor(M.prototype,"onInit"),M.prototype),B(M.prototype,"onEnter",[z],Object.getOwnPropertyDescriptor(M.prototype,"onEnter"),M.prototype),B(M.prototype,"loadPolicy",[j],Object.getOwnPropertyDescriptor(M.prototype,"loadPolicy"),M.prototype),B(M.prototype,"submit",[x],Object.getOwnPropertyDescriptor(M.prototype,"submit"),M.prototype),L=M))||L);var H,K,Y,X,J,Q,ee,te,re,ne,ie,oe=(0,m.ls)("features/password-reset/enter-password")(Z=class extends d().Component{render(){const{email:e,store:t}=this.props;return{[$.ENTRY]:d().createElement(O.Z,{speed:"medium",order:"drop-in-bottom"},d().createElement(v.X6,{heading:"Please enter your new password",align:"center"}),d().createElement(q.Z,{email:e,onSubmit:e=>t.submit(e),policy:t.policy,submitText:"Set new password"}),d().createElement(S.Z,{horizontal:"center"},d().createElement(w.Z,{top:"s"},d().createElement(D.Z,{order:"secondary",onClick:t.handleNotifyBack},"Back"))))}[t.state]||d().createElement(v.gb,null)}})||Z,ae=r(90660);function se(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function le(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const ce={LOADING:Symbol("Loading"),REQUEST_RESET:Symbol("Request Reset"),SET_PASSWORD:Symbol("Set Password")};H=(0,m._V)("features/password-reset",{initialState:ce.LOADING}),K=(0,f.RR)("features/http","features/context/request","features/context/team","history","navigator"),Y=(0,E.UO)({flow:"Signin"}),X=b.aD.bound,J=b.aD.bound,Q=b.aD.bound,H(ee=K(ee=Y((re=le((te=class{constructor(e,t,r,n,i){se(this,"email",re,this),se(this,"resetId",ne,this),this.http=e,this.request=t,this.team=r,this.history=n,this.nav=i}onInit({props:e}){this.handleNotifyBack=e.onBack||(()=>{this.history.goBack()}),this.handleNotifyRequested=e.onRequested||(()=>{this.handleNotifyBack()}),this.handleNotifySuccess=e.onSuccess||(()=>{const e=this.request.redirectTo||"sign-in",t=g()(this.request.queryobject,["email","resetid","redirectTo"]);this.nav.goTo(e,{query:t})})}async onEnter(){return this.email=this.request.get("email"),this.resetId=this.request.get("resetid"),this.resetId?this.transition(ce.SET_PASSWORD):this.handleRestart()}handleRestart(){this.transition(ce.REQUEST_RESET)}}).prototype,"email",[b.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=le(te.prototype,"resetId",[b.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le(te.prototype,"onInit",[X],Object.getOwnPropertyDescriptor(te.prototype,"onInit"),te.prototype),le(te.prototype,"onEnter",[J],Object.getOwnPropertyDescriptor(te.prototype,"onEnter"),te.prototype),le(te.prototype,"handleRestart",[Q],Object.getOwnPropertyDescriptor(te.prototype,"handleRestart"),te.prototype),ee=te))||ee)||ee);var pe,ue,de=(0,m.ls)("features/password-reset")(ie=class extends d().Component{render(){const{store:e}=this.props,t={[ce.REQUEST_RESET]:d().createElement(d().Fragment,null,d().createElement(h.h4.eJ,{key:"back-1",onClick:()=>e.handleNotifyBack()}),d().createElement(U,{onBack:e.handleNotifyBack,onSuccess:e.handleNotifyRequested})),[ce.SET_PASSWORD]:d().createElement(d().Fragment,null,d().createElement(h.h4.eJ,{key:"back-2",onClick:()=>e.handleRestart()}),d().createElement(oe,{email:e.email,resetId:e.resetId,onBack:e.handleRestart,onError:e.handleRestart,onSuccess:e.handleNotifySuccess}))}[e.state]||d().createElement(v.gb,null);return d().createElement(ae.ur,{stores:e.team},t)}})||ie;const me={LOADING:Symbol("Loading")};(0,m._V)("features/password-reset/layout",{initialState:me.LOADING})(pe=class{});var he=(0,m.ls)("features/password-reset/layout")(ue=class extends d().Component{render(){const{store:e,...t}=this.props;return d().createElement(h.wC.A,null,d().createElement(de,t))}})||ue},50703:function(e,t,r){"use strict";var n=r(57745),i=r.n(n);i().validators.complexity=function(e,t,r){const n="single"===r?e:e[r],i=/[a-z]+/.test(n),o=/[A-Z]+/.test(n),a=/[0-9]+/.test(n),s=[];if(o||s.push("1 uppercase"),i||s.push("1 lowercase"),a||s.push("a numeral"),!s.length)return null;let l="Must include";for(let e=0;e<s.length;e++){const t=s[e];0!==e?e!==s.length-1?e>0&&(l+=`, ${t}`):l+=` and ${t}`:l+=` ${t}`}return l};class o{constructor({minLength:e,complex:t}={}){this.minLength=e,this.complex=t,this.schema={},e&&(this.schema.length={minimum:e,message:`Please make sure your password has at least ${this.minLength} characters`}),t&&(this.schema.complexity={message:"Please make sure your password includes 1 uppercase, 1 lowercase, and a numeral"})}get message(){let e=`Please make sure your password has at least ${this.minLength} characters`;return this.complex&&(e+=", including 1 uppercase, 1 lowercase, and a numeral"),e}validate(e){return i().single(e,this.schema)||null}static from(e){return new o({minLength:e.minimumPasswordLength||6,complex:e.enablePasswordComplexity||!1})}static default(){return new o({minLength:6,complex:!1})}}t.Z=o},16720:function(e,t,r){"use strict";var n,i=r(16624),o=r.n(i),a=r(76069),s=r(30195),l=r(87860),c=r(44527),p=r(5013);let u=(0,a.Pi)(n=class extends o().Component{render(){const{email:e,emailDisplayed:t,policy:r,submitText:n="Set New Password",onSubmit:i=(()=>{})}=this.props;return o().createElement(d,{"data-component":"password-update-form",submit:i},o().createElement(p.Ew,{policy:r}),t?o().createElement(c.GT,{id:"update_password_email",name:"email",label:"Email address",defaultValue:e,autoFocus:!0,autoComplete:"username",disabled:!0}):o().createElement(m,{id:"update_password_email",isUncontrolled:!0,name:"email",type:"text",defaultValue:e,autoComplete:"username",disabled:!0}),o().createElement(c.ro,{id:"update_password",name:"password",label:"Password",policy:r,autoFocus:!0,autoComplete:"new-password",tabIndex:"1"}),o().createElement(c.ro,{id:"update_password_confirm",name:"password_confirm",label:"Confirm password",match:"password",autoComplete:"new-password",tabIndex:"2"}),o().createElement(c.k4,null,n))}})||n;const d=(0,l.ZP)(c.l0).withConfig({displayName:"UpdateForm__AlignedForm",componentId:"a2nixz-0"})(["text-align:left;"]),m=(0,l.ZP)(s.Z).withConfig({displayName:"UpdateForm__HiddenInput",componentId:"a2nixz-1"})(["display:none !important;"]);t.Z=u},43471:function(e,t,r){"use strict";r.d(t,{GC:function(){return n.Z}});var n=r(50703);r(20314)},66756:function(e,t,r){"use strict";r.d(t,{Z:function(){return Lt}});var n,i,o,a,s,l,c,p,u,d,m,h,y,g=r(64267),b=r(59549),f=r(21490),E=r(12020),v=r(20643),O=r.n(v),w=r(32837);function S(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function D(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const I=(0,w.kg)("features:public-link:api");n=(0,b.En)("features/public-link/api"),i=(0,b.RR)("features/context/client","features/context/response","features/context/team","features/context/user","features/http"),o=g.aD.bound,a=g.aD.bound,s=g.aD.bound,l=g.aD.bound,c=g.aD.bound,p=g.aD.bound,u=g.aD.bound,n(d=(0,b.ri)(d=i((h=D((m=class{constructor(e,t,r,n,i){this.marketingOptOut=!1,S(this,"user",h,this),S(this,"team",y,this),this.client=e,this.response=t,this.teamContext=r,this.userContext=n,this.http=i}setAnalyticsID(e){this.user.analyticsID=e}setData(e){this.user=O()(e,"user",{}),this.team=O()(e,"team",{})}setOptOut(e){this.marketingOptOut=e}setUserID(e){this.user.id=e}async ensurePartialSession(e){await this.http.post("/login-api/api/v2/login",{data:{...e,deviceID:f.Z.WEB},errorKey:"global",errorMap:E.Z.SignInV2({team:this.teamContext.current,log:I}),maxRedirects:0,withCredentials:!0});const{jwt:t}=await this.http.post("/auth-api/session/jwt").then((e=>e.data));t&&this.userContext.usingAuthToken(t)}passwordCreated({password:e}){this.user.password=e}emailVerified({token:e}){this.user.token=e}nameCreated({name:e}){this.user.name=e}}).prototype,"user",[g.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{id:null,email:null,analyticsID:null}}}),y=D(m.prototype,"team",[g.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{id:null,loginType:null}}}),D(m.prototype,"setAnalyticsID",[o],Object.getOwnPropertyDescriptor(m.prototype,"setAnalyticsID"),m.prototype),D(m.prototype,"setData",[a],Object.getOwnPropertyDescriptor(m.prototype,"setData"),m.prototype),D(m.prototype,"setOptOut",[s],Object.getOwnPropertyDescriptor(m.prototype,"setOptOut"),m.prototype),D(m.prototype,"setUserID",[l],Object.getOwnPropertyDescriptor(m.prototype,"setUserID"),m.prototype),D(m.prototype,"passwordCreated",[c],Object.getOwnPropertyDescriptor(m.prototype,"passwordCreated"),m.prototype),D(m.prototype,"emailVerified",[p],Object.getOwnPropertyDescriptor(m.prototype,"emailVerified"),m.prototype),D(m.prototype,"nameCreated",[u],Object.getOwnPropertyDescriptor(m.prototype,"nameCreated"),m.prototype),d=m))||d)||d);var C,T,P,A,_,N,R,k=r(28511),z=r(5260),j=r(5013),x=r(47714),L=r(16624),M=r.n(L),F=r(73683),Z=r(76262),U=r(16720),V=r(88104);function G(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}C=(0,V.oe)("features/public-link/form/password"),T=(0,b.RR)("features/analytics","features/public-link/api","features/http"),P=g.aD.bound,A=g.aD.bound,C(_=T((G((N=class{constructor(e,t,r){this.analytics=e,this.api=t,this.http=r}viewed(){this.analytics.track(k.zW.CREATE_PASSWORD,k.p$.VIEWED)}async submit(e){return this.analytics.track(k.zW.CREATE_PASSWORD,k.p$.SUBMITTED),await this.savePassword(e),e}async savePassword(e){const{id:t,email:r,token:n}=this.api.user;try{await this.http.post("/auth-api/password/create",{data:{id:t,email:r,token:n,password:e},errorKey:"global",maxRedirects:0,timeout:3e3,withCredentials:!0})}catch(e){throw this.analytics.track(k.zW.CREATE_PASSWORD,k.p$.FAILED),e}}}).prototype,"viewed",[P],Object.getOwnPropertyDescriptor(N.prototype,"viewed"),N.prototype),G(N.prototype,"submit",[A],Object.getOwnPropertyDescriptor(N.prototype,"submit"),N.prototype),_=N))||_);var q,W,B,$,H,K,Y,X=(0,V.ei)("features/public-link/form/password")(R=class extends M().Component{componentDidMount(){this.props.store.viewed()}render(){const{store:e,email:t,passwordPolicy:r,onSuccess:n=(()=>{}),onError:i=(()=>{})}=this.props;return M().createElement(M().Fragment,null,M().createElement(j.X6,{heading:"Create a password to finish your comment",subheading:"Your comment will immediately be posted for the team"}),M().createElement(U.Z,{onSubmit:t=>e.submit(t.password).then(n,i),submitText:"Sign in",email:t,emailDisplayed:!0,policy:r}),M().createElement(j.Fe,{actionText:'clicking "Sign in"'}))}})||R,J=r(50703);function Q(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const ee={VERIFY_EMAIL:Symbol("VERIFY_EMAIL"),CREATE_PASSWORD:Symbol("CREATE_PASSWORD")};q=(0,z._V)("features/public-link/account-without-password",{initialState:ee.VERIFY_EMAIL}),W=(0,b.RR)("features/public-link/api","features/analytics","features/context/team"),B=g.aD.bound,$=g.aD.bound,H=g.aD.bound,q(K=W((Q((Y=class{constructor(e,t,r){this.api=e,this.analytics=t,this.teamContext=r}get team(){return this.teamContext.current}get passwordPolicy(){return this.team&&this.team.passwordPolicy?J.Z.from(this.team.passwordPolicy):J.Z.default()}async emailVerified(e,{token:t}){e.emailVerified({token:t}),this.transition(ee.CREATE_PASSWORD)}async updateContext(e,t){e.passwordCreated({password:t})}async success(){const{email:e,password:t}=this.api.user;await this.api.ensurePartialSession({email:e,password:t})}}).prototype,"team",[g.Fl],Object.getOwnPropertyDescriptor(Y.prototype,"team"),Y.prototype),Q(Y.prototype,"passwordPolicy",[g.Fl],Object.getOwnPropertyDescriptor(Y.prototype,"passwordPolicy"),Y.prototype),Q(Y.prototype,"emailVerified",[B],Object.getOwnPropertyDescriptor(Y.prototype,"emailVerified"),Y.prototype),Q(Y.prototype,"updateContext",[$],Object.getOwnPropertyDescriptor(Y.prototype,"updateContext"),Y.prototype),Q(Y.prototype,"success",[H],Object.getOwnPropertyDescriptor(Y.prototype,"success"),Y.prototype),K=Y))||K);var te;var re,ne,ie,oe,ae,se,le,ce,pe,ue=(0,b.f3)("features/public-link/api")(te=(0,z.ls)("features/public-link/account-without-password")(te=class extends M().Component{render(){const{store:e,"features/public-link/api":t,onSuccess:r=(async()=>{}),onError:n=(()=>{})}=this.props,i=async()=>{await e.success().then(r)};return{[ee.CREATE_PASSWORD]:M().createElement(X,{email:t.user.email,passwordPolicy:e.passwordPolicy,onSuccess:r=>e.updateContext(t,r).then(i,n)}),[ee.VERIFY_EMAIL]:M().createElement(Z.Z,{id:"public_link_signup_email",email:t.user.email,team:e.team,isClosing:e.transitioning,onClose:()=>e.transitionComplete(),onSuccess:r=>e.emailVerified(t,r)})}[e.state]||M().createElement(F.Z,null)}})||te)||te,de=r(6895),me=r(87985),he=r(41899),ye=r(44527);function ge(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}re=(0,V.oe)("features/public-link/form/identity"),ne=(0,b.RR)("features/analytics","features/http","features/context/team"),ie=(0,k.UO)({flow:"PublicLink"}),oe=g.aD.bound,ae=g.aD.bound,re(se=ne(se=ie((ce=ge((le=class{constructor(e,t,r){var n,i,o,a;n=this,i="submitting",a=this,(o=ce)&&Object.defineProperty(n,i,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(a):void 0}),this.analytics=e,this.http=t,this.team=r}onEnter(){const{subdomain:e}=this.team;this.analytics.track(k.zW.ENTER_EMAIL,k.p$.VIEWED,{subdomain:e})}async submit(e){this.submitting=!0,this.analytics.track(k.zW.ENTER_EMAIL,k.p$.SUBMITTED);try{const t=await this.http.get("/auth-api/public-link",{params:{email:e.email,teamID:this.team.id},errorKey:"global"});return this.analytics.track(k.zW.ENTER_EMAIL,k.p$.SUCCEEDED),t.data}catch(e){throw this.analytics.track(k.zW.ENTER_EMAIL,k.p$.FAILED),e}finally{this.submitting=!1}}}).prototype,"submitting",[g.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ge(le.prototype,"onEnter",[oe],Object.getOwnPropertyDescriptor(le.prototype,"onEnter"),le.prototype),ge(le.prototype,"submit",[ae],Object.getOwnPropertyDescriptor(le.prototype,"submit"),le.prototype),se=le))||se)||se);var be,fe,Ee,ve,Oe,we,Se,De=(0,V.ei)("features/public-link/form/identity")(pe=class extends M().Component{render(){const{store:e,onSuccess:t=(()=>{}),onError:r=(()=>{})}=this.props;return M().createElement(M().Fragment,null,M().createElement(j.X6,{align:"left",heading:"Enter your email to leave your comment",subheading:"We'll only use this to let the team know who left the comment"}),M().createElement(ye.ZP,{"data-component":"public-link-identify-form",submit:n=>e.submit(n).then(t,r)},M().createElement(he.GT,{autoComplete:"username",autoFocus:!0,id:"public_link_email",label:"Email address",name:"email",tabIndex:"0"}),M().createElement(he.k4,null,e.submitting?M().createElement(me.Z,{color:"white"}):"Continue")))}})||pe;function Ie(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Ce={VERIFY_EMAIL:Symbol("VERIFY_EMAIL"),CREATE_ACCOUNT:Symbol("CREATE_ACCOUNT")};be=(0,z._V)("features/public-link/new-user",{initialState:Ce.VERIFY_EMAIL}),fe=(0,b.RR)("features/public-link/api","features/analytics"),Ee=g.aD.bound,ve=g.aD.bound,Oe=g.aD.bound,be(we=fe((Ie((Se=class{constructor(e,t){this.api=e,this.analytics=t}get passwordPolicy(){return J.Z.default()}async emailVerified(e,{token:t}){e.emailVerified({token:t}),this.transition(Ce.CREATE_ACCOUNT)}async submit(e,{password:t,name:r}){return e.passwordCreated({password:t}),e.nameCreated({name:r}),this.success()}async success(){const{email:e,password:t}=this.api.user;await this.api.ensurePartialSession({email:e,password:t})}}).prototype,"passwordPolicy",[g.Fl],Object.getOwnPropertyDescriptor(Se.prototype,"passwordPolicy"),Se.prototype),Ie(Se.prototype,"emailVerified",[Ee],Object.getOwnPropertyDescriptor(Se.prototype,"emailVerified"),Se.prototype),Ie(Se.prototype,"submit",[ve],Object.getOwnPropertyDescriptor(Se.prototype,"submit"),Se.prototype),Ie(Se.prototype,"success",[Oe],Object.getOwnPropertyDescriptor(Se.prototype,"success"),Se.prototype),we=Se))||we);var Te,Pe,Ae,_e,Ne,Re,ke,ze=r(95714),je=r(81772),xe=r(50902),Le=r(80733),Me=r(74591);function Fe(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Te=(0,V.oe)("features/public-link/form/sign-up"),Pe=(0,b.RR)("features/analytics","features/public-link/api","features/http","features/tracking/marketo"),Ae=g.aD.bound,_e=g.aD.bound,Te(Ne=Pe((Fe((Re=class{constructor(e,t,r,n){this.analytics=e,this.api=t,this.http=r,this.marketo=n}get prefilledEmail(){return this.api.user.email}get token(){return this.api.user.token}viewed(){this.analytics.track(k.zW.CREATE_ACCOUNT,k.p$.VIEWED)}async submit(e){return this.analytics.track(k.zW.CREATE_ACCOUNT,k.p$.SUBMITTED),await this.signUpUser(e),e}async signUpUser({name:e,password:t,marketingOptOut:r=!1}){this.api.setOptOut(r);try{const n=await this.http.post("/auth-api/account/signup",{data:{email:this.prefilledEmail,password:t,name:e,marketingOptOut:r,token:this.token},errorKey:"global",maxRedirects:0,timeout:3e3,withCredentials:!0}).then((e=>e.data));this.marketo.submit({userId:n.vendorID,email:this.prefilledEmail,name:e,marketingOptOut:r}),this.api.setAnalyticsID(O()(n,"vendorID","")),this.api.setUserID(O()(n,"id",""))}catch(e){throw this.analytics.track(k.zW.CREATE_ACCOUNT,k.p$.FAILED),e}}}).prototype,"prefilledEmail",[g.Fl],Object.getOwnPropertyDescriptor(Re.prototype,"prefilledEmail"),Re.prototype),Fe(Re.prototype,"token",[g.Fl],Object.getOwnPropertyDescriptor(Re.prototype,"token"),Re.prototype),Fe(Re.prototype,"viewed",[Ae],Object.getOwnPropertyDescriptor(Re.prototype,"viewed"),Re.prototype),Fe(Re.prototype,"submit",[_e],Object.getOwnPropertyDescriptor(Re.prototype,"submit"),Re.prototype),Ne=Re))||Ne);var Ze,Ue=(0,V.ei)("features/public-link/form/sign-up")(ke=class extends M().Component{componentDidMount(){this.props.store.viewed()}render(){const{store:e,passwordPolicy:t,onSuccess:r=(()=>{}),onError:n=(()=>{})}=this.props;return M().createElement(M().Fragment,null,M().createElement(j.X6,{heading:"Sign up and leave your comment",subheading:"Your comment will immediately be posted for the team"}),M().createElement(Le.l0,{submit:t=>e.submit(t).then(r,n)},M().createElement(ze.Z,{requestKey:"global"}),M().createElement(je.Z,{bottom:"l"},M().createElement(xe.Z,{status:"info"},t.message)),M().createElement(he.GT,{id:"signup_email",name:"email",label:"Email address",autoFocus:!0,disabled:!0,defaultValue:e.prefilledEmail,tabIndex:"1"}),M().createElement(he.xv,{id:"signup_name",name:"name",label:"Name",autoComplete:"name",tabIndex:"2"}),M().createElement(he.ro,{id:"signup_password",name:"password",label:"Password",policy:t,autoComplete:"password",tabIndex:"3"}),M().createElement(Me.Z,{compact:"true",id:"signup_marketing_opt_out",name:"marketingOptOut",tabIndex:"4"}),M().createElement(je.Z,{bottom:"l"},M().createElement(he.k4,{tabIndex:"5"},"Sign up")),M().createElement(j.Fe,{actionText:'clicking "Sign up"'})))}})||ke;var Ve,Ge,qe,We,Be,$e,He=(0,b.f3)("features/public-link/api")(Ze=(0,z.ls)("features/public-link/new-user")(Ze=class extends M().Component{render(){const{store:e,"features/public-link/api":t,onSuccess:r=(async()=>{}),onError:n=(()=>{})}=this.props;return{[Ce.CREATE_ACCOUNT]:M().createElement(Ue,{email:t.user.email,passwordPolicy:e.passwordPolicy,onSuccess:i=>e.submit(t,i).then(r,n)}),[Ce.VERIFY_EMAIL]:M().createElement(Z.Z,{id:"document_signup_email",email:t.user.email,team:e.team,isClosing:e.transitioning,onClose:()=>e.transitionComplete(),onSuccess:r=>e.emailVerified(t,r)})}[e.state]||M().createElement(F.Z,null)}})||Ze)||Ze,Ke=r(48526),Ye=r(57741),Xe=r(91587),Je=r(59953),Qe=r(87860);function et(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Ve=(0,V.oe)("features/public-link/sign-in/password-entry"),Ge=(0,b.RR)("features/public-link/api","features/context/team","features/context/user","navigator"),qe=g.aD.bound,Ve(We=Ge((et((Be=class{constructor(e,t,r,n){this.api=e,this.team=t,this.user=r,this.nav=n}get email(){return this.api.user.email}onInit({props:e}){this.handleNotifyForgotPassword=e.onForgotPassword||(()=>{this.nav.goTo("request-reset")})}}).prototype,"email",[g.Fl],Object.getOwnPropertyDescriptor(Be.prototype,"email"),Be.prototype),et(Be.prototype,"onInit",[qe],Object.getOwnPropertyDescriptor(Be.prototype,"onInit"),Be.prototype),We=Be))||We);let tt=(0,V.ei)("features/public-link/sign-in/password-entry")($e=class extends M().Component{render(){const{store:e,renderForm:t}=this.props;return M().createElement(M().Fragment,null,M().createElement(j.X6,{align:"left",heading:"Sign in to finish your comment",subheading:"Enter your password below to finish signing in"}),t({email:e.email,passwordHelper:M().createElement(rt,{type:"button",order:"tertiary",onClick:e.handleNotifyForgotPassword},"Forgot your password?")}))}})||$e;const rt=(0,Qe.ZP)(Je.Z).withConfig({displayName:"PasswordEntry__HelperLink",componentId:"sc-49rf8l-0"})(["position:absolute;top:0;right:0;font-size:12px;"]);var nt,it,ot=tt,at=r(64870),st=r.n(at);(0,V.oe)("features/public-link/sign-in/password-update")(nt=(0,b.RR)("features/context/team")(nt=class{constructor(e){this.team=e}})||nt);var lt,ct=(0,V.ei)("features/public-link/sign-in/password-update")(it=class extends M().Component{render(){const{renderForm:e,transaction:t}=this.props;return M().createElement(M().Fragment,null,{[st().PASSWORD_COMPLEXITY]:M().createElement(j.X6,{align:"center",heading:"Set a stronger password",subheading:"Your team's security requirements have changed since you last logged in"}),[st().PASSWORD_EXPIRED]:M().createElement(j.X6,{align:"center",heading:"Create a new password",subheading:"Your current password has expired"})}[t.errorCode],e())}})||it;var pt,ut,dt,mt,ht,yt,gt,bt,ft,Et=(0,b.f3)("features/sign-in/api","features/context/team")(lt=class extends M().Component{render(){const{"features/sign-in/api":e,"features/context/team":t,onChangeMethod:r=(()=>{}),onSuccess:n=(()=>{}),onError:i=(()=>{})}=this.props;return M().createElement(Ye.Z,{onEnter:({store:r})=>{if(r.state===Ye.e.SIGN_IN_PROMPT){const{enabled:r,domains:n}=O()(t,"openEnrollment",{});e.track(k.p$.VIEWED,{openEnrollment:r&&n.length?"enabled":"disabled",authenticationType:"password"})}},renderEntryForm:e=>M().createElement(ot,{renderForm:e,onChangeMethod:r}),renderUpdateForm:(e,{transaction:t})=>M().createElement(ct,{renderForm:e,transaction:t}),renderMFAForm:(e,{transaction:t})=>M().createElement(Xe.Z,{renderForm:e,transaction:t}),renderMFARequired:e=>e(),onSuccess:n,onError:i})}})||lt;function vt(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Ot=(0,w.kg)("sign-in"),wt={LOADING:Symbol("Loading"),FORGOT_PASSWORD:Symbol("Forgot Password"),SIGN_IN_PASSWORD:Symbol("Sign-in: Password")};pt=(0,z._V)("features/public-link/sign-in",{initialState:wt.SIGN_IN_PASSWORD}),ut=(0,b.RR)("features/sign-in/api","features/analytics","features/context/user"),dt=g.aD.bound,mt=g.aD.bound,ht=g.aD.bound,yt=g.aD.bound,pt(gt=ut((vt((bt=class{constructor(e,t,r){this.api=e,this.analytics=t,this.user=r}handleAuthenticate(){this.transition(wt.SIGN_IN_PASSWORD)}handleForgotPassword(){this.transition(wt.FORGOT_PASSWORD)}async success(){this.transition(wt.LOADING),await this.analytics.identify(this.user.analyticsID,{email:this.user.email}),await this.api.track(k.p$.SUCCEEDED)}async handleFailure(e){const t=O()(e,"response.data.errorCode");Ot("Sign-in failed: (%o) %s",t,e.message),this.api.track(k.p$.FAILED,{errorCode:t})}}).prototype,"handleAuthenticate",[dt],Object.getOwnPropertyDescriptor(bt.prototype,"handleAuthenticate"),bt.prototype),vt(bt.prototype,"handleForgotPassword",[mt],Object.getOwnPropertyDescriptor(bt.prototype,"handleForgotPassword"),bt.prototype),vt(bt.prototype,"success",[ht],Object.getOwnPropertyDescriptor(bt.prototype,"success"),bt.prototype),vt(bt.prototype,"handleFailure",[yt],Object.getOwnPropertyDescriptor(bt.prototype,"handleFailure"),bt.prototype),gt=bt))||gt);var St,Dt,It,Ct,Tt,Pt,At,_t,Nt,Rt=(0,z.ls)("features/public-link/sign-in")(ft=class extends M().Component{render(){const{store:e,onSuccess:t}=this.props;return{[wt.FORGOT_PASSWORD]:M().createElement(Ke.Z,{onBack:e.handleAuthenticate}),[wt.SIGN_IN_PASSWORD]:M().createElement(Et,{onForgotPassword:e.handleForgotPassword,onSuccess:r=>e.success(r).then(t),onError:e.handleFailure})}[e.state]||M().createElement(j.gb,null)}})||ft;function kt(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const zt=(0,w.kg)("features:public-link"),jt={ACCOUNT_MISSING:Symbol("PLC: Account missing"),ACCOUNT_WITHOUT_PASSWORD:Symbol("PLC: Account w/o password"),FORBIDDEN:Symbol("PLC: Forbidden"),IDENTIFY:Symbol("PLC: Identify"),LOADING:Symbol("PLC: Loading"),SIGN_IN:Symbol("PLC: Sign in")},xt=new Map([[jt.ACCOUNT_MISSING,k.zW.CREATE_ACCOUNT],[jt.ACCOUNT_WITHOUT_PASSWORD,k.zW.CREATE_PASSWORD]]);St=(0,z._V)("features/public-link",{initialState:jt.LOADING}),Dt=(0,b.RR)("features/analytics","features/context/client","features/context/cloud-ui","features/context/response","features/context/team","features/context/user","features/public-link/api"),It=(0,k.UO)({flow:"PublicLink"}),Ct=g.aD.bound,Tt=g.aD.bound,Pt=g.aD.bound,St(At=Dt(At=It((kt((_t=class{constructor(e,t,r,n,i,o,a){this.analytics=e,this.client=t,this.cloud=r,this.response=n,this.team=i,this.user=o,this.api=a}async onEnter(){if(!this.client.isEmbedded)return this.transition(jt.FORBIDDEN);await this.team.load(),this.transition(jt.IDENTIFY)}handleIdentified(e){return zt("User identified: %O",e),this.api.setData(e),this.api.user.hasAccount?this.api.user.hasPassword?this.transition(jt.SIGN_IN):this.transition(jt.ACCOUNT_WITHOUT_PASSWORD):this.transition(jt.ACCOUNT_MISSING)}async handleComplete(){const e=xt.get(this.state);this.transition(jt.LOADING),this.analytics.identify(O()(this,"api.user.analyticsID",""),{email:O()(this,"api.user.email",""),name:O()(this,"api.user.name",""),date:Date.now(),opt_out:this.api.marketingOptOut,userId:O()(this,"api.user.id","")}),e&&this.analytics.track(e,k.p$.SUCCEEDED),await this.response.sendMessageSafe({jwt:this.user.authToken})}markData(){this.cloud.markDataLoaded()}}).prototype,"onEnter",[g.aD],Object.getOwnPropertyDescriptor(_t.prototype,"onEnter"),_t.prototype),kt(_t.prototype,"handleIdentified",[Ct],Object.getOwnPropertyDescriptor(_t.prototype,"handleIdentified"),_t.prototype),kt(_t.prototype,"handleComplete",[Tt],Object.getOwnPropertyDescriptor(_t.prototype,"handleComplete"),_t.prototype),kt(_t.prototype,"markData",[Pt],Object.getOwnPropertyDescriptor(_t.prototype,"markData"),_t.prototype),At=_t))||At)||At);var Lt=(0,z.ls)("features/public-link")(Nt=class extends M().Component{render(){const{store:e}=this.props;return M().createElement(x.wC.A,null,{[jt.IDENTIFY]:M().createElement(M().Fragment,null,M().createElement(de.Z,{action:e.markData}),M().createElement(De,{onSuccess:e.handleIdentified})),[jt.ACCOUNT_MISSING]:M().createElement(He,{onSuccess:e.handleComplete}),[jt.ACCOUNT_WITHOUT_PASSWORD]:M().createElement(ue,{onSuccess:e.handleComplete}),[jt.SIGN_IN]:M().createElement(Rt,{onSuccess:e.handleComplete}),[jt.FORBIDDEN]:M().createElement(j.rN,null)}[e.state]||M().createElement(j.gb,null))}})||Nt},9368:function(e,t,r){"use strict";var n=r(16624),i=r.n(n),o=r(81772),a=r(25817),s=r(5013);t.Z=({team:e,message:t})=>i().createElement(i().Fragment,null,i().createElement(s.Ir,{name:null==e?void 0:e.name,src:null==e?void 0:e.logo}),i().createElement(s.X6,{align:"center",heading:"Just one more step",subheading:i().createElement(o.Z,{bottom:"xl"},i().createElement(a.Z,{element:"p",order:"body"},"To join ",null==e?void 0:e.name,", please follow your team's instructions below:"),i().createElement(a.Z,{element:"p",order:"body",size:"larger"},t))}))},70273:function(e,t,r){"use strict";r.d(t,{Z:function(){return K}});var n,i,o,a,s,l,c,p,u,d=r(16624),m=r.n(d),h=r(20643),y=r.n(h),g=r(64267),b=r(48743),f=r(5260),E=r(59549),v=r(90660),O=r(47714),w=r(5013),S=r(9368),D=r(25817),I=r(26330),C=r(87985),T=r(37377),P=r.n(T),A=r(32837),_=r(59407),N=r(97674);function R(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function k(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const z=(0,A.kg)("request-access"),j={LOADING:Symbol("Loading"),REQUEST_SENT:Symbol("Request Sent"),SEND_REQUEST:Symbol("Send Request")};n=(0,f._V)("features/request-access/email",{initialState:j.LOADING}),i=(0,E.RR)("features/context/request","features/context/team","features/http","navigator"),o=g.aD.bound,a=g.aD.bound,n(s=i((c=k((l=class{constructor(e,t,r,n){R(this,"loading",c,this),R(this,"token",p,this),this.request=e,this.team=t,this.http=r,this.nav=n}async onInit({props:e}){if(this.token=e.token,!this.token)return this.nav.goTo("sign-in");this.transition(j.SEND_REQUEST)}async handleSendEmail(){this.loading=!0;try{await this.http.post("/auth-api/request-access/send",{data:{token:this.token},errorKey:"global"}),z("Sending request access email"),this.transition(j.REQUEST_SENT)}catch(e){z("Error sending request access email",e)}(0,g.z)((()=>{this.loading=!1}))}}).prototype,"loading",[g.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=k(l.prototype,"token",[g.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k(l.prototype,"onInit",[o],Object.getOwnPropertyDescriptor(l.prototype,"onInit"),l.prototype),k(l.prototype,"handleSendEmail",[a],Object.getOwnPropertyDescriptor(l.prototype,"handleSendEmail"),l.prototype),s=l))||s);var x,L,M,F,Z,U,V,G,q,W=(0,f.ls)("features/request-access/email")(u=class extends m().Component{render(){const{store:e}=this.props;return{[j.REQUEST_SENT]:m().createElement(m().Fragment,null,m().createElement(P(),null),m().createElement(w.X6,{align:"center",heading:"Your request has been sent",subheading:`A team admin will receive your request. Keep an eye out for an invitation to join ${e.team.name} as soon as they approve your request.`})),[j.SEND_REQUEST]:m().createElement(m().Fragment,null,m().createElement(w.Ir,{name:e.team.name,src:e.team.logo}),m().createElement(w.X6,{align:"center",heading:"Request to join the team",subheading:m().createElement(D.Z,{element:"span",order:"body",size:"larger"},"Before you can join, a team admin needs to approve your request,",m().createElement("br",null),"just click below and we’ll notify a team admin")}),m().createElement(_.HK,{requestKey:"global"}),m().createElement(I.Z,{alignItems:"center",flexDirection:"column"},m().createElement(N.KM,{onClick:e.handleSendEmail,disabled:e.loading},e.loading?m().createElement(C.Z,{color:"white"}):"Send request")))}[e.state]||null}})||u;function B(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const $={LOADING:Symbol("Loading"),CUSTOM_MESSAGE:Symbol("Custom message"),EMAIL:Symbol("Email"),ERROR:Symbol("Error")};x=(0,f._V)("features/request-access",{initialState:$.LOADING}),L=(0,E.RR)("features/context/team","features/context/user","features/http","navigator"),M=g.aD.bound,F=g.aD.bound,Z=g.aD.bound,x(U=L((G=B((V=class{constructor(e,t,r,n){var i,o,a,s;i=this,o="settings",s=this,(a=G)&&Object.defineProperty(i,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(s):void 0}),this.team=e,this.user=t,this.http=r,this.nav=n}get method(){return y()(this.settings,"requestAccess.method","email")}get message(){return y()(this.settings,"requestAccess.message")}get token(){return y()(this.settings,"requestAccess.token")}updateSettings(e){this.settings=e}async onEnter(){if(await this.user.loadSession(),!this.user.hasSession)return this.nav.goTo("/auth/sign-in",{subdomain:"login"});try{switch(this.updateSettings(await this.loadSettings()),this.method){case"email":return this.transition($.EMAIL);case"message":return this.transition($.CUSTOM_MESSAGE)}}catch(e){this.transition($.ERROR)}}async loadSettings(){return(await this.http.get("/auth-api/settings/team",{params:{include:"owner,requestAccess"}})).data}}).prototype,"settings",[g.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B(V.prototype,"method",[g.Fl],Object.getOwnPropertyDescriptor(V.prototype,"method"),V.prototype),B(V.prototype,"message",[g.Fl],Object.getOwnPropertyDescriptor(V.prototype,"message"),V.prototype),B(V.prototype,"token",[g.Fl],Object.getOwnPropertyDescriptor(V.prototype,"token"),V.prototype),B(V.prototype,"updateSettings",[M],Object.getOwnPropertyDescriptor(V.prototype,"updateSettings"),V.prototype),B(V.prototype,"onEnter",[F],Object.getOwnPropertyDescriptor(V.prototype,"onEnter"),V.prototype),B(V.prototype,"loadSettings",[Z],Object.getOwnPropertyDescriptor(V.prototype,"loadSettings"),V.prototype),U=V))||U);let H=(0,f.ls)("features/request-access")(q=class extends m().Component{render(){const{store:e}=this.props,t={[$.CUSTOM_MESSAGE]:m().createElement(b.Z,{speed:"medium",order:"drop-in-bottom"},m().createElement(S.Z,{team:e.team,message:e.message})),[$.EMAIL]:m().createElement(b.Z,{speed:"medium",order:"drop-in-bottom"},m().createElement(W,{token:e.token})),[$.ERROR]:m().createElement(b.Z,{speed:"medium",order:"drop-in-bottom"},m().createElement(w.ox,null))}[e.state]||m().createElement(w.gb,null);return m().createElement(O.wC.A,null,m().createElement(O.h4.SK,null),t)}})||q;var K=()=>m().createElement(v.h$,null,m().createElement(H,null))},59468:function(e,t,r){"use strict";r.d(t,{Z:function(){return ae}});var n,i,o,a,s,l,c,p,u,d,m,h,y,g=r(16624),b=r.n(g),f=r(64267),E=r(48743),v=r(5260),O=r(59549),w=r(90660),S=r(47714),D=r(5013),I=r(88821),C=r(87860),T=r(20643),P=r.n(T),A=r(50902),_=r(59953),N=r(81772),R=r(77877),k=r(95863),z=r(44527),j=r(9368);function x(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function L(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const M={LOADING:Symbol("Loading"),METHOD_EMAIL:Symbol("Method - Email"),METHOD_CUSTOM_MESSAGE:Symbol("Method - Custom Message")};n=(0,v._V)("features/request-access/settings/form",{initialState:M.LOADING}),i=(0,O.RR)("features/context/team"),o=f.aD.bound,a=f.aD.bound,s=f.aD.bound,l=f.aD.bound,c=f.aD.bound,p=f.aD.bound,n(u=i((m=L((d=class{constructor(e){x(this,"settings",m,this),x(this,"preview",h,this),this.team=e}get defaultEmail(){return P()(this.settings,"owner.email")}get defaultMessage(){return"Please contact your administrator for an invite"}get defaultMethod(){return P()(this.settings,"requestAccess.method","email")}get email(){const e=P()(this.settings,"requestAccess.email");return this.defaultEmail!==e?e:null}get message(){const e=P()(this.settings,"requestAccess.message");return this.defaultMessage!==e?e:null}onInit({props:e}){this.onSuccess=e.onSuccess||(()=>{}),this.updateSettings(e.settings),this.handleMethodChanged(P()(this.settings,"requestAccess.method","email"))}updateSettings(e){this.settings=e}handleMethodChanged(e){switch(e){case"email":return this.transition(M.METHOD_EMAIL);case"message":return this.transition(M.METHOD_CUSTOM_MESSAGE)}}handleShowPreview(){this.preview=!0}handleHidePreview(){this.preview=!1}handleSubmit(e){this.onSuccess({method:e.method||this.defaultMethod,message:e.customMessage||this.defaultMessage,email:e.customEmail||this.defaultEmail})}}).prototype,"settings",[f.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),h=L(d.prototype,"preview",[f.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L(d.prototype,"defaultEmail",[f.Fl],Object.getOwnPropertyDescriptor(d.prototype,"defaultEmail"),d.prototype),L(d.prototype,"defaultMessage",[f.Fl],Object.getOwnPropertyDescriptor(d.prototype,"defaultMessage"),d.prototype),L(d.prototype,"defaultMethod",[f.Fl],Object.getOwnPropertyDescriptor(d.prototype,"defaultMethod"),d.prototype),L(d.prototype,"email",[f.Fl],Object.getOwnPropertyDescriptor(d.prototype,"email"),d.prototype),L(d.prototype,"message",[f.Fl],Object.getOwnPropertyDescriptor(d.prototype,"message"),d.prototype),L(d.prototype,"onInit",[o],Object.getOwnPropertyDescriptor(d.prototype,"onInit"),d.prototype),L(d.prototype,"updateSettings",[a],Object.getOwnPropertyDescriptor(d.prototype,"updateSettings"),d.prototype),L(d.prototype,"handleMethodChanged",[s],Object.getOwnPropertyDescriptor(d.prototype,"handleMethodChanged"),d.prototype),L(d.prototype,"handleShowPreview",[l],Object.getOwnPropertyDescriptor(d.prototype,"handleShowPreview"),d.prototype),L(d.prototype,"handleHidePreview",[c],Object.getOwnPropertyDescriptor(d.prototype,"handleHidePreview"),d.prototype),L(d.prototype,"handleSubmit",[p],Object.getOwnPropertyDescriptor(d.prototype,"handleSubmit"),d.prototype),u=d))||u);let F=(0,v.ls)("features/request-access/settings/form")(y=class extends b().Component{render(){const{store:e}=this.props;return e.state===M.LOADING?b().createElement(D.gb,null):b().createElement(Z,null,b().createElement(D.X6,{heading:"Request access",subheading:"Manage how people can request to join your team",align:"center"}),b().createElement(z.l0,{onSubmit:e.handleSubmit},(t=>b().createElement(b().Fragment,null,b().createElement(z.$0,null,b().createElement(A.Z,{status:"info"},"Users must request access if you control their domain and have not approved it for signup, or if you setup SSO with auto-provisioning disabled."," ",b().createElement(_.Z,{href:"https://support.invisionapp.com/hc/en-us/articles/360053946432"},"Learn more."))),b().createElement(z.$0,null,b().createElement(N.Z,{vertical:"xxs"},b().createElement(z.rL,{label:"Select method",name:"method",onChange:e.handleMethodChanged,options:[{value:"email",children:"Requests to join the team will be sent to the email of your choosing"},{value:"message",children:"Set a custom message that explains how a user can request access"}],defaultValue:e.defaultMethod,unstyled:!0}))),{[M.METHOD_EMAIL]:b().createElement(z.$0,null,b().createElement(U,{htmlFor:"customEmail"},"Select who will receive request emails — we default to team owner if left empty"),b().createElement(z.GT,{name:"customEmail",autoComplete:"email",placeholder:e.defaultEmail,defaultValue:e.email,allowEmpty:!0})),[M.METHOD_CUSTOM_MESSAGE]:b().createElement(z.$0,null,b().createElement(R.Z,{horizontal:"space-between"},b().createElement(U,{htmlFor:"customMessage"},"Let people know how to request access to the team"),b().createElement(D.dL,{onClick:e.handleShowPreview},"Preview")),b().createElement(z.Kx,{name:"customMessage",placeholder:e.defaultMessage,defaultValue:e.message,rows:"5",allowEmpty:!0}))}[e.state]||null,b().createElement(z.$0,null,b().createElement(z.k4,null,"Update")),b().createElement(S.Vq.V,{open:e.preview,onRequestClose:e.handleHidePreview},b().createElement(j.Z,{team:e.team,message:t.values.get("customMessage")||e.defaultMessage}))))))}})||y;const Z=C.ZP.div.withConfig({displayName:"Form__Wrapper",componentId:"aks2vy-0"})(["min-height:600px;"]),U=(0,C.ZP)(k.Z).withConfig({displayName:"Form__TextLabel",componentId:"aks2vy-1"})([""," line-height:","px;"],(({theme:e})=>e.text.body),(({theme:e})=>e.text.body.lineHeight));var V,G,q,W,B,$,H,K,Y,X,J,Q=F;function ee(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const te=(0,r(32837).kg)("request-access"),re={LOADING:Symbol("Loading"),SETTINGS:Symbol("Settings"),PREVIEW:Symbol("Preview"),ERROR:Symbol("Error")},ne={query:{action:"REQUEST_ACCESS_SETTINGS_UPDATED"}},ie={query:{action:"REQUEST_ACCESS_SETTINGS_UNAUTHORIZED"}};V=(0,v._V)("features/request-access/settings",{initialState:re.LOADING}),G=(0,O.RR)("features/http","navigator"),q=f.aD.bound,W=f.aD.bound,B=f.aD.bound,$=f.aD.bound,H=f.aD.bound,V(K=G((X=ee((Y=class{constructor(e,t){var r,n,i,o;r=this,n="settings",o=this,(i=X)&&Object.defineProperty(r,n,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0}),this.http=e,this.nav=t}updateSettings(e){this.settings=e}async onEnter(){try{this.updateSettings(await this.load()),this.transition(re.SETTINGS)}catch(e){this.transition(re.ERROR)}}async load(){te("Loading settings for team");return(await this.http.get("/auth-api/settings/team",{params:{include:"owner,requestAccess"}})).data}async handleSave(e){await this.http.patch("/auth-api/settings/team",{data:{requestAccess:{method:e.method,email:e.email,message:e.message}},errorKey:"global"}),this.nav.goToOrigin(ne)}async handleClose(){this.nav.goToOrigin()}}).prototype,"settings",[f.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee(Y.prototype,"updateSettings",[q],Object.getOwnPropertyDescriptor(Y.prototype,"updateSettings"),Y.prototype),ee(Y.prototype,"onEnter",[W],Object.getOwnPropertyDescriptor(Y.prototype,"onEnter"),Y.prototype),ee(Y.prototype,"load",[B],Object.getOwnPropertyDescriptor(Y.prototype,"load"),Y.prototype),ee(Y.prototype,"handleSave",[$],Object.getOwnPropertyDescriptor(Y.prototype,"handleSave"),Y.prototype),ee(Y.prototype,"handleClose",[H],Object.getOwnPropertyDescriptor(Y.prototype,"handleClose"),Y.prototype),K=Y))||K);let oe=(0,v.ls)("features/request-access/settings")(J=class extends b().Component{render(){const{store:e}=this.props,t={[re.SETTINGS]:b().createElement(E.Z,{speed:"medium",order:"drop-in-bottom"},b().createElement(Q,{settings:e.settings,onSuccess:e.handleSave})),[re.ERROR]:b().createElement(E.Z,{speed:"medium",order:"drop-in-bottom"},b().createElement(D.ox,null))}[e.state]||b().createElement(D.gb,null);return b().createElement(S.wC.A,null,b().createElement(S.h4.SK,null),b().createElement(S.h4.x8,{onClick:e.handleClose}),t)}})||J;var ae=()=>b().createElement(w.h$,null,b().createElement(w.un,{permissionName:"Team.ChangeEnterpriseSettings",loading:b().createElement(D.gb,null),rejected:b().createElement(I.Ob,{params:ie})},(()=>b().createElement(oe,null))))},40895:function(e,t,r){"use strict";r.d(t,{Z:function(){return ke}});var n,i,o=r(16624),a=r.n(o),s=r(50650),l=r(5013),c=r(5260),p=r(64267),u=r(59549);const d={LOADING:Symbol("Loading"),SCIM_SETTINGS:Symbol("SCIM Settings"),FORBIDDEN:Symbol("Forbidden")};(0,c._V)("features/scim",{initialState:d.LOADING})(n=(0,u.RR)("features/http","features/scim/api","features/context/team","navigator")((m=(i=class{constructor(e,t,r,n){this.http=e,this.navigator=n,this.scimApi=t,this.team=r}async onEnter(){if(this.team.isGlobal)return this.navigator.goTo("sign-in");return await this.scimApi.canChangeEnterpriseSettings()?this.transition(d.SCIM_SETTINGS):this.transition(d.FORBIDDEN)}}).prototype,h="onEnter",y=[p.aD],g=Object.getOwnPropertyDescriptor(i.prototype,"onEnter"),b=i.prototype,f={},Object.keys(g).forEach((function(e){f[e]=g[e]})),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=y.slice().reverse().reduce((function(e,t){return t(m,h,e)||e}),f),b&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(b):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(m,h,f),f=null),n=i))||n);var m,h,y,g,b,f,E,v,O,w,S,D,I,C,T,P=r(8502),A=r(73683),_=r(32837),N=r(28511),R=r(64870),k=r.n(R),z=r(94446);function j(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const x=(0,_.kg)("features:scim:settings"),L={LOADING:Symbol("Loading"),LOADED:Symbol("Loaded")};E=(0,_.yN)("features:scim:settings"),v=(0,c._V)("features/scim/settings",{initialState:L.LOADING}),O=(0,u.RR)("features/analytics","features/notification","features/scim/api","navigator"),w=(0,N.UO)({flow:"TeamSettings"}),S=p.aD.bound,D=p.aD.bound,E(I=v(I=O(I=w((T=j((C=class{constructor(e,t,r,n){!function(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}(this,"scimEnabled",T,this),this.analytics=e,this.navigator=n,this.notification=t,this.scimApi=r}async onEnter(){return this.scimApi.samlEnabled||this.notification.notify(z.Z[k().SAML_DISABLED],"info"),await this.scimApi.getScimSettings(),this.scimEnabled=this.scimApi.current.enabled,this.transition(L.LOADED)}trackViewed(){this.analytics.track(N.zW.SCIM_SETTING,N.p$.VIEWED)}handleComplete(e){if(this.analytics.track(N.zW.SCIM_SETTING,N.p$.UPDATED,{enabled:e}),!e)return this.navigator.goTo("/teams/settings?action=SCIM_DISABLED")}handleError(e){x("Error updating SCIM",e),this.analytics.track(N.zW.SCIM_SETTING,N.p$.FAILED)}}).prototype,"scimEnabled",[p.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j(C.prototype,"onEnter",[p.aD],Object.getOwnPropertyDescriptor(C.prototype,"onEnter"),C.prototype),j(C.prototype,"trackViewed",[p.aD],Object.getOwnPropertyDescriptor(C.prototype,"trackViewed"),C.prototype),j(C.prototype,"handleComplete",[S],Object.getOwnPropertyDescriptor(C.prototype,"handleComplete"),C.prototype),j(C.prototype,"handleError",[D],Object.getOwnPropertyDescriptor(C.prototype,"handleError"),C.prototype),I=C))||I)||I)||I);var M=r(8765),F=r.n(M),Z=r(87860),U=r(88692),V=r(97653),G=r(25817),q=r(59953),W=r(81772),B=r(50902),$=r(76539),H=r(88104),K=r(47714),Y=r(44527);const X=Z.ZP.section.withConfig({displayName:"Table",componentId:"sc-1mn3v1w-0"})(["background:#fff;width:100%;border-top:1px solid ",";"],(({theme:e})=>e.palette.structure.lighter)),J=Z.ZP.div.withConfig({displayName:"Table__Row",componentId:"sc-1mn3v1w-1"})(["align-items:center;display:flex;list-style:none;border-bottom:1px solid ",";"],(({theme:e})=>e.palette.structure.lighter)),Q=Z.ZP.div.withConfig({displayName:"Table__Column",componentId:"sc-1mn3v1w-2"})(["flex-basis:150px;text-align:left;position:relative;align-self:stretch;"]),ee=(0,Z.ZP)(Q).withConfig({displayName:"Table__PaddedColumn",componentId:"sc-1mn3v1w-3"})(["flex-grow:2;padding:",";padding-right:0;overflow:hidden;white-space:nowrap;"],(({theme:e})=>`${e.spacing.m} ${e.spacing.s}`)),te=Z.ZP.div.withConfig({displayName:"Table__RoleContainer",componentId:"sc-1mn3v1w-4"})(["display:flex;align-items:center;justify-content:flex-end;height:100%;padding-right:",";"],(({theme:e})=>e.spacing.s));var re=r(12334),ne=r(94002);var ie,oe,ae,se,le,ce,pe,ue,de,me,he,ye,ge,be,fe,Ee=({reset:e})=>{const[t,r]=(0,o.useState)(!1);return a().createElement(a().Fragment,null,a().createElement(re.Z,{"data-component":"new-token-toggle",checked:t,onClick:()=>r(!t),unstyled:!0},"I want to generate a new token.")," ",a().createElement(ne.Z,{"data-component":"generate-new-token",disabled:!t,onClick:async t=>{t.preventDefault();await e()&&r(!1)},order:"tertiary",role:"button",size:"smaller"},"Generate token"))},ve=r(11602),Oe=r(20643),we=r.n(Oe);function Se(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function De(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}ie=(0,H.oe)("features/scim/form/settings"),oe=(0,u.RR)("features/analytics","features/context/request","features/scim/api","navigator"),ae=p.aD.bound,se=p.aD.bound,le=p.aD.bound,ce=p.aD.bound,pe=p.aD.bound,ie(ue=oe((me=De((de=class{constructor(e,t,r,n){Se(this,"isDirty",me,this),Se(this,"token",he,this),Se(this,"wasReset",ye,this),Se(this,"isToastVisible",ge,this),Se(this,"resetFailed",be,this),this.analytics=e,this.navigator=n,this.request=t,this.scimApi=r}get apiUrl(){return`https://${this.request.host}`}get buttonText(){return this.isDirty?"Update":"Done"}get createdAt(){const e=we()(this.scimApi,"current.token_created_at","");if(!e)return;const t=Date.now(),r=new Date(e),n=(0,ve.Z)(t,r);return n>=86400?Math.floor(n/86400)+"d":n>=3600?Math.floor(n/3600)+"h":n>=60?Math.floor(n/60)+"m":n+"s"}get disabled(){return!this.scimApi.samlEnabled}get showScimInfo(){return this.scimApi.initialScimValue}toggleScim(e){this.isDirty=e!==this.scimApi.initialScimValue}async handleClose(){await this.analytics.track(N.zW.SCIM_SETTING,N.p$.CLOSED),this.navigator.goTo("/teams/settings")}toggleToast(e=!1){this.isToastVisible=e}async submit(e){const t=await this.scimApi.toggleScim(e);return this.createdAt||(t?(this.token=await this.scimApi.generateToken(),this.isToastVisible=!0):this.token=""),this.isDirty=!1,t}async resetToken(){return this.token=await this.scimApi.generateToken("reset").catch((()=>{this.resetFailed=!0})),this.token&&(this.wasReset=!0,this.isToastVisible=!0,F()(this.token)),this.token}}).prototype,"isDirty",[p.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),he=De(de.prototype,"token",[p.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=De(de.prototype,"wasReset",[p.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ge=De(de.prototype,"isToastVisible",[p.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),be=De(de.prototype,"resetFailed",[p.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),De(de.prototype,"apiUrl",[p.Fl],Object.getOwnPropertyDescriptor(de.prototype,"apiUrl"),de.prototype),De(de.prototype,"buttonText",[p.Fl],Object.getOwnPropertyDescriptor(de.prototype,"buttonText"),de.prototype),De(de.prototype,"createdAt",[p.Fl],Object.getOwnPropertyDescriptor(de.prototype,"createdAt"),de.prototype),De(de.prototype,"disabled",[p.Fl],Object.getOwnPropertyDescriptor(de.prototype,"disabled"),de.prototype),De(de.prototype,"showScimInfo",[p.Fl],Object.getOwnPropertyDescriptor(de.prototype,"showScimInfo"),de.prototype),De(de.prototype,"toggleScim",[ae],Object.getOwnPropertyDescriptor(de.prototype,"toggleScim"),de.prototype),De(de.prototype,"handleClose",[se],Object.getOwnPropertyDescriptor(de.prototype,"handleClose"),de.prototype),De(de.prototype,"toggleToast",[le],Object.getOwnPropertyDescriptor(de.prototype,"toggleToast"),de.prototype),De(de.prototype,"submit",[ce],Object.getOwnPropertyDescriptor(de.prototype,"submit"),de.prototype),De(de.prototype,"resetToken",[pe],Object.getOwnPropertyDescriptor(de.prototype,"resetToken"),de.prototype),ue=de))||ue);let Ie=(0,H.ei)("features/scim/form/settings")(fe=class extends a().Component{constructor(e){super(e),this.showTokenSuccess=e=>{const{toggleToast:t}=this.props.store;return t(!0),a().createElement(U.Z,{"data-component":"token-toast",dismissable:!0,status:"success",placement:"top-center",withTimeout:!1,onDismiss:()=>t(!1)},e?"Your new token has been generated and copied to your clipboard.":"SCIM has been enabled. Please follow the directions below to complete your setup.")},this.handleChange=e=>{this.setState({scimEnabled:e},this.props.store.toggleScim(e))},this.state={scimEnabled:e.scimEnabled||!1}}UNSAFE_componentWillReceiveProps(e){this.state.scimEnabled!==e.scimEnabled&&this.setState({scimEnabled:e.scimEnabled})}showTokenNotice(e){return e?a().createElement(V.Z,{vertical:"s"},a().createElement(G.Z,{order:"body"},"To complete your team's SCIM setup, make sure to copy and paste both the SCIM API URL, and your Authentication token into your identity provider."," ",a().createElement(q.Z,{href:"https://support.invisionapp.com/hc/en-us/articles/360034707391",target:"_blank",rel:"noreferrer"},"Learn more."))):a().createElement(W.Z,{vertical:"s"},a().createElement(B.Z,{status:"info"},"For your team's security we don't display active authentication tokens. Generating a new token will immediately invalidate your current one."))}showResetError(){return a().createElement(W.Z,{vertical:"s"},a().createElement(B.Z,{status:"danger"},"A new token could not be generated, please try again later or contact support. Your current token is still valid."))}render(){const{onComplete:e=(()=>{}),onError:t=(()=>{}),store:r}=this.props;return a().createElement(K.wC.A,{"data-component":"scim-settings"},a().createElement(K.h4.x8,{onClick:r.handleClose,tooltipPlacement:"left",tooltip:r.isDirty?"You have unsaved changes":"Close"}),r.token&&r.isToastVisible&&this.showTokenSuccess(r.wasReset),a().createElement(l.X6,{heading:"User provisioning with SCIM",subheading:"Enable SCIM provisioning for your team",align:"center"}),a().createElement(Y.l0,{"data-component":"scim-settings-form",onSubmit:()=>r.isDirty?r.submit(this.state.scimEnabled).then(e,t):r.handleClose(),disabled:r.disabled},a().createElement(X,null,a().createElement(J,null,a().createElement(ee,null,a().createElement("label",{htmlFor:"toggle_scim"},a().createElement(Te,null,"Enable SCIM provisioning"))),a().createElement(Pe,null,a().createElement($.Z,{id:"toggle_scim",checked:this.state.scimEnabled,disabled:r.disabled,onChange:this.handleChange})))),a().createElement(l.kb,{isOpened:r.showScimInfo},r.resetFailed?this.showResetError():this.showTokenNotice(r.token),a().createElement(Y.xv,{id:"scim_api_url",isUncontrolled:!1,name:"apiUrl",label:"SCIM API URL",value:r.apiUrl,disabled:!0,withCopy:!0}),r.token?a().createElement(Y.xv,{id:"scim_token",isUncontrolled:!1,"data-component":"scim-token",name:"token",label:"Authentication token",value:r.token,disabled:!0,withCopy:r.token,onCopy:()=>{F()(r.token)},helper:!r.wasReset&&a().createElement(G.Z,{color:"danger"},"Make sure you have a copy of your token, we do not store it once you leave this screen.")}):a().createElement(Y.xv,{isUncontrolled:!1,name:"faketoken",type:"password",label:"Authentication token",value:"youvejustfoundthemarbleintheoatmeal",disabled:!0},r.createdAt&&a().createElement(Ce,{"data-component":"token-created-at",order:"body",size:"smallest"},"Generated ",r.createdAt," ago")),a().createElement(Ee,{reset:r.resetToken})),a().createElement(Y.k4,{"data-component":"primary-button",disabled:!r.showScimInfo&&!r.isDirty},r.buttonText)))}})||fe;const Ce=(0,Z.ZP)(G.Z).withConfig({displayName:"Form__GeneratedDate",componentId:"sc-46lc13-0"})(["height:52px;line-height:20px;padding:15px;position:absolute;right:0;top:",";"],(({theme:e})=>e.spacing.m)),Te=(0,Z.ZP)(G.Z).withConfig({displayName:"Form__LabelTitle",componentId:"sc-46lc13-1"})(["font-weight:500;"]),Pe=(0,Z.ZP)(te).withConfig({displayName:"Form__Field",componentId:"sc-46lc13-2"})(["padding-left:",";"],(e=>e.theme.spacing.m));var Ae,_e=Ie;var Ne,Re=(0,c.ls)("features/scim/settings")(Ae=class extends a().Component{componentDidMount(){setTimeout((()=>{this.props.store.trackViewed()}),0)}render(){const{store:e}=this.props;return{[L.LOADING]:a().createElement(A.Z,null),[L.LOADED]:a().createElement(P.Z,{flowStore:e},a().createElement(_e,{scimEnabled:e.scimEnabled,onComplete:e.handleComplete,onError:e.handleError}))}[e.state]}})||Ae;var ke=(0,c.ls)("features/scim")(Ne=class extends a().Component{render(){const{store:e}=this.props;return{[d.LOADING]:a().createElement(l.gb,null),[d.SCIM_SETTINGS]:a().createElement(s.Z,{stores:[e.team],loading:a().createElement(l.gb,null)},a().createElement(Re,null)),[d.FORBIDDEN]:a().createElement(l.rN,null)}[e.state]}})||Ne},8253:function(e,t,r){"use strict";r.d(t,{Z:function(){return ee}});var n,i,o,a,s,l,c,p,u,d=r(20643),m=r.n(d),h=r(16624),y=r.n(h),g=r(64267),b=r(81281),f=r(5260),E=r(59549),v=r(59407),O=r(5013),w=r(48743),S=r(25817),D=r(88104),I=r(8038);function C(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n=(0,D.oe)("features/session-elevate/email"),i=(0,E.RR)("features/http","features/context/user"),o=g.aD.bound,a=g.aD.bound,s=g.aD.bound,l=g.aD.bound,n(c=i((C((p=class{constructor(e,t){this.http=e,this.user=t}onInit({props:e}){this.notifySuccess=e.onSuccess||(()=>{})}async handleSend(){await this.http.post("/auth-api/challenges/verify-email",{data:{email:this.user.email},errorKey:"global",errorMap:{429:()=>({data:{errorCode:b.SM.TOO_MANY_REQUESTS},config:{[v.ew]:!0}})}})}async handleVerify({value:e}){await this.http.put("/auth-api/challenges/verify-email",{data:{code:e,email:this.user.email},errorKey:"global",errorMap:{401:()=>({data:{errorCode:b.SM.CHALLENGE_EMAIL_UNAUTHORIZED},config:{[v.ew]:!0}}),403:()=>({data:{errorCode:b.SM.CHALLENGE_EMAIL_UNAUTHORIZED},config:{[v.ew]:!0}}),429:()=>({data:{errorCode:b.SM.TOO_MANY_REQUESTS},config:{[v.ew]:!0}})}})}async handleSuccess(){this.notifySuccess()}}).prototype,"onInit",[o],Object.getOwnPropertyDescriptor(p.prototype,"onInit"),p.prototype),C(p.prototype,"handleSend",[a],Object.getOwnPropertyDescriptor(p.prototype,"handleSend"),p.prototype),C(p.prototype,"handleVerify",[s],Object.getOwnPropertyDescriptor(p.prototype,"handleVerify"),p.prototype),C(p.prototype,"handleSuccess",[l],Object.getOwnPropertyDescriptor(p.prototype,"handleSuccess"),p.prototype),c=p))||c);var T,P,A,_,N,R,k,z=(0,D.ei)("features/session-elevate/email")(u=class extends y().Component{render(){const{store:e}=this.props;return y().createElement(w.Z,{speed:"medium",order:"drop-in-bottom"},y().createElement(O.X6,{align:"center",heading:"Please verify your account",subheading:y().createElement(S.Z,{order:"body",prose:!0},"We just emailed a six-digit code to ",y().createElement("b",null,e.user.email),".",y().createElement("br",null),"Enter the code below to verify your account.")}),y().createElement(I.Z,{align:"center",email:e.user.email,onSend:e.handleSend,onVerify:e.handleVerify,onSuccess:e.handleSuccess}))}})||u,j=r(87860),x=r(32837),L=r(44527);function M(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const F=(0,x.kg)("session-elevate");T=(0,D.oe)("features/session-elevate/password"),P=(0,E.RR)("features/http","features/context/user"),A=g.aD.bound,_=g.aD.bound,T(N=P((M((R=class{constructor(e,t){this.http=e,this.user=t}onInit({props:e}){this.notifySuccess=e.onSuccess||(()=>{})}async submit(e){try{await this.http.put("/auth-api/challenges/verify-password",{data:{password:e.password},errorKey:"global",errorMap:{401:()=>({data:{errorCode:b.SM.CHALLENGE_PASSWORD_UNAUTHORIZED}}),403:()=>({data:{errorCode:b.SM.CHALLENGE_PASSWORD_UNAUTHORIZED}})}}),this.notifySuccess()}catch(e){F("Challenge failed: password")}}}).prototype,"onInit",[A],Object.getOwnPropertyDescriptor(R.prototype,"onInit"),R.prototype),M(R.prototype,"submit",[_],Object.getOwnPropertyDescriptor(R.prototype,"submit"),R.prototype),N=R))||N);let Z=(0,D.ei)("features/session-elevate/password")(k=class extends y().Component{render(){const{store:e}=this.props;return y().createElement(w.Z,{speed:"medium",order:"drop-in-bottom"},y().createElement(O.X6,{align:"center",heading:"Please enter your password",subheading:"For your account's security we need to verify your account"}),y().createElement(L.l0,{"data-component":"email-update-new-email",submit:e.submit},y().createElement(U,{type:"text",name:"email",defaultValue:e.user.email,autoComplete:"username email"}),y().createElement(L.ro,{name:"password",label:"Password",autoComplete:"current-password",autoFocus:!0}),y().createElement(L.k4,null,"Continue")))}})||k;const U=j.ZP.input.withConfig({displayName:"ViaPassword__HiddenInput",componentId:"je25xa-0"})(["display:none;"]);var V,G,q,W,B,$,H,K,Y=Z;function X(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const J={LOADING:Symbol("Loading"),VIA_PASSWORD:Symbol("Via Password"),VIA_EMAIL:Symbol("Via Email")};V=(0,f._V)("features/session-elevate",{initialState:J.LOADING}),G=(0,E.RR)("features/http"),q=g.aD.bound,W=g.aD.bound,B=g.aD.bound,V($=G((X((H=class{constructor(e){this.http=e}onInit({props:e}){this.intent=e.intent,this.scopes=e.scopes,this.notifySuccess=e.onSuccess||(()=>{})}async onEnter(){return this.handleElevateSession()}async handleElevateSession(){try{await this.http.post("/auth-api/session/elevate",{data:{intent:this.intent,scopes:this.scopes},errorKey:"global",errorMap:{401:()=>({config:{[v.ew]:!0}}),403:()=>({config:{[v.ew]:!0}})}}),this.notifySuccess()}catch(e){if(!e.response)throw e;const t=m()(e,"response.data.challenges[0]");if(!t)throw e;switch(t.type){case b.Qv.Challenges.VerifyAccount.Email:return this.transition(J.VIA_EMAIL);case b.Qv.Challenges.VerifyAccount.Password:return this.transition(J.VIA_PASSWORD);default:throw new Error(`Unknown challenge response: ${t.type}`)}}}}).prototype,"onInit",[q],Object.getOwnPropertyDescriptor(H.prototype,"onInit"),H.prototype),X(H.prototype,"onEnter",[W],Object.getOwnPropertyDescriptor(H.prototype,"onEnter"),H.prototype),X(H.prototype,"handleElevateSession",[B],Object.getOwnPropertyDescriptor(H.prototype,"handleElevateSession"),H.prototype),$=H))||$);let Q=(0,f.ls)("features/session-elevate")(K=class extends y().Component{render(){const{store:e}=this.props;return{[J.VIA_PASSWORD]:y().createElement(Y,{onSuccess:e.handleElevateSession}),[J.VIA_EMAIL]:y().createElement(z,{onSuccess:e.handleElevateSession})}[e.state]||y().createElement(O.gb,null)}})||K;var ee=e=>y().createElement(Q,e)},41225:function(e,t,r){"use strict";r.d(t,{D:function(){return n}});const n={CREATE:"resv:new",UPGRADE:"resv:upgrade",EXCHANGE:"resv:exchange"}},5720:function(e,t,r){"use strict";r.d(t,{Z:function(){return we}});r(54638);var n,i,o,a,s,l,c,p,u,d,m,h,y,g,b,f,E,v,O=r(16624),w=r.n(O),S=r(64267),D=r(5260),I=r(19157),C=r.n(I),T=r(81772),P=r(25817),A=r(59953),_=r(48743),N=r(5013),R=r(47714),k=r(58469),z=r(20643),j=r.n(z),x=r(59549),L=r(28511),M=r(12020),F=r(20314),Z=r(64870),U=r.n(Z),V=r(32837);function G(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function q(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const W=(0,V.kg)("features:2fa"),B={LOADING:Symbol("2FA: Loading"),INVALID:Symbol("2FA: invalid"),VALID:Symbol("2FA: valid"),VALIDATING:Symbol("2FA: validating"),ACCOUNT_LOCKED:Symbol("2FA: account locked"),RATE_LIMITED:Symbol("2FA: rate limited"),WAITING:Symbol("2FA: waiting")},$=[U().PASSWORD_EXPIRED,U().PASSWORD_COMPLEXITY];n=(0,D._V)("features/sign-in/2fa/form",{initialState:B.LOADING}),i=(0,x.RR)("features/analytics","features/2fa/api","features/context/client","features/context/user","features/http"),o=S.aD.bound,a=S.aD.bound,s=S.aD.bound,l=S.aD.bound,c=S.aD.bound,p=S.aD.bound,u=S.aD.bound,d=S.aD.bound,n(m=i((y=q((h=class{constructor(e,t,r,n,i){G(this,"verified",y,this),G(this,"errorMessage",g,this),G(this,"settings",b,this),G(this,"codeResent",f,this),G(this,"transactionId",E,this),G(this,"onError",v,this),this.analytics=e,this.api=t,this.client=r,this.http=i,this.user=n}get method(){var e;return null===(e=this.settings)||void 0===e?void 0:e.method}get smsNumber(){var e;return null===(e=this.settings)||void 0===e?void 0:e.smsNumber}track(e,t={}){this.analytics.track(L.zW.TWO_FACTOR_VERIFICATION,e,{"2faType":this.method,...t})}async onEnter({props:e}){var t;this.transactionId=null==e||null===(t=e.transaction)||void 0===t?void 0:t.id,this.settings=null==e?void 0:e.settings,this.track(L.p$.VIEWED),this.transition(B.WAITING)}async verify(e){this.track(L.p$.SUBMITTED),this.transition(B.VALIDATING);try{const t=this.client.isEmbedded?{withcookie:"true"}:{};await this.http.post("/login-api/api/v2/login/mfa",{data:{mfa_code:e,transaction_id:this.transactionId},errorKey:"global",errorMap:M.Z.Verify({log:W}),params:t});const{jwt:r}=await this.http.post("/auth-api/session/jwt").then((e=>e.data));r&&this.user.usingAuthToken(r),this.verified=!0,W("2FA verification successful"),this.track(L.p$.SUCCEEDED),this.transition(B.VALID)}catch(e){const{response:t}=e,r=j()(t,"data.errorCode");switch(W("error code",r),this.track(L.p$.FAILED),t.status){case 401:return this.errorMessage=F.cW,this.transition(B.INVALID);case 423:return this.errorMessage=F.NW,this.transition(B.ACCOUNT_LOCKED);case 429:return this.errorMessage=F.xr,this.transition(B.RATE_LIMITED)}if($.includes(r)){const n=j()(t,"data.transaction_id"),i=j()(t,"data.policy");e.passwordUpdate={id:n,errorCode:r,policy:i}}throw e}}onSuccess(e,t=C()){this.actIn((()=>{t(e),this.handleReset()}),1e3)}actIn(e,t){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{(0,S.z)(e)}),t)}handleReset(){this.timeout=void 0}onTransition(e,t){switch(t){case B.INVALID:this.actIn((()=>{this.handleReset(),this.transition(B.WAITING)}),5e3);break;case B.ACCOUNT_LOCKED:this.actIn((()=>{this.handleReset(),this.transition(B.WAITING)}),216e6);break;case B.RATE_LIMITED:this.actIn((()=>{this.handleReset(),this.transition(B.WAITING)}),54e6)}}async resendCode(){await this.http.post("/auth-api/2fa/challenge",{data:{transactionId:this.transactionId},errorKey:"global"}).then((()=>{this.codeResent=!0}))}}).prototype,"verified",[S.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=q(h.prototype,"errorMessage",[S.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=q(h.prototype,"settings",[S.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),f=q(h.prototype,"codeResent",[S.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=q(h.prototype,"transactionId",[S.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q(h.prototype,"method",[S.Fl],Object.getOwnPropertyDescriptor(h.prototype,"method"),h.prototype),q(h.prototype,"smsNumber",[S.Fl],Object.getOwnPropertyDescriptor(h.prototype,"smsNumber"),h.prototype),q(h.prototype,"track",[o],Object.getOwnPropertyDescriptor(h.prototype,"track"),h.prototype),q(h.prototype,"onEnter",[a],Object.getOwnPropertyDescriptor(h.prototype,"onEnter"),h.prototype),q(h.prototype,"verify",[s],Object.getOwnPropertyDescriptor(h.prototype,"verify"),h.prototype),q(h.prototype,"onSuccess",[l],Object.getOwnPropertyDescriptor(h.prototype,"onSuccess"),h.prototype),v=q(h.prototype,"onError",[S.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t=C())=>{t(e)}}}),q(h.prototype,"actIn",[c],Object.getOwnPropertyDescriptor(h.prototype,"actIn"),h.prototype),q(h.prototype,"handleReset",[p],Object.getOwnPropertyDescriptor(h.prototype,"handleReset"),h.prototype),q(h.prototype,"onTransition",[u],Object.getOwnPropertyDescriptor(h.prototype,"onTransition"),h.prototype),q(h.prototype,"resendCode",[d],Object.getOwnPropertyDescriptor(h.prototype,"resendCode"),h.prototype),m=h))||m);var H;var K,Y,X,J,Q,ee,te,re=(0,D.ls)("features/sign-in/2fa/form")(H=class extends w().Component{render(){const{onSuccess:e=(()=>{}),onError:t=(()=>{}),store:r,enterRecovery:n,onBack:i=(()=>{})}=this.props;return r.state===B.LOADING?null:w().createElement(w().Fragment,null,r.codeResent&&w().createElement(N.FN.V,{status:"success"},"A new verification code has just been sent your way"),w().createElement(R.h4.eJ,{onClick:i}),w().createElement(N.X6,{align:"center",heading:"Two-Factor Authentication",subheading:"sms"===r.method?`Enter the verification code we just sent via SMS to ${r.smsNumber}`:"Enter the verification code generated by your authentication app"}),w().createElement(k.w,{autoFocus:!0,validateCode:(e,n=C())=>r.verify(e).then((()=>n(r.verified))).catch(t),onSuccess:t=>r.onSuccess(t,e),onError:e=>r.onError(e,t),onChange:r.handleReset}),w().createElement(T.Z,{"data-component":"verify-2fa-message",vertical:"l"},!r.errorMessage&&w().createElement(P.Z,{order:"body",size:"smaller",align:"center"},"Make sure to keep this window open while you check your phone."," ","sms"===r.method?w().createElement(A.Z,{key:"resend-link","data-component":"resend-link",role:"link",element:"a",onClick:()=>r.resendCode()},"Resend code"):null),w().createElement(_.Z,{order:"simple-fade-in",fillMode:"forwards",disabled:!r.errorMessage},w().createElement(P.Z,{order:"body",size:"smaller",color:"danger",align:"center"},r.errorMessage))),w().createElement(N.$_.VY,null,w().createElement(P.Z,{order:"body"},"Don't have your phone?"," ",w().createElement(A.Z,{key:"recovery-link","data-component":"recovery-link",role:"link",element:"a",onClick:()=>n()},"Enter a 2FA recovery code"))))}})||H,ne=r(87860),ie=r(26330),oe=r(88104),ae=r(80733),se=r(41899);function le(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const ce=(0,V.kg)("features:2fa");K=(0,oe.oe)("features/sign-in/2fa/recovery/form"),Y=(0,x.RR)("features/analytics","features/http"),X=S.aD.bound,J=S.aD.bound,K(Q=Y((te=le((ee=class{constructor(e,t){var r,n,i,o;r=this,n="errorMessage",o=this,(i=te)&&Object.defineProperty(r,n,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0}),this.analytics=e,this.http=t}track(e,t={}){this.analytics.track(L.zW.TWO_FACTOR_VERIFICATION,e,{"2faType":"recovery",...t})}onEnter(){this.track(L.p$.VIEWED)}async verify(e,t){this.track(L.p$.SUBMITTED);try{const r=await this.http.post("/login-api/api/v2/login/mfa",{data:{mfa_code:e,transaction_id:j()(t,"id")},errorKey:"global",errorMap:M.Z.Verify({log:ce})});return ce("2FA verification successful"),this.track(L.p$.SUCCEEDED),r.data}catch(e){const{response:t}=e,r=j()(t,"data.errorCode");switch(ce("error code",r),this.track(L.p$.FAILED),t.status){case 423:this.errorMessage=F.NW;break;case 429:this.errorMessage=F.xr;break;default:this.errorMessage=F.cW}throw e}}}).prototype,"errorMessage",[S.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le(ee.prototype,"onEnter",[X],Object.getOwnPropertyDescriptor(ee.prototype,"onEnter"),ee.prototype),le(ee.prototype,"verify",[J],Object.getOwnPropertyDescriptor(ee.prototype,"verify"),ee.prototype),Q=ee))||Q);var pe;let ue=(0,oe.ei)("features/sign-in/2fa/recovery/form")(pe=class extends w().Component{render(){const{onSuccess:e=(()=>{}),onError:t=(()=>{}),store:r,transaction:n,onBack:i=(()=>{})}=this.props;return w().createElement(w().Fragment,null,w().createElement(R.h4.eJ,{onClick:i}),w().createElement(N.X6,{align:"center",heading:"Two-Factor Authentication",subheading:"Enter one of your recovery codes below"}),w().createElement(ie.Z,{alignItems:"center",justifyContent:"center"},w().createElement(ae.l0,{"data-component":"recovery-sign-in",submit:i=>r.verify(i.code,n).then(e,t)},w().createElement(de,{autoFocus:!0,id:"recovery_code",name:"code",tabIndex:"0"}),w().createElement(T.Z,{"data-component":"verify-2fa-message",vertical:"l"},w().createElement(_.Z,{order:"simple-fade-in",fillMode:"forwards",disabled:!r.errorMessage},w().createElement(P.Z,{order:"body",size:"smaller",color:"danger",align:"center"},r.errorMessage))),w().createElement(T.Z,{bottom:"m"},w().createElement(se.k4,null,"Verify")))),w().createElement(N.$_.VY,null,w().createElement(P.Z,{order:"body"},"Having trouble?"," ",w().createElement(A.Z,{key:"support-link",role:"link",element:"a",href:"https://support.invisionapp.com"},"Contact our support team"))))}})||pe;const de=(0,ne.ZP)(se.xv).withConfig({displayName:"Form__RecoveryCode",componentId:"tzkjex-0"})(["width:420px;@media (max-width:","px){width:300px;}"],(({theme:e})=>e.breakpoints.s));var me,he,ye,ge,be,fe,Ee=ue;function ve(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Oe={SIGN_IN:Symbol("2FA: sign-in"),ENTER_RECOVERY:Symbol("2FA: sign-in - enter recovery code")};me=(0,D._V)("features/sign-in/2fa",{initialState:Oe.SIGN_IN}),he=S.aD.bound,ye=S.aD.bound,me((ve((be=class{handleSignIn(){this.transition(Oe.SIGN_IN)}enterRecovery(){this.transition(Oe.ENTER_RECOVERY)}}).prototype,"handleSignIn",[he],Object.getOwnPropertyDescriptor(be.prototype,"handleSignIn"),be.prototype),ve(be.prototype,"enterRecovery",[ye],Object.getOwnPropertyDescriptor(be.prototype,"enterRecovery"),be.prototype),ge=be));var we=(0,D.ls)("features/sign-in/2fa")(fe=class extends w().Component{render(){const{onSuccess:e=(()=>{}),onError:t=(()=>{}),settings:r,store:n,transaction:i,onBack:o=(()=>{})}=this.props;return{[Oe.SIGN_IN]:w().createElement(re,{settings:r,transaction:i,onSuccess:e,onError:t,enterRecovery:n.enterRecovery,onBack:o}),[Oe.ENTER_RECOVERY]:w().createElement(Ee,{transaction:i,onSuccess:e,onError:t,onBack:n.handleSignIn})}[n.state]}})||fe},8130:function(e,t,r){"use strict";r.d(t,{Z:function(){return R}});var n=r(16624),i=r.n(n),o=r(64267),a=r(5260),s=r(59549),l=r(6895),c=r(20643),p=r.n(c),u=r(5013),d=r(64060),m=r(87860),h=r(47714),y=r(94002),g=r(25086),b=r.n(g);class f extends i().Component{renderButton(){const{handleClick:e}=this.props;return i().createElement(y.Z,{order:"primary",onClick:e,size:"larger"},"Let's go")}render(){return i().createElement(i().Fragment,null,i().createElement(h.h4.SK,{withBackground:!1}),i().createElement(v,null,i().createElement(u.Q0.Ar,{action:this.renderButton(),heading:"Set up Two-Factor Authentication",subheading:i().createElement(i().Fragment,null,i().createElement("p",null,"To keep your work secure, your team requires 2FA when you sign in to InVision.")," ",i().createElement("p",null,"We'll help you set it up now."))},i().createElement(E,null))))}}const E=(0,m.ZP)(b()).withConfig({displayName:"MFARequired__MFAIllustration",componentId:"ahkhhj-0"})(["display:block;margin:0 auto;max-width:350px;"]),v=m.ZP.div.withConfig({displayName:"MFARequired__MFARequiredContainer",componentId:"ahkhhj-1"})(["p{margin:0;}@media (max-width:","px){display:flex;height:100vh;position:relative;top:-80px;h1{font-size:1.1rem;margin-bottom:}h2{font-size:0.8rem;line-height:normal;}> div{align-self:center;}p{display:inline;}}"],(({theme:e})=>e.breakpoints.s));var O,w,S,D,I,C,T,P,A=f;function _(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const N={MFA_FINALIZE:Symbol("2FA: finalize"),MFA_REQUIRED:Symbol("2FA: required"),MFA_SETUP:Symbol("2FA: set up")};O=(0,a._V)("features/sign-in/2fa/setup",{initialState:N.MFA_REQUIRED}),w=(0,s.RR)("features/analytics","features/context/user","features/http"),S=o.aD.bound,D=o.aD.bound,I=o.aD.bound,O(C=w((_((T=class{constructor(e,t,r){this.analytics=e,this.user=t,this.http=r}enterSetup(){this.transition(N.MFA_SETUP)}async finalize(){await this.http.post("/auth-api/session/finalize").then((async e=>{this.user.usingAuthToken(p()(e,"data.jwt",""))}))}handleSuccess(){this.transition(N.MFA_FINALIZE)}}).prototype,"enterSetup",[S],Object.getOwnPropertyDescriptor(T.prototype,"enterSetup"),T.prototype),_(T.prototype,"finalize",[D],Object.getOwnPropertyDescriptor(T.prototype,"finalize"),T.prototype),_(T.prototype,"handleSuccess",[I],Object.getOwnPropertyDescriptor(T.prototype,"handleSuccess"),T.prototype),C=T))||C);var R=(0,a.ls)("features/sign-in/2fa/setup")(P=class extends i().Component{render(){const{onSuccess:e=(()=>{}),onError:t=(()=>{}),store:r}=this.props;return{[N.MFA_FINALIZE]:i().createElement(l.Z,{action:()=>r.finalize().then(e,t)},i().createElement(u.gb,null)),[N.MFA_REQUIRED]:i().createElement(A,{handleClick:r.enterSetup}),[N.MFA_SETUP]:i().createElement(i().Fragment,null,i().createElement(d.ZP,{onSuccess:r.handleSuccess}),i().createElement(u.$_.Ei,{forceRender:!0}))}[r.state]}})||P},12020:function(e,t,r){"use strict";var n=r(81832),i=r.n(n),o=r(20643),a=r.n(o),s=r(82641),l=r.n(s),c=r(83869),p=r.n(c),u=r(64870),d=r.n(u),m=r(50703),h=r(59407),y=r(20314);t.Z={SignIn:({team:e,log:t})=>({400:()=>({data:{errorCode:d().INVALID_FORM_FIELD,message:null}}),401:()=>({data:{errorCode:d().SIGN_IN_UNAUTHORIZED,showSignUp:!e,message:null}}),403:e=>{let t=d().FORBIDDEN,r=a()(e,"data.message");return-1!==r.indexOf("maximum login attempts exceeded")&&(t=d().SIGN_IN_ATTEMPTS_EXCEEDED,r=null),{data:{errorCode:t,message:r}}},417:e=>{if("password_change_required"===a()(e,"data.status")){const[,r]=a()(e,"data.message","").split("##**##");if(!r)return e;const n=JSON.parse(atob(r)),i=m.Z.from(n.policy),o=(e=>{switch(e){case"expired":return d().PASSWORD_EXPIRED;case"invalid":return d().PASSWORD_COMPLEXITY;default:throw new Error(`Unknown password failure reason: ${e}`)}})(n.reasonCode);return t("Password update required: (%o) %o",o,n.policy),{data:{errorCode:o,policy:i,message:null},config:{[h.ew]:!0}}}}}),SignInV2:({team:e,log:t})=>({400:()=>({data:{errorCode:d().INVALID_FORM_FIELD,message:null}}),401:t=>{switch(a()(t,"data.status")){case"mfa_required":return{data:{errorCode:d().MFA_REQUIRED},config:{[h.ew]:!0}};case"invalid_credentials":default:return{data:{errorCode:d().SIGN_IN_UNAUTHORIZED,showSignUp:!e||e.isGlobal,message:null}}}},403:e=>{let t=d().FORBIDDEN,r=a()(e,"data.message");return-1!==r.indexOf("maximum login attempts exceeded")&&(t=d().SIGN_IN_ATTEMPTS_EXCEEDED,r=null),{data:{errorCode:t,message:r}}},417:e=>{const r=a()(e,"data.requirements");if(r.includes("mfa_configuration_required"))return{data:{errorCode:d().MFA_CONFIGURATION_REQUIRED},config:{[h.ew]:!0}};if(r.includes("password_change_required")){const r=a()(e,"data.policy_violation",{});if(l()(r))return e;let n=a()(r,"policy",{});n=p()(n,((e,t)=>i()(t)));const o=m.Z.from(n),s=(e=>{switch(e){case"expired":return d().PASSWORD_EXPIRED;case"invalid":return d().PASSWORD_COMPLEXITY;default:throw new Error(`Unknown password failure reason: ${e}`)}})(r.reason_code);return t("Password update required: (%o) %o",s,n),{data:{errorCode:s,policy:o,message:null},config:{[h.ew]:!0}}}},423:e=>({data:{message:y.NW}}),429:e=>({data:{message:y.AJ}})}),Verify:({log:e})=>({401:e=>({data:{errorCode:d().SIGN_IN_UNAUTHORIZED,message:null}}),404:e=>({data:{errorCode:d().UNAUTHORIZED}}),417:t=>{if(a()(t,"data.requirements").includes("password_change_required")){const r=a()(t,"data.policy_violation",{});if(l()(r))return t;let n=a()(r,"policy",{});n=p()(n,((e,t)=>i()(t)));const o=m.Z.from(n),s=(e=>{switch(e){case"expired":return d().PASSWORD_EXPIRED;case"invalid":return d().PASSWORD_COMPLEXITY;default:throw new Error(`Unknown password failure reason: ${e}`)}})(r.reason_code);return e("Password update required: (%o) %o",s,n),{data:{errorCode:s,policy:o,message:null},config:{[h.ew]:!0}}}}})}},21106:function(e,t,r){"use strict";var n,i,o,a,s,l,c,p=r(16624),u=r.n(p),d=r(64267),m=r(50137),h=r.n(m),y=r(59549),g=r(5260),b=r(28511),f=r(73683),E=r(88821);function v(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const O={LOADING:Symbol("Loading"),REDIRECT:Symbol("Redirect")};n=(0,g._V)("features/sign-in/get-started"),i=(0,y.RR)("features/analytics","features/context/client","features/context/request"),o=(0,b.UO)({flow:"GlobalSignIn"}),a=d.aD.bound,n(s=i(s=o((v((l=class{constructor(e,t,r){this.analytics=e,this.client=t,this.request=r}get signupUrl(){const e=new(h())("/d/signup",!0);return e.set("host",`projects.${this.request.hostdomain}`),e.set("query",((e,t)=>{const{isEmbedded:r}=e,{redirectTo:n,redirectHash:i}=t.queryobject;return Object.assign({origin:"v7"},r?{webview:1}:{},n?{redir:n}:{},i?{redirHash:i}:{})})(this.client,this.request)),e.toString()}async onEnter(){await this.analytics.track(b.zW.GET_STARTED,b.p$.SELECTED,{url:this.signupUrl}),this.transition(O.REDIRECT)}}).prototype,"signupUrl",[d.Fl],Object.getOwnPropertyDescriptor(l.prototype,"signupUrl"),l.prototype),v(l.prototype,"onEnter",[a],Object.getOwnPropertyDescriptor(l.prototype,"onEnter"),l.prototype),s=l))||s)||s);let w=(0,g.ls)("features/sign-in/get-started")(c=class extends u().Component{render(){const{store:e}=this.props;return{[O.REDIRECT]:u().createElement(E.l_,{destination:e.signupUrl,options:{replace:!0}})}[e.state]||u().createElement(f.Z,null)}})||c;t.Z=w},36866:function(e,t,r){"use strict";r.d(t,{PZ:function(){return n},pd:function(){return i},MD:function(){return o}});const n={HOSTED:"hosted"},i={AUTHENTICATE:"authenticate",PROMPT:"prompt",SUCCESS:"success"},o={OAUTH:"oauth",POPOUT:"popout",POPOUT_CLAIMS:"popout:claims",POPOUT_COOKIES:"popout:cookies"}},48031:function(e,t,r){"use strict";r.d(t,{ro:function(){return C.Z},Rq:function(){return kr},ZP:function(){return Kr}});var n,i,o,a,s,l=r(64267),c=r(59549),p=r(32837),u=r(28511),d=r(81281);function m(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const h=(0,p.kg)("features:sign-in");n=(0,c.En)("features/sign-in/api"),i=(0,c.RR)("features/analytics","features/context/user","features/context/team","features/http","navigator"),n(o=(0,c.ri)(o=i((s=m((a=class{constructor(e,t,r,n,i){var o,a,l,c;o=this,a="email",c=this,(l=s)&&Object.defineProperty(o,a,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(c):void 0}),this.analytics=e,this.user=t,this.team=r,this.http=n,this.nav=i}get authenticationType(){return{[d.$u.EMAIL]:"password",[d.$u.SAML]:"saml"}[this.team.type]||"unknown"}async isAuthenticated(){if(this.user.authenticated)return!0;try{await this.user.load({suppressMsg:!0})}catch(e){return!1}return this.user.authenticated}async ensureTeamSession(e={}){try{await this.user.load(e)}catch(e){throw h("Team session is invalid for %s",this.team.name),e}}async ensureV7Session(){try{return await this.ensureTeamSession(),!0}catch(e){return h("V7 user session is invalid: %s",e.message),this.nav.goTo("/auth/sign-in"),!1}}async validateOnboarding(){if(this.team.isGlobal)return{};try{return await this.http.get("/auth-api/onboarding").then((e=>e.data))}catch(e){h("Failed to validate onboarding requirement: %s",e.message)}}async getJwt(){const{jwt:e}=await this.http.post("/auth-api/session/jwt").then((e=>e.data));return e}track(e,t={}){this.analytics.track(u.zW.SIGN_IN,e,{authenticationType:this.authenticationType,...t})}go({subdomain:e}={}){return this.nav.goTo("/auth/sign-in",{subdomain:e})}goToSuccess(){return this.nav.goTo("/auth/sign-in",{query:{entry:"success"}})}success(e){e.jwt&&this.user.usingAuthToken(e.jwt)}setEmail(e){this.email=e}}).prototype,"email",[l.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m(a.prototype,"success",[l.aD],Object.getOwnPropertyDescriptor(a.prototype,"success"),a.prototype),m(a.prototype,"setEmail",[l.aD],Object.getOwnPropertyDescriptor(a.prototype,"setEmail"),a.prototype),o=a))||o)||o);var y=r(16624),g=r.n(y),b=r(57819),f=r(5260),E=r(90660),v=r(5013),O=r(41225),w=r(36866),S=r(58428),D=r(4477),I=r(9343),C=r(57741),T=r(76069),P=r(25817),A=r(59953),_=r(87860),N=r(48743),R=r(26330),k=r(47714),z=r(94002);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}class x extends g().PureComponent{render(){const{onClick:e,...t}=this.props;return g().createElement(L,j({"data-component":"get-started-header","data-embed-hidden":!0},t),g().createElement(M,{order:"body",color:"text-lighter"},"Don’t have an account?"),g().createElement(z.Z,{order:"tertiary",size:"smaller",onClick:e},"Get started"))}}const L=_.ZP.div.withConfig({displayName:"GetStarted__Wrapper",componentId:"sc-1vijgph-0"})(["font-size:13px;letter-spacing:0;line-height:36px;z-index:",";"],(({theme:e})=>e.zindex.stacked)),M=(0,_.ZP)(P.Z).withConfig({displayName:"GetStarted__StyledText",componentId:"sc-1vijgph-1"})(["display:none;@media (min-width:","px){display:inline;margin-right:",";}"],(({theme:e})=>e.breakpoints.m),(e=>e.theme.spacing.s));var F=x,Z=r(10325);const U=(0,_.ZP)(R.Z).withConfig({displayName:"PasswordWrapper__FullScreenFlex",componentId:"xjrm9v-0"})(["height:100%;width:100%;"]),V=(0,_.ZP)(k.h4.SK).withConfig({displayName:"PasswordWrapper__HeaderLogo",componentId:"xjrm9v-1"})(["@media (min-width:","px){svg{color:white}}"],(({theme:e})=>e.breakpoints.l)),G=(0,_.ZP)(k.h4.O6).withConfig({displayName:"PasswordWrapper__HeaderAction",componentId:"xjrm9v-2"})(["@media (max-width:","px){display:none;}"],(({theme:e})=>e.breakpoints.m)),q=_.ZP.div.withConfig({displayName:"PasswordWrapper__ResponsivePanel",componentId:"xjrm9v-3"})(["width:100%;max-width:580px;padding:0 !important;"]);var W,B=({children:e})=>{const t=c.ZP.resolve("navigator");return g().createElement(k.Zl.Ar,null,g().createElement(V,{withTooltip:!1,withBackground:!1}),g().createElement(G,null,g().createElement(F,{onClick:()=>{t.goTo("get-started")}})),g().createElement(k.Zl.dv,null,g().createElement(Z.Z,{isSignIn:!0})),g().createElement(k.Zl.O6,null,g().createElement(U,{justifyContent:"center",alignItems:"center"},g().createElement(q,{"data-component":"global-sign-in"},g().createElement(N.Z,{speed:"medium",order:"drop-in-bottom"},e)))))},$="transition.team_domain",H="transition.forgot_password";let K=(0,T.Pi)(W=class extends g().Component{render(){const{renderForm:e,onEvent:t}=this.props;return g().createElement(B,null,g().createElement(v.X6,{align:"left",heading:"Sign in to InVision",subheading:"Enter your details below"}),e({emailHelper:g().createElement(P.Z,{order:"body",size:"smallest",element:"span"},g().createElement(A.Z,{order:"primary",element:"a",onClick:()=>{t($)}},"Know your team domain?")),passwordHelper:g().createElement(Y,{type:"button",order:"tertiary",onClick:()=>{t(H)}},"Forgot your password?")}))}})||W;const Y=(0,_.ZP)(A.Z).withConfig({displayName:"PasswordEntry__HelperLink",componentId:"sc-1ee13tc-0"})(["position:absolute;top:0;right:0;font-size:12px;"]);var X,J,Q=K,ee=r(88104),te=r(64870),re=r.n(te);(0,ee.oe)("features/sign-in/global/password-update")(X=(0,c.RR)("features/context/team")(X=class{constructor(e){this.team=e}})||X);var ne,ie,oe=(0,ee.ei)("features/sign-in/global/password-update")(J=class extends g().Component{render(){const{store:e,renderForm:t,transaction:r}=this.props;return g().createElement(B,null,g().createElement(v.Ir,{name:e.team.name,src:e.team.logo}),{[re().PASSWORD_COMPLEXITY]:g().createElement(v.X6,{align:"center",heading:"Set a stronger password",subheading:"Your team's security requirements have changed since you last logged in"}),[re().PASSWORD_EXPIRED]:g().createElement(v.X6,{align:"center",heading:"Create a new password",subheading:"Your current password has expired"})}[r.errorCode],t())}})||J;(0,ee.oe)("features/sign-in/global/mfa-entry")(ne=(0,c.RR)("navigator","features/context/request")(ne=class{constructor(e,t){this.nav=e,this.request=t}})||ne);var ae=(0,ee.ei)("features/sign-in/global/mfa-entry")(ie=class extends g().Component{render(){const{renderForm:e}=this.props;return g().createElement(g().Fragment,null,g().createElement(v.FN.A,{"data-component":"2fa-toast"}),g().createElement(k.wC.A,{"data-component":"2fa-verify"},e()))}})||ie;class se extends g().PureComponent{render(){const{renderFlow:e}=this.props;return g().createElement(le,{"data-component":"2fa-setup"},e())}}const le=(0,_.ZP)(k.wC.A).withConfig({displayName:"MFARequired__MFAPanel",componentId:"sc-1sesfya-0"})(["@media (max-width:","px){.one-panel-content{align-self:normal;}}"],(({theme:e})=>e.breakpoints.s));var ce,pe=se;var ue,de=(0,c.f3)("features/sign-in/api","features/context/team")(ce=class extends g().Component{render(){const{"features/sign-in/api":e,entry:t,onEvent:r=(()=>{}),onSuccess:n=(()=>{}),onError:i=(()=>{})}=this.props;return g().createElement(C.Z,{onEnter:({store:t})=>{t.state===C.e.SIGN_IN_PROMPT&&e.track(u.p$.VIEWED,{authenticationType:"password"})},renderEntryForm:e=>g().createElement(Q,{renderForm:e,onEvent:r}),renderUpdateForm:(e,{transaction:t})=>g().createElement(oe,{renderForm:e,transaction:t}),renderMFAForm:(e,{transaction:t})=>g().createElement(ae,{renderForm:e,transaction:t}),renderMFARequired:e=>g().createElement(pe,{renderFlow:e}),entry:t,onSuccess:n,onError:i})}})||ce,me=r(48526);var he,ye=(0,T.Pi)(ue=class extends g().Component{render(){const{onBack:e=(()=>{})}=this.props;return g().createElement(B,null,g().createElement(me.Z,{onBack:e}))}})||ue,ge=r(48749);var be,fe,Ee,ve,Oe,we,Se,De,Ie,Ce,Te,Pe,Ae,_e,Ne=(0,T.Pi)(he=class extends g().Component{render(){const{onBack:e=(()=>{})}=this.props;return g().createElement(B,null,g().createElement(ge.Z,{onBack:e}))}})||he;function Re(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const ke=(0,p.kg)("sign-in"),ze={LOADING:Symbol("Global: Loading"),FORGOT_PASSWORD:Symbol("Global: Forgot password"),KNOW_YOUR_DOMAIN:Symbol("Global: Know your domain"),ONBOARD:Symbol("Global: Onboard"),SIGN_IN_PASSWORD:Symbol("Global: Password"),TEAM_SELECT:Symbol("Global: Select team"),BLOCKER_ANDROID:Symbol("Global: Blocker Android")};be=(0,f._V)("features/sign-in/global",{initialState:ze.SIGN_IN_PASSWORD}),fe=(0,c.RR)("features/analytics","features/context/client","features/context/request","features/context/user","features/sign-in/api","features/toggles","navigator"),Ee=(0,u.UO)({flow:"GlobalSignIn"}),ve=l.aD.bound,Oe=l.aD.bound,we=l.aD.bound,Se=l.aD.bound,De=l.aD.bound,Ie=l.aD.bound,Ce=l.aD.bound,Te=l.aD.bound,be(Pe=fe(Pe=Ee((Re((Ae=class{constructor(e,t,r,n,i,o,a){this.analytics=e,this.client=t,this.request=r,this.user=n,this.api=i,this.toggles=o,this.navigator=a}onInit({props:e}){this.notifySuccess=e.onSuccess}async onEnter(){if(this.client.type===d.X5.ANDROID)return this.analytics.track("AndroidBlocker","Viewed"),this.transition(ze.BLOCKER_ANDROID);switch(this.request.get("entry")){case w.pd.AUTHENTICATE:return this.checkSession();default:return this.handleAuthenticate()}}async handleAuthenticate(){this.transition(ze.SIGN_IN_PASSWORD)}async handleAuthenticated(){return this.transition(ze.ONBOARD)}async checkSession(){ke("Attempting to continue session"),this.transition(ze.LOADING);return await this.user.checkSession()?(ke("Session found.  Continuing flow."),this.handleAuthenticated()):(this.api.track(u.p$.FAILED),this.handleAuthenticate())}async handleEvent(e){switch(e){case $:return this.transition(ze.KNOW_YOUR_DOMAIN);case H:return this.transition(ze.FORGOT_PASSWORD)}}async handleSuccess(){return await this.analytics.identify(this.user.analyticsID,{email:this.user.email}),await this.api.track(u.p$.SUCCEEDED),this.notifySuccess?this.notifySuccess():this.transition(ze.TEAM_SELECT)}async handleFailed(e){var t,r;const n=null==e||null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.errorCode;ke("Global sign-in failed: (%o) %s",n,e.message),this.api.track(u.p$.FAILED,{errorCode:n})}}).prototype,"onInit",[ve],Object.getOwnPropertyDescriptor(Ae.prototype,"onInit"),Ae.prototype),Re(Ae.prototype,"onEnter",[Oe],Object.getOwnPropertyDescriptor(Ae.prototype,"onEnter"),Ae.prototype),Re(Ae.prototype,"handleAuthenticate",[we],Object.getOwnPropertyDescriptor(Ae.prototype,"handleAuthenticate"),Ae.prototype),Re(Ae.prototype,"handleAuthenticated",[Se],Object.getOwnPropertyDescriptor(Ae.prototype,"handleAuthenticated"),Ae.prototype),Re(Ae.prototype,"checkSession",[De],Object.getOwnPropertyDescriptor(Ae.prototype,"checkSession"),Ae.prototype),Re(Ae.prototype,"handleEvent",[Ie],Object.getOwnPropertyDescriptor(Ae.prototype,"handleEvent"),Ae.prototype),Re(Ae.prototype,"handleSuccess",[Ce],Object.getOwnPropertyDescriptor(Ae.prototype,"handleSuccess"),Ae.prototype),Re(Ae.prototype,"handleFailed",[Te],Object.getOwnPropertyDescriptor(Ae.prototype,"handleFailed"),Ae.prototype),Pe=Ae))||Pe)||Pe);var je,xe,Le,Me,Fe,Ze,Ue,Ve,Ge,qe,We=(0,f.ls)("features/sign-in/global")(_e=class extends g().Component{render(){const{store:e}=this.props;return{[ze.BLOCKER_ANDROID]:g().createElement(D.Z,null),[ze.FORGOT_PASSWORD]:g().createElement(ye,{onBack:e.handleAuthenticate}),[ze.KNOW_YOUR_DOMAIN]:g().createElement(Ne,{onBack:e.handleAuthenticate}),[ze.ONBOARD]:g().createElement(S.Z,{shouldSkip:e=>!(e.shouldRedirect&&e.immediate),onSkip:e.handleSuccess}),[ze.SIGN_IN_PASSWORD]:g().createElement(g().Fragment,null,g().createElement(de,{onEvent:e.handleEvent,onSuccess:e.handleAuthenticated,onError:e.handleFailed})),[ze.TEAM_SELECT]:g().createElement(I.Z,{onClose:e.handleAuthenticate,onSwitch:e.handleAuthenticate})}[e.state]||g().createElement(v.gb,null)}})||_e,Be=r(95440),$e=r.n(Be),He=r(50137),Ke=r.n(He),Ye=r(81772),Xe=r(77877),Je=r(29024),Qe=r(44527),et=r(53270),tt=r.n(et);function rt(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const nt={LOADING:Symbol("Loading"),START:Symbol("Start"),POLLING:Symbol("Polling for Reservation"),ERROR:Symbol("Error")};let it=!1;je=(0,f._V)("features/sign-in/reservation",{initialState:nt.LOADING}),xe=(0,c.RR)("features/context/config","features/context/request","features/http","navigator","window"),Le=(0,u.UO)({flow:"SignInReservation"}),Me=l.aD.bound,Fe=l.aD.bound,Ze=l.aD.bound,Ue=l.aD.bound,je(Ve=xe(Ve=Le((rt((Ge=class{constructor(e,t,r,n,i){this.config=e,this.request=t,this.http=r,this.nav=n,this.window=i}onInit(){this.transition(nt.START)}async handleOpenWindow(){try{const{claimID:e,claimNonce:t}=await this.http.post("/auth-api/session/reservations",{errorKey:"global"}).then((e=>e.data)),r=new(Ke())("/auth/sign-in");r.set("query",{client:this.request.get("client"),action:O.D.UPGRADE,entry:w.pd.AUTHENTICATE,resvID:e}),this.window.open(r.toString(),"InVisionApp-SignIn"),this.transition(nt.POLLING);const n=async()=>{try{return await this.http.post("/auth-api/session/reservations/exchange",{data:{claimID:e,claimNonce:t}}).then((e=>e.data))}catch(e){if(410===e.response.status)throw e;if(e.response.status>=500)throw e}},i=await(async(e,{validate:t,maxAttempts:r,timeout:n,interval:i=3e3})=>{let o=0;const a=new Date((new Date).getTime()+n),s=async(n,l)=>{const c=await e();return o++,!t||t(c)?n(c):r&&o===r?l(new Error("Exceeded max attempts")):a&&(new Date).getTime()>=a?l(new Error("Exceeded max timeout")):it?l(new Error("Request canceled")):void setTimeout(s,i,n,l)};return new Promise(s)})(n,{timeout:$e()("5m"),validate:e=>!!(null==e?void 0:e.teamSubdomain)&&!!(null==e?void 0:e.sessionJWT)}),o=this.request.get("redirectTo"),a=new(Ke())(o,!0);this.nav.goTo(a,{subdomain:i.teamSubdomain})}catch(e){this.transition(nt.START)}}async handleCancel(){it=!0}handleSignUpRedirect(){const e=new(Ke())("https://www.invisionapp.com/api/v2/plans/reservation?fetchId=13309e13-0c79-4649-ba5c-fdcb784ef472&utm_source=figma",!0);window.open(e)}}).prototype,"onInit",[Me],Object.getOwnPropertyDescriptor(Ge.prototype,"onInit"),Ge.prototype),rt(Ge.prototype,"handleOpenWindow",[Fe],Object.getOwnPropertyDescriptor(Ge.prototype,"handleOpenWindow"),Ge.prototype),rt(Ge.prototype,"handleCancel",[Ze],Object.getOwnPropertyDescriptor(Ge.prototype,"handleCancel"),Ge.prototype),rt(Ge.prototype,"handleSignUpRedirect",[Ue],Object.getOwnPropertyDescriptor(Ge.prototype,"handleSignUpRedirect"),Ge.prototype),Ve=Ge))||Ve)||Ve);let ot=(0,f.ls)("features/sign-in/reservation")(qe=class extends g().Component{render(){const{store:e}=this.props,t={[nt.START]:g().createElement(g().Fragment,null,g().createElement(Ye.Z,{top:"l"},g().createElement(P.Z,{element:"h1",order:"subtitle",size:"larger"},"Sign into your InVision account")),g().createElement(P.Z,{order:"body",color:"lighter"},"To sync, share, and collaborate with your team,",g().createElement("br",null),"sign into InVision."),g().createElement(Qe.$0,null,g().createElement(at,{size:"smaller",onClick:e.handleOpenWindow},"Sign in"),g().createElement(Ye.Z,{top:"s"},g().createElement(P.Z,{prose:!0},"Need an account? ",g().createElement(A.Z,{hasUnderline:!1,onClick:e.handleSignUpRedirect,order:"primary"},"Sign up for free"))))),[nt.POLLING]:g().createElement(g().Fragment,null,g().createElement(Ye.Z,{top:"l"},g().createElement(P.Z,{element:"h1",order:"subtitle",size:"larger"},"We're redirecting you")),g().createElement(P.Z,{prose:!0},"Go to the InVision browser tab to complete",g().createElement("br",null),"your sign in or sign up for an account."),g().createElement(Ye.Z,{top:"l",bottom:"m"},g().createElement(Xe.Z,{horizontal:"center"},g().createElement(Je.Z,null))),g().createElement(A.Z,{onClick:e.handleCancel},"Cancel"))}[e.state];return g().createElement(st,{alignItems:"flex-start"},g().createElement("img",{src:tt(),width:"400"}),t)}})||qe;const at=(0,_.ZP)(z.Z).withConfig({displayName:"Flow__SignInButton",componentId:"l53fpc-0"})(["height:36px;width:292px;"]),st=(0,_.ZP)(k.wC.A).withConfig({displayName:"Flow__StyledLayout",componentId:"l53fpc-1"})(["padding:0 !important;text-align:center;"]);var lt,ct,pt,ut,dt,mt,ht,yt,gt,bt=ot,ft=r(59407),Et=r(70273),vt=r(8038);function Ot(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}lt=(0,ee.oe)("features/sign-in/challenge/account-email"),ct=(0,c.RR)("features/context/client","features/context/request","features/http","navigator"),pt=l.aD.bound,ut=l.aD.bound,dt=l.aD.bound,lt(mt=ct((yt=Ot((ht=class{constructor(e,t,r,n){var i,o,a,s;i=this,o="token",s=this,(a=yt)&&Object.defineProperty(i,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(s):void 0}),this.client=e,this.request=t,this.http=r,this.navigator=n}onInit({props:e}){this.token=e.token}async handleSend(){await this.http.post("/auth-api/challenges/sign-in/email",{data:{token:this.token},errorKey:"global",errorMap:{429:()=>({data:{errorCode:d.SM.TOO_MANY_REQUESTS},config:{[ft.ew]:!0}})}})}async handleVerify({value:e}){await this.http.put("/auth-api/challenges/sign-in/email",{data:{code:e,token:this.token},errorKey:"global",errorMap:{401:()=>({data:{errorCode:d.SM.CHALLENGE_EMAIL_UNAUTHORIZED},config:{[ft.ew]:!0}}),403:()=>({data:{errorCode:d.SM.CHALLENGE_EMAIL_UNAUTHORIZED},config:{[ft.ew]:!0}}),429:()=>({data:{errorCode:d.SM.TOO_MANY_REQUESTS},config:{[ft.ew]:!0}})}})}}).prototype,"token",[l.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ot(ht.prototype,"onInit",[pt],Object.getOwnPropertyDescriptor(ht.prototype,"onInit"),ht.prototype),Ot(ht.prototype,"handleSend",[ut],Object.getOwnPropertyDescriptor(ht.prototype,"handleSend"),ht.prototype),Ot(ht.prototype,"handleVerify",[dt],Object.getOwnPropertyDescriptor(ht.prototype,"handleVerify"),ht.prototype),mt=ht))||mt);var wt,St,Dt,It,Ct,Tt,Pt,At,_t,Nt,Rt=(0,ee.ei)("features/sign-in/challenge/account-email")(gt=class extends g().Component{render(){const{store:e,onSuccess:t}=this.props;return g().createElement(k.wC.A,null,g().createElement(N.Z,{speed:"medium",order:"drop-in-bottom"},g().createElement(v.X6,{align:"center",heading:"Please verify your email address",subheading:g().createElement(P.Z,{order:"body",prose:!0},"We just sent you a six-digit code to the email associated with your InVision account.",g().createElement("br",null),"Keep this window open while you check your inbox, then enter the code below.")}),g().createElement(vt.Z,{align:"center",onSend:e.handleSend,onVerify:e.handleVerify,onSuccess:t})))}})||gt,kt=r(82641),zt=r.n(kt),jt=r(57090),xt=r.n(jt),Lt=r(51351),Mt=r.n(Lt);function Ft(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Zt(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Ut=(0,p.kg)("features:sign-in:challenge"),Vt={LOADING:Symbol("Challenge: Loading"),ACCOUNT_EMAIL:Symbol("Challenge: Verify Account - Email"),ACCOUNT_PASSWORD:Symbol("Challenge: Verify Account - Password"),EMAIL:Symbol("Challenge: Verify Email"),SUCCESS:Symbol("Challenge: Success"),UNEXPECTED_ERROR:Symbol("Challenge: Unexpected Error")};wt=(0,f._V)("features/sign-in/challenge",{initialState:null}),St=(0,c.RR)("features/context/request","features/http","features/notification"),Dt=l.aD.bound,It=l.aD.bound,Ct=l.aD.bound,wt(Tt=St((At=Zt((Pt=class{constructor(e,t,r){Ft(this,"challenges",At,this),Ft(this,"token",_t,this),this.request=e,this.http=t,this.notification=r}handleNextChallenge(){if(zt()(this.challenges))this.transition(Vt.SUCCESS);else{switch(this.challenges.pop()){case d.Qv.Challenges.VerifyAccount.Email:this.transition(Vt.ACCOUNT_EMAIL);break;default:this.transition(Vt.UNEXPECTED_ERROR)}}}async onEnter(){try{this.token=await this.http.put("/auth-api/challenges",{data:{claimId:this.request.get("claimID")}}).then((e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.token}))}catch(e){return Ut("Failed to retrieve challenge claim: (%o) %s",e.errorCode,e.message),this.notification.notify(re().SERVER_ERROR),this.transition(Vt.UNEXPECTED_ERROR)}const{challenges:e,finalURL:t}=xt().decode(this.token);if(this.challenges=e,t){const e=new(Ke())(t,!0),r=Mt()(e.query,d.az.ALLOWED);for(const e of Object.keys(r))this.request.set(e,r[e])}this.handleNextChallenge()}onInit({props:e}){this.notifySuccess=e.onSuccess||(()=>{}),this.notifyError=e.onError||(()=>{})}}).prototype,"challenges",[l.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_t=Zt(Pt.prototype,"token",[l.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zt(Pt.prototype,"handleNextChallenge",[Dt],Object.getOwnPropertyDescriptor(Pt.prototype,"handleNextChallenge"),Pt.prototype),Zt(Pt.prototype,"onEnter",[It],Object.getOwnPropertyDescriptor(Pt.prototype,"onEnter"),Pt.prototype),Zt(Pt.prototype,"onInit",[Ct],Object.getOwnPropertyDescriptor(Pt.prototype,"onInit"),Pt.prototype),Tt=Pt))||Tt);var Gt,qt=(0,f.ls)("features/sign-in/challenge")(Nt=class extends g().Component{render(){const{store:e}=this.props;return{[Vt.ACCOUNT_EMAIL]:g().createElement(Rt,{token:e.token,onSuccess:e.handleNextChallenge}),[Vt.SUCCESS]:g().createElement(b.W,{action:e.notifySuccess}),[Vt.UNEXPECTED_ERROR]:g().createElement(b.W,{action:e.notifyError})}[e.state]||g().createElement(v.gb,null)}})||Nt,Wt=r(36050),Bt=r(20643),$t=r.n(Bt),Ht=r(22074),Kt=r(50081),Yt=r(91587);var Xt,Jt,Qt,er=(0,c.f3)("features/sign-in/api","features/context/team")(Gt=class extends g().Component{render(){const{"features/sign-in/api":e,"features/context/team":t,entry:r,onForgotPassword:n=(()=>{}),onChangeMethod:i=(()=>{}),onSuccess:o=(()=>{}),onError:a=(()=>{})}=this.props;return g().createElement(C.Z,{onEnter:({store:r})=>{if(r.state===C.e.SIGN_IN_PROMPT){const{enabled:r,domains:n}=$t()(t,"openEnrollment",{});e.track(u.p$.VIEWED,{openEnrollment:r&&n.length?"enabled":"disabled",authenticationType:"password"})}},renderEntryForm:e=>g().createElement(Ht.ZP,{renderForm:e,onChangeMethod:i,onForgotPassword:n}),renderUpdateForm:(e,{transaction:t})=>g().createElement(Kt.Z,{renderForm:e,transaction:t}),renderMFAForm:(e,{transaction:t})=>g().createElement(Yt.Z,{renderForm:e,transaction:t}),renderMFARequired:e=>e(),entry:r,onSuccess:o,onError:a})}})||Gt,tr=r(96130);function rr(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}(0,ee.oe)("features/sign-in/team/saml-prompt")(Xt=(0,c.RR)("features/context/geolocation","features/context/team")((rr((Jt=class{constructor(e,t){this.geolocation=e,this.team=t}get name(){return this.team.name}get logo(){return this.team.logo}get showAltLink(){return this.team.useAltAuth}get underGDPR(){return this.geolocation.underGDPR()}}).prototype,"name",[l.Fl],Object.getOwnPropertyDescriptor(Jt.prototype,"name"),Jt.prototype),rr(Jt.prototype,"logo",[l.Fl],Object.getOwnPropertyDescriptor(Jt.prototype,"logo"),Jt.prototype),rr(Jt.prototype,"showAltLink",[l.Fl],Object.getOwnPropertyDescriptor(Jt.prototype,"showAltLink"),Jt.prototype),rr(Jt.prototype,"underGDPR",[l.Fl],Object.getOwnPropertyDescriptor(Jt.prototype,"underGDPR"),Jt.prototype),Xt=Jt))||Xt);let nr=(0,ee.ei)("features/sign-in/team/saml-prompt")(Qt=class extends g().Component{render(){const{store:e,render:t,onChangeMethod:r}=this.props;return g().createElement(g().Fragment,null,g().createElement(v.Ir,{name:e.name,src:e.logo}),g().createElement(v.X6,{align:"center",heading:`Sign in to ${e.name}`,subheading:`For added security, ${e.name} requires Single Sign-On (SSO)`}),t(),e.showAltLink&&g().createElement(Xe.Z,{horizontal:"center"},g().createElement(ir,{"data-component":"alt-auth-link",order:"primary",tabIndex:"1",onClick:()=>r()},"or sign in with email")),g().createElement(v.Jr,{visible:!e.underGDPR},g().createElement(Ye.Z,{top:"l"},g().createElement(P.Z,{align:"center"},"By signing in, I agree to InVision's"," ",g().createElement(A.Z,{element:"a",href:"https://www.invisionapp.com/terms",order:"secondary",target:"_blank",rel:"noreferrer"},"Terms of Service")," ","and"," ",g().createElement(A.Z,{element:"a",href:"https://www.invisionapp.com/privacy",order:"secondary",target:"_blank",rel:"noreferrer"},"Privacy Policy"),"."))))}})||Qt;const ir=(0,_.ZP)(A.Z).withConfig({displayName:"SamlPrompt__AltLink",componentId:"sc-1nih89o-0"})(["font-size:14px;margin-top:",";text-align:center;"],(e=>e.theme.spacing.s));var or,ar=nr;var sr,lr,cr,pr,ur,dr,mr,hr,yr,gr,br,fr=(0,c.f3)("features/sign-in/api")(or=class extends g().Component{render(){const{"features/sign-in/api":e,entry:t,onChangeMethod:r=(()=>{}),onSuccess:n=(()=>{}),onError:i=(()=>{})}=this.props;return g().createElement(tr.Z,{onEnter:({store:t})=>{t.state===tr.e.SIGN_IN_PROMPT&&e.track(u.p$.VIEWED,{authenticationType:"saml"})},renderPrompt:e=>g().createElement(ar,{render:e,onChangeMethod:r}),entry:t,onSuccess:n,onError:i})}})||or,Er=r(20314);function vr(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Or="ensure-team",wr=(0,p.kg)("sign-in"),Sr={LOADING:Symbol("Team: Loading"),FORGOT_PASSWORD:Symbol("Team: Forgot Password"),SIGN_IN_CHALLENGED:Symbol("Team: Challenged"),SIGN_IN_PASSWORD:Symbol("Team: Password"),SIGN_IN_SAML:Symbol("Team: SAML"),SIGN_IN_SUCCESS:Symbol("Team: Success"),SIGN_IN_JIT_DISABLED:Symbol("Team: Failure - JIT Disabled"),SIGN_IN_TEAM_LOCKED:Symbol("Team: Failure - Team Locked")};sr=(0,f._V)("features/sign-in/team",{initialState:Sr.LOADING}),lr=(0,c.RR)("features/sign-in/api","features/analytics","features/context/request","features/context/team","features/context/user","features/toggles","navigator"),cr=(0,u.UO)({flow:"TeamSignIn"}),pr=l.aD.bound,ur=l.aD.bound,dr=l.aD.bound,mr=l.aD.bound,hr=l.aD.bound,yr=l.aD.bound,sr(gr=lr(gr=cr((vr((br=class{constructor(e,t,r,n,i,o,a){this.api=e,this.analytics=t,this.request=r,this.team=n,this.user=i,this.toggles=o,this.navigator=a}onInit({props:e}){this.notifySuccess=e.onSuccess}async onEnter({props:e}){const t=this.request.get("reason");if(t&&window.atob(t).trim()===Er.uJ)return this.transition(Sr.SIGN_IN_JIT_DISABLED);if(this.request.get("claimID"))return this.transition(Sr.SIGN_IN_CHALLENGED);switch(e.entry||this.request.get("entry")){case w.pd.AUTHENTICATE:return this.attemptAuthentication();default:return this.handleEnterCredentials()}}async attemptAuthentication(){try{await this.user.load({suppressMsg:!0}),this.handleSuccess()}catch(e){this.handleEnterCredentials()}}async handleEnterCredentials(){this.team.samlInfo.enabled?this.transition(Sr.SIGN_IN_SAML):this.transition(Sr.SIGN_IN_PASSWORD)}async handleSuccess(){this.transition(Sr.LOADING);try{await this.user.load({errorKey:Or})}catch(e){return this.team.isLocked?this.transition(Sr.SIGN_IN_TEAM_LOCKED):this.handleEnterCredentials()}return await this.analytics.identify(this.user.analyticsID,{email:this.user.email}),await this.api.track(u.p$.SUCCEEDED),this.notifySuccess?this.notifySuccess():this.transition(Sr.SIGN_IN_SUCCESS)}async handleFailure(e){const t=$t()(e,"response.data.errorCode");wr("Team sign-in failed: (%o) %s",t,e.message),this.api.track(u.p$.FAILED,{errorCode:t})}}).prototype,"onInit",[pr],Object.getOwnPropertyDescriptor(br.prototype,"onInit"),br.prototype),vr(br.prototype,"onEnter",[ur],Object.getOwnPropertyDescriptor(br.prototype,"onEnter"),br.prototype),vr(br.prototype,"attemptAuthentication",[dr],Object.getOwnPropertyDescriptor(br.prototype,"attemptAuthentication"),br.prototype),vr(br.prototype,"handleEnterCredentials",[mr],Object.getOwnPropertyDescriptor(br.prototype,"handleEnterCredentials"),br.prototype),vr(br.prototype,"handleSuccess",[hr],Object.getOwnPropertyDescriptor(br.prototype,"handleSuccess"),br.prototype),vr(br.prototype,"handleFailure",[yr],Object.getOwnPropertyDescriptor(br.prototype,"handleFailure"),br.prototype),gr=br))||gr)||gr);var Dr;var Ir,Cr,Tr,Pr,Ar,_r,Nr,Rr,kr=(0,f.ls)("features/sign-in/team")(Dr=class extends g().Component{render(){const{store:e,entry:t}=this.props;return{[Sr.FORGOT_PASSWORD]:g().createElement(k.wC.A,null,g().createElement(me.Z,{onBack:e.handleEnterCredentials,onRequested:e.handleEnterCredentials})),[Sr.SIGN_IN_CHALLENGED]:g().createElement(k.wC.A,{"data-component":"team-sign-in-challenge"},g().createElement(qt,{onSuccess:e.handleEnterCredentials,onError:e.handleEnterCredentials})),[Sr.SIGN_IN_SAML]:g().createElement(k.wC.A,{"data-component":"team-sign-in"},g().createElement(fr,{entry:t,onSuccess:e.handleSuccess,onError:e.handleFailure,onChangeMethod:()=>e.transition(Sr.SIGN_IN_PASSWORD)})),[Sr.SIGN_IN_PASSWORD]:g().createElement(k.wC.A,{"data-component":"team-sign-in"},g().createElement(ft.HK,{preserveTransitionErrors:!0,requestKey:Or}),g().createElement(er,{entry:t,onSuccess:e.handleSuccess,onError:e.handleFailure,onChangeMethod:()=>e.transition(Sr.SIGN_IN_SAML),onForgotPassword:()=>e.transition(Sr.FORGOT_PASSWORD)})),[Sr.SIGN_IN_TEAM_LOCKED]:g().createElement(k.wC.A,{"data-component":"team-sign-in"},g().createElement(k.h4.SK,{withBackground:!1}),g().createElement(v.nY,null)),[Sr.SIGN_IN_JIT_DISABLED]:g().createElement(Et.Z,null),[Sr.SIGN_IN_SUCCESS]:g().createElement(Wt.Z,null)}[e.state]||g().createElement(v.gb,null)}})||Dr,zr=r(3608),jr=r(88821);function xr(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Lr={LOADING:Symbol("Loading"),REDIRECT:Symbol("Redirect: Parameter")};Ir=(0,f._V)("features/sign-in/oauth/token-exchange",{initialState:Lr.LOADING}),Cr=(0,c.RR)("features/context/cloud-ui","features/context/request"),Tr=l.aD.bound,Pr=l.aD.bound,Ir(Ar=Cr((Nr=xr((_r=class{constructor(e,t){var r,n,i,o;r=this,n="redirectUrl",o=this,(i=Nr)&&Object.defineProperty(r,n,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0}),this.cloud=e,this.request=t}async onEnter(){await this.cloud.requestAccessToken(),this.redirectBack()}redirectBack(){this.redirectTo=this.request.redirectTo||this.request.referrer||"/",this.transition(Lr.REDIRECT)}}).prototype,"redirectUrl",[l.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xr(_r.prototype,"onEnter",[Tr],Object.getOwnPropertyDescriptor(_r.prototype,"onEnter"),_r.prototype),xr(_r.prototype,"redirectBack",[Pr],Object.getOwnPropertyDescriptor(_r.prototype,"redirectBack"),_r.prototype),Ar=_r))||Ar);var Mr,Fr,Zr,Ur,Vr,Gr,qr,Wr,Br=(0,f.ls)("features/sign-in/oauth/token-exchange")(Rr=class extends g().Component{render(){const{store:e}=this.props;return!e.state===Lr.REDIRECT?g().createElement(v.gb,null):g().createElement(jr.l_,{destination:e.redirectUrl,options:{replace:!0}})}})||Rr;function $r(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Hr={LOADING:Symbol("Loading"),OAUTH_TOKEN_EXCHANGE:Symbol("OAuth: Token exchange"),ACTION_OAUTH:Symbol("OAuth sign-in"),ACTION_GLOBAL_SIGN_IN:Symbol("Global sign-in"),ACTION_TEAM_SIGN_IN:Symbol("Team sign-in"),ACTION_RESERVATION:Symbol("Reservation sign-in")};Mr=(0,f._V)("features/sign-in",{initialState:Hr.LOADING}),Fr=(0,c.RR)("features/sign-in/api","features/context/cloud-ui","features/context/request","features/context/team"),Zr=l.aD.bound,Ur=l.aD.bound,Vr=l.aD.bound,Mr(Gr=Fr(($r((qr=class{constructor(e,t,r,n){this.api=e,this.cloud=t,this.request=r,this.team=n}onInit(){switch(this.request.get("action")){case O.D.CREATE:return this.transition(Hr.ACTION_RESERVATION);case w.MD.OAUTH:return this.transition(Hr.ACTION_OAUTH)}return this.cloud.oauthMode===w.PZ.HOSTED?this.transition(Hr.OAUTH_TOKEN_EXCHANGE):this.team.isGlobal?this.transition(Hr.ACTION_GLOBAL_SIGN_IN):this.transition(Hr.ACTION_TEAM_SIGN_IN)}onEnter({props:e}){this.api.setEmail(e.email)}markData(){this.cloud.markDataLoaded()}}).prototype,"onInit",[Zr],Object.getOwnPropertyDescriptor(qr.prototype,"onInit"),qr.prototype),$r(qr.prototype,"onEnter",[Ur],Object.getOwnPropertyDescriptor(qr.prototype,"onEnter"),qr.prototype),$r(qr.prototype,"markData",[Vr],Object.getOwnPropertyDescriptor(qr.prototype,"markData"),qr.prototype),Gr=qr))||Gr);var Kr=(0,f.ls)("features/sign-in")(Wr=class extends g().Component{render(){const{store:e}=this.props;return{[Hr.ACTION_GLOBAL_SIGN_IN]:g().createElement(g().Fragment,null,g().createElement(b.W,{action:e.markData}),g().createElement(We,null)),[Hr.ACTION_OAUTH]:g().createElement(zr.Z,null),[Hr.ACTION_RESERVATION]:g().createElement(g().Fragment,null,g().createElement(b.W,{action:e.markData}),g().createElement(bt,null)),[Hr.ACTION_TEAM_SIGN_IN]:g().createElement(E.ur,{stores:[e.team],loading:g().createElement(v.gb,null)},g().createElement(b.W,{action:e.markData}),g().createElement(kr,null)),[Hr.OAUTH_TOKEN_EXCHANGE]:g().createElement(Br,null)}[e.state]||g().createElement(v.gb,null)}})||Wr},3608:function(e,t,r){"use strict";r.d(t,{y:function(){return nt},Z:function(){return Ue}});var n=r(16624),i=r.n(n),o=r(64267),a=r(5260),s=r(59549),l=r(32837),c=r(28511),p=r(5013),u=r(47714),d=r(48749),m=r(9343),h=r(48526),y=r(36866);var g,b,f,E,v,O,w,S,D=r(50137),I=r.n(D),C=r(88821);function T(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const P={LOADING:Symbol("Loading"),REDIRECT:Symbol("Redirect")};g=(0,a._V)("features/oauth/authorize",{initialState:P.LOADING}),b=(0,s.RR)("features/context/request"),f=(0,c.UO)({flow:"OAuth"}),E=o.aD.bound,g(v=b(v=f((w=T((O=class{constructor(e){var t,r,n,i;t=this,r="redirectUrl",i=this,(n=w)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0}),this.request=e}async onEnter({props:e}){const t=this.request.get("redirectTo");try{if(this.redirectUrl=new(I())(t,`//${this.request.host}`,!0),!this.redirectUrl)throw new Error("No redirect provided")}catch(t){return e.onError(t)}this.transition(P.REDIRECT)}}).prototype,"redirectUrl",[o.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T(O.prototype,"onEnter",[E],Object.getOwnPropertyDescriptor(O.prototype,"onEnter"),O.prototype),v=O))||v)||v);var A,_=(0,a.ls)("features/oauth/authorize")(S=class extends i().Component{render(){const{store:e}=this.props;return{[P.REDIRECT]:i().createElement(C.l_,{destination:e.redirectUrl})}[e.state]||i().createElement(p.gb,null)}})||S,N=r(76069),R=r(87860),k=r(25817),z=r(59953),j=r(57741);let x=(0,s.f3)("features/sign-in/api")(A=(0,N.Pi)(A=class extends i().Component{get api(){return this.props["features/sign-in/api"]}render(){const{onSuccess:e,onError:t,knowDomain:r,forgotPassword:n}=this.props;return i().createElement(j.Z,{onEnter:({store:e})=>{e.state===j.e.SIGN_IN_PROMPT&&this.api.track(c.p$.VIEWED,{authenticationType:"password"})},renderEntryForm:e=>i().createElement(i().Fragment,null,i().createElement(p.X6,{align:"center",heading:"Sign in to InVision",subheading:"Enter your details below"}),e({emailHelper:i().createElement(k.Z,{order:"body",size:"smallest",element:"span"},i().createElement(z.Z,{order:"primary",element:"a",onClick:r},"Know your team domain?")),passwordHelper:i().createElement(L,{type:"button",order:"tertiary",onClick:n},"Forgot your password?")})),onSuccess:e,onError:t})}})||A)||A;const L=(0,R.ZP)(z.Z).withConfig({displayName:"SignIn__HelperLink",componentId:"sc-1abm2gj-0"})(["position:absolute;top:0;right:0;font-size:12px;"]);var M,F,Z,U,V,G,q,W,B,$,H=x,K=r(90660),Y=r(70273),X=r(48031),J=r(96130),Q=r(20314);function ee(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const te={LOADING:Symbol("Loading"),SAML:Symbol("SAML"),SAML_JIT_DISABLED:Symbol("JIT Disabled"),SIGN_IN:Symbol("Sign-in"),TEAM_LOCKED:Symbol("Team Locked")};M=(0,a._V)("features/oauth/team-sign-in",{initialState:te.LOADING}),F=(0,s.RR)("features/context/request","features/context/team","features/context/user"),Z=o.aD.bound,U=o.aD.bound,V=o.aD.bound,G=o.aD.bound,q=o.aD.bound,M(W=F((ee((B=class{constructor(e,t,r){this.request=e,this.team=t,this.user=r}async onInit({props:e}){this.notifySuccess=e.onSuccess||(()=>{})}async onEnter({props:e}){if(this.team.isLocked)return this.transition(te.TEAM_LOCKED);if(!await this.checkSession()){return this.team.samlInfo.enabled?await this.checkProvisioningErrors()?this.transition(te.SAML_JIT_DISABLED):this.transition(te.SAML):this.transition(te.SIGN_IN)}return this.handleSuccess()}async checkSession(){try{return await this.user.load({suppressMsg:!0}),!0}catch(e){return!1}}async checkProvisioningErrors(){const e=this.request.get("reason")||"";return atob(e).trim()===Q.uJ}async handleSuccess(){this.notifySuccess()}}).prototype,"onInit",[Z],Object.getOwnPropertyDescriptor(B.prototype,"onInit"),B.prototype),ee(B.prototype,"onEnter",[U],Object.getOwnPropertyDescriptor(B.prototype,"onEnter"),B.prototype),ee(B.prototype,"checkSession",[V],Object.getOwnPropertyDescriptor(B.prototype,"checkSession"),B.prototype),ee(B.prototype,"checkProvisioningErrors",[G],Object.getOwnPropertyDescriptor(B.prototype,"checkProvisioningErrors"),B.prototype),ee(B.prototype,"handleSuccess",[q],Object.getOwnPropertyDescriptor(B.prototype,"handleSuccess"),B.prototype),W=B))||W);let re=(0,a.ls)("features/oauth/team-sign-in")($=class extends i().Component{render(){const{store:e,onError:t=(()=>{})}=this.props;return{[te.SAML_JIT_DISABLED]:i().createElement(Y.Z,null),[te.SAML]:i().createElement(u.wC.A,null,i().createElement(J.Z,{entry:y.pd.AUTHENTICATE,onSuccess:e.handleSuccess,onError:t})),[te.SIGN_IN]:i().createElement(X.Rq,null),[te.TEAM_LOCKED]:i().createElement(u.wC.A,null,i().createElement(u.h4.SK,{withBackground:!1}),i().createElement(p.nY,null))}[e.state]||i().createElement(p.gb,null)}})||$;var ne,ie=e=>i().createElement(K.h$,null,i().createElement(re,e)),oe=r(26330),ae=r(94002),se=r(44527);var le,ce,pe,ue,de,me,he,ye,ge,be,fe,Ee,ve,Oe,we,Se,De=(0,N.Pi)(ne=class extends i().Component{get api(){return this.props["features/sign-in/api"]}render(){const{onBack:e}=this.props;return i().createElement(u.wC.A,null,i().createElement(p.X6,{align:"center",heading:"This app is not compatible with this team"}),i().createElement(se.$0,null,i().createElement(k.Z,{align:"center",element:"p",order:"body",prose:!0},"The team you are trying to sign into is on a legacy version of InVision and is not compatible with this application."),i().createElement(k.Z,{align:"center",element:"p",order:"body",prose:!0},"To use this plugin, please try a different team, switch to a different email or create a new team.")),i().createElement(se.$0,null,i().createElement(oe.Z,{flexDirection:"column",alignItems:"center"},i().createElement(ae.Z,{onClick:e,size:"smaller"},"Try Different Team"))))}})||ne;function Ie(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Ce=(0,l.kg)("oauth"),Te={AUTHORIZE:Symbol("Authorize"),LOADING:Symbol("Loading"),FORGOT_PASSWORD:Symbol("Forgot Password"),KNOW_YOUR_DOMAIN:Symbol("Know Your Domain"),SIGN_IN:Symbol("Sign-in"),SIGN_IN_TEAM:Symbol("Team: Sign-in"),TEAM_SELECT:Symbol("Team: Select"),V6_TEAM_SELECTED:Symbol("Team: V6 Selected"),ERROR:Symbol("Error")};le=(0,a._V)("features/sign-in/oauth/grant",{initialState:Te.LOADING}),ce=(0,s.RR)("features/analytics","features/context/request","features/context/team","features/context/user","features/sign-in/api"),pe=(0,c.UO)({flow:"OAuth"}),ue=o.aD.bound,de=o.aD.bound,me=o.aD.bound,he=o.aD.bound,ye=o.aD.bound,ge=o.aD.bound,be=o.aD.bound,fe=o.aD.bound,Ee=o.aD.bound,ve=o.aD.bound,le(Oe=ce(Oe=pe((Ie((we=class{constructor(e,t,r,n,i){this.analytics=e,this.request=t,this.team=r,this.user=n,this.api=i}async onEnter(){const e=this.request.get("entry")===y.pd.AUTHENTICATE&&await this.checkSession();return this.team.isGlobal?e?this.transition(Te.TEAM_SELECT):this.transition(Te.SIGN_IN):e?this.transition(Te.AUTHORIZE):this.transition(Te.SIGN_IN_TEAM)}handleSignIn(){this.transition(Te.SIGN_IN)}forgotPassword(){this.transition(Te.FORGOT_PASSWORD)}handleKnowDomain(){this.transition(Te.KNOW_YOUR_DOMAIN)}handleSelectTeam(){this.transition(Te.TEAM_SELECT)}v6Selected(){this.transition(Te.V6_TEAM_SELECTED)}handleAuthorize(){this.transition(Te.AUTHORIZE)}handleAuthorizeError(e){var t,r;const n=null==e||null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.errorCode;Ce("OAuth authorize failed: (%o) %s",n,null==e?void 0:e.message),this.api.track(c.p$.FAILED,{errorCode:n}),this.transition(Te.ERROR)}handleError(e){var t,r;const n=null==e||null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.errorCode;Ce("OAuth sign-in failed: (%o) %s",n,null==e?void 0:e.message),this.api.track(c.p$.FAILED,{errorCode:n})}async checkSession(){return this.transition(Te.LOADING),this.user.checkSession().catch((e=>(Ce("Unable to check session: %O",e),!1)))}}).prototype,"onEnter",[ue],Object.getOwnPropertyDescriptor(we.prototype,"onEnter"),we.prototype),Ie(we.prototype,"handleSignIn",[de],Object.getOwnPropertyDescriptor(we.prototype,"handleSignIn"),we.prototype),Ie(we.prototype,"forgotPassword",[me],Object.getOwnPropertyDescriptor(we.prototype,"forgotPassword"),we.prototype),Ie(we.prototype,"handleKnowDomain",[he],Object.getOwnPropertyDescriptor(we.prototype,"handleKnowDomain"),we.prototype),Ie(we.prototype,"handleSelectTeam",[ye],Object.getOwnPropertyDescriptor(we.prototype,"handleSelectTeam"),we.prototype),Ie(we.prototype,"v6Selected",[ge],Object.getOwnPropertyDescriptor(we.prototype,"v6Selected"),we.prototype),Ie(we.prototype,"handleAuthorize",[be],Object.getOwnPropertyDescriptor(we.prototype,"handleAuthorize"),we.prototype),Ie(we.prototype,"handleAuthorizeError",[fe],Object.getOwnPropertyDescriptor(we.prototype,"handleAuthorizeError"),we.prototype),Ie(we.prototype,"handleError",[Ee],Object.getOwnPropertyDescriptor(we.prototype,"handleError"),we.prototype),Ie(we.prototype,"checkSession",[ve],Object.getOwnPropertyDescriptor(we.prototype,"checkSession"),we.prototype),Oe=we))||Oe)||Oe);var Pe,Ae,_e,Ne,Re,ke,ze,je,xe,Le,Me,Fe,Ze,Ue=(0,a.ls)("features/sign-in/oauth/grant")(Se=class extends i().Component{render(){const{store:e}=this.props,t=e=>i().createElement(u.wC.A,null,e);return{[Te.SIGN_IN]:t(i().createElement(H,{forgotPassword:e.forgotPassword,knowDomain:()=>e.handleKnowDomain(),onSuccess:e.handleSelectTeam,onError:e.handleError})),[Te.SIGN_IN_TEAM]:i().createElement(ie,{onSuccess:e.handleAuthorize,onError:e.handleError}),[Te.TEAM_SELECT]:i().createElement(m.Z,{onSwitch:e.handleSignIn}),[Te.AUTHORIZE]:i().createElement(_,{onError:e.handleAuthorizeError}),[Te.ERROR]:i().createElement(p.jj,null),[Te.FORGOT_PASSWORD]:t(i().createElement(h.Z,{onBack:e.handleSignIn})),[Te.KNOW_YOUR_DOMAIN]:t(i().createElement(d.Z,{onBack:e.handleSignIn,notifyV6TeamSelected:e.v6Selected})),[Te.V6_TEAM_SELECTED]:t(i().createElement(De,{onBack:e.handleKnowDomain}))}[e.state]||i().createElement(p.gb,null)}})||Se,Ve=r(81772),Ge=r(47552),qe=r(28552),We=r.n(qe);function Be(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function $e(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const He=(0,l.kg)("oauth:consent"),Ke={LOADING:Symbol("Loading"),CONSENT:Symbol("Consent"),REDIRECT:Symbol("Redirect"),TEAM_SIGN_IN:Symbol("Team Sign-in")};Pe=(0,a._V)("features/oauth/consent",{initialState:Ke.LOADING}),Ae=(0,s.RR)("features/context/request","features/context/team","features/context/user","features/http","features/sign-in/api","navigator"),_e=(0,c.UO)({flow:"OAuth"}),Ne=o.aD.bound,Re=o.aD.bound,ke=o.aD.bound,ze=o.aD.bound,je=o.aD.bound,Pe(xe=Ae(xe=_e((Me=$e((Le=class{constructor(e,t,r,n,i,o){Be(this,"client",Me,this),Be(this,"redirectUrl",Fe,this),this.request=e,this.team=t,this.user=r,this.http=n,this.api=i,this.nav=o}async onEnter({props:e}){const t=this.request.get("client_id"),r=this.request.get("redirectTo");await this.team.load();try{await this.user.load()}catch(e){He("user failed to load")}if(this.team.isGlobal)return this.handleSignIn();if(!this.user.authenticated)return this.transition(Ke.TEAM_SIGN_IN);try{if(this.client=await this.http.get("/auth-api/oauth/client",{params:{clientId:t}}).then((e=>e.data)),this.redirectUrl=new(I())(r,`//${this.request.host}`,!0),!this.redirectUrl)throw new p.jj("No redirect provided")}catch(e){return this.handleError(e)}this.transition(Ke.CONSENT)}async handleSignIn(){return this.nav.goTo(`/auth/sign-in${this.request.querystring}`,{subdomain:"login"})}handleGrantAccess(){this.redirectUrl.set("query",{...this.redirectUrl.query,consent:!0}),this.transition(Ke.REDIRECT)}handleCancel(){this.redirectUrl.set("query",{...this.redirectUrl.query,consent:!1}),this.transition(Ke.REDIRECT)}handleError(e){var t,r;const n=null==e||null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.errorCode;He("OAuth sign-in failed: (%o) %s",n,null==e?void 0:e.message),this.api.track(c.p$.FAILED,{errorCode:n}),this.transition(Ke.ERROR)}}).prototype,"client",[o.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fe=$e(Le.prototype,"redirectUrl",[o.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$e(Le.prototype,"onEnter",[Ne],Object.getOwnPropertyDescriptor(Le.prototype,"onEnter"),Le.prototype),$e(Le.prototype,"handleSignIn",[Re],Object.getOwnPropertyDescriptor(Le.prototype,"handleSignIn"),Le.prototype),$e(Le.prototype,"handleGrantAccess",[ke],Object.getOwnPropertyDescriptor(Le.prototype,"handleGrantAccess"),Le.prototype),$e(Le.prototype,"handleCancel",[ze],Object.getOwnPropertyDescriptor(Le.prototype,"handleCancel"),Le.prototype),$e(Le.prototype,"handleError",[je],Object.getOwnPropertyDescriptor(Le.prototype,"handleError"),Le.prototype),xe=Le))||xe)||xe);let Ye=(0,a.ls)("features/oauth/consent")(Ze=class extends i().Component{render(){var e,t,r,n;const{store:o}=this.props;return{[Ke.REDIRECT]:i().createElement(C.l_,{destination:o.redirectUrl}),[Ke.TEAM_SIGN_IN]:i().createElement(X.Rq,null),[Ke.CONSENT]:i().createElement(u.wC.A,null,i().createElement(u.h4.SK,null),i().createElement(rt,null,i().createElement(se.$0,null,i().createElement(oe.Z,{alignItems:"center",justifyContent:"center"},i().createElement(Ve.Z,{horizontal:"xs"},i().createElement(Xe,{src:null===(e=o.client)||void 0===e?void 0:e.imageUrl}),i().createElement(Je,null),i().createElement(Qe,{name:o.team.name,src:o.team.logo,color:"dark",order:"team",size:"larger"})))),i().createElement(se.$0,null,i().createElement(tt,{align:"center",heading:`${null===(t=o.client)||void 0===t?void 0:t.name} wants to access your InVision team`})),i().createElement(se.$0,null,i().createElement(k.Z,{order:"body",prose:!0},null===(r=o.client)||void 0===r?void 0:r.name," would like permission to access ",i().createElement("b",null,o.team.name)," on InVision. This will give ",null===(n=o.client)||void 0===n?void 0:n.name," access to read and modify files you have access to as well as read your name, email, and profile image.")),i().createElement(se.$0,null,i().createElement(oe.Z,{flexDirection:"column",alignItems:"center"},i().createElement(Ve.Z,{vertical:"xs"},i().createElement(et,{onClick:o.handleGrantAccess,size:"smaller"},"Grant access"),i().createElement(z.Z,{order:"white",onClick:o.handleCancel},"Cancel"))))),i().createElement(p.$_.VY,null,i().createElement(p.c6,{user:o.user,onSwitch:o.handleSignIn}))),[Ke.ERROR]:i().createElement(p.jj,null)}[o.state]||i().createElement(p.gb,null)}})||Ze;const Xe=R.ZP.img.withConfig({displayName:"Consent__AppImage",componentId:"a32vx2-0"})(["height:40px;"]),Je=(0,R.ZP)(We()).withConfig({displayName:"Consent__ArrowImage",componentId:"a32vx2-1"})(["height:40px;"]),Qe=(0,R.ZP)(Ge.Z).withConfig({displayName:"Consent__TeamImage",componentId:"a32vx2-2"})(["height:40px;"]),et=(0,R.ZP)(ae.Z).withConfig({displayName:"Consent__ActionButton",componentId:"a32vx2-3"})(["width:150px;"]),tt=(0,R.ZP)(p.X6).withConfig({displayName:"Consent__StyledHeading",componentId:"a32vx2-4"})(["margin:0 50px;"]),rt=R.ZP.div.withConfig({displayName:"Consent__Content",componentId:"a32vx2-5"})(["max-width:","px;margin:0 auto;text-align:center;"],(({theme:e})=>e.breakpoints.s));var nt=Ye},57741:function(e,t,r){"use strict";r.d(t,{e:function(){return ue},Z:function(){return de}});var n,i,o,a,s,l=r(16624),c=r.n(l),p=r(20643),u=r.n(p),d=r(64267),m=r(57819),h=r(5260),y=r(59549),g=r(20314),b=r(5013),f=r(5720),E=r(8130),v=r(88104),O=r(41899),w=r(44527),S=r(29890),D=r(12020),I=r(81281),C=r(32837);function T(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const P=(0,C.kg)("features:sign-in"),A=[I.SM.PASSWORD_EXPIRED,I.SM.PASSWORD_COMPLEXITY];n=(0,v.oe)("features/sign-in/password/credentials-entry"),i=(0,y.RR)("features/sign-in/api","features/http","features/context/client","features/context/team","features/context/user","features/tracking"),o=d.aD.bound,n(a=i((T((s=class{constructor(e,t,r,n,i,o){this.api=e,this.http=t,this.client=r,this.team=n,this.user=i,this.tracking=o}get prefilledEmail(){return this.api.email}onEnter(){var e,t;this.tracking.load({thirdParty:null===(e=this.tracking)||void 0===e||null===(t=e.thirdParties)||void 0===t?void 0:t.BIZIBLE})}async submit({values:e}){this.api.track(S.Z.SUBMITTED,{authenticationType:"password"});const t={email:u()(e,"email"),password:u()(e,"password")};return this.user.usingCredentials(t),this.ensurePartialSession(t)}async ensurePartialSession(e){try{const t=this.client.isEmbedded?{withcookie:"true"}:{},r=await this.http.post("/login-api/api/v2/login",{params:t,data:{...e,deviceID:this.client.type},maxRedirects:0,withCredentials:!0,errorKey:"global",errorMap:D.Z.SignInV2({team:this.team,log:P})});return P("Password sign-in successful"),r.data}catch(e){const{response:t}=e,r=u()(t,"data.errorCode");if(r===I.SM.MFA_REQUIRED){const r=u()(t,"data.transaction_id");e.mfaRequired={id:r}}if(r===I.SM.MFA_CONFIGURATION_REQUIRED&&(e.mfaConfigurationRequired=!0),A.includes(r)){const n=u()(t,"data.transaction_id"),i=u()(t,"data.policy");e.passwordUpdate={id:n,errorCode:r,policy:i}}throw e}}}).prototype,"prefilledEmail",[d.Fl],Object.getOwnPropertyDescriptor(s.prototype,"prefilledEmail"),s.prototype),T(s.prototype,"onEnter",[o],Object.getOwnPropertyDescriptor(s.prototype,"onEnter"),s.prototype),a=s))||a);var _;var N,R,k,z,j,x,L,M,F=(0,v.ei)("features/sign-in/password/credentials-entry")(_=class extends c().Component{render(){const{store:e,email:t,password:r,emailHelper:n,passwordHelper:i,onSuccess:o=(()=>{}),onError:a=(()=>{})}=this.props,s=t=>e.submit({values:t}).then(o).catch(a);if(t&&r)return c().createElement(m.W,{action:()=>s({email:t,password:r})},c().createElement(b.gb,null));const l=t||e.prefilledEmail;return c().createElement(w.l0,{"data-component":"password-sign-in",className:"Bizible-Exclude",submit:e=>s(e)},c().createElement(O.GT,{id:"signin_email",name:"email",label:"Email address",autoComplete:"username",autoFocus:!0,disabled:!!l,defaultValue:l,helper:n,tabIndex:"1"}),c().createElement(O.ro,{id:"signin_password",clearable:!0,name:"password",label:"Password",autoComplete:"current-password",tabIndex:"2"},i),c().createElement(O.k4,{tabIndex:"3"},"Sign in"))}})||_,Z=r(16720),U=r(28511);function V(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const G=(0,C.kg)("features:password");N=(0,v.oe)("features/sign-in/password/credentials-update"),R=(0,y.RR)("features/analytics","features/http","features/context/team","features/context/user"),k=d.aD.bound,z=d.aD.bound,j=d.aD.bound,x=d.aD.bound,N(L=R((V((M=class{constructor(e,t,r,n){this.analytics=e,this.http=t,this.team=r,this.user=n}get credentials(){return u()(this.user,"credentials",{})}track(e,t={}){this.analytics.track(U.zW.UPDATE_PASSWORD,e,{...t})}async onEnter({props:e}){const{errorCode:t}=null==e?void 0:e.transaction;this.track(U.p$.VIEWED,{errorCode:t})}async submit(e){try{return await this.updatePassword(e),this.complete()}catch(e){throw G("Submit error: %O",e.message),e}}async updatePassword(e){try{const t={newPassword:e,oldPassword:this.credentials.password};G("Updating password: %O",t);const r=await this.http.post("/auth-api/password/update",{data:t,errorKey:"global",errorMap:{400:()=>({data:{errorCode:I.SM.INVALID_FORM_FIELD,message:null}})},timeout:3e3});return G("Password updated"),this.user.updatePassword(e),r.data}catch(e){throw G("Error updating password: %O",e.message),e}}async complete(){try{G("Completing password sign-in");const e=await this.http.post("/auth-api/session/finalize",{withCredentials:!0});return G("Password sign-in completed"),e.data}catch(e){throw G("Error completing password sign-in: %O",e),e}}}).prototype,"credentials",[d.Fl],Object.getOwnPropertyDescriptor(M.prototype,"credentials"),M.prototype),V(M.prototype,"onEnter",[k],Object.getOwnPropertyDescriptor(M.prototype,"onEnter"),M.prototype),V(M.prototype,"submit",[z],Object.getOwnPropertyDescriptor(M.prototype,"submit"),M.prototype),V(M.prototype,"updatePassword",[j],Object.getOwnPropertyDescriptor(M.prototype,"updatePassword"),M.prototype),V(M.prototype,"complete",[x],Object.getOwnPropertyDescriptor(M.prototype,"complete"),M.prototype),L=M))||L);var q;var W,B,$,H,K,Y,X,J,Q,ee,te,re,ne,ie,oe,ae,se,le=(0,v.ei)("features/sign-in/password/credentials-update")(q=class extends c().Component{render(){const{store:e,transaction:t,onSuccess:r=(()=>{}),onError:n=(()=>{})}=this.props;return c().createElement(Z.Z,{onSubmit:t=>e.submit(t.password).then(r,n),submitText:"Set New Password",email:e.credentials.email,emailDisplayed:!1,policy:t.policy})}})||q;function ce(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function pe(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const ue={INITIAL:Symbol("Password: Initial"),SIGN_IN:Symbol("Password: Prompt"),SIGN_IN_PROMPT:Symbol("Password: Prompt"),SIGN_IN_SUCCESS:Symbol("Password: Success"),REQUIRE_MFA:Symbol("Password: MFA required"),REQUIRE_MFA_CONFIG:Symbol("Password: MFA configuration required"),REQUIRE_UPDATE:Symbol("Password: Update required")};W=(0,h._V)("features/sign-in/password",{initialState:ue.INITIAL}),B=(0,y.RR)("features/sign-in/api","features/context/request","features/context/user","features/notification","route"),$=d.aD.bound,H=d.aD.bound,K=d.aD.bound,Y=d.aD.bound,X=d.aD.bound,J=d.aD.bound,Q=d.aD.bound,ee=d.aD.bound,te=d.aD.bound,W(re=B((ie=pe((ne=class{constructor(e,t,r,n){ce(this,"mfaSettings",ie,this),ce(this,"transaction",oe,this),ce(this,"session",ae,this),this.api=e,this.request=t,this.user=r,this.notification=n}onEnter({props:e}){const{email:t,password:r}=e;return t&&r?this.transition(ue.SIGN_IN):this.transition(ue.SIGN_IN_PROMPT)}async complete(e){this.session={jwt:u()(e,"JWT")},this.session.jwt&&this.user.usingAuthToken(this.session.jwt),this.handleSuccess()}handleSuccess(){this.transition(ue.SIGN_IN_SUCCESS)}async error(e){if(e.mfaConfigurationRequired)return this.requireMFAConfig();if(e.mfaRequired)return this.mfaSettings={method:u()(e,"response.data.usermfa.mfa_type"),smsNumber:u()(e,"response.data.usermfa.sms_number")},this.requireMFA(e.mfaRequired);if(e.passwordUpdate)return this.requireUpdate(e.passwordUpdate);throw e}handleMFAConfigError(){this.transition(ue.SIGN_IN),this.notification.notify(g.CA)}handleRequireCreds(){this.transition(ue.SIGN_IN_PROMPT)}requireMFA(e){this.transaction=e,this.transition(ue.REQUIRE_MFA)}requireMFAConfig(){this.transition(ue.REQUIRE_MFA_CONFIG)}requireUpdate(e){this.transaction=e,this.transition(ue.REQUIRE_UPDATE)}}).prototype,"mfaSettings",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=pe(ne.prototype,"transaction",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=pe(ne.prototype,"session",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe(ne.prototype,"onEnter",[$],Object.getOwnPropertyDescriptor(ne.prototype,"onEnter"),ne.prototype),pe(ne.prototype,"complete",[H],Object.getOwnPropertyDescriptor(ne.prototype,"complete"),ne.prototype),pe(ne.prototype,"handleSuccess",[K],Object.getOwnPropertyDescriptor(ne.prototype,"handleSuccess"),ne.prototype),pe(ne.prototype,"error",[Y],Object.getOwnPropertyDescriptor(ne.prototype,"error"),ne.prototype),pe(ne.prototype,"handleMFAConfigError",[X],Object.getOwnPropertyDescriptor(ne.prototype,"handleMFAConfigError"),ne.prototype),pe(ne.prototype,"handleRequireCreds",[J],Object.getOwnPropertyDescriptor(ne.prototype,"handleRequireCreds"),ne.prototype),pe(ne.prototype,"requireMFA",[Q],Object.getOwnPropertyDescriptor(ne.prototype,"requireMFA"),ne.prototype),pe(ne.prototype,"requireMFAConfig",[ee],Object.getOwnPropertyDescriptor(ne.prototype,"requireMFAConfig"),ne.prototype),pe(ne.prototype,"requireUpdate",[te],Object.getOwnPropertyDescriptor(ne.prototype,"requireUpdate"),ne.prototype),re=ne))||re);var de=(0,h.ls)("features/sign-in/password")(se=class extends c().Component{render(){const e=e=>e(),{store:t,onSuccess:r=(()=>{}),onError:n=(()=>{}),renderEntryForm:i=e,renderUpdateForm:o=e,renderMFAForm:a=e,renderMFARequired:s=e}=this.props,l=e=>t.complete(e).catch(n),p=e=>t.error(e).catch(n);return c().createElement("div",{"data-component":"sign-in-password"},{[ue.SIGN_IN]:i((()=>c().createElement(F,{email:this.props.email,password:this.props.password,onSuccess:l,onError:p}))),[ue.SIGN_IN_PROMPT]:i((({email:e,emailHelper:t,passwordHelper:r}={})=>c().createElement(F,{email:this.props.email||e,emailHelper:t,passwordHelper:r,onSuccess:l,onError:p}))),[ue.REQUIRE_UPDATE]:o((()=>c().createElement(le,{transaction:t.transaction,onSuccess:l,onError:p})),{transaction:t.transaction}),[ue.REQUIRE_MFA]:a((()=>c().createElement(f.Z,{settings:t.mfaSettings,transaction:t.transaction,onSuccess:l,onError:p,onBack:t.handleRequireCreds,animate:!0})),{transaction:t.transaction}),[ue.REQUIRE_MFA_CONFIG]:s((()=>c().createElement(E.Z,{onSuccess:t.handleSuccess,onError:t.handleMFAConfigError}))),[ue.SIGN_IN_SUCCESS]:c().createElement(m.W,{action:()=>r(t.session)})}[t.state]||c().createElement(b.gb,null))}})||se},96130:function(e,t,r){"use strict";r.d(t,{e:function(){return X},Z:function(){return J}});var n,i,o,a=r(16624),s=r.n(a),l=r(64267),c=r(57819),p=r(5260),u=r(59549),d=r(32837),m=r(5013),h=r(36866),y=r(77877),g=r(88104),b=r(97674);(0,g.oe)("features/sign-in/saml/prompt")(n=(0,u.RR)("features/context/team")((f=(i=class{constructor(e){this.team=e}get saml(){return this.team.samlInfo}}).prototype,E="saml",v=[l.Fl],O=Object.getOwnPropertyDescriptor(i.prototype,"saml"),w=i.prototype,S={},Object.keys(O).forEach((function(e){S[e]=O[e]})),S.enumerable=!!S.enumerable,S.configurable=!!S.configurable,("value"in S||S.initializer)&&(S.writable=!0),S=v.slice().reverse().reduce((function(e,t){return t(f,E,e)||e}),S),w&&void 0!==S.initializer&&(S.value=S.initializer?S.initializer.call(w):void 0,S.initializer=void 0),void 0===S.initializer&&(Object.defineProperty(f,E,S),S=null),n=i))||n);var f,E,v,O,w,S;var D,I,C,T,P,A,_,N=(0,g.ei)("features/sign-in/saml/prompt")(o=class extends s().Component{render(){const{buttonLabel:e,store:t,onSubmit:r=(()=>{})}=this.props;return s().createElement(y.Z,{horizontal:"center","data-component":"saml-sign-in"},s().createElement(b.KM,{tabIndex:"0",onClick:r},e||t.saml.buttonLabel))}})||o,R=r(50137),k=r.n(R),z=r(88821),j=r(28511),x=r(98934),L=r.n(x);function M(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}D=(0,g.oe)("features/sign-in/saml/idp"),I=(0,u.RR)("features/sign-in/api","features/context/client","features/context/request"),C=l.aD.bound,D(T=I((A=M((P=class{constructor(e,t,r){!function(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}(this,"redirectUrl",A,this),this.api=e,this.client=t,this.request=r}onEnter({props:e}){const{reentryPath:t="/auth/sign-in"}=e,r=new(k())(t);r.set("query",{...L()(this.request.queryobject,["claimID"]),entry:h.pd.SUCCESS});const n=new(k())("/login-api/api/v1/sso/saml");n.set("query",{finalurl:r.toString(),deviceID:this.client.type,...this.client.isEmbedded?{withcookie:!0}:{}}),this.api.track(j.p$.SUBMITTED,{authenticationType:"saml"}),this.redirectUrl=n.toString()}}).prototype,"redirectUrl",[l.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M(P.prototype,"onEnter",[C],Object.getOwnPropertyDescriptor(P.prototype,"onEnter"),P.prototype),T=P))||T);var F,Z,U,V,G,q,W,B,$,H=(0,g.ei)("features/sign-in/saml/idp")(_=class extends s().Component{render(){const{store:e}=this.props;return s().createElement(z.l_,{destination:e.redirectUrl})}})||_;function K(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Y=(0,d.kg)("sign-in:saml"),X={SIGN_IN:Symbol("SAML: Start"),SIGN_IN_PROVIDER:Symbol("SAML: IDP"),SIGN_IN_PROMPT:Symbol("SAML: Prompt"),SIGN_IN_SUCCESS:Symbol("SAML: Success")};F=(0,p._V)("features/sign-in/saml",{initialState:X.SIGN_IN}),Z=(0,u.RR)("features/sign-in/api","features/context/request","features/context/team","route"),U=l.aD.bound,V=l.aD.bound,G=l.aD.bound,q=l.aD.bound,F(W=Z((K((B=class{constructor(e,t,r,n){this.api=e,this.request=t,this.team=r,this.route=n}async onEnter({props:e}){switch(e.entry||this.request.get("entry")){case h.pd.AUTHENTICATE:return this.authenticate();case h.pd.PROMPT:return this.prompt();case h.pd.SUCCESS:return this.continue();default:return this.prompt()}}prompt(){this.transition(X.SIGN_IN_PROMPT)}authenticate(){this.transition(X.SIGN_IN_PROVIDER)}async continue(){Y("IDP continue");const e=await this.api.getJwt();this.api.success({jwt:e}),this.transition(X.SIGN_IN_SUCCESS)}}).prototype,"onEnter",[U],Object.getOwnPropertyDescriptor(B.prototype,"onEnter"),B.prototype),K(B.prototype,"prompt",[V],Object.getOwnPropertyDescriptor(B.prototype,"prompt"),B.prototype),K(B.prototype,"authenticate",[G],Object.getOwnPropertyDescriptor(B.prototype,"authenticate"),B.prototype),K(B.prototype,"continue",[q],Object.getOwnPropertyDescriptor(B.prototype,"continue"),B.prototype),W=B))||W);var J=(0,p.ls)("features/sign-in/saml")($=class extends s().Component{render(){const{reentryPath:e,store:t,renderPrompt:r=(()=>{}),onSuccess:n=(()=>{})}=this.props;return s().createElement("div",{"data-component":"sign-in-saml"},{[X.SIGN_IN_PROMPT]:r((({buttonLabel:e=""}={})=>s().createElement(N,{buttonLabel:e,onSubmit:()=>t.authenticate()}))),[X.SIGN_IN_PROVIDER]:s().createElement(H,{reentryPath:e}),[X.SIGN_IN_SUCCESS]:s().createElement(c.W,{action:(...e)=>n(...e)},s().createElement(m.gb,null))}[t.state])}})||$},36050:function(e,t,r){"use strict";r.d(t,{Z:function(){return Fr}});var n,i,o,a,s,l,c,p=r(16624),u=r.n(p),d=r(64267),m=r(88821),h=r(57819),y=r(5260),g=r(59549),b=r(5013),f=r(58428),E=r(36866),v=r(32837),O=r(41225);function w(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const S={LOADING:Symbol("Loading"),ERROR:Symbol("Error")};n=(0,y._V)("features/session-reservation/create",{initialState:S.LOADING}),i=(0,g.RR)("features/http","features/context/request"),o=d.aD.bound,a=d.aD.bound,n(s=i((w((l=class{constructor(e,t){this.http=e,this.request=t}onInit({props:e}){this.notifySuccess=e.onSuccess||(()=>{})}async onEnter(){}}).prototype,"onInit",[o],Object.getOwnPropertyDescriptor(l.prototype,"onInit"),l.prototype),w(l.prototype,"onEnter",[a],Object.getOwnPropertyDescriptor(l.prototype,"onEnter"),l.prototype),s=l))||s);let D=(0,y.ls)("features/session-reservation/create")(c=class extends u().Component{render(){const{store:e}=this.props;return{}[e.state]||u().createElement(b.gb,null)}})||c;var I,C,T,P,A,_,N,R=e=>u().createElement(D,e);function k(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const z={LOADING:Symbol("Loading"),ERROR:Symbol("Error")};I=(0,y._V)("features/session-reservation/exchange",{initialState:z.LOADING}),C=(0,g.RR)("features/http","features/context/request"),T=d.aD.bound,P=d.aD.bound,I(A=C((k((_=class{constructor(e,t){this.http=e,this.request=t}onInit({props:e}){this.notifySuccess=e.onSuccess||(()=>{})}async onEnter(){}}).prototype,"onInit",[T],Object.getOwnPropertyDescriptor(_.prototype,"onInit"),_.prototype),k(_.prototype,"onEnter",[P],Object.getOwnPropertyDescriptor(_.prototype,"onEnter"),_.prototype),A=_))||A);let j=(0,y.ls)("features/session-reservation/exchange")(N=class extends u().Component{render(){const{store:e}=this.props;return{}[e.state]||u().createElement(b.gb,null)}})||N;var x,L,M,F,Z,U,V,G,q,W=e=>u().createElement(j,e),B=r(90660);function $(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const H={LOADING:Symbol("Loading"),ERROR:Symbol("Error")};x=(0,y._V)("features/session-reservation/upgrade",{initialState:H.LOADING}),L=(0,g.RR)("features/http","features/context/request"),M=d.aD.bound,F=d.aD.bound,Z=d.aD.bound,U=d.aD.bound,x(V=L(($((G=class{constructor(e,t){this.http=e,this.request=t}onInit({props:e}){this.resvID=e.resvID,this.notifyError=e.onError||this.onError,this.notifySuccess=e.onSuccess||(()=>{})}async onEnter(){try{await this.upgrade(),this.notifySuccess()}catch(e){this.notifyError()}}onError(){this.transition(H.ERROR)}async upgrade(){await this.http.post("/auth-api/session/reservations/upgrade",{data:{claimID:this.resvID},errorKey:"global"})}}).prototype,"onInit",[M],Object.getOwnPropertyDescriptor(G.prototype,"onInit"),G.prototype),$(G.prototype,"onEnter",[F],Object.getOwnPropertyDescriptor(G.prototype,"onEnter"),G.prototype),$(G.prototype,"onError",[Z],Object.getOwnPropertyDescriptor(G.prototype,"onError"),G.prototype),$(G.prototype,"upgrade",[U],Object.getOwnPropertyDescriptor(G.prototype,"upgrade"),G.prototype),V=G))||V);let K=(0,y.ls)("features/session-reservation/upgrade")(q=class extends u().Component{render(){const{store:e}=this.props;return{[H.ERROR]:u().createElement(b.jj,null)}[e.state]||u().createElement(b.gb,null)}})||q;var Y,X,J,Q,ee,te,re,ne,ie,oe,ae=e=>u().createElement(B.h$,null,u().createElement(B.U_,null,u().createElement(K,e)));function se(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function le(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const ce=(0,v.kg)("session-reservation"),pe={LOADING:Symbol("Loading"),RESERVATION_CREATE:Symbol("Reservation: Create"),RESERVATION_UPGRADE:Symbol("Reservation: Upgrade"),RESERVATION_EXCHANGE:Symbol("Reservation: Exchange"),ERROR:Symbol("Error")};Y=(0,y._V)("features/session-reservation",{initialState:pe.LOADING}),X=(0,g.RR)("features/http","features/context/request"),J=d.aD.bound,Q=d.aD.bound,ee=d.aD.bound,Y(te=X((ne=le((re=class{constructor(e,t){se(this,"resvID",ne,this),se(this,"nonce",ie,this),this.http=e,this.request=t}onInit({props:e}){if(this.resvID=this.request.get("resvID"),!this.resvID)return this.error("Missing resvID");this.handleNotifySuccess=e.onSuccess||(()=>{})}async onEnter({props:e}){switch(e.action||this.request.get("action")){case O.D.CREATE:return this.transition(pe.RESERVATION_CREATE);case O.D.UPGRADE:return this.transition(pe.RESERVATION_UPGRADE);case O.D.EXCHANGE:return this.transition(pe.RESERVATION_EXCHANGE)}}error(e){ce(e),this.transition(pe.ERROR)}}).prototype,"resvID",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=le(re.prototype,"nonce",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le(re.prototype,"onInit",[J],Object.getOwnPropertyDescriptor(re.prototype,"onInit"),re.prototype),le(re.prototype,"onEnter",[Q],Object.getOwnPropertyDescriptor(re.prototype,"onEnter"),re.prototype),le(re.prototype,"error",[ee],Object.getOwnPropertyDescriptor(re.prototype,"error"),re.prototype),te=re))||te);let ue=(0,y.ls)("features/session-reservation")(oe=class extends u().Component{render(){const{store:e}=this.props;return{[pe.RESERVATION_CREATE]:u().createElement(R,{onSuccess:e.handleNotifySuccess}),[pe.RESERVATION_UPGRADE]:u().createElement(ae,{resvID:e.resvID,onSuccess:e.handleNotifySuccess}),[pe.RESERVATION_EXCHANGE]:u().createElement(W,{resvID:e.resvID,nonce:e.nonce,onSuccess:e.handleNotifySuccess})}[e.state]||u().createElement(b.gb,null)}})||oe;var de=e=>u().createElement(ue,e),me=r(51351),he=r.n(me),ye=r(50137),ge=r.n(ye),be=r(32827),fe=r(20643),Ee=r.n(fe),ve=r(98934),Oe=r.n(ve),we=r(21490),Se=r(87860),De=r(48743),Ie=r(25817),Ce=r(59953),Te=r(26330),Pe=r(47552);const Ae=(0,Se.ZP)(Te.Z).withConfig({displayName:"SwitchAccount__SwitchLink",componentId:"sc-1bbv34l-0"})(["margin-top:",""],(({theme:e})=>e.spacing.m)),_e=(0,Se.ZP)(Pe.Z).withConfig({displayName:"SwitchAccount__SpacedAvatar",componentId:"sc-1bbv34l-1"})(["margin-right:",""],(({theme:e})=>e.spacing.xs));var Ne,Re=({color:e,onSwitch:t=(()=>{}),user:r={}})=>u().createElement(De.Z,{speed:"slow",order:"drop-in-bottom",passThrough:!0},u().createElement(Ae,{alignItems:"center"},u().createElement(_e,{name:r.name,src:r.avatar}),u().createElement(Ie.Z,{color:e,"data-component":"switch-account"},"You're signed in as ",u().createElement("strong",null,r.email),"."," ",u().createElement(Ce.Z,{element:"a",onClick:t,role:"link","data-component":"switch-account-link"},"Switch")))),ke=r(76069),ze=r(47714),je=r(68228),xe=r.n(je);let Le=(0,ke.Pi)(Ne=class extends u().Component{componentDidMount(){const{onRedirect:e}=this.props;e&&e()}render(){const{children:e,onRedirect:t}=this.props;return u().createElement(ze.wC.A,{"data-component":"popout-interstitial-craft"},u().createElement(ze.h4.SK,{disabled:!0}),u().createElement(Te.Z,{alignItems:"center",justifyContent:"center",flexDirection:"column"},u().createElement(De.Z,{speed:"slow",order:"drop-in-bottom",passThrough:!0},u().createElement(Me,null),u().createElement(Ie.Z,{element:"h1",order:"title",size:"smaller",align:"center"},"We're signing you into Craft"),u().createElement(Ie.Z,{order:"body",size:"larger",align:"center"},"If a system dialog prompts you, choose to allow opening CraftManager.",u().createElement("br",null),"If you don't see a dialog and are not automatically logged into Craft"," ",u().createElement(Ce.Z,{onClick:t,element:"a"},"click here"),"."),e)))}})||Ne;const Me=Se.ZP.div.withConfig({displayName:"Craft__CraftImage",componentId:"sc-13qu221-0"})(["width:346px;height:342px;margin-bottom:-30px;background-image:url(",")"],xe());var Fe=Le,Ze=r(81772),Ue=r(94002),Ve=r(79437),Ge=r(62522),qe=r.n(Ge);function We(){return(We=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Be({...e}){return u().createElement($e,We({color:"white",order:"title",size:"larger"},e),"Studio",u().createElement(He,null))}const $e=(0,Se.ZP)(Ie.Z).withConfig({displayName:"StudioBrand__StudioTitle",componentId:"qxzr6-0"})(["font-size:100px;svg{margin-bottom:-2px;}"]),He=Se.ZP.div.withConfig({displayName:"StudioBrand__StudioSquare",componentId:"qxzr6-1"})(["width:10px;height:10px;background-color:",";display:inline-block;"],(({theme:e})=>e.palette.brand.regular));var Ke;let Ye=(0,ke.Pi)(Ke=class extends u().Component{componentDidMount(){const{onRedirect:e}=this.props;e&&e()}render(){const{children:e,onRedirect:t}=this.props;return u().createElement(Xe,{"data-component":"popout-interstitial-studio"},u().createElement(ze.h4.SK,{color:"light",disabled:!0}),u().createElement(Te.Z,{alignItems:"center",justifyContent:"center",flexDirection:"column"},u().createElement(De.Z,{speed:"slow",order:"drop-in-bottom",passThrough:!0},u().createElement(Ze.Z,{bottom:"s"},u().createElement(Be,null)),u().createElement(Ie.Z,{element:"h1",color:"white",order:"title",size:"smaller",align:"center"},"You have successfully signed in to Studio"),u().createElement(Ie.Z,{color:"white",order:"body",size:"larger",align:"center"},"If a system dialog prompts you, choose to allow opening InVision Studio.",u().createElement("br",null),"If you don't see a dialog and are not logged into Studio, click the button below."),e,u().createElement(Ze.Z,{top:"l"},u().createElement(Je,{size:"larger",order:"tertiary",onClick:t,tabIndex:"0",role:"button"},u().createElement(Ve.Z,null),u().createElement(Ze.Z,{left:"xs"},"Open Studio"))))))}})||Ke;const Xe=(0,Se.ZP)(ze.wC.A).withConfig({displayName:"Studio__OnePanelLayout",componentId:"cdt7ie-0"})(["background-color:",";background-image:url(",");background-repeat:no-repeat;"],(({theme:e})=>e.palette.structure.black),qe()),Je=(0,Se.ZP)(Ue.Z).withConfig({displayName:"Studio__StudioButton",componentId:"cdt7ie-1"})(["color:"," !important;border:1px solid "," !important;&:hover{background:transparent;}"],(e=>e.theme.palette.text.white),(e=>e.theme.palette.text.white));var Qe,et,tt,rt,nt,it,ot,at,st,lt=Ye;function ct(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const pt={LOADING:Symbol("Popout Client: Loading"),CRAFT:Symbol("Popout Client: Craft"),STUDIO:Symbol("Popout Client: Studio"),REDIRECT:Symbol("Popout Client: Redirect"),UNKNOWN:Symbol("Popout: Unknown")},ut={"craft:":we.Z.CRAFT,"studio:":we.Z.STUDIO};Qe=(0,y._V)("features/sign-in/popout/interstitial",{initialState:pt.LOADING}),et=(0,g.RR)("features/context/client","features/context/request","features/context/user","navigator"),tt=d.aD.bound,rt=d.aD.bound,nt=d.aD.bound,Qe(it=et((at=ct((ot=class{constructor(e,t,r,n){var i,o,a,s;i=this,o="destination",s=this,(a=at)&&Object.defineProperty(i,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(s):void 0}),this.client=e,this.navigator=n,this.request=t,this.user=r}async onEnter({props:e}){this.destination=e.destination;switch((()=>{const e=Ee()(this.destination,"protocol");return ut[e]})()||(()=>Ee()(this.client,"type"))()){case we.Z.CRAFT:return this.transition(pt.CRAFT);case we.Z.STUDIO:return this.transition(pt.STUDIO);default:return this.transition(pt.UNKNOWN)}}handlePerformRedirect(){this.destination&&this.navigator.goTo(this.destination.toString())}handleSwitch(){const e=Oe()(Ee()(this.request,"queryobject"),"entry");this.navigator.goTo("sign-in",{query:e,subdomain:"login"})}}).prototype,"destination",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct(ot.prototype,"onEnter",[tt],Object.getOwnPropertyDescriptor(ot.prototype,"onEnter"),ot.prototype),ct(ot.prototype,"handlePerformRedirect",[rt],Object.getOwnPropertyDescriptor(ot.prototype,"handlePerformRedirect"),ot.prototype),ct(ot.prototype,"handleSwitch",[nt],Object.getOwnPropertyDescriptor(ot.prototype,"handleSwitch"),ot.prototype),it=ot))||it);var dt,mt,ht,yt,gt,bt,ft,Et,vt=(0,y.ls)("features/sign-in/popout/interstitial")(st=class extends u().Component{render(){const{store:e,destination:t}=this.props;return{[pt.CRAFT]:u().createElement(Fe,{onRedirect:e.handlePerformRedirect},u().createElement(Re,{onSwitch:e.handleSwitch,user:e.user})),[pt.STUDIO]:u().createElement(lt,{onRedirect:e.handlePerformRedirect},u().createElement(Re,{color:"white",onSwitch:e.handleSwitch,user:e.user})),[pt.UNKNOWN]:u().createElement(m.l_,{destination:t})}[e.state]||null}})||st;function Ot(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const wt=(0,v.kg)("popout:claims"),St={LOADING:Symbol("Popout claims: Loading"),SUCCESS:Symbol("Popout claims: Success"),ERROR:Symbol("Popout claims: Error")};dt=(0,y._V)("features/sign-in/popout/claims",{initialState:St.LOADING}),mt=(0,be.RR)("features/http"),ht=d.aD.bound,yt=d.aD.bound,dt(gt=mt((ft=Ot((bt=class{constructor(e){var t,r,n,i;t=this,r="claimID",i=this,(n=ft)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0}),this.http=e}async onEnter(){try{this.claimID=await this.generate(),this.transition(St.SUCCESS)}catch(e){wt("Unable to generate claims: %O",e),this.transition(St.ERROR)}}async generate(){const e=await this.http.post("/auth-api/session/claims",{}).then((e=>e.data));return wt("Retrieved a session claim successfully: %O",e),e}}).prototype,"claimID",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ot(bt.prototype,"onEnter",[ht],Object.getOwnPropertyDescriptor(bt.prototype,"onEnter"),bt.prototype),Ot(bt.prototype,"generate",[yt],Object.getOwnPropertyDescriptor(bt.prototype,"generate"),bt.prototype),gt=bt))||gt);var Dt,It,Ct,Tt,Pt,At,_t,Nt,Rt,kt=(0,y.ls)("features/sign-in/popout/claims")(Et=class extends u().Component{render(){const{store:e,onSuccess:t,onError:r}=this.props;return{[St.SUCCESS]:u().createElement(h.W,{action:()=>t(e.claimID)},u().createElement(b.gb,null)),[St.ERROR]:u().createElement(h.W,{action:r},u().createElement(b.gb,null))}[e.state]||u().createElement(b.gb,null)}})||Et;function zt(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const jt={CLAIMS:Symbol("Deep-Link: Claims"),LOADING:Symbol("Deep-Link: Loading"),REDIRECT:Symbol("Deep-Link: Redirect"),ERROR:Symbol("Deep-Link: Error")};Dt=(0,y._V)("features/sign-in/deep-link",{initialState:jt.LOADING}),It=(0,be.RR)("features/context/request"),Ct=d.aD.bound,Tt=d.aD.bound,Pt=d.aD.bound,Dt(At=It((Nt=zt((_t=class{constructor(e){var t,r,n,i;t=this,r="redirectUrl",i=this,(n=Nt)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0}),this.request=e}generateRedirectUrl(){const{location:e,redirectTo:t,queryobject:r}=this.request,n=t||e.href,i=new(ge())(n,!0);return i.set("query",{...he()(r,["action","entry"]),status:"success"}),i}async onEnter(){this.redirectUrl=this.generateRedirectUrl();switch(this.request.get("action")){case E.MD.POPOUT:case E.MD.POPOUT_COOKIES:return this.transition(jt.REDIRECT);case E.MD.POPOUT_CLAIMS:return this.transition(jt.CLAIMS)}}handleClaimsGenerated({claimID:e}){const{protocol:t,host:r}=this.request.location,n=r,i=`${t}//${r}`;this.redirectUrl.set("query",{claimID:e,claimHost:n,claimUrl:i,claimVersion:"7"}),this.transition(jt.REDIRECT)}handleClaimsError(){this.transition(jt.ERROR)}}).prototype,"redirectUrl",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zt(_t.prototype,"onEnter",[Ct],Object.getOwnPropertyDescriptor(_t.prototype,"onEnter"),_t.prototype),zt(_t.prototype,"handleClaimsGenerated",[Tt],Object.getOwnPropertyDescriptor(_t.prototype,"handleClaimsGenerated"),_t.prototype),zt(_t.prototype,"handleClaimsError",[Pt],Object.getOwnPropertyDescriptor(_t.prototype,"handleClaimsError"),_t.prototype),At=_t))||At);var xt,Lt=(0,y.ls)("features/sign-in/deep-link")(Rt=class extends u().Component{render(){const{store:e}=this.props;return{[jt.CLAIMS]:u().createElement(kt,{onSuccess:e.handleClaimsGenerated,onError:e.handleClaimsError}),[jt.REDIRECT]:u().createElement(vt,{destination:e.redirectUrl}),[jt.ERROR]:u().createElement(b.jj,null)}[e.state]||u().createElement(b.gb,null)}})||Rt,Mt=r(80733),Ft=r(41899),Zt=r(74591);var Ut,Vt,Gt,qt,Wt,Bt,$t,Ht,Kt=(0,ke.Pi)(xt=class extends u().Component{render(){const{onSubmit:e=(()=>{})}=this.props;return u().createElement(ze.wC.A,{"data-component":"marketing-prompt"},u().createElement(ze.h4.SK,{disabled:!0}),u().createElement(De.Z,{speed:"slow",order:"drop-in-bottom",passThrough:!0},u().createElement(b.X6,{heading:"Welcome to InVision",align:"center"}),u().createElement(Mt.l0,{"data-component":"marketing-prompt-form",submit:e},u().createElement(Zt.Z,{compact:"true",id:"signup_marketing_opt_out",name:"marketingOptOut",tabIndex:"1"}),u().createElement(Ze.Z,{bottom:"l"},u().createElement(Ft.k4,{tabIndex:"2"},"Continue")),u().createElement(b.Fe,{actionText:'clicking "Continue"'}))))}})||xt;function Yt(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Xt={LOADING:Symbol("Loading"),OPT_IN:Symbol("Opt-In"),PROMPT:Symbol("Prompt")};Ut=(0,y._V)("features/sign-in/success/marketing-prompt",{initialState:Xt.LOADING}),Vt=(0,g.RR)("features/context/geolocation","features/context/user","features/http","features/tracking/marketo"),Gt=d.aD.bound,qt=d.aD.bound,Wt=d.aD.bound,Ut(Bt=Vt((Yt(($t=class{constructor(e,t,r,n){this.geolocation=e,this.user=t,this.http=r,this.marketo=n}onInit({props:e}){this.notifyContinue=e.onContinue||(()=>{})}async onEnter({props:e}){return this.geolocation.underGDPR()?this.transition(Xt.PROMPT):this.transition(Xt.OPT_IN)}async handleSubmit({marketingOptOut:e=!0}){await this.http.patch("/auth-api/account/marketing-preferences",{data:{marketingOptOut:e}});const{email:t,name:r,analyticsID:n}=this.user;return this.marketo.submit({userId:n,email:t,name:r,marketingOptOut:e}),this.notifyContinue()}}).prototype,"onInit",[Gt],Object.getOwnPropertyDescriptor($t.prototype,"onInit"),$t.prototype),Yt($t.prototype,"onEnter",[qt],Object.getOwnPropertyDescriptor($t.prototype,"onEnter"),$t.prototype),Yt($t.prototype,"handleSubmit",[Wt],Object.getOwnPropertyDescriptor($t.prototype,"handleSubmit"),$t.prototype),Bt=$t))||Bt);var Jt=(0,y.ls)("features/sign-in/success/marketing-prompt")(Ht=class extends u().Component{render(){const{store:e}=this.props;return{[Xt.PROMPT]:u().createElement(Kt,{onSubmit:e.handleSubmit}),[Xt.OPT_IN]:u().createElement(h.W,{action:()=>e.handleSubmit({marketingOptOut:!1})},u().createElement(b.gb,null))}[e.state]||u().createElement(b.gb,null)}})||Ht,Qt=r(88104);const er="sign-in.team";var tr,rr,nr,ir,or,ar,sr={[er]:{success:{v1:({team:e,user:t,redirectUrl:r})=>({event:{name:er,version:"1.0.0"},jwt:t.authToken,emailAddress:t.email,vendorID:t.analyticsID,teamID:e.id,teamVersion:e.version,redirectURL:r})}}};tr=(0,Qt.oe)("features/sign-in/post-message"),rr=(0,g.RR)("features/context/client","features/context/response","features/context/team","features/context/user","features/http"),nr=d.aD.bound,tr(ir=rr((function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((or=class{constructor(e,t,r,n,i){this.client=e,this.response=t,this.team=r,this.user=n,this.http=i}async onEnter({props:e}){const{jwt:t}=await this.http.post("/auth-api/session/jwt").then((e=>e.data));this.user.usingAuthToken(t);const r=this.response.redirectUrl(),n=sr[er].success.v1({redirectUrl:r.toString(),team:this.team,user:this.user});await this.response.sendMessageSafe(n)}}).prototype,"onEnter",[nr],Object.getOwnPropertyDescriptor(or.prototype,"onEnter"),or.prototype),ir=or))||ir);var lr,cr=(0,Qt.ei)("features/sign-in/post-message")(ar=class extends u().Component{render(){return u().createElement(b.gb,null)}})||ar,pr=r(33134),ur=r.n(pr),dr=r(47323),mr=r.n(dr);let hr=(0,ke.Pi)(lr=class extends u().Component{componentDidMount(){const{onRedirect:e}=this.props;e&&e()}render(){const{children:e}=this.props;return u().createElement(ze.wC.A,{"data-component":"reservation-interstitial"},u().createElement(ze.h4.SK,{disabled:!0}),u().createElement(Te.Z,{alignItems:"center",justifyContent:"center",flexDirection:"column"},u().createElement(De.Z,{speed:"slow",order:"drop-in-bottom",passThrough:!0},u().createElement(Ze.Z,{bottom:"m"},u().createElement(mr(),null)),u().createElement(yr,null),u().createElement(Ie.Z,{element:"h1",order:"title",size:"smaller",align:"center"},"You're all set!"),u().createElement(Ie.Z,{order:"body",size:"larger",align:"center"},"You can close this tab and return to the plugin experience to start syncing prototypes with your InVision team."),e)))}})||lr;const yr=Se.ZP.div.withConfig({displayName:"Interstitial__ConnectImage",componentId:"sc-14debui-0"})(["width:540px;height:347px;margin-bottom:",";background-image:url(",");background-repeat:no-repeat;background-size:contain;"],(({theme:e})=>e.spacing.xs),ur());var gr,br,fr,Er,vr,Or,wr=hr;const Sr={LOADING:Symbol("Loading"),SUCCESS:Symbol("Success")};gr=(0,y._V)("features/sign-in/success/reservation",{initialState:Sr.LOADING}),br=(0,g.RR)("features/context/client","features/context/request"),fr=d.aD.bound,gr(Er=br((function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((vr=class{handleSuccess(){this.transition(Sr.SUCCESS)}}).prototype,"handleSuccess",[fr],Object.getOwnPropertyDescriptor(vr.prototype,"handleSuccess"),vr.prototype),Er=vr))||Er);var Dr,Ir,Cr,Tr,Pr,Ar,_r,Nr,Rr,kr,zr,jr,xr=(0,y.ls)("features/sign-in/success/reservation")(Or=class extends u().Component{render(){const{store:e}=this.props;return{[Sr.LOADING]:u().createElement(de,{action:O.D.UPGRADE,onSuccess:e.handleSuccess}),[Sr.SUCCESS]:u().createElement(wr,null)}[e.state]||u().createElement(b.gb,null)}})||Or;function Lr(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Mr={LOADING:Symbol("Loading"),MARKETING_PROMPT:Symbol("Marketing Prompt"),NOTIFY_DEEP_LINK:Symbol("Notify: Deep Link"),NOTIFY_RESERVATION:Symbol("Notify: Reservation"),NOTIFY_POST_MESSAGE:Symbol("Notify: Post-Message"),SUCCESS:Symbol("Success"),ONBOARD:Symbol("Onboard"),REDIRECT:Symbol("Redirect")};Dr=(0,y._V)("features/sign-in/success",{initialState:Mr.LOADING}),Ir=(0,g.RR)("features/analytics","features/context/client","features/context/request","features/context/response","features/context/user"),Cr=d.aD.bound,Tr=d.aD.bound,Pr=d.aD.bound,Ar=d.aD.bound,_r=d.aD.bound,Nr=d.aD.bound,Dr(Rr=Ir((zr=Lr((kr=class{constructor(e,t,r,n,i){var o,a,s,l;o=this,a="redirectUrl",l=this,(s=zr)&&Object.defineProperty(o,a,{enumerable:s.enumerable,configurable:s.configurable,writable:s.writable,value:s.initializer?s.initializer.call(l):void 0}),this.analytics=e,this.client=t,this.request=r,this.response=n,this.user=i}async onInit({props:e}){var t;this.onboard=(0,h.u)(null===(t=e.onboard)||void 0===t||t)}async onEnter(){return await this.ensureAnalytics(),await this.user.load(),this.user.marketingSettingsRequired?this.transition(Mr.MARKETING_PROMPT):this.handleContinue()}async handleContinue(){switch(this.determineNextStep()){case Mr.NOTIFY_RESERVATION:return this.transition(Mr.NOTIFY_RESERVATION);case Mr.NOTIFY_DEEP_LINK:return this.transition(Mr.NOTIFY_DEEP_LINK);case Mr.NOTIFY_POST_MESSAGE:return this.transition(Mr.NOTIFY_POST_MESSAGE);case Mr.ONBOARD:return this.transition(Mr.ONBOARD);default:return this.handleRedirect()}}determineNextStep(){switch(this.request.get("action")){case E.MD.POPOUT:case E.MD.POPOUT_CLAIMS:case E.MD.POPOUT_COOKIES:return Mr.NOTIFY_DEEP_LINK;case O.D.UPGRADE:return Mr.NOTIFY_RESERVATION}const{requiresPostMessage:e}=this.client;return e?Mr.NOTIFY_POST_MESSAGE:this.onboard()?Mr.ONBOARD:Mr.REDIRECT}async ensureAnalytics(){await this.analytics.flush()}async handleRedirect(){this.redirectUrl=this.response.redirectUrl(),this.transition(Mr.REDIRECT)}}).prototype,"redirectUrl",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lr(kr.prototype,"onInit",[Cr],Object.getOwnPropertyDescriptor(kr.prototype,"onInit"),kr.prototype),Lr(kr.prototype,"onEnter",[Tr],Object.getOwnPropertyDescriptor(kr.prototype,"onEnter"),kr.prototype),Lr(kr.prototype,"handleContinue",[Pr],Object.getOwnPropertyDescriptor(kr.prototype,"handleContinue"),kr.prototype),Lr(kr.prototype,"determineNextStep",[Ar],Object.getOwnPropertyDescriptor(kr.prototype,"determineNextStep"),kr.prototype),Lr(kr.prototype,"ensureAnalytics",[_r],Object.getOwnPropertyDescriptor(kr.prototype,"ensureAnalytics"),kr.prototype),Lr(kr.prototype,"handleRedirect",[Nr],Object.getOwnPropertyDescriptor(kr.prototype,"handleRedirect"),kr.prototype),Rr=kr))||Rr);var Fr=(0,y.ls)("features/sign-in/success")(jr=class extends u().Component{render(){const{store:e}=this.props;return{[Mr.MARKETING_PROMPT]:u().createElement(Jt,{onContinue:e.handleContinue}),[Mr.NOTIFY_DEEP_LINK]:u().createElement(Lt,null),[Mr.NOTIFY_POST_MESSAGE]:u().createElement(cr,null),[Mr.NOTIFY_RESERVATION]:u().createElement(xr,null),[Mr.ONBOARD]:u().createElement(f.Z,{onSkip:e.handleRedirect}),[Mr.REDIRECT]:u().createElement(m.l_,{destination:e.redirectUrl})}[e.state]||u().createElement(b.gb,null)}})||jr},91587:function(e,t,r){"use strict";var n,i,o=r(16624),a=r.n(o),s=r(59549),l=r(88104),c=r(5013);(0,l.oe)("features/sign-in/team/mfa-entry")(n=(0,s.RR)("navigator","features/context/request")(n=class{constructor(e,t){this.nav=e,this.request=t}})||n);let p=(0,l.ei)("features/sign-in/team/mfa-entry")(i=class extends a().Component{render(){const{renderForm:e}=this.props;return a().createElement(a().Fragment,null,a().createElement(c.FN.A,{"data-component":"2fa-toast"}),e())}})||i;t.Z=p},22074:function(e,t,r){"use strict";r.d(t,{$y:function(){return C},DL:function(){return T},ZP:function(){return j}});var n=r(16624),i=r.n(n),o=r(64267),a=r(25817),s=r(66711),l=r(81772),c=r(94002),p=r(77877),u=r(59953),d=r(26330),m=r(87860),h=r(59549),y=r(88104),g=r(5013);var b,f,E,v,O,w,S,D;function I(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const C=({domains:e,enabled:t})=>{const r=(e=>{const t=[],r=e.length;for(let n=0;n<r&&(t.push(e[n]),1!==r);n++)2===r&&0===n?t.push(" or "):(r>2&&n<=r-2&&t.push(", "),n===r-2&&t.push("or "));return t})(e.slice(0,5).map((e=>i().createElement(a.Z,{order:"subtitle",element:"span",key:e},"@",e))));return t?r:null},T=({domains:e,enabled:t})=>{let r=[];e.length>5&&(r=e.slice(5,e.length+1));const n=r.map((e=>`@${e}`)).join(", ");return i().createElement(z,null,i().createElement(s.Z,{trigger:i().createElement(k,{order:"body",size:"larger"},"(",i().createElement(R,{order:"body",size:"larger"},"view all"),")")},t?n:null))};b=(0,y.oe)("features/sign-in/team/password-entry"),f=(0,h.RR)("features/context/team","navigator","features/context/request"),E=o.aD.bound,v=o.aD.bound,O=o.aD.bound,b(w=f((I((S=class{constructor(e,t,r){this.team=e,this.nav=t,this.request=r}get hasApprovedDomains(){var e,t,r;return(null===(e=this.team)||void 0===e||null===(t=e.openEnrollment)||void 0===t||null===(r=t.domains)||void 0===r?void 0:r.length)>0}get approvedDomains(){var e,t,r;return null!==(e=null===(t=this.team)||void 0===t||null===(r=t.openEnrollment)||void 0===r?void 0:r.domains)&&void 0!==e?e:[]}get isApprovedDomainsEnabled(){var e,t;return!!(null===(e=this.team)||void 0===e||null===(t=e.openEnrollment)||void 0===t?void 0:t.enabled)}onInit({props:e}){this.notifyForgotPassword=e.onForgotPassword||(()=>{})}get showAltLink(){return this.team.useAltAuth}handleForgotPassword(){this.notifyForgotPassword()}joinTeam(){const e=this.request.get("redirectTo");let t="/auth/join-team/open-enrollment";e&&(t+=`?redirectTo=${e}`),this.nav.goTo(t)}}).prototype,"hasApprovedDomains",[o.Fl],Object.getOwnPropertyDescriptor(S.prototype,"hasApprovedDomains"),S.prototype),I(S.prototype,"approvedDomains",[o.Fl],Object.getOwnPropertyDescriptor(S.prototype,"approvedDomains"),S.prototype),I(S.prototype,"isApprovedDomainsEnabled",[o.Fl],Object.getOwnPropertyDescriptor(S.prototype,"isApprovedDomainsEnabled"),S.prototype),I(S.prototype,"onInit",[E],Object.getOwnPropertyDescriptor(S.prototype,"onInit"),S.prototype),I(S.prototype,"showAltLink",[o.Fl],Object.getOwnPropertyDescriptor(S.prototype,"showAltLink"),S.prototype),I(S.prototype,"handleForgotPassword",[v],Object.getOwnPropertyDescriptor(S.prototype,"handleForgotPassword"),S.prototype),I(S.prototype,"joinTeam",[O],Object.getOwnPropertyDescriptor(S.prototype,"joinTeam"),S.prototype),w=S))||w);let P=(0,y.ei)("features/sign-in/team/password-entry")(D=class extends i().Component{renderEnrollmentFooter(){var e;const{store:t}=this.props;return i().createElement(N,{alignItems:"center",flexDirection:"column"},i().createElement(a.Z,{order:"subtitle"},"Not yet a member?"),i().createElement(l.Z,{top:"xs"},i().createElement(a.Z,{order:"body",size:"larger",align:"center",element:"div"},"If you have an email address ending in ",i().createElement(C,{domains:t.approvedDomains,enabled:t.isApprovedDomainsEnabled}),", ",(null===(e=t.approvedDomains)||void 0===e?void 0:e.length)>5&&i().createElement(T,{domains:t.approvedDomains,enabled:t.isApprovedDomainsEnabled})," you can join this team.")),i().createElement(l.Z,{top:"l"},i().createElement(c.Z,{order:"tertiary",onClick:()=>t.joinTeam()},"Sign up")))}renderDefaultFooter(){return i().createElement(g.$_.VY,null,i().createElement(a.Z,{"data-component":"team-footer",order:"body"},"If you are not an existing member of this account, please contact your administrator for an invite."))}render(){const{store:e,renderForm:t,onChangeMethod:r}=this.props;return i().createElement(i().Fragment,null,i().createElement(g.Ir,{name:e.team.name,src:e.team.logo}),i().createElement(g.X6,{align:"center",heading:`Sign in to ${e.team.name}`}),t({passwordHelper:i().createElement(A,{type:"button",order:"tertiary",onClick:e.handleForgotPassword},"Forgot your password?")}),e.showAltLink&&i().createElement(p.Z,{horizontal:"center"},i().createElement(_,{"data-component":"alt-auth-link",order:"primary",tabIndex:"4",onClick:()=>r()},"or sign in with SSO")),e.hasApprovedDomains&&e.isApprovedDomainsEnabled?this.renderEnrollmentFooter():this.renderDefaultFooter())}})||D;const A=(0,m.ZP)(u.Z).withConfig({displayName:"PasswordEntry__HelperLink",componentId:"sc-1nkbsgq-0"})(["position:absolute;top:0;right:0;font-size:12px;"]),_=(0,m.ZP)(u.Z).withConfig({displayName:"PasswordEntry__AltLink",componentId:"sc-1nkbsgq-1"})(["font-size:14px;margin-top:",";"],(e=>e.theme.spacing.s)),N=(0,m.ZP)(d.Z).withConfig({displayName:"PasswordEntry__StyledFlex",componentId:"sc-1nkbsgq-2"})(["border-top:#d5d5d8 solid 1px;padding-top:",";margin-top:",";"],(({theme:e})=>e.spacing.l),(({theme:e})=>e.spacing.l)),R=(0,m.ZP)(a.Z).withConfig({displayName:"PasswordEntry__UnderlineText",componentId:"sc-1nkbsgq-3"})(["text-decoration:underline;display:inline-block;"]),k=(0,m.ZP)(a.Z).withConfig({displayName:"PasswordEntry__ViewAll",componentId:"sc-1nkbsgq-4"})(["cursor:default;"]),z=m.ZP.span.withConfig({displayName:"PasswordEntry__TooltipWrapper",componentId:"sc-1nkbsgq-5"})(["display:inline-block;"]);var j=P},50081:function(e,t,r){"use strict";var n,i,o=r(16624),a=r.n(o),s=r(59549),l=r(88104),c=r(5013),p=r(64870),u=r.n(p);(0,l.oe)("features/sign-in/team/password-update")(n=(0,s.RR)("features/context/team")(n=class{constructor(e){this.team=e}})||n);let d=(0,l.ei)("features/sign-in/team/password-update")(i=class extends a().Component{render(){const{store:e,renderForm:t,transaction:r}=this.props;return a().createElement(a().Fragment,null,a().createElement(c.Ir,{name:e.team.name,src:e.team.logo}),{[u().PASSWORD_COMPLEXITY]:a().createElement(c.X6,{align:"center",heading:"Set a stronger password",subheading:"Your team's security requirements have changed since you last logged in"}),[u().PASSWORD_EXPIRED]:a().createElement(c.X6,{align:"center",heading:"Create a new password",subheading:"Your current password has expired"})}[r.errorCode],t())}})||i;t.Z=d},12860:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var n,i,o=r(16624),a=r.n(o),s=r(73683),l=r(59549),c=r(28511),p=r(5260),u=r(32837),d=r(50137),m=r.n(d);const h=(0,u.kg)("features:sign-out"),y=/\.((invisionapp|invisionbeta)\.com|invision\.works)$/;(0,p._V)("features/sign-out")(n=(0,u.yN)("features:sign-out")(n=(0,l.RR)("features/analytics","features/context/client","features/context/config","features/http","features/context/request","navigator")(n=(0,c.UO)({flow:"GlobalSignOut"})(n=class{constructor(e,t,r,n,i,o){this.analytics=e,this.client=t,this.config=r,this.http=n,this.request=i,this.navigator=o}get subdomain(){const e=document.referrer||this.request.referrer||"",t=new(m())(e,!0);return y.test(t.host)?t.host.split(".")[0]:""}async onEnter(){await this.signOut()}onInit(){this.redirect=this.request.get("redirectTo")}async signOut(){var e;const t=this.client.sessionType;this.analytics.track(c.zW.SIGN_OUT,c.p$.SUBMITTED);const r=await this.http.delete("/login-api/api/v2/logout",{data:{deviceID:t,subdomain:this.subdomain},headers:{"Content-Type":"application/json"},retry:!0}).catch((e=>{e.message=`v7 sign out failed: ${e.message}`,h("v7 sign out failed: %O",e)}));return await this.v6SignOut(),(null==r||null===(e=r.data)||void 0===e?void 0:e.logoutURL)?this.navigator.goTo(r.data.logoutURL,{unsafe:!0}):this.redirect?this.navigator.goTo(this.redirect):void this.navigator.goTo("sign-in")}async v6SignOut(){if(this.config.get("V6_SERVICES_ENABLED")&&!this.client.isEmbedded){const e=this.config.get("CFPROJECTS_URI")||"https://projects.invisionapp.com";await this.http.post(`${e}/api/account/logout`,{headers:{"X-XSRF-TOKEN":this.request.getCookie("XSRF-TOKEN")},maxRedirects:0,retry:!0,withCredentials:!0}).catch((e=>{e.message=`v6 sign out failed: ${e.message}`,h("v6 sign out failed: %O",e)}))}}})||n)||n)||n);var g=(0,p.ls)("features/sign-out")(i=class extends a().Component{render(){return a().createElement(s.Z,null)}})||i},79774:function(e,t,r){"use strict";r.d(t,{Z:function(){return Z}});var n=r(16624),i=r.n(n),o=r(64267),a=r(87860),s=r(48743),l=r(26330),c=r(21763),p=r.n(c),u=r(56639),d=r.n(u),m=r(59549),h=r(5260),y=r(90660),g=r(5013),b=r(47175),f=r(25817),E=r(15082),v=r(96474);class O extends i().PureComponent{render(){const{title:e,description:t,children:r,className:n,onClick:o}=this.props;return i().createElement(w,{align:"left",className:n,onClick:o},i().createElement(b.Z,{ratio:[2,1]},i().createElement(S,null,i().createElement(D,{order:"subtitle",size:"larger",color:"text-darker"},e),i().createElement(f.Z,{order:"subtitle",size:"smaller",color:"text-lightest"},t)),i().createElement(I,null,r)))}}const w=(0,a.ZP)(E.Z).withConfig({displayName:"CreateTeamCard__TypeCard",componentId:"sc-1w8es2g-0"})(["width:100%;margin-bottom:",";"],(({theme:e})=>e.spacing.s)),S=(0,a.ZP)(v.Z).withConfig({displayName:"CreateTeamCard__CardBody",componentId:"sc-1w8es2g-1"})(["display:flex;flex-direction:column;justify-content:center;"]),D=(0,a.ZP)(f.Z).withConfig({displayName:"CreateTeamCard__CardHeading",componentId:"sc-1w8es2g-2"})(["margin-bottom:",";"],(({theme:e})=>e.spacing.s)),I=(0,a.ZP)(v.Z).withConfig({displayName:"CreateTeamCard__CardMedia",componentId:"sc-1w8es2g-3"})(["display:none;@media (min-width:","px){display:flex;flex-direction:column;justify-content:center;}"],(({theme:e})=>e.breakpoints.s));var C,T,P,A,_,N,R,k,z=O;function j(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const x={CHOOSE:Symbol("Create team: Choose type"),LOADING:Symbol("Create team: Loading")},L=e=>e.replace(/\W/g,"").toLowerCase();C=(0,h._V)("features/sign-up/team-type",{initialState:x.LOADING}),T=(0,m.RR)("features/context/user"),P=o.aD.bound,A=o.aD.bound,_=o.aD.bound,C(N=T((j((R=class{constructor(e){this.user=e}onEnter({props:e}){if(e.autoGenerate)return this.handleFlySolo();this.transition(x.CHOOSE)}onInit({props:e}){this.handleNotifySolo=(t=>e.onSolo(t))||(()=>{}),this.handleNotifyTeam=e.onTeam||(()=>{})}async handleFlySolo(){await this.user.load();const e={name:(n=this.user.name,/s$/i.test(n)?`${n}'`:`${n}'s`)+" Team",subdomain:`${L(this.user.name)}${t=1,r=999999,Math.floor(Math.random()*(r-(t+1)))+t}`};var t,r,n;this.handleNotifySolo(e)}}).prototype,"onEnter",[P],Object.getOwnPropertyDescriptor(R.prototype,"onEnter"),R.prototype),j(R.prototype,"onInit",[A],Object.getOwnPropertyDescriptor(R.prototype,"onInit"),R.prototype),j(R.prototype,"handleFlySolo",[_],Object.getOwnPropertyDescriptor(R.prototype,"handleFlySolo"),R.prototype),N=R))||N);let M=(0,h.ls)("features/sign-up/team-type")(k=class extends i().Component{render(){const{store:e}=this.props,t={[x.CHOOSE]:i().createElement(s.Z,{speed:"medium",order:"drop-in-bottom"},i().createElement(g.X6,{heading:"How do you want to work today?",subheading:"This is just to get you started off, you have access to both."}),i().createElement(F,{flexDirection:"column",alignItems:"center",justifyContent:"center"},i().createElement(z,{title:"With a team",description:"InVision makes it easy to collaborate from the start, pushing your ideas to the next level",onClick:e.handleNotifyTeam},i().createElement(d(),null)),i().createElement(z,{title:"Solo",description:"Dive straight into a document now - you can add teammates anytime",onClick:e.handleFlySolo},i().createElement(p(),null))))}[e.state]||i().createElement(g.gb,null);return i().createElement(y.ur,{stores:[e.user]},t)}})||k;const F=(0,a.ZP)(l.Z).withConfig({displayName:"ChooseType__Selector",componentId:"n1dacs-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;@media (min-width:","px){align-items:center;flex-direction:column;}"],(({theme:e})=>e.breakpoints.s));var Z=M},98471:function(e,t,r){"use strict";r.d(t,{Z:function(){return ie}});var n,i,o,a,s,l,c,p,u,d=r(64267),m=r(59549),h=r(81281),y=r(28511),g=r(5260),b=r(8038),f=r(5013),E=r(32837),v=r(88821),O=r(59407),w=r(82875),S=r(33626),D=r.n(S),I=r(57090),C=r.n(I),T=r(16624),P=r.n(T),A=r(66313),_=r(59953),N=r(25817),R=r(81772),k=r(88104),z=r(43471),j=r(44527);function x(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n=(0,k.oe)("features/sign-up/user-info"),i=(0,m.RR)("features/context/geolocation","features/context/token","features/analytics","features/toggles"),o=d.aD.bound,a=d.aD.bound,s=d.aD.bound,n(l=i((x((c=class{constructor(e,t,r,n){var i,o,a,s;i=this,o="showFreehandFocusedSignup",s=this,(a=p)&&Object.defineProperty(i,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(s):void 0}),this.geolocation=e,this.tokenApi=t,this.analytics=r,this.toggles=n}get underGDPR(){return this.geolocation.underGDPR()}get isFreehandPlan(){return this.tokenApi.planKey===h._B.FREEHAND_FREE}growthAnalyticsSync(){if("fh-lp-cta"===(this.tokenApi.analyticsProps.invSource||"").toLowerCase()){const e=!this.tokenApi.omitted.includes(w.ys.TEAM_CREATION);this.analytics.trackLegacy("Signup.Experiment.Viewed",{experimentId:"growth-65-revive-invites-at-signup",variantId:e?"team-invite":"control"})}}async onInit({props:{flags:e}}){this.flags=e,this.growthAnalyticsSync(),await(0,d.gx)((()=>null!==e.roleEntry));const t=e.roleEntry,r=h.vU.FREE_HAND_ROLE_COLLECTION;t!==r.DEFAULT&&this.analytics.trackLegacy("Signup.Experiment.Viewed",{experimentId:r.ID,variantId:t}),this.showFreehandFocusedSignup=await this.toggles.fetch(h.vU.CLOUD_SIGNUP_TOAST)}async submit(e){const{email:t,name:r,role:n,password:i,marketingOptOut:o}=e;return{email:t,role:n,name:r,password:i,marketingOptOut:o}}}).prototype,"underGDPR",[d.Fl],Object.getOwnPropertyDescriptor(c.prototype,"underGDPR"),c.prototype),x(c.prototype,"isFreehandPlan",[d.Fl],Object.getOwnPropertyDescriptor(c.prototype,"isFreehandPlan"),c.prototype),p=x(c.prototype,"showFreehandFocusedSignup",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x(c.prototype,"growthAnalyticsSync",[o],Object.getOwnPropertyDescriptor(c.prototype,"growthAnalyticsSync"),c.prototype),x(c.prototype,"onInit",[a],Object.getOwnPropertyDescriptor(c.prototype,"onInit"),c.prototype),x(c.prototype,"submit",[s],Object.getOwnPropertyDescriptor(c.prototype,"submit"),c.prototype),l=c))||l);var L,M,F,Z,U,V,G,q,W,B,$,H,K,Y,X,J=(0,k.ei)("features/sign-up/user-info")(u=class extends P().Component{privacyPolicy(){return P().createElement(_.Z,{element:"a",href:"https://www.invisionapp.com/privacy",order:"secondary",target:"_blank",rel:"noreferrer"},"Privacy Policy")}termsOfService(){return P().createElement(_.Z,{element:"a",href:"https://www.invisionapp.com/terms",order:"secondary",target:"_blank",rel:"noreferrer"},"Terms of Service")}render(){const{store:e,email:t,onSignIn:r,onSuccess:n=(()=>{})}=this.props,{isFreehandPlan:i,showFreehandFocusedSignup:o}=e;let a=this.termsOfService();return e.underGDPR||(a=P().createElement(P().Fragment,null,a," and ",this.privacyPolicy())),P().createElement(P().Fragment,null,P().createElement(f.X6,{heading:i&&o?"Get started with Freehand - absolutely free":"Get started absolutely free",subheading:P().createElement(N.Z,null,"Already have an InVision account?"," ",P().createElement(_.Z,{element:"a",order:"secondary",hasUnderline:!0,onClick:r},"Sign in"))}),P().createElement(j.l0,{"data-component":"team-create-team-info",submit:t=>e.submit(t).then(n)},P().createElement(j.GT,{name:"email",label:"Work email address",placeholder:"Enter your work email and we will search for teams you can join",autoComplete:"username",defaultValue:t,disabled:!!t}),P().createElement(j.An,{name:"name",label:"Your name",autoComplete:"name"}),e.flags.roleEntry===w.ws.SIGN_UP?P().createElement(A.J6,{name:"role",label:"Your role",placeholder:"Select your role"}):null,P().createElement(j.ro,{name:"password",label:"Password",policy:z.GC.default(),autoComplete:"new-password"}),P().createElement(f.Jr,{visible:e.underGDPR},P().createElement(R.Z,{bottom:"m"},P().createElement(N.Z,{order:"body",size:"smallest"},"Thanks for signing up to InVision! Based on your sign up, we would love to keep you posted with product news and tips for getting the most of InVision. You can opt out at any time. See our ",P().createElement("strong",null,this.privacyPolicy())," for more information."),P().createElement(j.XZ,{name:"marketingOptOut",unstyled:!0},"No thanks, please do not send me marketing emails."))),P().createElement(j.k4,null,"Sign up")),P().createElement(R.Z,{top:"m"},P().createElement(N.Z,{align:"center",color:"text-lighter",order:"body",className:this.props.className},"By signing up, I agree to InVision's ",a,".")))}})||u,Q=r(69869);function ee(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function te(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const re=(0,E.kg)("sign-up"),ne={BLOCKED:Symbol("Create user: Blocked"),DATA_ENTRY:Symbol("Create user: Data Entry"),SIGN_IN:Symbol("Create user: Sign-in"),SUCCESS:Symbol("Create user: Success"),VERIFY_EMAIL:Symbol("Create user: Verify email")};L=(0,g._V)("features/sign-up/create-user",{initialState:ne.DATA_ENTRY}),M=(0,m.RR)("features/analytics","features/http","features/context/request","features/context/token","features/toggles","features/tracking","features/tracking/marketo"),F=d.aD.bound,Z=d.aD.bound,U=d.aD.bound,V=d.aD.bound,G=d.aD.bound,q=d.aD.bound,W=d.aD.bound,L(B=M((H=te(($=class{constructor(e,t,r,n,i,o,a){ee(this,"user",H,this),ee(this,"token",K,this),ee(this,"eaToken",Y,this),this.analytics=e,this.http=t,this.request=r,this.tokenApi=n,this.toggles=i,this.tracking=o,this.marketo=a}onInit({props:e}){this.flags=e.flags,this.notifySignin=e.onSignin,this.token=this.tokenApi.token,this.eaToken=this.request.get("eaToken");const t=this.token||this.eaToken;if(t){const e=C().decode(t);this.user={email:e.email||e.email_address||""}}}onEnter(){var e,t;this.analytics.track(y.zW.CREATE_ACCOUNT,y.p$.VIEWED,this.tokenApi.analyticsProps),this.analytics.trackLegacy("Signup.Form.Viewed"),this.tracking.load({thirdParty:null===(e=this.tracking)||void 0===e||null===(t=e.thirdParties)||void 0===t?void 0:t.BIZIBLE})}get planKey(){let e="free";const t=this.token||this.eaToken;if(t){e=C().decode(t).plan_key}return e}async handleSignIn(){return D()(this.notifySignin)?this.notifySignin():this.transition(ne.SIGN_IN)}async handleUserEntered(e){this.user=e;const t=(()=>!!this.token&&Object.values(w.uN).includes(this.tokenApi.type))()||await(async()=>{await this.toggles.useEmail(this.user.email);const e=await this.toggles.fetch(h.vU.V7_SIGN_UP);return re("%s whitelisted: %O",this.user.email,e),e})()||await(async()=>{try{return await this.http.post("/auth-api/account/validate-ea-signup",{data:{eaToken:this.eaToken,email:this.user.email}}),!0}catch(e){return!1}})();if(await this.analytics.identify({email:this.user.email,date:Date.now()},{integrations:{Marketo:!1,"Marketo V2":!1}}),t){const e=(0,A._t)({variantId:this.flags.roleEntry,role:this.user.role});return this.analytics.trackLegacy("Signup.Form.Submitted",e),this.transition(ne.VERIFY_EMAIL)}return this.analytics.trackLegacy("Signup.Form.Failed",{errorCode:h.SM.SIGN_UP_BLOCKED}),this.transition(ne.BLOCKED)}trackSignupError(e){var t,r,n;const i=(null==e||null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.errorCode)||h.SM.SERVER_ERROR,o={401:"unauthorized",429:"tooManyRequests"}[(null==e||null===(n=e.response)||void 0===n?void 0:n.status)||500]||"serverError";this.analytics.track(y.zW.CREATE_ACCOUNT,y.p$.FAILED,{errorCode:i,reason:o}),this.analytics.trackLegacy("Signup.Failed",{errorCode:i,failureReason:o}),re("Error during sign-up: %O",e)}async handleSendEmail(){this.analytics.trackLegacy("Signup.EmailVerification.Viewed");try{await this.http.post("/auth-api/account/request-verify",{data:{email:this.user.email,name:this.user.name,overwrite:!0},errorKey:"global",errorMap:{401:()=>({data:{errorCode:h.SM.UNAUTHORIZED},config:{[O.ew]:!0}}),403:()=>({data:{errorCode:h.SM.FORBIDDEN},config:{[O.ew]:!0}}),429:()=>({data:{errorCode:h.SM.TOO_MANY_REQUESTS}})}})}catch(e){throw this.trackSignupError(e),e}}async handleVerifyToken({value:e}){try{const{email:t,name:r,password:n,role:i,marketingOptOut:o=!1}=this.user,a=await this.http.post("/auth-api/account/signup",{data:{role:i,isOtherRole:(0,Q.p)(i),email:t,name:r,password:n,eaToken:this.eaToken,code:e,marketingOptOut:o},errorKey:"global",errorMap:{400:()=>({config:{[O.ew]:!0}}),401:()=>({data:{errorCode:h.SM.FORBIDDEN},config:{[O.ew]:!0}})},timeout:3e3}).then((e=>e.data));return this.marketo.submit({userId:a.vendorID,email:t,name:r,marketingOptOut:o,planKey:this.planKey}),this.tracking.loadRollworks(),await this.analytics.identify(a.vendorID||a.id,{email:t,name:r,opt_out:o,date:Date.now(),...(0,A._t)({variantId:this.flags.roleEntry,role:this.user.role})},{integrations:{Marketo:!1,"Marketo V2":!1}}),this.analytics.trackLegacy("Signup.EmailVerification.Succeeded"),this.analytics.trackLegacy("Signup.User.Created",{ea:!!this.eaToken,plan:this.planKey}),a.signupToken}catch(e){var t,r;const n=(null==e||null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.errorCode)||h.SM.SERVER_ERROR;throw this.analytics.trackLegacy("Signup.EmailVerification.Failed",{errorCode:n}),this.trackSignupError(e),e}}}).prototype,"user",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=te($.prototype,"token",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=te($.prototype,"eaToken",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te($.prototype,"onInit",[F],Object.getOwnPropertyDescriptor($.prototype,"onInit"),$.prototype),te($.prototype,"onEnter",[Z],Object.getOwnPropertyDescriptor($.prototype,"onEnter"),$.prototype),te($.prototype,"handleSignIn",[U],Object.getOwnPropertyDescriptor($.prototype,"handleSignIn"),$.prototype),te($.prototype,"handleUserEntered",[V],Object.getOwnPropertyDescriptor($.prototype,"handleUserEntered"),$.prototype),te($.prototype,"trackSignupError",[G],Object.getOwnPropertyDescriptor($.prototype,"trackSignupError"),$.prototype),te($.prototype,"handleSendEmail",[q],Object.getOwnPropertyDescriptor($.prototype,"handleSendEmail"),$.prototype),te($.prototype,"handleVerifyToken",[W],Object.getOwnPropertyDescriptor($.prototype,"handleVerifyToken"),$.prototype),B=$))||B);var ie=(0,g.ls)("features/sign-up/create-user")(X=class extends P().Component{render(){var e,t;const{store:r,onSuccess:n}=this.props;return{[ne.BLOCKED]:P().createElement(f.TX,null),[ne.DATA_ENTRY]:P().createElement(J,{email:null===(e=r.user)||void 0===e?void 0:e.email,onSignIn:r.handleSignIn,onSuccess:r.handleUserEntered,flags:r.flags}),[ne.SIGN_IN]:P().createElement(v.l_,{destination:"sign-in"}),[ne.VERIFY_EMAIL]:P().createElement(b.A,{email:null===(t=r.user)||void 0===t?void 0:t.email,onSend:r.handleSendEmail,onVerify:r.handleVerifyToken,onSuccess:e=>n({user:r.user,tokens:{approvedDomains:e.token}})})}[r.state]||P().createElement(f.gb,null)}})||X},87972:function(e,t,r){"use strict";var n,i,o,a,s,l,c,p,u,d,m,h,y,g,b,f=r(16624),E=r.n(f),v=r(50137),O=r.n(v),w=r(51351),S=r.n(w),D=r(64267),I=r(48743),C=r(25817),T=r(81772),P=r(88821),A=r(59549),_=r(32837),N=r(5260),R=r(28511),k=r(59407),z=r(5013),j=r(47714),x=r(81281);function L(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function M(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const F=(0,_.kg)("sign-up"),Z={LOADING:Symbol("Domain control: Loading"),LOADED:Symbol("Domain control: Loaded"),REDIRECT:Symbol("Domain control: Redirect")};n=(0,N._V)("features/sign-up/domain-control",{initialState:Z.LOADING}),i=(0,A.RR)("features/context/request","features/analytics","features/http","features/toggles"),o=(0,R.UO)({flow:"DomainControl"}),a=D.aD.bound,s=D.aD.bound,l=D.aD.bound,c=D.aD.bound,p=D.aD.bound,u=D.aD.bound,n(d=i(d=o((h=M((m=class{constructor(e,t,r,n){L(this,"teams",h,this),L(this,"redirectUrl",y,this),L(this,"tokens",g,this),this.request=e,this.analytics=t,this.http=r,this.toggles=n}async onEnter({props:e}){const{onSkip:t}=e,r=await this.fetchApprovedTeams();if(!r||r.length<=0)return t();const n=await this.fetchTokens();this.analytics.track(R.zW.TEAM_SELECTOR,R.p$.VIEWED,{teamCount:r.length,v6TeamCount:r.filter((e=>"v6"===e.version)).length,v7TeamCount:r.filter((e=>"v7"===e.version)).length}),(0,D.z)((()=>{this.teams=r,this.tokens=n,this.transition(Z.LOADED)}))}redirect(e){this.redirectUrl=e,this.transition(Z.REDIRECT)}buildOnboardingQuery(){const{redirectTo:e="/",queryobject:t}=this.request,r=new(O())(decodeURIComponent(e),{},!0),n=new(O())("/onboarding",{},!0);return n.set("query",{redirectTo:r.toString()}),{...S()(t,x.az.ALLOWED),redirectTo:n.toString()}}teamSelected(e){var t;const r=new(O());let n,i;switch(r.set("host",e.host),e.version){case"v6":r.set("pathname","/domain-control/request-access"),r.set("query",{token:null===(t=this.tokens)||void 0===t?void 0:t.v6Token});break;case"v7":default:{var o,a,s;n=(null===(o=e.teamLogin)||void 0===o?void 0:o.loginType)===x.$u.SAML,i=(null===(a=e.teamLogin)||void 0===a||null===(s=a.samlSettings)||void 0===s?void 0:s.disableJIT)||!1;const t=this.buildOnboardingQuery();n&&!i?(r.set("pathname","/auth/sign-in"),r.set("query",t)):e.token?(r.set("pathname","/auth/join-team/open-enrollment"),r.set("query",{...t,token:e.token})):r.set("pathname","/auth/request-access")}}this.analytics.track(R.zW.TEAM_SELECTOR,R.p$.SELECTED,{teamDomain:e.subdomain,teamVersion:e.version,ssoEnabled:n,approvedDomain:e.signupModeID===x.RL.OPEN_ENROLLMENT}),this.redirect(r)}async fetchApprovedTeams(){try{return await this.http.get("/auth-api/domain-control/teams").then((e=>{var t,r;return null!==(t=null===(r=e.data)||void 0===r?void 0:r.teams)&&void 0!==t?t:[]}))}catch(e){return F("Unable to load approved teams: %O",e),[]}}async fetchTokens(){try{return await this.http.get("/auth-api/request-access/token").then((e=>e.data))}catch(e){F("Unable to generate request access tokens: %O",e)}}async switchEmail(){this.analytics.track(R.zW.SWITCH_EMAIL,R.p$.SELECTED)}}).prototype,"teams",[D.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=M(m.prototype,"redirectUrl",[D.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=M(m.prototype,"tokens",[D.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M(m.prototype,"onEnter",[a],Object.getOwnPropertyDescriptor(m.prototype,"onEnter"),m.prototype),M(m.prototype,"redirect",[s],Object.getOwnPropertyDescriptor(m.prototype,"redirect"),m.prototype),M(m.prototype,"teamSelected",[l],Object.getOwnPropertyDescriptor(m.prototype,"teamSelected"),m.prototype),M(m.prototype,"fetchApprovedTeams",[c],Object.getOwnPropertyDescriptor(m.prototype,"fetchApprovedTeams"),m.prototype),M(m.prototype,"fetchTokens",[p],Object.getOwnPropertyDescriptor(m.prototype,"fetchTokens"),m.prototype),M(m.prototype,"switchEmail",[u],Object.getOwnPropertyDescriptor(m.prototype,"switchEmail"),m.prototype),d=m))||d)||d);let U=(0,N.ls)("features/sign-up/domain-control")(b=class extends E().Component{render(){const{onSwitchEmail:e,store:t}=this.props;return{[Z.LOADED]:E().createElement(E().Fragment,null,E().createElement(j.h4.aU,{onClick:()=>t.switchEmail().then(e)},"Switch email"),E().createElement(I.Z,{order:"drop-in-bottom",speed:"slow"},E().createElement(z.X6,{heading:"Join one of your organization's teams",subheading:E().createElement(C.Z,{order:"body",size:"larger"},"Your organization has created InVision teams that you can join,"," ","if you would like to create a new team please switch to a personal email.")}),E().createElement(T.Z,{vertical:"s"},E().createElement(k.HK,{requestKey:"global"}),E().createElement(z.aV.A,{subtitle:"Your organization's teams",items:t.teams,renderItem:(e,r)=>E().createElement(z.aV.v,{key:`team-card-${r}`,team:e,action:e.token?"Join":"Select",onClick:()=>t.teamSelected(e)})})))),[Z.REDIRECT]:E().createElement(P.l_,{destination:t.redirectUrl})}[t.state]||E().createElement(z.gb,null)}})||b;t.Z=U},82875:function(e,t,r){"use strict";r.d(t,{ys:function(){return n},uN:function(){return i},ws:function(){return o}});const n={APPROVED_DOMAINS:"APPROVED_DOMAINS",ONBOARDING:"ONBOARDING",TEAM_CREATION:"TEAM_CREATION"},i={TEAM_RESERVATION:"TEAM_RESERVATION"},o={DEFAULT:0,SIGN_UP:1,POST_SIGN_UP:2}},41274:function(e,t,r){"use strict";r.d(t,{A:function(){return Ve}});var n,i,o,a,s,l,c,p,u,d=r(64267),m=r(48743),h=r(7419),y=r(90660),g=r(59549),b=r(5260),f=r(5013),E=r(81281),v=r(88821),O=r(82875),w=r(28511),S=r(48031),D=r(6895),I=r(16624),C=r.n(I),T=r(63970),P=r(87362),A=r(79774);function _(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function N(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const R={CHOOSE:Symbol("Create team: Choose type"),LOADING:Symbol("Create team: Loading"),TEAM_CREATE:Symbol("Create team: Create")};n=(0,b._V)("features/sign-up/create-team",{initialState:R.CHOOSE}),i=(0,g.RR)("features/context/user"),o=d.aD.bound,a=d.aD.bound,n(s=i((c=N((l=class{constructor(e){_(this,"team",c,this),_(this,"creationType",p,this),this.user=e}handleManual(){this.creationType=P.J.USER_DEFINED,this.transition(R.TEAM_CREATE)}async handleFlySolo(e){this.creationType=P.J.SOLO,this.team=e,this.transition(R.TEAM_CREATE)}}).prototype,"team",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=N(l.prototype,"creationType",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N(l.prototype,"handleManual",[o],Object.getOwnPropertyDescriptor(l.prototype,"handleManual"),l.prototype),N(l.prototype,"handleFlySolo",[a],Object.getOwnPropertyDescriptor(l.prototype,"handleFlySolo"),l.prototype),s=l))||s);var k,z,j,x,L,M,F,Z,U,V,G,q=(0,b.ls)("features/sign-up/create-team")(u=class extends C().Component{render(){const{autoGenerate:e,store:t,tokens:r,onSuccess:n,onTransition:i=(()=>{})}=this.props,o={[R.CHOOSE]:C().createElement(A.Z,{autoGenerate:e,onSolo:t.handleFlySolo,onTeam:t.handleManual}),[R.TEAM_CREATE]:C().createElement(T.Z,{tokens:r,team:t.team,invite:t.creationType!==P.J.SOLO,onSuccess:n,onTransition:i})}[t.state]||C().createElement(f.gb,null);return C().createElement(y.ur,{stores:[t.user]},o)}})||u,W=r(98471),B=r(87972),$=r(51351),H=r.n($),K=r(50137),Y=r.n(K),X=r(25817),J=r(81772),Q=r(57819),ee=r(32837),te=r(59407),re=r(47714);function ne(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ie(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const oe=(0,ee.kg)("sign-up"),ae={LOADING:Symbol("Open enrollment: Loading"),LOADED:Symbol("Open enrollment: Loaded"),REDIRECT:Symbol("Open enrollment: Redirect")};k=(0,b._V)("features/sign-up/open-enrollment",{initialState:ae.LOADING}),z=(0,g.RR)("features/analytics","features/http","features/toggles","features/context/request"),j=d.aD.bound,x=d.aD.bound,L=d.aD.bound,M=d.aD.bound,k(F=z((U=ie((Z=class{constructor(e,t,r,n){ne(this,"teams",U,this),ne(this,"redirectUrl",V,this),this.analytics=e,this.http=t,this.toggles=r,this.request=n}async onEnter({props:e}){const{token:t,onSkip:r}=e,n=await this.fetchJoinableTeams(t);if(!n||n.length<=0)return r();(0,d.z)((()=>{this.teams=n,this.transition(ae.LOADED)}))}redirect(e){this.redirectUrl=e,this.transition(ae.REDIRECT)}async fetchJoinableTeams(e){try{const t=await this.http.get("/auth-api/account/joinables",{params:{token:e}}).then((e=>{var t,r;return null!==(t=null===(r=e.data)||void 0===r?void 0:r.joinables)&&void 0!==t?t:[]})),r=t.length;return this.analytics.track(w.zW.TEAM_SELECTOR,w.p$.VIEWED,{teamCount:r}),this.analytics.trackLegacy("Signin.TeamSelector.Viewed",{teamCount:r}),t}catch(e){var t;oe("Unable to load joinable teams: %O",e);const r=(null==e||null===(t=e.response)||void 0===t?void 0:t.errorCode)||"Unknown";return this.analytics.track(w.zW.TEAM_SELECTOR,w.p$.VIEWED,{errorCode:r}),this.analytics.trackLegacy("Signin.TeamSelector.Viewed",{errorCode:r}),[]}}async handleTeamSelected(e){this.analytics.track(w.zW.TEAM_SELECTOR,w.p$.SELECTED,{teamDomain:e.domain}),this.analytics.trackLegacy("Signup.SelectATeam.Joinable.Selected",{teamDomain:e.domain});const{redirectTo:t="/",queryobject:r}=this.request,n=new(Y())(decodeURIComponent(t),{},!0),i=new(Y())("/onboarding",{},!0);i.set("query",{redirectTo:n.toString()});const o=new(Y())("/auth/join-team/open-enrollment",!0);o.set("host",e.host||e.domain),o.set("query",{...H()(r,E.az.ALLOWED),redirectTo:i.toString(),token:e.token}),this.redirect(o)}}).prototype,"teams",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=ie(Z.prototype,"redirectUrl",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie(Z.prototype,"onEnter",[j],Object.getOwnPropertyDescriptor(Z.prototype,"onEnter"),Z.prototype),ie(Z.prototype,"redirect",[x],Object.getOwnPropertyDescriptor(Z.prototype,"redirect"),Z.prototype),ie(Z.prototype,"fetchJoinableTeams",[L],Object.getOwnPropertyDescriptor(Z.prototype,"fetchJoinableTeams"),Z.prototype),ie(Z.prototype,"handleTeamSelected",[M],Object.getOwnPropertyDescriptor(Z.prototype,"handleTeamSelected"),Z.prototype),F=Z))||F);var se,le,ce,pe,ue,de,me,he,ye,ge,be,fe,Ee,ve,Oe,we,Se,De,Ie,Ce,Te,Pe=(0,b.ls)("features/sign-up/open-enrollment")(G=class extends C().Component{render(){const{store:e,onSkip:t}=this.props;return{[ae.LOADED]:C().createElement(C().Fragment,null,C().createElement(re.h4.aU,{onClick:t},"Create team"),C().createElement(m.Z,{order:"drop-in-bottom",speed:"slow"},C().createElement(f.X6,{heading:"We found some teams for you to join",subheading:C().createElement(X.Z,{order:"body",size:"larger"},"Based on your email, we found InVision teams that you can join."," ","If you don't want to collaborate with any of the teams below, you can"," ","create a new team.")}),C().createElement(J.Z,{vertical:"s"},C().createElement(te.HK,{requestKey:"global"}),C().createElement(f.aV.A,{subtitle:"Teams you can join",items:e.teams,renderEmpty:()=>C().createElement(Q.W,{action:t}),renderItem:(t,r)=>C().createElement(f.aV.v,{key:`team-card-${r}`,team:t,action:"Join",onClick:e.handleTeamSelected})})))),[ae.REDIRECT]:C().createElement(v.l_,{destination:e.redirectUrl})}[e.state]||C().createElement(f.gb,null)}})||G,Ae=r(87860),_e=r(66313),Ne=r(4477);function Re(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ke(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const ze={CREATE_SESSION:Symbol("Sign Up: Create session"),CREATE_TEAM:Symbol("Sign Up: Create team"),CREATE_USER:Symbol("Sign Up: Create user"),ROLE_ENTRY:Symbol("Sign Up: Role Entry"),DOMAIN_CONTROL:Symbol("Sign Up: Domain Control"),OPEN_ENROLLMENT:Symbol("Sign Up: Open Enrollment"),SUCCESS:Symbol("Sign Up: Success"),BLOCKER_ANDROID:Symbol("Sign Up: Blocker Android")};se=(0,b._V)("features/sign-up",{initialState:ze.CREATE_USER}),le=(0,g.RR)("features/context/client","features/context/cloud-ui","features/context/request","features/context/user","features/analytics","features/toggles","navigator"),ce=(0,w.UO)({flow:"Signup"}),pe=d.aD.bound,ue=d.aD.bound,de=d.aD.bound,me=d.aD.bound,he=d.aD.bound,ye=d.aD.bound,ge=d.aD.bound,be=d.aD.bound,fe=d.aD.bound,Ee=d.aD.bound,ve=d.aD.bound,se(Oe=le(Oe=ce((Se=ke((we=class{constructor(e,t,r,n,i,o,a){Re(this,"approvedDomainsToken",Se,this),Re(this,"flags",De,this),Re(this,"redirectTo",Ie,this),Re(this,"user",Ce,this),this.client=e,this.cloud=t,this.request=r,this.userContext=n,this.analytics=i,this.toggles=o,this.nav=a}async onEnter(){if(this.client.type===E.X5.ANDROID)return this.analytics.track("AndroidBlocker","Viewed"),this.transition(ze.BLOCKER_ANDROID);const{redirectTo:e=""}=this.request,t=E.vU.FREE_HAND_ROLE_COLLECTION;this.flags.roleEntry=e.includes("docs/freehands")?await this.toggles.fetch(t):t.DEFAULT}createUser(){this.transition(ze.CREATE_USER)}handleCreateTeam(){this.transition(ze.CREATE_TEAM)}markData(){this.cloud.markDataLoaded()}prepOnboarding(){this.request.setCookie({name:h.L.ONBOARDING_WALKTHROUGH,value:Date.now()})}handleUserCreated({user:e,tokens:t}){this.user=e,this.approvedDomainsToken=t.approvedDomains,this.transition(ze.CREATE_SESSION)}handleSessionCreated(){const e=this.flags.roleEntry===O.ws.POST_SIGN_UP?ze.ROLE_ENTRY:ze.DOMAIN_CONTROL;this.transition(e)}async handleRoleSubmitted({role:e}){this.transition(ze.DOMAIN_CONTROL),await this.userContext.load(),this.analytics.identify(this.userContext.analyticsID,(0,_e._t)({variantId:O.ws.POST_SIGN_UP,role:e}))}handleCheckJoinables(){this.transition(ze.OPEN_ENROLLMENT)}handleTeamCreated(e){const{redirectTo:t="/",queryobject:r}=this.request,n=new(Y())(decodeURIComponent(t),{},!0),i=new(Y())("/onboarding",!0),o={...H()(r,E.az.ALLOWED),newTeam:!0,redirectTo:n.toString()};this.prepOnboarding(),i.set("host",e.host),i.set("query",o),this.redirectTo=i.toString(),this.transition(ze.SUCCESS)}handleRestart(){this.nav.goTo("get-started")}}).prototype,"approvedDomainsToken",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),De=ke(we.prototype,"flags",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{roleEntry:null}}}),Ie=ke(we.prototype,"redirectTo",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=ke(we.prototype,"user",[d.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ke(we.prototype,"onEnter",[pe],Object.getOwnPropertyDescriptor(we.prototype,"onEnter"),we.prototype),ke(we.prototype,"createUser",[ue],Object.getOwnPropertyDescriptor(we.prototype,"createUser"),we.prototype),ke(we.prototype,"handleCreateTeam",[de],Object.getOwnPropertyDescriptor(we.prototype,"handleCreateTeam"),we.prototype),ke(we.prototype,"markData",[me],Object.getOwnPropertyDescriptor(we.prototype,"markData"),we.prototype),ke(we.prototype,"prepOnboarding",[he],Object.getOwnPropertyDescriptor(we.prototype,"prepOnboarding"),we.prototype),ke(we.prototype,"handleUserCreated",[ye],Object.getOwnPropertyDescriptor(we.prototype,"handleUserCreated"),we.prototype),ke(we.prototype,"handleSessionCreated",[ge],Object.getOwnPropertyDescriptor(we.prototype,"handleSessionCreated"),we.prototype),ke(we.prototype,"handleRoleSubmitted",[be],Object.getOwnPropertyDescriptor(we.prototype,"handleRoleSubmitted"),we.prototype),ke(we.prototype,"handleCheckJoinables",[fe],Object.getOwnPropertyDescriptor(we.prototype,"handleCheckJoinables"),we.prototype),ke(we.prototype,"handleTeamCreated",[Ee],Object.getOwnPropertyDescriptor(we.prototype,"handleTeamCreated"),we.prototype),ke(we.prototype,"handleRestart",[ve],Object.getOwnPropertyDescriptor(we.prototype,"handleRestart"),we.prototype),Oe=we))||Oe)||Oe);let je=(0,b.ls)("features/sign-up")(Te=class extends C().Component{render(){const{store:e,onTransition:t}=this.props,r={[ze.BLOCKER_ANDROID]:C().createElement(Ne.Z,null),[ze.CREATE_SESSION]:C().createElement(S.ro,{email:e.user.email,password:e.user.password,onSuccess:e.handleSessionCreated}),[ze.CREATE_TEAM]:C().createElement(xe,null,C().createElement(q,{onSuccess:e.handleTeamCreated,onTransition:t})),[ze.CREATE_USER]:C().createElement(W.Z,{onSuccess:e.handleUserCreated,onTransition:t,flags:e.flags}),[ze.DOMAIN_CONTROL]:C().createElement(xe,null,C().createElement(B.Z,{onSkip:e.handleCheckJoinables,onSwitchEmail:e.handleRestart})),[ze.OPEN_ENROLLMENT]:C().createElement(xe,null,C().createElement(Pe,{token:e.approvedDomainsToken,onSkip:e.handleCreateTeam})),[ze.SUCCESS]:C().createElement(v.l_,{destination:e.redirectTo}),[ze.ROLE_ENTRY]:C().createElement(_e.eO,{onSuccess:e.handleRoleSubmitted})}[e.state]||C().createElement(f.gb,null);return C().createElement(y.hA,{subdomain:"login"},C().createElement(D.Z,{action:e.markData}),C().createElement(m.Z,{speed:"medium",order:"drop-in-bottom"},r))}})||Te;const xe=Ae.ZP.div.withConfig({displayName:"Flow__ResponsiveWrapper",componentId:"rj74vn-0"})(["@media (max-width:600px){height:100vh;}"]);var Le,Me,Fe=je,Ze=r(10325);const Ue={LOADING:Symbol("Loading")};(0,b._V)("features/sign-up/layout",{initialState:Ue.LOADING})(Le=class{});var Ve=(0,b.ls)("features/sign-up/layout")(Me=class extends C().Component{render(){return C().createElement(C().Fragment,null,C().createElement(Ze.A,null,(({next:e})=>C().createElement(Fe,{onTransition:e}))))}})||Me},10325:function(e,t,r){"use strict";r.d(t,{A:function(){return ae},Z:function(){return Q}});var n=r(69792),i=r.n(n),o=r(16624),a=r.n(o),s=r(87860),l=r(64267),c=r(59549),p=r(88104),u=r(11592),d=r.n(u);const m=s.ZP.img.withConfig({displayName:"FreehandBackground__BackgroundImage",componentId:"a2rst5-0"})(["object-fit:cover;width:100%;height:70%;left:0;top:0;margin-right:1px;position:absolute;"]),h=s.ZP.div.withConfig({displayName:"FreehandBackground__Wrapper",componentId:"a2rst5-1"})(["width:100%;height:100%;background-color:rgba(0,122,219,1);position:relative;"]);var y=()=>a().createElement(h,null,a().createElement(m,{src:d()})),g=r(68056),b=r.n(g);class f extends a().PureComponent{render(){const{quote:e}=this.props;return a().createElement(a().Fragment,null,a().createElement(E,null,e.quote),a().createElement(v,null,a().createElement(O,null,a().createElement(S,{src:e.src,alt:e.name}),a().createElement(w,null)),a().createElement(D,null,e.name)),a().createElement(I,null,e.title))}}const E=s.ZP.div.withConfig({displayName:"FreehandQuote__QuoteExcerpt",componentId:"sc-1re4gsv-0"})(["width:100%;position:relative;font-family:",";color:",";font-size:16px;font-weight:bold;text-align:left;line-height:24px;letter-spacing:0.17px;"],(({theme:e})=>e.fonts.secondary),(({theme:e})=>e.palette.text.white)),v=s.ZP.div.withConfig({displayName:"FreehandQuote__QuoteSourceWrapper",componentId:"sc-1re4gsv-1"})(["width:100%;display:flex;align-items:center;margin:20px 0 14px 0;"]),O=s.ZP.div.withConfig({displayName:"FreehandQuote__ImageWrapper",componentId:"sc-1re4gsv-2"})(["position:relative;"]),w=(0,s.ZP)(b()).withConfig({displayName:"FreehandQuote__PenIconStyled",componentId:"sc-1re4gsv-3"})(["position:absolute;top:5px;left:60px;"]),S=s.ZP.img.withConfig({displayName:"FreehandQuote__QuoteSourceImage",componentId:"sc-1re4gsv-4"})(["width:80px;margin-right:16px;"]),D=s.ZP.div.withConfig({displayName:"FreehandQuote__QuoteSource",componentId:"sc-1re4gsv-5"})(["font-family:",";font-weight:600;font-size:12px;color:",";background-color:",";padding:12px 17px;border-radius:130px;letter-spacing:1px;margin-top:",";text-align:left;text-transform:uppercase;line-height:12px;"],(({theme:e})=>e.fonts.secondary),(({theme:e})=>e.palette.text.white),(({theme:e})=>e.palette.brand.regular),(({theme:e})=>e.spacing.xs)),I=s.ZP.div.withConfig({displayName:"FreehandQuote__QuoteSourceTitle",componentId:"sc-1re4gsv-6"})(["font-family:",";font-weight:600;font-size:14px;color:",";letter-spacing:0.17px;margin-bottom:",";text-align:left;"],(({theme:e})=>e.fonts.secondary),(({theme:e})=>e.palette.text.white),(({theme:e})=>e.spacing.s));var C,T=f,P=r(34241),A=[{name:"Megan Sempre",title:"Senior Designer at Xbox",src:r.n(P)(),quote:"“Having a digital space to brainstorm your ideas gives everyone a voice. Using the brainstorming template gave everyone equal input.”"}],_=r(28511),N=r(61407);var R=(0,c.f3)("window","features/analytics")(C=class extends a().PureComponent{constructor(...e){super(...e),this.onDemoClick=()=>{const{"features/analytics":e,window:t}=this.props;e.track(_.zW.SCHEDULE_A_DEMO,_.p$.SELECTED),t.open("https://www.invisionapp.com/enterprise/form-demo?link=login-offer","_blank")}}render(){const{children:e}=this.props;return a().createElement(N.Z,{disableIcon:!0,tabIndex:0,onClick:e=>{e.preventDefault(),this.onDemoClick()},order:"all"},e)}})||C,k=r(25817);class z extends a().PureComponent{render(){return a().createElement(j,{"data-component":"enterprise-features"},a().createElement(x,null,"InVision Freehand Enterprise"),a().createElement(L,null,"Transformative collaboration for larger teams"),a().createElement(M,null,a().createElement(R,null,"Schedule a demo")))}}const j=s.ZP.div.withConfig({displayName:"EnterpriseDemoContent__Wrapper",componentId:"sc-1tf1npo-0"})(["align-self:center;display:flex;justify-content:center;align-items:center;flex-direction:column;width:100%;"]),x=(0,s.ZP)(k.Z).withConfig({displayName:"EnterpriseDemoContent__TopText",componentId:"sc-1tf1npo-1"})(["font-size:12px;color:white;font-weight:500;text-align:center;margin-bottom:16px;"]),L=(0,s.ZP)(k.Z).withConfig({displayName:"EnterpriseDemoContent__BottomText",componentId:"sc-1tf1npo-2"})(["font-size:20px;color:white;font-weight:500;line-height:24px;text-align:center;width:330px;margin-bottom:40px;"]),M=s.ZP.div.withConfig({displayName:"EnterpriseDemoContent__ButtonContainer",componentId:"sc-1tf1npo-3"})(["width:169px;"]);var F,Z,U,V,G,q,W,B;function $(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}F=(0,p.oe)("features/social-proof",{lifecycle:c.ri}),Z=(0,c.RR)("features/context/request"),U=l.aD.bound,V=l.aD.bound,F(G=Z((W=$((q=class{constructor(e){var t,r,n,o;t=this,r="quotesIndex",o=this,(n=W)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0}),this.next=i()((()=>{(0,l.z)((()=>{this.quotesIndex=(this.quotesIndex+1)%A.length}))}),1500,{trailing:!1}),this.request=e}async onEnter(){var e;this.quotesIndex=(e=A.length,Math.floor(Math.random()*Math.floor(e)))}onExit(){this.next&&this.next.cancel()}}).prototype,"quotesIndex",[l.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$(q.prototype,"onEnter",[U],Object.getOwnPropertyDescriptor(q.prototype,"onEnter"),q.prototype),$(q.prototype,"onExit",[V],Object.getOwnPropertyDescriptor(q.prototype,"onExit"),q.prototype),G=q))||G);let H=(0,p.ei)("features/social-proof")(B=class extends a().Component{render(){const{isSignIn:e,store:t}=this.props;return a().createElement(K,null,a().createElement(y,null),a().createElement(Y,null,e?a().createElement(z,null):a().createElement(T,{quote:A[t.quotesIndex]})))}})||B;const K=s.ZP.div.withConfig({displayName:"View__Panel",componentId:"rs6yhs-0"})(["display:flex;align-items:center;justify-content:center;top:0;left:0;min-height:600px;height:100%;width:100%;overflow:hidden;background:rgba(36,40,56,0.65);background-size:cover;background-position:center;background-repeat:no-repeat;"]),Y=s.ZP.div.withConfig({displayName:"View__BottomPanel",componentId:"rs6yhs-1"})(["height:30%;display:flex;flex-flow:row wrap;align-items:flex-end;z-index:",";position:absolute;bottom:0;left:0;right:0;padding:16px 40px 16px 40px;margin-right:1px;background-color:rgba(0,122,219,1);"],(({theme:e})=>e.zindex.stacked));var X,J,Q=H,ee=r(33626),te=r.n(ee),re=r(76069),ne=r(47714);let ie=(X=(0,c.f3)("features/social-proof"),(0,re.Pi)(J=X(J=class extends a().Component{render(){const{children:e,"features/social-proof":t}=this.props;return a().createElement(ne.Zl.Ar,null,a().createElement(oe,{withTooltip:!1,withBackground:!1}),a().createElement(ne.Zl.dv,null,a().createElement(Q,null)),a().createElement(ne.Zl.O6,null,a().createElement(ne.Zl.K5,null,te()(e)?e({next:()=>t.next()}):e)))}})||J)||J);const oe=(0,s.ZP)(ne.h4.SK).withConfig({displayName:"Layout__HeaderLogo",componentId:"mcco67-0"})(["left:",";position:fixed;top:",';[data-client-embedded="true"] &{left:inherit;position:relative;top:inherit;}@media (min-width:',"px){svg{color:white;}}"],(({theme:e})=>e.spacing.m),(({theme:e})=>e.spacing.m),(({theme:e})=>e.breakpoints.l));var ae=ie},11314:function(e,t,r){"use strict";var n,i,o,a=r(20643),s=r.n(a),l=r(64267),c=r(59549),p=r(32837),u=r(28511),d=r(64870),m=r.n(d);const h=(0,p.kg)("team-create");n=(0,c.En)("features/team-create/api"),i=(0,c.RR)("features/analytics","features/context/request","features/http"),n(o=(0,c.ri)(o=i(o=class{constructor(e,t,r){this.analytics=e,this.request=t,this.http=r}inviteLinkCopied(){this.analytics.track(u.zW.ENABLE_APPROVED_DOMAINS,u.p$.URL_COPIED)}async viewTeamCreate(){this.analytics.track(u.zW.TEAM_CREATE,u.p$.VIEWED)}async viewedApprovedDomains(){this.analytics.track(u.zW.ENABLE_APPROVED_DOMAINS,u.p$.VIEWED)}async createTeam({name:e,subdomain:t,hostdomain:r,creationType:n}){const i=this.request.get("eaToken"),o=this.request.get("token"),a={creationType:n,ea:!!i,hasLogo:!1};this.analytics.track(u.zW.TEAM_CREATE,u.p$.SUBMITTED,a);try{const n={name:e,subdomain:t,...i&&{eaToken:i},...o&&{signupToken:o}},s=await this.http.post("/auth-api/account/teams",{data:n,errorKey:"global",errorMap:{400:()=>({data:{errorCode:m().INVALID_FORM_FIELD}})}}).then((({data:e})=>({...e,host:`${e.subdomain}.${r}`,version:"v7"})));return a.teamId=s.id,this.analytics.track(u.zW.TEAM_CREATE,u.p$.SUCCEEDED,a),this.analytics.trackLegacy("Signup.Team.Created",a),h("Team created: %O",s),s}catch(e){throw h("Unable to create a new team: %O",e),this.analytics.track(u.zW.TEAM_CREATE,u.p$.FAILED,a),e}}async setApprovedDomain(e,t,r){const n=r?"enabled":"disabled";this.analytics.track(u.zW.ENABLE_APPROVED_DOMAINS,u.p$.SUBMITTED,{value:n});try{r&&(await this.http.post("/auth-api/team/enable-open-enrollment",{data:{domains:[t],teamID:e},errorKey:"global"}),h("Open enrollment successfully updated for %s on %s",e,t),this.analytics.track(u.zW.ENABLE_APPROVED_DOMAINS,u.p$.SUCCEEDED,{value:n}))}catch(e){h("Unable to enable open-enrollment: %O",e),this.analytics.track(u.zW.ENABLE_APPROVED_DOMAINS,u.p$.FAILED,{value:n})}}async sendInvites(e=[],t){const r=e.length;this.analytics.track(u.zW.INVITES,u.p$.SUBMITTED,{invitesSent:r});try{await this.http.post("/auth-api/team/invites",{data:{inviteList:e.join(","),teamId:t},withCredentials:!0,errorKey:"global",errorMap:{400:e=>"Validation failure: invalid field"===s()(e,"data.message")?{data:{errorCode:m().INVALID_FORM_FIELD,message:null}}:"Email is invalid"===s()(e,"data.message")?{data:{errorCode:m().INVALID_EMAIL_INVITES,message:null}}:void 0}}),h("Team invites sent out to: %O",(0,l.ZN)(e)),this.analytics.track(u.zW.INVITES,u.p$.SUCCEEDED,{invitesSent:r}),this.analytics.trackLegacy("Signup.Invites.Sent",{invitesSent:r})}catch(e){h("Unable to send invites: %O",e),this.analytics.track(u.zW.INVITES,u.p$.FAILED,{invitesSent:0})}}})||o)||o)},56195:function(e,t,r){"use strict";var n,i,o,a,s,l,c,p,u,d,m,h,y=r(16624),g=r.n(y),b=r(64267),f=r(87860),E=r(59549),v=r(5260),O=r(5013),w=r(44527),S=r(87362);function D(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const I={LOADING:Symbol("Team info: Loading"),ENTRY:Symbol("Team info: Entry")};n=(0,v._V)("features/team-create/team-info",{initialState:I.LOADING}),i=(0,E.RR)("features/context/request","features/http","features/team-create/api"),o=b.aD.bound,a=b.aD.bound,s=b.aD.bound,l=b.aD.bound,c=b.aD.bound,p=b.aD.bound,n(u=i((m=D((d=class{constructor(e,t,r){var n,i,o,a;n=this,i="team",a=this,(o=m)&&Object.defineProperty(n,i,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(a):void 0}),this.request=e,this.http=t,this.api=r}onInit({props:e}){this.onError=e.onError||(()=>{}),this.onSuccess=e.onSuccess||(()=>{})}onEnter({props:e}){return this.team=e.team,this.team?this.create(S.J.SOLO):(this.api.viewTeamCreate(),this.transition(I.ENTRY))}async validateTeamName(e,t){const r=e.get(t);try{await this.http.get("/auth-api/teams/name",{params:{name:r}})}catch(e){return"That's not a valid team name, please try again."}}async validateTeamSubdomain(e,t){const r=e.get(t);try{await this.http.get("/auth-api/teams/domain",{params:{subdomain:r}})}catch(e){switch(e.response.status){case 409:return"Try another domain — that one is unavailable.";default:return"That's not a valid team domain, please try again."}}}submit(e){return this.team=e,this.create(S.J.USER_DEFINED)}async create(e){try{const t=await this.api.createTeam({name:this.team.name,subdomain:this.team.subdomain,hostdomain:this.request.hostdomain,creationType:e});return this.onSuccess(t),t}catch(e){this.onError(e)}}}).prototype,"team",[b.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D(d.prototype,"onInit",[o],Object.getOwnPropertyDescriptor(d.prototype,"onInit"),d.prototype),D(d.prototype,"onEnter",[a],Object.getOwnPropertyDescriptor(d.prototype,"onEnter"),d.prototype),D(d.prototype,"validateTeamName",[s],Object.getOwnPropertyDescriptor(d.prototype,"validateTeamName"),d.prototype),D(d.prototype,"validateTeamSubdomain",[l],Object.getOwnPropertyDescriptor(d.prototype,"validateTeamSubdomain"),d.prototype),D(d.prototype,"submit",[c],Object.getOwnPropertyDescriptor(d.prototype,"submit"),d.prototype),D(d.prototype,"create",[p],Object.getOwnPropertyDescriptor(d.prototype,"create"),d.prototype),u=d))||u);let C=(0,v.ls)("features/team-create/team-info")(h=class extends g().Component{render(){const{store:e,team:t}=this.props;return{[I.ENTRY]:g().createElement(g().Fragment,null,g().createElement(O.X6,{heading:"Set up your team",subheading:"First things first: choose a name and domain"}),g().createElement(T,{"data-component":"team-create-team-info",submit:e.submit},g().createElement(w.ZW,{name:"name",label:"Team name",placeholder:"Use your company, department, or own name for inspiration",remoteValidator:t=>e.validateTeamName(t,"name"),defaultValue:null==t?void 0:t.name,autoFocus:!0}),g().createElement(w.v7,{name:"subdomain",label:"Domain",remoteValidator:t=>e.validateTeamSubdomain(t,"subdomain"),defaultValue:null==t?void 0:t.subdomain}),g().createElement(w.k4,null,"Create team")))}[e.state]||g().createElement(O.gb,null)}})||h;const T=(0,f.ZP)(w.l0).withConfig({displayName:"TeamInfo__CreateTeam",componentId:"sc-1xu9pf9-0"})(["@media (max-width:600px){padding-right:",";}"],(({theme:e})=>e.spacing.l));t.Z=C},83566:function(e,t,r){"use strict";var n,i,o,a,s,l,c,p,u,d,m,h,y=r(16624),g=r.n(y),b=r(64267),f=r(94002),E=r(25817),v=r(57819),O=r(59549),w=r(32837),S=r(5260),D=r(47714),I=r(5013),C=r(44527),T=r(28511),P=r(57745),A=r.n(P);function _(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function N(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const R=(0,w.kg)("team-create"),k=e=>e.split(",").map((e=>e.trim())).filter((e=>""!==e)),z={ENTRY:Symbol("Team Invites: Entry"),SENDING_INVITES:Symbol("Team Invites: Sending"),SUCCESS:Symbol("Team Invites: Success")};n=(0,S._V)("features/team-create/invites",{initialState:z.ENTRY}),i=(0,O.RR)("features/context/request","features/context/user","features/team-create/api","features/analytics"),o=b.aD.bound,a=b.aD.bound,s=b.aD.bound,l=b.aD.bound,c=b.aD.bound,n(p=i((d=N((u=class{constructor(e,t,r,n){_(this,"emailsSent",d,this),_(this,"values",m,this),this.request=e,this.user=t,this.api=r,this.analytics=n}onEnter({props:e}){this.team=e.team,this.analytics.track(T.zW.INVITES,T.p$.VIEWED)}skip(){this.analytics.track(T.zW.INVITES,T.p$.SKIPPED)}get emailDomain(){const{email:e}=this.user;return e.split("@")[1]}validateInvites(e,t){const r=e.get(t),n=k(r).find((e=>A().single(e,{email:!0})));return n?`Looks like ${n} is not a valid email.`:null}async sendInvites(){await this.api.sendInvites(this.values.invites,this.team.id)}async submit(e){try{return this.values={invites:k(e.invites)},this.values.invites.length?this.transition(z.SENDING_INVITES):this.transition(z.SUCCESS)}catch(e){R("Unable to update settings: %O",e)}}}).prototype,"emailsSent",[b.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=N(u.prototype,"values",[b.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),N(u.prototype,"onEnter",[o],Object.getOwnPropertyDescriptor(u.prototype,"onEnter"),u.prototype),N(u.prototype,"skip",[a],Object.getOwnPropertyDescriptor(u.prototype,"skip"),u.prototype),N(u.prototype,"emailDomain",[b.Fl],Object.getOwnPropertyDescriptor(u.prototype,"emailDomain"),u.prototype),N(u.prototype,"validateInvites",[s],Object.getOwnPropertyDescriptor(u.prototype,"validateInvites"),u.prototype),N(u.prototype,"sendInvites",[l],Object.getOwnPropertyDescriptor(u.prototype,"sendInvites"),u.prototype),N(u.prototype,"submit",[c],Object.getOwnPropertyDescriptor(u.prototype,"submit"),u.prototype),p=u))||p);let j=(0,S.ls)("features/team-create/invites")(h=class extends g().Component{constructor(...e){super(...e),this.handleSkip=()=>{const{store:e,onSuccess:t=(()=>{})}=this.props;e.skip(),t()}}render(){const{store:e,onError:t=(()=>{}),onSuccess:r=(()=>{})}=this.props;return{[z.ENTRY]:g().createElement(g().Fragment,null,g().createElement(D.h4.O6,null,g().createElement(f.Z,{order:"tertiary",size:"smaller",onClick:this.handleSkip},"Skip")),g().createElement(I.X6,{heading:"InVision is better together",subheading:g().createElement(E.Z,{order:"body",size:"larger"},"Invite team members to start collaborating")}),g().createElement(C.l0,{"data-component":"team-create-invite-members",submit:e.submit,disabled:e=>!e.valid},g().createElement(C.Kx,{name:"invites","data-component":"team-create-emails",placeholder:"Type as many email addresses as you'd like, each separated by a comma.",rows:"5",validator:{fn:t=>e.validateInvites(t,"invites")},allowEmpty:!0}),g().createElement(C.k4,null,"Invite"))),[z.SENDING_INVITES]:g().createElement(I.Z9,{operation:e.sendInvites,onError:t,onSuccess:r},g().createElement(I.X6,{subheading:"Spreading the word",className:"heading"})),[z.SUCCESS]:g().createElement(v.W,{action:r})}[e.state]}})||h;t.Z=j},87362:function(e,t,r){"use strict";r.d(t,{J:function(){return n}});const n={SOLO:"solo",USER_DEFINED:"userDefined"}},63970:function(e,t,r){"use strict";r.d(t,{Z:function(){return ve},C:function(){return we}});r(11314);var n,i,o,a,s,l,c,p,u,d,m,h,y,g,b,f=r(16624),E=r.n(f),v=r(5260),O=r(28511),w=r(10325),S=r(64267),D=r(48743),I=r(57819),C=r(59549),T=r(32837),P=r(88821),A=r(90660),_=r(48031),N=r(9343),R=r(5013),k=r(56195),z=r(83566),j=r(87860),x=r(94002),L=r(25817),M=r(81772),F=r(29515),Z=r(25746),U=r(47714),V=r(44527),G=r(57745),q=r.n(G);function W(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function B(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const $=(0,T.kg)("team-create"),H=e=>e.split(",").map((e=>e.trim())).filter((e=>""!==e)),K={ENTRY:Symbol("Team Enroll: Entry"),SENDING_INVITES:Symbol("Team Enroll: Sending"),SUCCESS:Symbol("Team Enroll: Success")};n=(0,v._V)("features/team-create/enrollment",{initialState:K.ENTRY}),i=(0,C.RR)("features/context/request","features/context/user","features/team-create/api"),o=S.aD.bound,a=S.aD.bound,s=S.aD.bound,l=S.aD.bound,c=S.aD.bound,p=S.aD.bound,u=S.aD.bound,n(d=i((h=B((m=class{constructor(e,t,r){W(this,"approvedDomainsEnabled",h,this),W(this,"emailsSent",y,this),W(this,"team",g,this),this.request=e,this.user=t,this.api=r}onInit({props:e}){this.team=e.team}onEnter({props:e}){this.api.viewedApprovedDomains()}get emailDomain(){const{email:e}=this.user;return e.split("@")[1]}get link(){const{subdomain:e}=this.team;if(!e)return"";const{hostdomain:t,protocol:r}=this.request;return`${r}//${e}.${t}/auth/join-team/open-enrollment`}handleApprovedDomainsChange(e){this.approvedDomainsEnabled=e}handleLinkCopy(){this.api.inviteLinkCopied()}validateInvites(e){const t=e.get("invites"),r=H(t).find((e=>q().single(e,{email:!0})));return r?`Looks like ${r} is not a valid email.`:null}async sendInvites(){await this.api.sendInvites(this.invites,this.team.id)}async submit(e){try{this.invites=H(e.invites);const t=e["approved-domains-enabled"];return await this.api.setApprovedDomain(this.team.id,this.emailDomain,t),this.invites.length?this.transition(K.SENDING_INVITES):this.transition(K.SUCCESS)}catch(e){$("Unable to update settings: %O",e)}}}).prototype,"approvedDomainsEnabled",[S.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=B(m.prototype,"emailsSent",[S.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=B(m.prototype,"team",[S.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),B(m.prototype,"onInit",[o],Object.getOwnPropertyDescriptor(m.prototype,"onInit"),m.prototype),B(m.prototype,"onEnter",[a],Object.getOwnPropertyDescriptor(m.prototype,"onEnter"),m.prototype),B(m.prototype,"emailDomain",[S.Fl],Object.getOwnPropertyDescriptor(m.prototype,"emailDomain"),m.prototype),B(m.prototype,"link",[S.Fl],Object.getOwnPropertyDescriptor(m.prototype,"link"),m.prototype),B(m.prototype,"handleApprovedDomainsChange",[s],Object.getOwnPropertyDescriptor(m.prototype,"handleApprovedDomainsChange"),m.prototype),B(m.prototype,"handleLinkCopy",[l],Object.getOwnPropertyDescriptor(m.prototype,"handleLinkCopy"),m.prototype),B(m.prototype,"validateInvites",[c],Object.getOwnPropertyDescriptor(m.prototype,"validateInvites"),m.prototype),B(m.prototype,"sendInvites",[p],Object.getOwnPropertyDescriptor(m.prototype,"sendInvites"),m.prototype),B(m.prototype,"submit",[u],Object.getOwnPropertyDescriptor(m.prototype,"submit"),m.prototype),d=m))||d);let Y=(0,v.ls)("features/team-create/enrollment")(b=class extends E().Component{render(){const{store:e,onError:t=(()=>{}),onSuccess:r=(()=>{})}=this.props;return{[K.ENTRY]:E().createElement(E().Fragment,null,E().createElement(U.h4.O6,null,E().createElement(x.Z,{order:"tertiary",size:"smaller",onClick:r},"Skip")),E().createElement(R.X6,{heading:"Bring visibility to your team",subheading:E().createElement(L.Z,{order:"body",size:"larger"},"When enabled, anyone with a verified ",E().createElement("strong",null,e.emailDomain)," ","email domain — from teammates to executives — can join the conversation without waiting for an invite.")}),E().createElement(V.l0,{"data-component":"team-create-approved-domains",submit:e.submit,disabled:e=>!e.valid},E().createElement(M.Z,{bottom:"l"},E().createElement(F.Z,{spacing:"s"},E().createElement(X,{name:"approved-domains-enabled","data-component":"approved-domains-toggle",onChange:e.handleApprovedDomainsChange,checked:!0}),E().createElement(L.Z,{size:"larger",color:"text",order:"body"},"Enable approved domains"))),E().createElement(Q,null,E().createElement(V.xv,{isUncontrolled:!1,name:"link",label:"Send people this link to let them join your team.",value:e.link,disabled:!e.approvedDomainsEnabled,readOnly:!0}),e.approvedDomainsEnabled&&E().createElement(J,null,E().createElement(Z.Z,{copiedText:"Copied",copyTimeout:"2000",defaultText:"Copy",stringToCopy:`${e.link}?linkshare=oecopied`,onCopy:e.handleLinkCopy}))),E().createElement(V.xv,{name:"invites",label:"Or, invite them via email.",placeholder:"Separate each email address with a comma",validator:{fn:e.validateInvites},allowEmpty:!0}),E().createElement(V.k4,null,"Next"))),[K.SENDING_INVITES]:E().createElement(R.Z9,{operation:e.sendInvites,onError:t,onSuccess:r},E().createElement(R.X6,{subheading:"Spreading the word",className:"heading"})),[K.SUCCESS]:E().createElement(I.W,{action:r})}[e.state]}})||b;const X=(0,j.ZP)(V.ZD).withConfig({displayName:"TeamEnrollment__StyledToggle",componentId:"i6j2a5-0"})(["width:36px !important;"]),J=j.ZP.div.withConfig({displayName:"TeamEnrollment__ButtonWrap",componentId:"i6j2a5-1"})(["position:absolute;right:12px;top:36px;z-index:",";"],(({theme:e})=>e.zindex.base)),Q=j.ZP.div.withConfig({displayName:"TeamEnrollment__CopyWrap",componentId:"i6j2a5-2"})(["position:relative;flex:1;"]);var ee,te,re,ne,ie,oe,ae,se,le,ce,pe,ue,de,me=Y;function he(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ye(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const ge=(0,T.kg)("team-create"),be={LOADING:Symbol("Team Create: Loading"),SUCCESS:Symbol("Team Create: Success"),IDENTIFY:Symbol("Team Create: Identify"),TEAM_INFO:Symbol("Team Create: Team info"),TEAM_ENROLLMENT:Symbol("Team Create: Team enrollment"),TEAM_INVITES:Symbol("Team Create: Invites")};ee=(0,v._V)("features/team-create",{initialState:be.LOADING}),te=(0,C.RR)("features/context/request","features/context/user"),re=S.aD.bound,ne=S.aD.bound,ie=S.aD.bound,oe=S.aD.bound,ae=S.aD.bound,se=S.aD.bound,ee(le=te((pe=ye((ce=class{constructor(e,t){he(this,"omitApprovedDomains",pe,this),he(this,"tokens",ue,this),this.request=e,this.user=t}onInit({props:e}){var t,r;this.invite=null===(t=e.invite)||void 0===t||t,this.tokens=null!==(r=e.tokens)&&void 0!==r?r:{}}async onEnter(){try{return await this.user.load(),this.handleTeamIdentity()}catch(e){return ge("Unable to find user",e),this.transition(be.IDENTIFY)}}get showEnrollment(){const{approvedDomains:e}=this.team;return!this.omitApprovedDomains&&e&&e.length}handleTeamIdentity(){return this.transition(be.TEAM_INFO)}handleTeamCreated(e){return this.team=e,this.invite?this.showEnrollment?this.transition(be.TEAM_ENROLLMENT):this.transition(be.TEAM_INVITES):this.transition(be.SUCCESS)}handleSuccess(){return this.transition(be.SUCCESS)}handleUserIdentified(){return this.handleTeamIdentity()}}).prototype,"omitApprovedDomains",[S.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ue=ye(ce.prototype,"tokens",[S.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye(ce.prototype,"onInit",[re],Object.getOwnPropertyDescriptor(ce.prototype,"onInit"),ce.prototype),ye(ce.prototype,"onEnter",[ne],Object.getOwnPropertyDescriptor(ce.prototype,"onEnter"),ce.prototype),ye(ce.prototype,"handleTeamIdentity",[ie],Object.getOwnPropertyDescriptor(ce.prototype,"handleTeamIdentity"),ce.prototype),ye(ce.prototype,"handleTeamCreated",[oe],Object.getOwnPropertyDescriptor(ce.prototype,"handleTeamCreated"),ce.prototype),ye(ce.prototype,"handleSuccess",[ae],Object.getOwnPropertyDescriptor(ce.prototype,"handleSuccess"),ce.prototype),ye(ce.prototype,"handleUserIdentified",[se],Object.getOwnPropertyDescriptor(ce.prototype,"handleUserIdentified"),ce.prototype),le=ce))||le);var fe,Ee,ve=(0,v.ls)("features/team-create")(de=class extends E().Component{render(){const{store:e,team:t,onSuccess:r}=this.props,n={[be.IDENTIFY]:E().createElement(E().Fragment,null,E().createElement(R.X6,{align:"left",heading:"Sign in to InVision",subheading:"Enter your details below"}),E().createElement(_.ro,{onSuccess:e.handleUserIdentified})),[be.TEAM_INFO]:E().createElement(A.g2,{onControlled:E().createElement(P.l_,{destination:"team-select"}),onUncontrolled:E().createElement(k.Z,{team:t,tokens:e.tokens,onSuccess:e.handleTeamCreated})}),[be.TEAM_ENROLLMENT]:E().createElement(me,{team:e.team,onSuccess:e.handleSuccess}),[be.TEAM_INVITES]:E().createElement(z.Z,{team:e.team,onSuccess:e.handleSuccess}),[be.SUCCESS]:r?E().createElement(I.W,{action:()=>r(e.team)}):E().createElement(N.c,{team:e.team})}[e.state]||E().createElement(R.gb,null);return E().createElement(D.Z,{speed:"medium",order:"drop-in-bottom"},n)}})||de;const Oe={LOADING:Symbol("Team Create: Loading")};(0,v._V)("features/team-create/layout",{initialState:Oe.LOADING})(fe=(0,O.UO)({flow:"Signup"})(fe=class{})||fe);var we=(0,v.ls)("features/team-create/layout")(Ee=class extends E().Component{render(){return E().createElement(w.A,null,(({next:e})=>E().createElement(ve,{onTransition:e})))}})||Ee},48749:function(e,t,r){"use strict";r.d(t,{A:function(){return _e},Z:function(){return Ce}});var n,i,o,a=r(16624),s=r.n(a),l=r(64267),c=r(5260),p=r(59549),u=r(5013),d=r(9343),m=r(87860),h=r(48743),y=r(81772),g=r(77877),b=r(59953),f=r(32837),E=r(88104),v=r(44527),O=r(64870),w=r(36866),S=r(30195),D=r(76069),I=r(57745),C=r.n(I),T=r(80733);function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var A,_,N,R,k,z,j,x,L,M,F,Z,U,V=(n=l.aD.bound,(0,T.qH)(i=(0,D.Pi)((o=class extends s().Component{constructor(e){super(e);const{store:t,validator:r}=e;this.store=t,t.registerValidator(r||{fn:this.defaultValidator})}defaultValidator(e){const t=e.get(this.props.name);return C().single(t,{format:{pattern:"((?:(?:[^.]+[.])+)?(?:[^.]+))",flags:"i",message:"Please enter a valid team subdomain"}})}render(){const{id:e,name:t,store:r,defaultValue:n,...i}=this.props;return s().createElement(S.Z,P({id:e,isUncontrolled:!0,name:t,type:"text",onChange:r.handleChange,onBlur:r.handleBlur,defaultValue:n},i))}},A=o.prototype,_="defaultValidator",N=[n],R=Object.getOwnPropertyDescriptor(o.prototype,"defaultValidator"),k=o.prototype,z={},Object.keys(R).forEach((function(e){z[e]=R[e]})),z.enumerable=!!z.enumerable,z.configurable=!!z.configurable,("value"in z||z.initializer)&&(z.writable=!0),z=N.slice().reverse().reduce((function(e,t){return t(A,_,e)||e}),z),k&&void 0!==z.initializer&&(z.value=z.initializer?z.initializer.call(k):void 0,z.initializer=void 0),void 0===z.initializer&&(Object.defineProperty(A,_,z),z=null),i=o))||i)||i);function G(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const q=(0,f.kg)("team-domain");j=(0,E.oe)("features/team-domain/entry"),x=(0,p.RR)("features/context/request","features/http"),L=l.aD.bound,j(M=x((Z=G((F=class{constructor(e,t){!function(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}(this,"busy",Z,this),this.request=e,this.http=t}get hostdomain(){return this.request.hostdomain}async submit(e){let{subdomain:t}=e;if(!t)return null;t=t.toLowerCase().replace(/\s/gi,"");try{const e=await this.http.get("/auth-api/teams/domain/exists",{params:{subdomain:t},errorKey:"global",errorMap:{404:()=>({data:{message:null,errorCode:O.DOMAIN_NOT_FOUND}})}}).then((e=>e.data));return this.request.set("entry",w.pd.PROMPT),{domain:`${e.subdomain}.${this.hostdomain}`,version:e.version}}catch(e){q("Error checking subdomain",e)}}}).prototype,"busy",[l.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G(F.prototype,"hostdomain",[l.Fl],Object.getOwnPropertyDescriptor(F.prototype,"hostdomain"),F.prototype),G(F.prototype,"submit",[L],Object.getOwnPropertyDescriptor(F.prototype,"submit"),F.prototype),M=F))||M);let W=(0,E.ei)("features/team-domain/entry")(U=class extends s().Component{render(){const{store:e,onBack:t,onForgot:r,onSelected:n}=this.props;return s().createElement(h.Z,{speed:"medium",order:"drop-in-bottom"},s().createElement(u.X6,{heading:"Sign in using your team domain",subheading:"Each team you are a part of has its own domain"}),s().createElement(v.l0,{"data-component":"team-domain",submit:(...t)=>e.submit(...t).then((e=>e&&n(e)))},s().createElement(V,{id:"subdomain",name:"subdomain",label:"Team domain",append:`.${e.hostdomain}`,autoFocus:!0},s().createElement(B,{type:"button",order:"tertiary",onClick:r},"Forgot your domain?")),s().createElement(v.k4,{name:"continue","data-component":"primary-button"},"Continue")),t&&s().createElement(y.Z,{top:"s"},s().createElement(g.Z,{horizontal:"center"},s().createElement(b.Z,{name:"back",type:"button",order:"tertiary",onClick:t},"Back to sign in"))))}})||U;const B=(0,m.ZP)(b.Z).withConfig({displayName:"EnterDomain__HelperLink",componentId:"sc-1e1ssmd-0"})(["position:absolute;top:0;right:0;font-size:12px;"]);var $,H,K,Y,X,J,Q,ee,te=W,re=r(87985),ne=r(57819);function ie(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const oe=(0,f.kg)("team-domain"),ae={EMAIL_ENTRY:Symbol("Forgot Domain: Email entry"),EMAIL_SENT:Symbol("Forgot Domain: Email sent")};$=(0,c._V)("features/team-domain/forgot",{initialState:ae.EMAIL_ENTRY}),H=(0,p.RR)("features/context/user","features/http","features/notification"),K=l.aD.bound,Y=l.aD.bound,$(X=H((Q=ie((J=class{constructor(e,t,r){!function(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}(this,"loading",Q,this),this.user=e,this.http=t,this.notifications=r}showEntry(){this.transition(ae.EMAIL_ENTRY)}async sendEmail({email:e}){this.loading=!0;try{const t=this.user.isOauth?"oauth":void 0;await this.http.post("/auth-api/account/send-team-list",{data:{email:e,action:t},errorKey:"global"}),oe("Sending teams list email to: ",e),this.notifications.notify("Check your email for a list of your InVision teams.","success"),this.transition(ae.EMAIL_SENT)}catch(e){oe("Error checking subdomain",e)}(0,l.z)((()=>{this.loading=!1}))}}).prototype,"loading",[l.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ie(J.prototype,"showEntry",[K],Object.getOwnPropertyDescriptor(J.prototype,"showEntry"),J.prototype),ie(J.prototype,"sendEmail",[Y],Object.getOwnPropertyDescriptor(J.prototype,"sendEmail"),J.prototype),X=J))||X);var se,le,ce,pe,ue,de,me,he,ye,ge,be,fe,Ee,ve,Oe=(0,c.ls)("features/team-domain/forgot")(ee=class extends s().Component{render(){const{store:e,onBack:t,onSuccess:r}=this.props;return{[ae.EMAIL_ENTRY]:s().createElement(h.Z,{speed:"medium",order:"drop-in-bottom"},s().createElement(u.X6,{heading:"Forgot your domain?",subheading:"Enter your email below and we will send you a list of your teams"}),s().createElement(v.l0,{"data-component":"team-domain",submit:e.sendEmail},(t=>s().createElement(s().Fragment,null,s().createElement(v.GT,{id:"email",name:"email",label:"Email address",autoFocus:!0}),s().createElement(v.k4,{name:"continue","data-component":"primary-button",disabled:t.disabled||e.loading},e.loading?s().createElement(re.Z,{color:"white"}):"Continue")))),s().createElement(y.Z,{top:"s"},s().createElement(g.Z,{horizontal:"center"},s().createElement(b.Z,{name:"back",type:"button",order:"tertiary",onClick:t},"Back")))),[ae.EMAIL_SENT]:s().createElement(ne.W,{action:r})}[e.state]||s().createElement(u.gb,null)}})||ee;function we(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Se={LOADING:Symbol("Loading"),DOMAIN_ENTRY:Symbol("Domain entry"),FORGOT_DOMAIN:Symbol("Forgot domain"),TEAM_SELECTED:Symbol("Team selected")};se=(0,c._V)("features/team-domain",{initialState:Se.DOMAIN_ENTRY}),le=(0,p.RR)("features/context/request","features/context/team","features/http","features/notification","history","navigator"),ce=l.aD.bound,pe=l.aD.bound,ue=l.aD.bound,de=l.aD.bound,me=l.aD.bound,he=l.aD.bound,ye=l.aD.bound,ge=l.aD.bound,se(be=le((Ee=we((fe=class{constructor(e,t,r,n,i,o){!function(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}(this,"selectedTeam",Ee,this),this.notifyV6TeamSelected=void 0,this.request=e,this.team=t,this.http=r,this.notifications=n,this.history=i,this.navigator=o}onEnter(){this.transition(Se.DOMAIN_ENTRY)}onInit({props:e}){this.notifyV6TeamSelected=e.notifyV6TeamSelected}goBack(){this.history.goBack()}handleTeamEmailSent(){this.transition(Se.DOMAIN_ENTRY)}handleTeamSelected(e){this.selectedTeam=e,"v6"===e.version&&this.notifyV6TeamSelected?this.notifyV6TeamSelected():this.transition(Se.TEAM_SELECTED)}handleShowForgotDomain(){this.transition(Se.FORGOT_DOMAIN)}handleShowDomainEntry(){this.transition(Se.DOMAIN_ENTRY)}handleClearNotifications(){this.notifications.clear()}}).prototype,"selectedTeam",[l.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we(fe.prototype,"onEnter",[ce],Object.getOwnPropertyDescriptor(fe.prototype,"onEnter"),fe.prototype),we(fe.prototype,"onInit",[pe],Object.getOwnPropertyDescriptor(fe.prototype,"onInit"),fe.prototype),we(fe.prototype,"goBack",[ue],Object.getOwnPropertyDescriptor(fe.prototype,"goBack"),fe.prototype),we(fe.prototype,"handleTeamEmailSent",[de],Object.getOwnPropertyDescriptor(fe.prototype,"handleTeamEmailSent"),fe.prototype),we(fe.prototype,"handleTeamSelected",[me],Object.getOwnPropertyDescriptor(fe.prototype,"handleTeamSelected"),fe.prototype),we(fe.prototype,"handleShowForgotDomain",[he],Object.getOwnPropertyDescriptor(fe.prototype,"handleShowForgotDomain"),fe.prototype),we(fe.prototype,"handleShowDomainEntry",[ye],Object.getOwnPropertyDescriptor(fe.prototype,"handleShowDomainEntry"),fe.prototype),we(fe.prototype,"handleClearNotifications",[ge],Object.getOwnPropertyDescriptor(fe.prototype,"handleClearNotifications"),fe.prototype),be=fe))||be);var De,Ie,Ce=(0,c.ls)("features/team-domain")(ve=class extends s().Component{render(){const{store:e,onBack:t}=this.props;return{[Se.DOMAIN_ENTRY]:s().createElement(te,{onBack:t,onForgot:e.handleShowForgotDomain,onSelected:e.handleTeamSelected,onExit:e.handleClearNotifications}),[Se.FORGOT_DOMAIN]:s().createElement(Oe,{onBack:e.handleShowDomainEntry,onSuccess:e.handleTeamEmailSent}),[Se.TEAM_SELECTED]:s().createElement(d.c,{team:e.selectedTeam})}[e.state]||s().createElement(u.gb,null)}})||ve,Te=r(28511),Pe=r(47714);const Ae={LOADING:Symbol("Loading")};(0,c._V)("features/team-domain/layout",{initialState:Ae.LOADING})(De=(0,Te.UO)({flow:"GlobalSignIn"})(De=class{})||De);var _e=(0,c.ls)("features/team-domain/layout")(Ie=class extends s().Component{render(){return s().createElement(Pe.wC.A,null,s().createElement(s().Fragment,null,s().createElement(Pe.h4.eJ,null),s().createElement(Ce,null)))}})||Ie},83879:function(e,t,r){"use strict";r.d(t,{Z:function(){return lt}});r(11314);var n=r(64267),i=r(48743),o=r(59549),a=r(5013),s=r(5260);const l="ONBOARDING",c="TEAM_CREATION",p="TEAM_SOLO_SELECTION",u="success",d="TEAM_RESERVATION";var m,h,y,g,b,f,E,v,O,w,S,D,I,C=r(47714),T=r(88821),P=r(28511),A=r(10325),_=r(16624),N=r.n(_),R=r(36050),k=r(81281),z=r(90660),j=r(48031),x=r(98471),L=r(87972),M=r(50650),F=r(87860),Z=r(56195),U=r(79774),V=r(83566);function G(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function q(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const W={LOADING:Symbol("Team Create: Loading"),SIGNIN:Symbol("Team Create: Sign In"),CHOOSE_TYPE:Symbol("Team Create: Choose Type"),TEAM_CREATE:Symbol("Team Create: Team Create"),TEAM_INVITES:Symbol("Team Create: Invites")},B=e=>e.replace(/\W/g,"").toLowerCase();m=(0,s._V)("features/team-reserve/team-create",{initialState:W.LOADING}),h=(0,o.RR)("features/context/request","features/context/token","features/context/user"),y=n.aD.bound,g=n.aD.bound,b=n.aD.bound,f=n.aD.bound,E=n.aD.bound,v=n.aD.bound,m(O=h((S=q((w=class{constructor(e,t,r){G(this,"team",S,this),G(this,"skipInvites",D,this),this.request=e,this.tokenStore=t,this.user=r}onEnter(){if(!this.tokenStore.token)return this.transition(W.SIGNIN);if(this.tokenStore.omitted.includes(c)||this.tokenStore.omitted.includes(p)){const e=this.tokenStore.omitted.includes(p);return this.handleSolo(null,e)}this.transition(W.CHOOSE_TYPE)}onInit({props:e}){this.notifySuccess=e.onSuccess||(()=>{}),this.notifyError=e.onError||(()=>{})}handleCreateTeam(){this.transition(W.TEAM_CREATE)}handleSolo(e,t=!1){var r,n,i,o;this.skipInvites=!t,this.team=(r=this.user.name,{name:(o=r,(/s$/i.test(o)?`${o}'`:`${o}'s`)+" Team"),subdomain:`${B(r)}${n=1,i=999999,Math.floor(Math.random()*(i-(n+1)))+n}`}),this.transition(W.TEAM_CREATE)}handleTeamCreated(e){this.team=e,this.skipInvites?this.handleSuccess():this.transition(W.TEAM_INVITES)}handleSuccess(){this.notifySuccess(this.team)}}).prototype,"team",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=q(w.prototype,"skipInvites",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),q(w.prototype,"onEnter",[y],Object.getOwnPropertyDescriptor(w.prototype,"onEnter"),w.prototype),q(w.prototype,"onInit",[g],Object.getOwnPropertyDescriptor(w.prototype,"onInit"),w.prototype),q(w.prototype,"handleCreateTeam",[b],Object.getOwnPropertyDescriptor(w.prototype,"handleCreateTeam"),w.prototype),q(w.prototype,"handleSolo",[f],Object.getOwnPropertyDescriptor(w.prototype,"handleSolo"),w.prototype),q(w.prototype,"handleTeamCreated",[E],Object.getOwnPropertyDescriptor(w.prototype,"handleTeamCreated"),w.prototype),q(w.prototype,"handleSuccess",[v],Object.getOwnPropertyDescriptor(w.prototype,"handleSuccess"),w.prototype),O=w))||O);var $,H,K,Y,X,J,Q,ee=(0,s.ls)("features/team-reserve/team-create")(I=class extends N().Component{render(){const{store:e}=this.props,t={[W.CHOOSE_TYPE]:N().createElement(U.Z,{onTeam:e.handleCreateTeam,onSolo:e.handleSolo}),[W.TEAM_CREATE]:N().createElement(Z.Z,{team:e.team,onSuccess:e.handleTeamCreated}),[W.TEAM_INVITES]:N().createElement(V.Z,{team:e.team,onSuccess:e.handleSuccess}),[W.SIGNIN]:N().createElement(T.l_,{destination:"sign-in"})}[e.state]||N().createElement(a.gb,null);return N().createElement(z.U_,null,N().createElement(i.Z,{speed:"medium",order:"drop-in-bottom"},t))}})||I,te=r(83843),re=r(25817),ne=r(97653),ie=r(59953),oe=r(88692),ae=r(88104),se=r(5063),le=r.n(se);function ce(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}$=(0,ae.oe)("features/cloud-signup-toast",{lifecycle:o.ri}),H=(0,o.RR)("features/analytics","features/toggles","features/context/token"),K=n.aD.bound,$(Y=H((ce((X=class{constructor(e,t,r){var n,i,o,a;n=this,i="showCloudSignupToast",a=this,(o=J)&&Object.defineProperty(n,i,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(a):void 0}),this.analytics=e,this.toggles=t,this.tokenStore=r}get isFreehandPlan(){return this.tokenStore.planKey===k._B.FREEHAND_FREE}async onInit(){this.showCloudSignupToast=await this.toggles.fetch(k.vU.CLOUD_SIGNUP_TOAST),this.analytics.trackLegacy("Auth.Experiment.Viewed",{experimentId:k.vU.CLOUD_SIGNUP_TOAST.ID,variantId:this.showCloudSignupToast})}}).prototype,"isFreehandPlan",[n.Fl],Object.getOwnPropertyDescriptor(X.prototype,"isFreehandPlan"),X.prototype),J=ce(X.prototype,"showCloudSignupToast",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ce(X.prototype,"onInit",[K],Object.getOwnPropertyDescriptor(X.prototype,"onInit"),X.prototype),Y=X))||Y);let pe=(0,ae.ei)("features/cloud-signup-toast")(Q=class extends N().Component{render(){const{store:e}=this.props,{isFreehandPlan:t,showCloudSignupToast:r}=e,n=document.getElementById("toastContainer");return t&&r&&n?(0,te.createPortal)(N().createElement(ue,{status:"default",placement:"top-right",dismissable:!0,withTimeout:!0,timeout:2e4},N().createElement(de,null,N().createElement(me,null,N().createElement(he,{src:le()})),N().createElement(ye,null,N().createElement(re.Z,{order:"label",color:"text-darker"},N().createElement(ne.Z,{bottom:"xxs"},"Looking for Invision Prototypes and DSM?"),N().createElement(ie.Z,{order:"primary",href:"https://projects.invisionapp.com/d/signup?origin=v7&ref=cloud_signup_redirect"},"Sign up here"))))),n):null}})||Q;const ue=(0,F.ZP)(oe.Z).withConfig({displayName:"CloudSignupToast__StyledToast",componentId:"sc-1bxgwxw-0"})(["> div{padding:16px 8px 12px 16px;}"]),de=F.ZP.div.withConfig({displayName:"CloudSignupToast__Wrapper",componentId:"sc-1bxgwxw-1"})(["display:flex;"]),me=F.ZP.div.withConfig({displayName:"CloudSignupToast__IconWrapper",componentId:"sc-1bxgwxw-2"})(["margin-right:8px;"]),he=F.ZP.img.withConfig({displayName:"CloudSignupToast__PrototypeIcon",componentId:"sc-1bxgwxw-3"})(["width:36px;height:36px;"]),ye=F.ZP.div.withConfig({displayName:"CloudSignupToast__LabelWrapper",componentId:"sc-1bxgwxw-4"})(["display:flex;flex-flow:column wrap;"]);var ge,be,fe,Ee,ve,Oe,we,Se,De,Ie,Ce,Te,Pe,Ae,_e=pe;function Ne(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Re(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const ke={CREATE_SESSION:Symbol("Sign Up: Create session"),CREATE_USER:Symbol("Sign Up: Create user"),DOMAIN_CONTROL:Symbol("Sign Up: Domain control"),SUCCESS:Symbol("Sign Up: Success"),TEAM_CREATE:Symbol("Sign Up: Create team")};ge=(0,s._V)("features/team-reserve/sign-up",{initialState:ke.CREATE_USER}),be=(0,o.RR)("features/context/cloud-ui","features/context/request","features/context/user","features/toggles","navigator"),fe=n.aD.bound,Ee=n.aD.bound,ve=n.aD.bound,Oe=n.aD.bound,we=n.aD.bound,Se=n.aD.bound,ge(De=be((Ce=Re((Ie=class{constructor(e,t,r,n,i){Ne(this,"flags",Ce,this),Ne(this,"user",Te,this),Ne(this,"redirectTo",Pe,this),this.cloud=e,this.request=t,this.userStore=r,this.toggles=n,this.nav=i}async onEnter(){const{redirectTo:e=""}=this.request,t=k.vU.FREE_HAND_ROLE_COLLECTION;this.flags.roleEntry=e.includes("docs/freehands")?await this.toggles.fetch(t):t.DEFAULT}async onInit({props:e}){this.notifyError=e.onError||(()=>{}),this.handleNotifySuccess=e.onSuccess||(()=>{}),this.handleNotifySignin=e.onSignin,this.handleRestart=e.onRestart}createUser(){this.transition(ke.CREATE_USER)}handleUserCreated({user:e}){this.user=e,this.transition(ke.CREATE_SESSION)}handleSessionCreated(){this.transition(ke.DOMAIN_CONTROL)}handleTeamCreate(){this.transition(ke.TEAM_CREATE)}}).prototype,"flags",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{roleEntry:null}}}),Te=Re(Ie.prototype,"user",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Pe=Re(Ie.prototype,"redirectTo",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re(Ie.prototype,"onEnter",[fe],Object.getOwnPropertyDescriptor(Ie.prototype,"onEnter"),Ie.prototype),Re(Ie.prototype,"onInit",[Ee],Object.getOwnPropertyDescriptor(Ie.prototype,"onInit"),Ie.prototype),Re(Ie.prototype,"createUser",[ve],Object.getOwnPropertyDescriptor(Ie.prototype,"createUser"),Ie.prototype),Re(Ie.prototype,"handleUserCreated",[Oe],Object.getOwnPropertyDescriptor(Ie.prototype,"handleUserCreated"),Ie.prototype),Re(Ie.prototype,"handleSessionCreated",[we],Object.getOwnPropertyDescriptor(Ie.prototype,"handleSessionCreated"),Ie.prototype),Re(Ie.prototype,"handleTeamCreate",[Se],Object.getOwnPropertyDescriptor(Ie.prototype,"handleTeamCreate"),Ie.prototype),De=Ie))||De);let ze=(0,s.ls)("features/team-reserve/sign-up")(Ae=class extends N().Component{render(){const{next:e,store:t}=this.props,r={[ke.CREATE_SESSION]:N().createElement(j.ro,{email:t.user.email,password:t.user.password,onSuccess:t.handleSessionCreated,onTransition:e}),[ke.DOMAIN_CONTROL]:N().createElement(je,null,N().createElement(L.Z,{onSkip:t.handleTeamCreate,onSwitchEmail:t.handleRestart,onTransition:e})),[ke.TEAM_CREATE]:N().createElement(M.Z,{stores:[t.userStore],loading:N().createElement(a.gb,null)},N().createElement(ee,{onSuccess:t.handleNotifySuccess,onTransition:e})),[ke.CREATE_USER]:N().createElement(N().Fragment,null,N().createElement(x.Z,{flags:t.flags,onSuccess:t.handleUserCreated,onSignin:t.handleNotifySignin,onTransition:e}),N().createElement(_e,null)),[ke.LOADING]:N().createElement(a.gb,null)}[t.state];return N().createElement(z.hA,{subdomain:"login"},N().createElement(i.Z,{speed:"medium",order:"drop-in-bottom"},r))}})||Ae;const je=F.ZP.div.withConfig({displayName:"SignUp__ResponsiveWrapper",componentId:"sc-1gxgpyv-0"})(["@media (max-width:600px){height:100vh;}"]);var xe,Le,Me,Fe,Ze,Ue,Ve,Ge,qe,We,Be,$e,He,Ke,Ye,Xe,Je,Qe,et,tt=ze,rt=r(9343),nt=r(50137),it=r.n(nt);function ot(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function at(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const st={LOADING:Symbol("Team Reserve: Loading"),REDIRECT:Symbol("Team Reserve: Redirect"),SIGNIN_REDIRECT:Symbol("Team Reserve: Sign In Redirect"),SIGNUP:Symbol("Team Reserve: Sign Up"),SUCCESS:Symbol("Team Reserve: Success"),TEAM_SELECT:Symbol("Team Reserve: Team Select")};xe=(0,s._V)("features/team-reserve",{initialState:st.LOADING}),Le=(0,o.RR)("features/context/config","features/context/response","features/context/request","features/context/token","features/context/user"),Me=(0,P.UO)({flow:"TeamReserve"}),Fe=n.aD.bound,Ze=n.aD.bound,Ue=n.aD.bound,Ve=n.aD.bound,Ge=n.aD.bound,qe=n.aD.bound,We=n.aD.bound,Be=n.aD.bound,$e=n.aD.bound,He=n.aD.bound,xe(Ke=Le(Ke=Me((Xe=at((Ye=class{constructor(e,t,r,n,i){ot(this,"profile",Xe,this),ot(this,"team",Je,this),ot(this,"redirectUrl",Qe,this),this.config=e,this.response=t,this.request=r,this.tokenStore=n,this.user=i}get shouldOnboard(){return!this.tokenStore.omitted.includes(l)}async onEnter(){return this.tokenStore.token&&this.tokenStore.type===d?this.request.get("entry")===u?this.handleSuccess():void await this.checkSession():this.transition(st.SIGNIN_REDIRECT)}async generateRedirectUrl(){await this.config.load();const e=new(it())("/",{},!0);return e.set("protocol",this.request.protocol),e.set("host",`${this.team.subdomain}.${this.config.get("APEX_DOMAIN")}`),e.set("pathname","/auth/team-reserve"),e.set("query",{...this.request.queryobject,entry:u}),e}async checkSession(){return await this.user.checkSession()?this.handleTeamSelect():this.handleSignUp()}handleError(){this.transition(st.ERROR)}handleRestart(){return this.transition(st.SIGNUP)}handleSignInRedirect(){this.transition(st.SIGNIN_REDIRECT)}handleSignUp(){this.transition(st.SIGNUP)}handleSuccess(){this.transition(st.SUCCESS)}async handleTeamCreated(e){this.team=e,this.redirectUrl=await this.generateRedirectUrl(),this.request.delete("token"),this.transition(st.REDIRECT)}handleTeamSelect(){this.transition(st.TEAM_SELECT)}}).prototype,"profile",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Je=at(Ye.prototype,"team",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Qe=at(Ye.prototype,"redirectUrl",[n.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at(Ye.prototype,"onEnter",[Fe],Object.getOwnPropertyDescriptor(Ye.prototype,"onEnter"),Ye.prototype),at(Ye.prototype,"generateRedirectUrl",[Ze],Object.getOwnPropertyDescriptor(Ye.prototype,"generateRedirectUrl"),Ye.prototype),at(Ye.prototype,"checkSession",[Ue],Object.getOwnPropertyDescriptor(Ye.prototype,"checkSession"),Ye.prototype),at(Ye.prototype,"handleError",[Ve],Object.getOwnPropertyDescriptor(Ye.prototype,"handleError"),Ye.prototype),at(Ye.prototype,"handleRestart",[Ge],Object.getOwnPropertyDescriptor(Ye.prototype,"handleRestart"),Ye.prototype),at(Ye.prototype,"handleSignInRedirect",[qe],Object.getOwnPropertyDescriptor(Ye.prototype,"handleSignInRedirect"),Ye.prototype),at(Ye.prototype,"handleSignUp",[We],Object.getOwnPropertyDescriptor(Ye.prototype,"handleSignUp"),Ye.prototype),at(Ye.prototype,"handleSuccess",[Be],Object.getOwnPropertyDescriptor(Ye.prototype,"handleSuccess"),Ye.prototype),at(Ye.prototype,"handleTeamCreated",[$e],Object.getOwnPropertyDescriptor(Ye.prototype,"handleTeamCreated"),Ye.prototype),at(Ye.prototype,"handleTeamSelect",[He],Object.getOwnPropertyDescriptor(Ye.prototype,"handleTeamSelect"),Ye.prototype),Ke=Ye))||Ke)||Ke);var lt=(0,s.ls)("features/team-reserve")(et=class extends N().Component{render(){const{store:e}=this.props,t={[st.ERROR]:N().createElement(a.jj,null),[st.LOADING]:N().createElement(C.wC.A,null,N().createElement(a.gb,null)),[st.SIGNUP]:N().createElement(A.A,null,(({next:t})=>N().createElement(N().Fragment,null,N().createElement(tt,{onError:e.handleError,onRestart:e.handleRestart,onSignin:e.handleSignInRedirect,onSuccess:e.handleTeamCreated,next:t}),N().createElement("div",{id:"toastContainer"})))),[st.SUCCESS]:N().createElement(R.Z,{onboard:e.shouldOnboard}),[st.SIGNIN_REDIRECT]:N().createElement(T.l_,{destination:"sign-in"}),[st.TEAM_SELECT]:N().createElement(rt.Z,null),[st.REDIRECT]:N().createElement(T.l_,{destination:e.redirectUrl})}[e.state];return N().createElement(i.Z,{speed:"medium",order:"drop-in-bottom"},t)}})||et},9343:function(e,t,r){"use strict";r.d(t,{c:function(){return Mt},Z:function(){return mr}});var n=r(16624),i=r.n(n),o=r(64267),a=r(5260),s=r(59549),l=r(32837),c=r(28511),p=r(90660),u=r(5013),d=r(47714),m=r(88821),h=r(76069),y=r(48743),g=r(81772),b=r(15847),f=r.n(b),E=r(77877),v=r(97674);class O extends i().Component{render(){const{onCreate:e=(()=>{})}=this.props;return i().createElement(i().Fragment,null,i().createElement(u.X6,{align:"center",heading:"You arenʼt a member of any team",subheading:"Itʼs your time to shine: create one of your own"}),i().createElement(g.Z,{top:"s"},i().createElement(E.Z,{horizontal:"center"},i().createElement(v.KM,{align:"center",onClick:e},"Create a team"))))}}var w,S,D,I,C,T,P,A,_,N=O,R=r(88104),k=r(26330),z=r(87985),j=r(25817),x=r(59953);function L(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function M(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const F=(0,l.kg)("team-select");w=(0,R.oe)("features/team-select/none/domain-control"),S=(0,s.RR)("features/context/user","features/http","navigator"),D=o.aD.bound,I=o.aD.bound,w(C=S((P=M((T=class{constructor(e,t,r){L(this,"emailSent",P,this),L(this,"loading",A,this),this.user=e,this.http=t,this.nav=r}handleSwitchEmail(){this.nav.goTo("get-started")}async handleSendEmail(){this.loading=!0;try{const e=this.user.isOauth?"oauth":void 0;await this.http.post("/auth-api/domain-control/send-team-list",{data:{action:e},errorKey:"global"}),this.emailSent=!0,F("Sending teams list email")}catch(e){F("Error sending team list",e)}(0,o.z)((()=>{this.loading=!1}))}}).prototype,"emailSent",[o.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=M(T.prototype,"loading",[o.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M(T.prototype,"handleSwitchEmail",[D],Object.getOwnPropertyDescriptor(T.prototype,"handleSwitchEmail"),T.prototype),M(T.prototype,"handleSendEmail",[I],Object.getOwnPropertyDescriptor(T.prototype,"handleSendEmail"),T.prototype),C=T))||C);var Z,U=(0,R.ei)("features/team-select/none/domain-control")(_=class extends i().Component{render(){const{store:e}=this.props;return i().createElement(i().Fragment,null,e.emailSent&&i().createElement(u.FN.V,{status:"success"},"We just emailed you a list of teams that you can join."),i().createElement(u.X6,{align:"center",heading:"You arenʼt a member of any team",subheading:"Your organization has created InVision teams for you to join, just click the button below and we'll email you a list of teams you can join."}),i().createElement(k.Z,{alignItems:"center",flexDirection:"column"},i().createElement(v.KM,{onClick:e.handleSendEmail,disabled:e.loading||e.emailSent},e.loading?i().createElement(z.Z,{color:"white"}):"Send list of teams"),i().createElement(g.Z,{top:"l"},i().createElement(j.Z,null,"To create a new team please use a"," ",i().createElement(x.Z,{element:"a",onClick:e.handleSwitchEmail},"personal email address")))))}})||_;var V=(0,h.Pi)(Z=class extends i().Component{render(){const{onCreate:e=(()=>{})}=this.props;return i().createElement(y.Z,{"data-component":"no-teams",order:"simple-fade-in",fillMode:"forwards"},i().createElement(g.Z,{bottom:"m"},i().createElement(f(),null)),i().createElement(p.g2,{onControlled:i().createElement(U,null),onUncontrolled:i().createElement(N,{onCreate:e})}))}})||Z,G=r(24302),q=r.n(G),W=r(87860),B=r(94002),$=r(66711),H=r(15082),K=r(47552);function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}class X extends i().PureComponent{render(){const{team:e,onClick:t,disabled:r,...n}=this.props;return i().createElement(J,Y({element:"div",disabled:r,"data-component":"team-card",align:"left",onClick:r?null:()=>t(e)},n),i().createElement(Q,{color:"dark",name:e.name,order:"team",src:e.logo}),i().createElement(re,null,i().createElement(te,{"data-component":"team-name",order:"subtitle",color:"text-darker"},e.name),i().createElement(te,{"data-component":"team-domain",order:"subtitle",size:"smallest",color:"info"},e.domain)),i().createElement($.Z,{disabled:!r,trigger:i().createElement(ee,{order:"tertiary",size:"smaller",element:"span",disabled:r},"Select")},i().createElement(j.Z,{color:"white",align:"center",size:"larger"},"This team is on a legacy",i().createElement("br",null),"version of InVision, and is not",i().createElement("br",null),"compatible with the app.")))}}const J=(0,W.ZP)(H.Z).withConfig({displayName:"Card__Team",componentId:"sc-103s96v-0"})(["width:100%;display:flex;align-items:center;padding:",";margin-bottom:",";box-sizing:border-box;cursor:pointer;text-decoration:none;"],(({theme:e})=>e.spacing.m),(({theme:e})=>e.spacing.s)),Q=(0,W.ZP)(K.Z).withConfig({displayName:"Card__TeamAvatar",componentId:"sc-103s96v-1"})(["margin-right:",";"],(({theme:e})=>e.spacing.s)),ee=(0,W.ZP)(B.Z).withConfig({displayName:"Card__TeamButton",componentId:"sc-103s96v-2"})(["margin-left:auto;"]),te=(0,W.ZP)(j.Z).withConfig({displayName:"Card__TruncatedText",componentId:"sc-103s96v-3"})(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),re=W.ZP.div.withConfig({displayName:"Card__TeamDetails",componentId:"sc-103s96v-4"})(["flex:1 1 auto;margin-right:20px;width:0;"]);var ne=X,ie=r(81281),oe=r(52845);const ae="https://support.invisionapp.com/hc/en-us/articles/360042204852";class se extends i().PureComponent{render(){return i().createElement(le,{"data-component":"migration-card",align:"left"},i().createElement(g.Z,{right:"m"},i().createElement(oe.Z,{fill:"info",size:"24"})),i().createElement(ce,null,i().createElement(j.Z,{"data-component":"migration-title",order:"subtitle",color:"text-darker"},"Your documents are on their way"),i().createElement(j.Z,{"data-component":"migration-body",order:"body",size:"smallest",color:"text-lighter"},"You're getting the newest version of InVision. Your documents will be unavailable until 4:00 AM EST."," ",i().createElement(x.Z,{target:"_blank",rel:"noreferrer",order:"primary",href:ae},"Learn more"))))}}const le=(0,W.ZP)(H.Z).withConfig({displayName:"MigrationCard__Migration",componentId:"sc-1quryit-0"})(["background-color:",";width:100%;display:flex;align-items:center;padding:",";margin-bottom:",";box-sizing:border-box;cursor:pointer;text-decoration:none;max-height:92px;"],(({theme:e})=>e.palette.structure.lightest),(({theme:e})=>e.spacing.m),(({theme:e})=>e.spacing.s)),ce=W.ZP.div.withConfig({displayName:"MigrationCard__MigrationDetails",componentId:"sc-1quryit-1"})(["flex:1 1 auto;width:0;"]);var pe,ue=se,de=r(16887);var me,he,ye,ge,be,fe,Ee,ve=(0,h.Pi)(pe=class extends i().Component{render(){const{disableV6Teams:e=!1,isMigrating:t=!1,onSelect:r=(()=>{}),teams:n}=this.props,o=n.map(((t,n)=>i().createElement(ne,{key:n,disabled:e&&"v6"===t.version,team:t,onClick:r})));return t&&o.push(i().createElement(de.Z,{key:o.length,flag:ie.vU.TEAM_SWITCHER_MIGRATION_UPDATES,untoggledComponent:null,toggledComponent:i().createElement(ue,null)})),o}})||pe;function Oe(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const we={LOADING:Symbol("Team List: Loading")};me=(0,a._V)("features/team-select/list",{initialState:we.LOADING}),he=(0,s.RR)("features/analytics","features/context/client","features/context/domain","features/context/request","features/context/user"),ye=o.aD.bound,ge=o.aD.bound,me(be=he((Oe((fe=class{constructor(e,t,r,n,i){this.analytics=e,this.client=t,this.domain=r,this.request=n,this.user=i}get isMigrating(){var e;return null===(e=this.user)||void 0===e?void 0:e.isMigrating}get isOauth(){var e;return null===(e=this.user)||void 0===e?void 0:e.isOauth}get teams(){var e,t;return null!==(e=null===(t=this.user)||void 0===t?void 0:t.teams)&&void 0!==e?e:[]}get canCreateTeams(){const{isEmbedded:e}=this.client,{isControlled:t}=this.domain,r=this.request.get("backTo"),n=q()(this.teams,{version:"v7"}),i=this.user.isOauth;return!e&&!r&&!t&&n&&!i}onEnter(){this.analytics.track(c.zW.TEAM_SELECTOR,c.p$.VIEWED,{teamCount:this.teams.length})}async selected(e){this.analytics.track(c.zW.TEAM_SELECTOR,c.p$.SELECTED,{teamDomain:e.domain,teamVersion:e.version})}}).prototype,"isMigrating",[o.Fl],Object.getOwnPropertyDescriptor(fe.prototype,"isMigrating"),fe.prototype),Oe(fe.prototype,"isOauth",[o.Fl],Object.getOwnPropertyDescriptor(fe.prototype,"isOauth"),fe.prototype),Oe(fe.prototype,"teams",[o.Fl],Object.getOwnPropertyDescriptor(fe.prototype,"teams"),fe.prototype),Oe(fe.prototype,"canCreateTeams",[o.Fl],Object.getOwnPropertyDescriptor(fe.prototype,"canCreateTeams"),fe.prototype),Oe(fe.prototype,"onEnter",[ye],Object.getOwnPropertyDescriptor(fe.prototype,"onEnter"),fe.prototype),Oe(fe.prototype,"selected",[ge],Object.getOwnPropertyDescriptor(fe.prototype,"selected"),fe.prototype),be=fe))||be);let Se=(0,a.ls)("features/team-select/list")(Ee=class extends i().Component{render(){const{store:e,onCreate:t,onSelect:r,onSwitch:n}=this.props;return i().createElement(p.ur,{stores:[e.domain]},i().createElement(De,null,e.canCreateTeams&&i().createElement(d.h4.O6,null,i().createElement(Ie,{order:"tertiary",size:"smaller",onClick:t},"Create team")),i().createElement(u.Yt,{name:e.user.name,src:e.user.avatar}),i().createElement(u.X6,{align:"center",heading:"Select a team to launch",subheading:i().createElement(j.Z,{"data-component":"switch-account"},"You're signed in as ",i().createElement("strong",null,e.user.email),"."," ",i().createElement(x.Z,{element:"a",onClick:n,role:"link","data-component":"switch-account-link"},"Switch"))}),e.teams&&i().createElement(ve,{disableV6Teams:e.isOauth,isMigrating:e.isMigrating,teams:e.teams,onSelect:t=>e.selected(t).then((()=>r(t)))})))}})||Ee;const De=W.ZP.div.withConfig({displayName:"Flow__ContentWrapper",componentId:"fc3i97-0"})(["margin:"," 0;"],(({theme:e})=>e.spacing.l)),Ie=(0,W.ZP)(B.Z).withConfig({displayName:"Flow__HeaderButton",componentId:"fc3i97-1"})(['[data-client-embedded="true"] &{display:none;}@media (max-width:',"px){display:none;}"],(({theme:e})=>e.breakpoints.m));var Ce=Se,Te=r(71133),Pe=r.n(Te);class Ae extends i().PureComponent{render(){return i().createElement(u.Q0.Ar,{heading:"Your account will be back better than ever",subheading:i().createElement(j.Z,null,"You're getting the newest version of InVision. Your account ",i().createElement("br",null)," will be unavailable until 4:00 AM EST."," ",i().createElement(x.Z,{order:"primary",href:ae},"Learn more."))},i().createElement(Pe(),null))}}var _e,Ne,Re,ke,ze,je,xe,Le=Ae,Me=r(20643),Fe=r.n(Me),Ze=r(50137),Ue=r.n(Ze),Ve=r(36866);function Ge(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}_e=(0,R.oe)("features/team-select/selected/v6/popout"),Ne=(0,s.RR)("features/context/client","features/context/request","features/context/user"),Re=o.aD.bound,_e(ke=Ne((je=Ge((ze=class{constructor(e,t,r){var n,i,o,a;n=this,i="redirectUrl",a=this,(o=je)&&Object.defineProperty(n,i,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(a):void 0}),this.client=e,this.request=t,this.user=r}onEnter({props:e}){const{team:t}=e,r=this.request.get("action"),n=this.request.get("redirectTo"),i=new(Ue());switch(i.set("host",Fe()(t,"domain")),i.set("query",this.client.isEmbedded?{embedded:1}:{}),r){case Ve.MD.POPOUT_CLAIMS:i.set("pathname","/d/login"),i.set("query",{...i.query,authAction:r,authClient:this.request.get("client"),origin:"v7",popout:1,redir:n,switchAccount:!0});break;case Ve.MD.POPOUT_COOKIES:i.set("pathname",n),i.set("query",{...i.query,status:"success"})}this.redirectUrl=i}}).prototype,"redirectUrl",[o.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ge(ze.prototype,"onEnter",[Re],Object.getOwnPropertyDescriptor(ze.prototype,"onEnter"),ze.prototype),ke=ze))||ke);var qe,We,Be,$e,He,Ke,Ye=(0,R.ei)("features/team-select/selected/v6/popout")(xe=class extends i().Component{render(){const{store:e}=this.props;return i().createElement(m.l_,{destination:e.redirectUrl})}})||xe;function Xe(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}qe=(0,R.oe)("features/team-select/selected/v6/post-message"),We=o.aD.bound,qe((He=Xe(($e=class{constructor(){var e,t,r,n;e=this,t="redirectUrl",n=this,(r=He)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}async onEnter({props:e}){const{team:t}=e,r=new(Ue());r.set("host",Fe()(t,"domain")),r.set("pathname","/d/main/webview"),this.redirectUrl=r}}).prototype,"redirectUrl",[o.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xe($e.prototype,"onEnter",[We],Object.getOwnPropertyDescriptor($e.prototype,"onEnter"),$e.prototype),Be=$e));var Je,Qe,et,tt,rt,nt,it,ot,at,st,lt=(0,R.ei)("features/team-select/selected/v6/post-message")(Ke=class extends i().Component{render(){const{store:e}=this.props;return i().createElement(m.l_,{destination:e.redirectUrl})}})||Ke;function ct(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function pt(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const ut=(0,l.kg)("team-select"),dt={LOADING:Symbol("Team Selected: Loading"),POPOUT:Symbol("Team Selected: v6 Popout"),POST_MESSAGE:Symbol("Team Selected: Post-message"),REDIRECT:Symbol("Team Selected: Redirecting")};Je=(0,a._V)("features/team-select/selected/v6",{initialState:dt.LOADING}),Qe=(0,s.RR)("features/analytics","features/context/client","features/context/request"),et=o.aD.bound,tt=o.aD.bound,rt=o.aD.bound,Je(nt=Qe((ot=pt((it=class{constructor(e,t,r){ct(this,"redirectUrl",ot,this),ct(this,"team",at,this),this.analytics=e,this.client=t,this.request=r}async onEnter({props:e}){const{team:t}=e;ut("(V6) Team selected: %o",t),this.team=t,await this.ensureAnalytics(),await this.ensureTeamUrl();return(this.request.get("action")||"").startsWith(Ve.MD.POPOUT)?this.transition(dt.POPOUT):this.client.isEmbedded?this.transition(dt.POST_MESSAGE):void this.transition(dt.REDIRECT)}async ensureAnalytics(){await this.analytics.flush()}async ensureTeamUrl(){var e,t;const r=new(Ue())(this.request.get("redirectTo")||"/d/main",{},!0),n=r.hash||this.request.get("redirectHash"),i=(null===(e=this.team)||void 0===e?void 0:e.host)||(null===(t=this.team)||void 0===t?void 0:t.domain),o=r.pathname,a=new(Ue())(o,!0);a.set("host",i),a.set("hash",n),a.set("query",{...r.query,origin:"v7"}),this.redirectUrl=a}}).prototype,"redirectUrl",[o.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at=pt(it.prototype,"team",[o.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pt(it.prototype,"onEnter",[et],Object.getOwnPropertyDescriptor(it.prototype,"onEnter"),it.prototype),pt(it.prototype,"ensureAnalytics",[tt],Object.getOwnPropertyDescriptor(it.prototype,"ensureAnalytics"),it.prototype),pt(it.prototype,"ensureTeamUrl",[rt],Object.getOwnPropertyDescriptor(it.prototype,"ensureTeamUrl"),it.prototype),nt=it))||nt);var mt,ht,yt,gt,bt,ft,Et,vt,Ot=(0,a.ls)("features/team-select/selected/v6")(st=class extends i().Component{render(){const{store:e}=this.props;return{[dt.POPOUT]:i().createElement(Ye,{team:e.team}),[dt.POST_MESSAGE]:i().createElement(lt,{team:e.team}),[dt.REDIRECT]:i().createElement(m.l_,{destination:e.redirectUrl})}[e.state]||i().createElement(u.gb,null)}})||st;function wt(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const St=(0,l.kg)("team-select"),Dt={LOADING:Symbol("Team Selected: Loading"),REDIRECT:Symbol("Team Selected: Redirecting")};mt=(0,a._V)("features/team-select/selected/v7",{initialState:Dt.LOADING}),ht=(0,s.RR)("features/analytics","features/context/client","features/context/request","features/context/user","features/http","navigator"),yt=o.aD.bound,gt=o.aD.bound,mt(bt=ht((Et=wt((ft=class{constructor(e,t,r,n,i,o){var a,s,l,c;a=this,s="redirectUrl",c=this,(l=Et)&&Object.defineProperty(a,s,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(c):void 0}),this.analytics=e,this.client=t,this.request=r,this.user=n,this.http=i,this.nav=o}async onEnter({props:e}){const{team:t}=e;St("(V7) Team selected: %O",(0,o.ZN)(t));const r=Fe()(this.request,"location.href"),n=this.request.queryobject;n.entry||(n.entry=Ve.pd.AUTHENTICATE);const i=new(Ue())(r,!0);i.set("host",Fe()(t,"host")||Fe()(t,"domain")||"login"),i.set("pathname","/auth/sign-in"),i.set("query",n),this.redirectUrl=i,await this.ensureAnalytics(),this.transition(Dt.REDIRECT)}async ensureAnalytics(){await this.analytics.flush()}}).prototype,"redirectUrl",[o.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wt(ft.prototype,"onEnter",[yt],Object.getOwnPropertyDescriptor(ft.prototype,"onEnter"),ft.prototype),wt(ft.prototype,"ensureAnalytics",[gt],Object.getOwnPropertyDescriptor(ft.prototype,"ensureAnalytics"),ft.prototype),bt=ft))||bt);var It,Ct,Tt,Pt,At,_t=(0,a.ls)("features/team-select/selected/v7")(vt=class extends i().Component{render(){const{store:e}=this.props;return{[Dt.REDIRECT]:i().createElement(m.l_,{destination:e.redirectUrl})}[e.state]||i().createElement(u.gb,null)}})||vt;const Nt={LOADING:Symbol("Team Selected: Loading"),V6_TEAM:Symbol("Team Selected: V6"),V7_TEAM:Symbol("Team Selected: V7")};It=(0,a._V)("features/team-select/selected",{initialState:Nt.LOADING}),Ct=o.aD.bound,It((Rt=(Pt=class{onEnter({props:e}){const{team:t}=e;"v6"===Fe()(t,"version")?this.transition(Nt.V6_TEAM):this.transition(Nt.V7_TEAM)}}).prototype,kt="onEnter",zt=[Ct],jt=Object.getOwnPropertyDescriptor(Pt.prototype,"onEnter"),xt=Pt.prototype,Lt={},Object.keys(jt).forEach((function(e){Lt[e]=jt[e]})),Lt.enumerable=!!Lt.enumerable,Lt.configurable=!!Lt.configurable,("value"in Lt||Lt.initializer)&&(Lt.writable=!0),Lt=zt.slice().reverse().reduce((function(e,t){return t(Rt,kt,e)||e}),Lt),xt&&void 0!==Lt.initializer&&(Lt.value=Lt.initializer?Lt.initializer.call(xt):void 0,Lt.initializer=void 0),void 0===Lt.initializer&&(Object.defineProperty(Rt,kt,Lt),Lt=null),Tt=Pt));var Rt,kt,zt,jt,xt,Lt;var Mt=(0,a.ls)("features/team-select/selected")(At=class extends i().Component{render(){const{store:e,team:t}=this.props;return{[Nt.V6_TEAM]:i().createElement(Ot,{team:t}),[Nt.V7_TEAM]:i().createElement(_t,{team:t})}[e.state]||i().createElement(u.gb,null)}})||At,Ft=r(97105),Zt=r.n(Ft);class Ut extends i().Component{render(){const{handleRefresh:e}=this.props;return i().createElement(Vt,{"data-component":"no-teams",order:"simple-fade-in",fillMode:"forwards"},i().createElement(g.Z,{bottom:"m"},i().createElement(Zt(),null)),i().createElement(u.X6,{align:"center",heading:"Sorry about that!",subheading:i().createElement(j.Z,null,"We're having trouble loading this section.",i().createElement("br",null),"Try ",i().createElement(x.Z,{role:"link",element:"a",onClick:e},"refreshing")," the page.")}))}}const Vt=(0,W.ZP)(y.Z).withConfig({displayName:"LoadingFailed__AnimatedPanel",componentId:"sc-5jfkbu-0"})(["width:100%;"]);var Gt,qt=Ut,Wt=r(44527);let Bt=(0,s.f3)("features/context/user")(Gt=(0,h.Pi)(Gt=class extends i().Component{get user(){return this.props["features/context/user"]}render(){const{onSwitch:e,onCreate:t}=this.props;return i().createElement(i().Fragment,null,i().createElement(d.h4.SK,null),i().createElement(Kt,null,i().createElement(Wt.$0,null,i().createElement(k.Z,{alignItems:"center",justifyContent:"center"},i().createElement(g.Z,{horizontal:"xs"},i().createElement($t,{name:this.user.name,src:this.user.avatar,color:"dark",order:"user",size:"larger"})))),i().createElement(Wt.$0,null,i().createElement(Ht,{align:"center",heading:"This app is not compatible with your teams"})),i().createElement(Wt.$0,null,i().createElement(j.Z,{order:"body",size:"larger",prose:!0},"All the teams associated with this email address are on one of our legacy plans and not compatible with this app.")),i().createElement(p.g2,{onControlled:i().createElement(i().Fragment,null,i().createElement(Wt.$0,null,i().createElement(j.Z,{order:"body",size:"larger",prose:!0},"Additionally, your organization has restricted the creation of new teams with your email address. To use this app, please use a different email.")),i().createElement(Wt.$0,null,i().createElement(B.Z,{size:"larger",onClick:e},"Switch email"))),onUncontrolled:i().createElement(i().Fragment,null,i().createElement(Wt.$0,null,i().createElement(j.Z,{order:"body",size:"larger",prose:!0},"To use this app, please switch to a different email address or create a new team.")),i().createElement(Wt.$0,null,i().createElement(B.Z,{size:"larger",onClick:t},"Create new team")))})),i().createElement(u.$_.VY,null,i().createElement(j.Z,{"data-component":"switch-account"},"You're signed in as ",i().createElement("strong",null,this.user.email),"."," ",i().createElement(x.Z,{element:"a",onClick:e,role:"link","data-component":"switch-account-link"},"Switch"))))}})||Gt)||Gt;const $t=(0,W.ZP)(K.Z).withConfig({displayName:"Incompatible__UserImage",componentId:"wvagu8-0"})(["height:40px;"]),Ht=(0,W.ZP)(u.X6).withConfig({displayName:"Incompatible__StyledHeading",componentId:"wvagu8-1"})(["margin:0 50px;"]),Kt=W.ZP.div.withConfig({displayName:"Incompatible__Content",componentId:"wvagu8-2"})(["max-width:","px;margin:0 auto;text-align:center;"],(({theme:e})=>e.breakpoints.s));var Yt,Xt,Jt,Qt,er,tr,rr,nr,ir,or,ar,sr,lr,cr=Bt;function pr(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const ur=(0,l.kg)("team-select"),dr={INCOMPATIBLE:Symbol("Team Select: Incompatible"),LOADING:Symbol("Team Select: Loading"),LOADING_FAILED:Symbol("Team Select: Loading Failed"),MIGRATION_BLOCKER:Symbol("Team Select: Migration Blocker"),MULTIPLE_TEAMS:Symbol("Team Select: Multiple"),NO_TEAMS:Symbol("Team Select: None"),SIGN_IN:Symbol("Team Select: Sign-in"),TEAM_CREATE:Symbol("Team Select: Create"),TEAM_SELECTED:Symbol("Team Select: Selected")};Yt=(0,a._V)("features/team-select",{initialState:dr.LOADING}),Xt=(0,s.RR)("features/context/request","features/context/team","features/context/user","features/context/v6","history"),Jt=(0,c.UO)({flow:"GlobalSignIn"}),Qt=o.aD.bound,er=o.aD.bound,tr=o.aD.bound,rr=o.aD.bound,nr=o.aD.bound,ir=o.aD.bound,Yt(or=Xt(or=Jt((pr((ar=class{constructor(e,t,r,n,i){!function(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}(this,"selectedTeam",sr,this),this.request=e,this.team=t,this.user=r,this.v6=n,this.history=i}get isDialog(){return this.request.get("backTo")}get teams(){return this.user.teams}async onEnter(){this.loadAllTeams()}async loadAllTeams(){try{if(this.transition(dr.LOADING),await this.user.loadTeams(),this.user.teamsErrors.length)throw new Error(this.user.teamsErrors.join("\n\n"));if(this.user.isV6Only&&this.user.isOauth)return this.transition(dr.INCOMPATIBLE);if(this.user.isV6&&this.user.credentials&&await this.v6.authenticate(this.user.credentials),!this.teams.length&&this.user.isMigrating)return this.transition(dr.MIGRATION_BLOCKER);switch(this.teams.length){case 0:return this.transition(dr.NO_TEAMS);case 1:return this.handleSelectTeam(this.teams[0]);default:return this.transition(dr.MULTIPLE_TEAMS)}}catch(e){ur("Unable to load teams: %O",e),this.transition(dr.LOADING_FAILED)}}handleSelectTeam(e){this.selectedTeam=e,this.transition(dr.TEAM_SELECTED)}async close(){this.history.goBack()}handleCreateTeam(){this.transition(dr.TEAM_CREATE)}switchAccount(){this.transition(dr.SIGN_IN)}}).prototype,"isDialog",[o.Fl],Object.getOwnPropertyDescriptor(ar.prototype,"isDialog"),ar.prototype),pr(ar.prototype,"teams",[o.Fl],Object.getOwnPropertyDescriptor(ar.prototype,"teams"),ar.prototype),sr=pr(ar.prototype,"selectedTeam",[o.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pr(ar.prototype,"onEnter",[Qt],Object.getOwnPropertyDescriptor(ar.prototype,"onEnter"),ar.prototype),pr(ar.prototype,"loadAllTeams",[er],Object.getOwnPropertyDescriptor(ar.prototype,"loadAllTeams"),ar.prototype),pr(ar.prototype,"handleSelectTeam",[tr],Object.getOwnPropertyDescriptor(ar.prototype,"handleSelectTeam"),ar.prototype),pr(ar.prototype,"close",[rr],Object.getOwnPropertyDescriptor(ar.prototype,"close"),ar.prototype),pr(ar.prototype,"handleCreateTeam",[nr],Object.getOwnPropertyDescriptor(ar.prototype,"handleCreateTeam"),ar.prototype),pr(ar.prototype,"switchAccount",[ir],Object.getOwnPropertyDescriptor(ar.prototype,"switchAccount"),ar.prototype),or=ar))||or)||or);var mr=(0,a.ls)("features/team-select")(lr=class extends i().Component{render(){const{store:e,onClose:t,onSwitch:r=(()=>e.switchAccount())}=this.props,n={[dr.INCOMPATIBLE]:i().createElement(cr,{onCreate:e.handleCreateTeam,onSwitch:r}),[dr.NO_TEAMS]:i().createElement(V,{onCreate:e.handleCreateTeam}),[dr.MIGRATION_BLOCKER]:i().createElement(Le,null),[dr.LOADING_FAILED]:i().createElement(qt,{handleRefresh:e.loadAllTeams}),[dr.MULTIPLE_TEAMS]:i().createElement(Ce,{teams:e.teams,onCreate:e.handleCreateTeam,onSelect:e.handleSelectTeam,onSwitch:r}),[dr.SIGN_IN]:i().createElement(m.l_,{destination:"sign-in"}),[dr.TEAM_SELECTED]:i().createElement(Mt,{team:e.selectedTeam}),[dr.TEAM_CREATE]:i().createElement(m.l_,{destination:"team-create"})}[e.state]||i().createElement(u.gb,null);return i().createElement(p.U_,null,i().createElement(d.wC.A,{"data-component":"team-select"},i().createElement(u.FN.A,{"data-component":"team-select-toast"}),i().createElement(d.h4.SK,{withBackground:!1}),e.isDialog&&i().createElement(d.h4.x8,{onClick:t||e.close}),i().createElement("div",null,n)))}})||lr},16887:function(e,t,r){"use strict";var n,i,o,a,s=r(33626),l=r.n(s),c=r(16624),p=r.n(c),u=r(64267),d=r(76069),m=r(2202),h=r(59549),y=r(32837),g=r(28154);const b=(0,y.kg)("flags"),f=e=>e?l()(e)?e:()=>e:()=>null;let E=(0,h.f3)("features/analytics","features/toggles")(n=(0,d.Pi)((a=class extends p().Component{constructor(...e){var t,r,n,i;super(...e),t=this,r="valuePromise",i=this,(n=o)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}get analytics(){return this.props["features/analytics"]}get toggles(){return this.props["features/toggles"]}componentDidMount(){const{flag:e}=this.props;this.valuePromise=(0,m.p4)(this.toggles.fetch(e)),this.valuePromise.then((t=>{if(e&&e.TYPE===g.s.EXPERIMENT){const r=e.NAME;this.analytics.trackLegacy("Auth.Experiment.Viewed",{experimentId:r,variantId:t})}}))}render(){const{flag:e,variation:t=!0}=this.props,r=f(this.props.toggledComponent||this.props.children),n=f(this.props.untoggledComponent);return this.valuePromise?this.valuePromise.case({pending:()=>null,rejected:t=>{b("Unable to fetch flag: %O",t);return this.toggles.get(e)?r():n()},fulfilled:e=>e===t?r():n()}):null}},v=(i=a).prototype,O="valuePromise",w=[u.LO],S={configurable:!0,enumerable:!0,writable:!0,initializer:null},I={},Object.keys(S).forEach((function(e){I[e]=S[e]})),I.enumerable=!!I.enumerable,I.configurable=!!I.configurable,("value"in I||I.initializer)&&(I.writable=!0),I=w.slice().reverse().reduce((function(e,t){return t(v,O,e)||e}),I),D&&void 0!==I.initializer&&(I.value=I.initializer?I.initializer.call(D):void 0,I.initializer=void 0),void 0===I.initializer&&(Object.defineProperty(v,O,I),I=null),o=I,n=i))||n)||n;var v,O,w,S,D,I;t.Z=E},8038:function(e,t,r){"use strict";r.d(t,{A:function(){return $},Z:function(){return W}});var n,i,o,a,s,l,c,p,u,d,m,h,y,g,b,f,E,v,O=r(64267),w=r(88104),S=r(32837),D=r(59549),I=r(28511),C=r(81281);function T(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function P(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const A=(0,S.kg)("features:verify-email"),_={INVALID:Symbol("INVALID"),RATE_LIMITED:Symbol("RATE_LIMITED"),RESENT:Symbol("RESENT"),SENT:Symbol("SENT"),WAITING:Symbol("WAITING")};n=(0,w.oe)("features/verify-email"),i=(0,D.RR)("features/http","features/analytics"),o=O.aD.bound,a=O.aD.bound,s=O.aD.bound,l=O.aD.bound,c=O.aD.bound,p=O.aD.bound,u=O.aD.bound,d=O.aD.bound,m=O.aD.bound,h=O.aD.bound,n(y=i((b=P((g=class{constructor(e,t){T(this,"email",b,this),T(this,"token",f,this),T(this,"codeSent",E,this),T(this,"emailState",v,this),this.http=e,this.analytics=t}onInit({props:e}){this.email=e.email,this.notifySuccess=e.onSuccess||(()=>{}),this.onSend=e.onSend||this.defaultOnSend,this.onVerify=e.onVerify||this.defaultOnVerify}onEnter(){this.analytics.track(I.zW.VERIFY_EMAIL,I.p$.VIEWED),this.sendCode()}async defaultOnSend({email:e}){await this.http.post("/auth-api/emails/verification",{data:{email:e},errorKey:"global",errorMap:{429:()=>({data:{errorCode:C.SM.TOO_MANY_REQUESTS,message:null}})}})}async defaultOnVerify({email:e,value:t}){const r=await this.http.post("/auth-api/emails/verification/check",{data:{code:t,email:e},errorMap:{429:()=>({data:{errorCode:C.SM.TOO_MANY_REQUESTS,message:null}})}}).then((e=>e.data.token));if(!r)throw Object.assign(new Error,{errorCode:C.SM.MFA_INVALID_CODE});return r}async sendCode(){this.token=null;try{A("Sending email: %O",this.email),await this.onSend({email:this.email}),this.updateEmailState(this.codeSent?_.RESENT:_.SENT)}catch(e){const t=(e=>{var t,r;return(null==e?void 0:e.errorCode)||(null==e||null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.errorCode)||C.SM.UNEXPECTED})(e);A("Error sending email: %O",t),this.updateEmailState(t===C.SM.TOO_MANY_REQUESTS?_.RATE_LIMITED:_.SENT)}(0,O.z)((()=>{this.codeSent=!0}))}async onSubmit(){setTimeout((()=>{this.notifySuccess({email:this.email,token:this.token})}),800)}async validate(e){try{this.analytics.track(I.zW.VERIFY_EMAIL,I.p$.SUBMITTED);const t=e.get("code"),r=await this.onVerify({email:this.email,value:t});return(0,O.z)((()=>{this.token=r})),this.analytics.track(I.zW.VERIFY_EMAIL,I.p$.SUCCEEDED),this.updateEmailState(_.SENT),!0}catch(e){var t,r;const n=(null==e?void 0:e.errorCode)||(null==e||null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.errorCode)||C.SM.UNEXPECTED;return A("Error trying to validate code: %O",n),this.analytics.track(I.zW.VERIFY_EMAIL,I.p$.FAILED,{errorCode:n}),this.updateEmailState(n===C.SM.TOO_MANY_REQUESTS?_.RATE_LIMITED:_.INVALID),!1}}actIn(e,t){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{(0,O.z)(e)}),t)}reset(){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}updateEmailState(e){switch(this.emailState=e,e){case _.SENT:case _.RESENT:case _.INVALID:this.actIn((()=>{this.emailState=_.WAITING}),5e3);break;case _.RATE_LIMITED:this.actIn((()=>{this.emailState=_.WAITING}),54e6)}}}).prototype,"email",[O.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=P(g.prototype,"token",[O.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=P(g.prototype,"codeSent",[O.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=P(g.prototype,"emailState",[O.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P(g.prototype,"onInit",[o],Object.getOwnPropertyDescriptor(g.prototype,"onInit"),g.prototype),P(g.prototype,"onEnter",[a],Object.getOwnPropertyDescriptor(g.prototype,"onEnter"),g.prototype),P(g.prototype,"defaultOnSend",[s],Object.getOwnPropertyDescriptor(g.prototype,"defaultOnSend"),g.prototype),P(g.prototype,"defaultOnVerify",[l],Object.getOwnPropertyDescriptor(g.prototype,"defaultOnVerify"),g.prototype),P(g.prototype,"sendCode",[c],Object.getOwnPropertyDescriptor(g.prototype,"sendCode"),g.prototype),P(g.prototype,"onSubmit",[p],Object.getOwnPropertyDescriptor(g.prototype,"onSubmit"),g.prototype),P(g.prototype,"validate",[u],Object.getOwnPropertyDescriptor(g.prototype,"validate"),g.prototype),P(g.prototype,"actIn",[d],Object.getOwnPropertyDescriptor(g.prototype,"actIn"),g.prototype),P(g.prototype,"reset",[m],Object.getOwnPropertyDescriptor(g.prototype,"reset"),g.prototype),P(g.prototype,"updateEmailState",[h],Object.getOwnPropertyDescriptor(g.prototype,"updateEmailState"),g.prototype),y=g))||y);var N,R=r(16624),k=r.n(R),z=r(59953),j=r(48743),x=r(81772),L=r(25817),M=r(87860),F=r(20314),Z=r(44527);let U=(0,w.ei)("features/verify-email")(N=class extends k().Component{componentWillUnmount(){const{store:e}=this.props;e.reset()}render(){const{align:e,store:t}=this.props,r={[_.WAITING]:k().createElement(V,null,"Make sure to keep this window open while you check your inbox.  ",k().createElement(z.Z,{element:"a",order:"primary",onClick:()=>t.sendCode()},"Resend code")),[_.RESENT]:k().createElement(V,null,"Your code has been resent! Check your spam folder if you still don’t see it."),[_.INVALID]:k().createElement(V,{color:"danger"},F.cW),[_.RATE_LIMITED]:k().createElement(V,null,F.Jm)}[t.emailState]||null;return k().createElement(j.Z,{speed:"medium",order:"drop-in-bottom"},k().createElement(Z.l0,{align:e,submit:t.onSubmit,autoSubmit:!0},k().createElement(x.Z,{vertical:"l"},k().createElement(Z.ST,{name:"code",validator:{fn:t.validate,remote:!0}})),k().createElement(x.Z,{vertical:"s"},k().createElement(G,{"data-component":"verify-email-message",show:r},r))))}})||N;const V=({color:e,children:t})=>k().createElement(j.Z,{order:"drop-in-bottom",speed:"medium"},k().createElement(L.Z,{order:"body",size:"smaller",color:e},t)),G=M.ZP.div.withConfig({displayName:"Flow__FooterWrapper",componentId:"sc-1yi4kvs-0"})(["position:relative;height:2.5em;visibility:",""],(({show:e})=>e?"visible":"hidden"));var q,W=U,B=r(5013);var $=(0,w.ei)("features/verify-email/layout",{storeStrategy:w.i1.cS})(q=class extends k().Component{render(){const{align:e,email:t,onSend:r=(()=>{}),onSuccess:n=(()=>{}),onVerify:i=(()=>{})}=this.props;return k().createElement(j.Z,{speed:"medium",order:"drop-in-bottom"},k().createElement(B.X6,{align:e,heading:"Verify your email address",subheading:k().createElement(L.Z,{order:"body",prose:!0},"We just emailed a six-digit code to ",k().createElement("b",null,t),".",k().createElement("br",null),"Keep this window open while you check your inbox, then enter the code below.")}),k().createElement(W,{align:e,email:t,onSend:r,onSuccess:n,onVerify:i}))}})||q},76262:function(e,t,r){"use strict";var n,i=r(16624),o=r.n(i),a=r(3074),s=r.n(a),l=r(25817),c=r(59953),p=r(48743),u=r(87860),d=r(20314),m=r(5013),h=r(86953),y=r(58469),g=r(69529),b=r(5260),f=r(44527);let E=(0,b.ls)("features/verify-email-DEPRECATED")(n=class extends o().Component{componentDidMount(){const{store:e,email:t}=this.props;e.view({email:t})}render(){const{store:e,align:t="center",email:r,onError:n,onSuccess:i}=this.props,a=o().createElement(l.Z,{order:"body",align:t},"We just emailed a six-digit code to ",o().createElement("b",null,r),".",o().createElement("br",null),"Keep this window open while you check your inbox, then enter the code below.");return o().createElement(p.Z,{speed:"medium",order:"drop-in-bottom"},o().createElement(m.X6,{heading:"Verify your email address",subheading:a,align:t}),o().createElement(f.l0,{className:"Bizible-Exclude"},o().createElement(y.w,{autoFocus:!0,hideError:e.state!==g.e.INVALID,validateCode:e.validate,onError:()=>e.onError(n),onSuccess:()=>e.onSuccess(i),onChange:e.handleReset})),(n=>{const i=(n=>{switch(n){case g.e.WAITING:return o().createElement(l.Z,{order:"body",size:"smaller",align:t},o().createElement("span",null,"Still waiting on that email?  ",o().createElement(c.Z,{onClick:()=>e.sendCode({email:r})},"Resend code")));case g.e.RESENT:return o().createElement(l.Z,{order:"body",size:"smaller",align:t},o().createElement("span",null,"Your code has been resent! Check your spam folder if you still don’t see it."));case g.e.INVALID:return o().createElement(l.Z,{order:"body",size:"smaller",color:"danger-darker",align:t},d.cW);case g.e.RATE_LIMITED:return o().createElement(l.Z,{order:"body",size:"smaller",align:t},d.Jm)}})(n);return o().createElement(v,{"data-component":"verify-email-message"},o().createElement(h.Z,{isVisible:!!i},i))})(e.state))}})||n;const v=u.ZP.div.withConfig({displayName:"Form__FooterWrapper",componentId:"sfuqg1-0"})(["position:relative;"]);E.propTypes={sendOnMount:s().bool,user:s().shape({email:s().string}),store:s().shape({status:s().string,codeSendCount:s().number,codeSendLimitReached:s().bool,state:s().string,sendCode:s().func,validate:s().func,onFailure:s().func,onSuccess:s().func,reset:s().func}),isClosing:s().bool,onClose:s().func},t.Z=E},69529:function(e,t,r){"use strict";r.d(t,{e:function(){return P}});var n,i,o,a,s,l,c,p,u,d,m,h,y,g,b,f=r(19157),E=r.n(f),v=r(64267),O=r(28511),w=r(5260),S=r(32837),D=r(59549);function I(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function C(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const T=(0,S.kg)("features:verify-email"),P={DEFAULT:Symbol("DEFAULT"),INVALID:Symbol("INVALID"),VALID:Symbol("VALID"),VALIDATING:Symbol("VALIDATING"),RATE_LIMITED:Symbol("RATE_LIMITED"),SENT:Symbol("SENT"),RESENT:Symbol("RESENT"),WAITING:Symbol("WAITING")};n=(0,w._V)("features/verify-email-DEPRECATED",{initialState:P.DEFAULT}),i=(0,D.RR)("features/http","features/analytics"),o=v.aD.bound,a=v.aD.bound,s=v.aD.bound,l=v.aD.bound,c=v.aD.bound,p=v.aD.bound,n(u=i((m=C((d=class{constructor(e,t){I(this,"email",m,this),I(this,"token",h,this),I(this,"codeSent",y,this),I(this,"onSuccess",g,this),I(this,"onError",b,this),this.http=e,this.analytics=t}async view({email:e}){this.codeSent||this.sendCode({email:e}),this.analytics.track(O.zW.VERIFY_EMAIL,O.p$.VIEWED)}async sendCode({email:e}){this.email=e,this.token=null,T("Sending email: %O",this.email);const t=await this.http.post("/auth-api/emails/verification",{data:{email:e},errorKey:"global",errorHandler:e=>e.response});T("Email sent: (%o)",t.status);const r=429===t.status?P.RATE_LIMITED:this.codeSent?P.RESENT:P.SENT;this.codeSent=!0,this.transition(r)}async validate(e,t=E()){this.transition(P.VALIDATING);const r=await this.http.post("/auth-api/emails/verification/check",{data:{code:e,email:this.email},errorHandler:e=>e.response}).then((e=>{switch(e.status){case 204:case 200:return(0,v.z)((()=>{this.token=e.data.token})),this.transition(P.VALID),!0;case 429:return this.transition(P.RATE_LIMITED),!1;default:return this.transition(P.INVALID),!1}}));this.analytics.track(O.zW.VERIFY_EMAIL,O.p$.SUBMITTED,{success:r}),this.analytics.track(O.zW.VERIFY_EMAIL,O.p$[r?"SUCCEEDED":"FAILED"]),t(r)}actIn(e,t){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{(0,v.z)(e)}),t)}handleReset(){this.codeResent=!1,this.timeout=void 0}onTransition(e,t){switch(t){case P.SENT:case P.RESENT:this.actIn((()=>{this.transition(P.WAITING)}),5e3);break;case P.INVALID:this.actIn((()=>{this.handleReset(),this.transition(P.WAITING)}),5e3);break;case P.RATE_LIMITED:this.actIn((()=>{this.handleReset(),this.transition(P.WAITING)}),54e6)}}}).prototype,"email",[v.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=C(d.prototype,"token",[v.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=C(d.prototype,"codeSent",[v.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C(d.prototype,"view",[o],Object.getOwnPropertyDescriptor(d.prototype,"view"),d.prototype),C(d.prototype,"sendCode",[a],Object.getOwnPropertyDescriptor(d.prototype,"sendCode"),d.prototype),C(d.prototype,"validate",[s],Object.getOwnPropertyDescriptor(d.prototype,"validate"),d.prototype),g=C(d.prototype,"onSuccess",[v.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e=E())=>{const t={email:this.email,token:this.token};this.actIn((()=>{e(t),this.handleReset()}),1e3)}}}),b=C(d.prototype,"onError",[v.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e=E())=>{e()}}}),C(d.prototype,"actIn",[l],Object.getOwnPropertyDescriptor(d.prototype,"actIn"),d.prototype),C(d.prototype,"handleReset",[c],Object.getOwnPropertyDescriptor(d.prototype,"handleReset"),d.prototype),C(d.prototype,"onTransition",[p],Object.getOwnPropertyDescriptor(d.prototype,"onTransition"),d.prototype),u=d))||u)},44527:function(e,t,r){"use strict";r.d(t,{XZ:function(){return f.XZ},GT:function(){return f.GT},l0:function(){return h},ro:function(){return f.ro},KM:function(){return E.KM},rL:function(){return f.rL},$0:function(){return b},ST:function(){return E.ST},Ph:function(){return f.Ph},k4:function(){return f.k4},ZW:function(){return E.ZW},v7:function(){return E.v7},xv:function(){return f.xv},Kx:function(){return f.Kx},ZD:function(){return E.ZD},An:function(){return E.An},ZP:function(){return h}});var n=r(16624),i=r.n(n),o=r(87860),a=r(33626),s=r.n(a),l=r(80733),c=r(59407),p=r(1177);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}class d extends i().Component{render(){const{children:e,align:t="left",...r}=this.props;return i().createElement(m,u({align:t},r),(t=>i().createElement(i().Fragment,null,i().createElement(p.Z,null),i().createElement(c.HK,{requestKey:"global"}),s()(e)?e(t):e)))}}const m=(0,o.ZP)(l.l0).withConfig({displayName:"Layout__AlignedForm",componentId:"sebrm6-0"})(["text-align:",";"],(({align:e})=>e));var h=d,y=r(81772);const g=o.ZP.div.withConfig({displayName:"Section__StyledFormSection",componentId:"sc-163bkb2-0"})(["margin:"," 0;"],(({theme:e})=>e.spacing.l));var b=({children:e})=>i().createElement(g,null,i().createElement(y.Z,{vertical:"xss"},e)),f=r(41899),E=r(97674)},97674:function(e,t,r){"use strict";r.d(t,{KM:function(){return c},ST:function(){return ce},ZW:function(){return Ie},v7:function(){return Ne},ZD:function(){return je},An:function(){return Fe}});var n=r(16624),i=r.n(n),o=r(94002);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}class s extends i().Component{render(){const{children:e,...t}=this.props;return i().createElement(o.Z,a({"data-component":"primary-button"},t,{size:"larger"}),e)}}var l,c=s,p=r(82641),u=r.n(p),d=r(24302),m=r.n(d),h=r(64267),y=r(76069),g=r(26330),b=r(29024),f=r(87860),E=r(88104),v=r(81772),O=r(25817);let w=(0,y.Pi)(l=class extends i().Component{render(){const{className:e,children:t,segmentLength:r=3}=this.props,n=[];let o=0,a=[];const s=()=>{n.push(i().createElement(D,{key:`segment-${o}`,className:e},a)),a=[],o++};return i().Children.forEach(t,((e,t)=>{const l=Math.floor(t/r);o!==l&&(s(),n.push(i().createElement(S,{key:`separator-${o}`}))),a.push(e)})),a.length&&s(),n}})||l;const S=()=>i().createElement(v.Z,{horizontal:"s"},i().createElement(O.Z,{order:"subtitle"},"—")),D=(0,f.ZP)((({key:e,children:t,className:r})=>i().createElement("div",{key:e,className:r},t))).withConfig({displayName:"Segment__StyledInputSegment",componentId:"ic7hna-0"})(["position:relative;"]);var I,C=w;let T=(0,y.Pi)(I=class extends i().Component{render(){const{className:e,dataComponent:t,disabled:r,name:n,value:o,onKeyDown:a=(()=>{}),onChange:s=(()=>{}),onRef:l=(()=>{}),onPaste:c=(()=>{})}=this.props,p=l();return i().createElement(P,{type:"text","data-component":t,name:n,maxLength:"1",placeholder:"0",ref:p,disabled:r,value:o,onFocus:()=>p.current.select(),onKeyDown:a,onChange:s,onPaste:c,className:e,autoComplete:"off"})}})||I;const P=f.ZP.input.withConfig({displayName:"SegmentInput__StyledSegmentInput",componentId:"sc-1mkmyfy-0"})(["border:1px solid ",";border-radius:0px;border-right-width:0px;font-size:2rem;font-weight:300;height:70px;width:33.3%;text-align:center;color:",";transition:border-color 0.15s ease-in-out;&:first-child{border-radius:5px 0 0 5px;}&:last-of-type{border-radius:0 5px 5px 0;border-right-width:1px;}&::placeholder{color:",";}&:focus{outline:none;}@media (min-width:","px){font-size:2.5rem;height:80px;}@media (min-width:","px){font-size:3rem;height:110px;}"],(({theme:e})=>e.palette.structure.regular),(({theme:e})=>e.palette.text.regular),(({theme:e})=>e.palette.structure.lighter),(({theme:e})=>e.breakpoints.s),(({theme:e})=>e.breakpoints.m));var A,_,N,R,k,z,j,x,L,M,F,Z,U,V,G,q=T;function W(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function B(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const $=8,H=37,K=39;A=(0,E.oe)("forms/inputs/segmented-code/segments"),_=h.aD.bound,N=h.aD.bound,R=h.aD.bound,k=h.aD.bound,z=h.aD.bound,j=h.aD.bound,x=h.aD.bound,L=h.aD.bound,M=h.aD.bound,A((U=B((Z=class{constructor(){W(this,"focused",U,this),W(this,"inputs",V,this)}get value(){return this.inputs.map((e=>e.value||" ")).join("")}clearInputs(){this.inputs.forEach((e=>{e.value=""})),this.focusInput(0)}onInit({props:e}){const{name:t,segments:r=2,segmentLength:n=3}=e;this.name=t,this.notifyChange=e.onChange||(()=>{});const o=[];for(let e=0;e<r;e++)for(let t=0;t<n;t++){const r=e*n+t;o.push({index:r,ref:i().createRef(),value:""})}this.inputs=o}onEnter({props:e}){this.disposeReaction=(0,h.U5)((()=>this.value),(e=>{this.notifyChange(e)})),setTimeout((()=>this.focusNextEmpty()),100)}onExit(){this.disposeReaction&&this.disposeReaction()}inputKeyDown(e,t){switch(t.keyCode){case $:if(""===t.target.value){const t=e-1;this.focusInput(t>=0?t:0)}break;case H:{const t=e-1;this.focusInput(t>=0?t:0);break}case K:{const t=e+1,r=this.inputs.length-1;this.focusInput(t<r?t:r);break}}}inputChange(e,t){const r=t.target.value,n=this.inputs[e];if(n.value=r,u()(n.value))return!1;this.focusNextEmpty({start:e+1})||this.focusNextEmpty({end:e+1})}inputPaste(e,t){t.preventDefault(),t.stopPropagation();const{clipboardData:r}=t;if(!r)return;const n=t.clipboardData.getData("text").split("").splice(0,this.inputs.length);for(let e=0;e<this.inputs.length;e++){var i;const t=this.inputs[e],r=n.length>e?n[e]:"";t.value=r;const o=null===(i=t.ref)||void 0===i?void 0:i.current;o&&o.blur()}this.focusNextEmpty()}focusNextEmpty({start:e,end:t}={}){e=e||0,t=t||this.inputs.length;let r=e;for(;r<t;){const e=this.inputs[r];if(u()(e.value))return this.focusInput(r),!0;r++}return!1}focusInput(e){var t;const r=null===(t=this.inputs[e].ref)||void 0===t?void 0:t.current;r&&(r.focus(),setTimeout((()=>r.select()),50))}}).prototype,"focused",[h.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=B(Z.prototype,"inputs",[h.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B(Z.prototype,"value",[h.Fl],Object.getOwnPropertyDescriptor(Z.prototype,"value"),Z.prototype),B(Z.prototype,"clearInputs",[_],Object.getOwnPropertyDescriptor(Z.prototype,"clearInputs"),Z.prototype),B(Z.prototype,"onInit",[N],Object.getOwnPropertyDescriptor(Z.prototype,"onInit"),Z.prototype),B(Z.prototype,"onEnter",[R],Object.getOwnPropertyDescriptor(Z.prototype,"onEnter"),Z.prototype),B(Z.prototype,"onExit",[k],Object.getOwnPropertyDescriptor(Z.prototype,"onExit"),Z.prototype),B(Z.prototype,"inputKeyDown",[z],Object.getOwnPropertyDescriptor(Z.prototype,"inputKeyDown"),Z.prototype),B(Z.prototype,"inputChange",[j],Object.getOwnPropertyDescriptor(Z.prototype,"inputChange"),Z.prototype),B(Z.prototype,"inputPaste",[x],Object.getOwnPropertyDescriptor(Z.prototype,"inputPaste"),Z.prototype),B(Z.prototype,"focusNextEmpty",[L],Object.getOwnPropertyDescriptor(Z.prototype,"focusNextEmpty"),Z.prototype),B(Z.prototype,"focusInput",[M],Object.getOwnPropertyDescriptor(Z.prototype,"focusInput"),Z.prototype),F=Z));var Y,X,J,Q,ee=(0,E.ei)("forms/inputs/segmented-code/segments")(G=class extends i().Component{componentDidUpdate(){const{store:e,invalid:t}=this.props;t&&e.clearInputs()}render(){const{store:e,disabled:t,segmentLength:r,className:n}=this.props;return i().createElement(C,{segmentLength:r,className:n},e.inputs.map(((r,n)=>i().createElement(q,{key:`segment-input-${n}`,name:`segment-input-${n}`,dataComponent:`verification-input-${n}`,disabled:t,value:r.value,onRef:()=>r.ref,onKeyDown:t=>e.inputKeyDown(n,t),onPaste:t=>e.inputPaste(n,t),onChange:t=>e.inputChange(n,t)}))))}})||G;function te(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}let re=(Y=(0,y.f3)("form"),X=h.aD.bound,Y(J=(0,y.Pi)((te((Q=class extends i().Component{constructor(e){if(super(e),!e.name)throw new Error("A name is required for form inputs");this.name=e.name,this.form=e.form,this.form.registerInput(e.name,{allowClear:e.clearable}),e.validator&&this.form.registerValidator(e.name,e.validator)}get touched(){return this.form.touched.has(this.name)}get value(){return this.form.values.get(this.name)}get validator(){return this.form.validation.get(this.name)}handleChange(e){const t=Array.from(e).map((e=>e.trim()));if(!m()(t,u())){const t={target:{value:e}};return this.form.handleChange(t,this.name)}if(this.touched)return this.form.clearField(this.name)}render(){const{segments:e,segmentLength:t,className:r}=this.props;return i().createElement(g.Z,{alignItems:"center",justifyContent:"center",className:r},i().createElement(g.Z,{alignItems:"center",justifyContent:"center"},i().createElement(ie,{name:this.name,disabled:this.validator.pending,valid:this.validator.valid,segments:e,segmentLength:t,onChange:this.handleChange})),i().createElement(ne,{show:this.validator.pending||this.validator.valid,loaded:this.validator.valid}))}}).prototype,"touched",[h.Fl],Object.getOwnPropertyDescriptor(Q.prototype,"touched"),Q.prototype),te(Q.prototype,"value",[h.Fl],Object.getOwnPropertyDescriptor(Q.prototype,"value"),Q.prototype),te(Q.prototype,"validator",[h.Fl],Object.getOwnPropertyDescriptor(Q.prototype,"validator"),Q.prototype),te(Q.prototype,"handleChange",[X],Object.getOwnPropertyDescriptor(Q.prototype,"handleChange"),Q.prototype),J=Q))||J)||J);const ne=(0,f.ZP)(b.Z).withConfig({displayName:"Input__SpinnerWrapper",componentId:"ybap36-0"})(["position:absolute;right:-",";visibility:",""],(({theme:e})=>e.spacing.m),(({show:e})=>e?"visible":"hidden")),ie=(0,f.ZP)(ee).withConfig({displayName:"Input__StyledSegments",componentId:"ybap36-1"})(["","{border-color:",";}"],P,(({theme:e,valid:t})=>t?e.palette.info.regular:e.palette.structure.regular));var oe,ae,se,le,ce=re,pe=r(30195),ue=r(80733),de=r(59549);function me(){return(me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const he=/^[\s\-'.\p{Alphabetic}\p{Decimal_Number}]+$/u;var ye,ge,be,fe,Ee,ve,Oe,we,Se,De,Ie=(oe=(0,de.f3)("features/http"),ae=h.aD.bound,(0,ue.qH)(se=(0,y.Pi)(se=oe((le=class extends i().Component{constructor(e){super(e),this.http=e["features/http"],e.store.registerValidator({fn:this.validate,remote:!!e.remoteValidator})}async validate(e){const t=e.get(this.props.name),r=this.props.remoteValidator||(()=>{});return t.length?t.length<2||t.length>125?"Names are between 2 and 125 characters":he.test(t)?r(e):"Team names can only contain alphanumeric characters, apostrophes, spaces, periods, and hyphens.":"Every team needs a name"}render(){const{id:e,name:t,store:r,defaultValue:n,remoteValidator:o,...a}=this.props;return i().createElement(pe.Z,me({id:e,isUncontrolled:!0,name:t,type:"text",onChange:r.handleChange,onBlur:r.handleBlur,defaultValue:n},a))}},ye=le.prototype,ge="validate",be=[ae],fe=Object.getOwnPropertyDescriptor(le.prototype,"validate"),Ee=le.prototype,ve={},Object.keys(fe).forEach((function(e){ve[e]=fe[e]})),ve.enumerable=!!ve.enumerable,ve.configurable=!!ve.configurable,("value"in ve||ve.initializer)&&(ve.writable=!0),ve=be.slice().reverse().reduce((function(e,t){return t(ye,ge,e)||e}),ve),Ee&&void 0!==ve.initializer&&(ve.value=ve.initializer?ve.initializer.call(Ee):void 0,ve.initializer=void 0),void 0===ve.initializer&&(Object.defineProperty(ye,ge,ve),ve=null),se=le))||se)||se)||se);function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Te,Pe,Ae,_e,Ne=(Oe=(0,de.f3)("features/http","features/context/request"),we=h.aD.bound,(0,ue.qH)(Se=(0,y.Pi)(Se=Oe((function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((De=class extends i().Component{constructor(e){super(e),this.http=e["features/http"],this.request=e["features/context/request"],e.store.registerValidator({fn:this.validate,remote:!!e.remoteValidator})}async validate(e){const t=e.get(this.props.name),r=this.props.remoteValidator||(()=>{});return t.length?t.length<2||t.length>125?"Domains are between 2 and 125 characters":/^[a-z0-9]+$/i.test(t[0])?/^[a-z0-9-]+$/i.test(t)?r(e):"Apologies, team domains can only contain letters, numbers, and dashes.":"Apologies, team domains must start with a letter or number.":"Please choose a domain URL for your team."}render(){const{id:e,name:t,store:r,defaultValue:n,remoteValidator:o,...a}=this.props;return i().createElement(pe.Z,Ce({id:e,isUncontrolled:!0,name:t,type:"text",append:`.${this.request.hostdomain}`,onChange:r.handleChange,onBlur:r.handleBlur,defaultValue:n},a))}}).prototype,"validate",[we],Object.getOwnPropertyDescriptor(De.prototype,"validate"),De.prototype),Se=De))||Se)||Se)||Se),Re=r(76539);function ke(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var ze,je=(Te=(0,y.f3)("form"),Pe=h.aD.bound,Te(Ae=(0,y.Pi)((ke((_e=class extends i().Component{constructor(e){if(super(e),!e.name)throw new Error("A name is required for a toggle");if(!e.form)throw new Error("A form store is required for toggle.  Was it injected?");this.name=e.name,this.form=e.form,this.form.registerInput(e.name),this.form.touched.set(e.name,!0),this.form.values.set(e.name,e.checked||!1),this.notifyChange=e.onChange||(()=>{})}get checked(){return this.form.values.get(this.name)}handleChange(){const e=!this.form.values.get(this.name);this.form.values.set(this.name,e),this.notifyChange(e)}render(){return i().createElement(Re.Z,{id:this.props.id||this.props.name,name:this.props.name,className:this.props.className,"data-component":this.props["data-component"],disabled:this.props.disabled,compact:this.props.compact,checked:this.checked,onChange:this.handleChange},this.props.children)}}).prototype,"checked",[h.Fl],Object.getOwnPropertyDescriptor(_e.prototype,"checked"),_e.prototype),ke(_e.prototype,"handleChange",[Pe],Object.getOwnPropertyDescriptor(_e.prototype,"handleChange"),_e.prototype),Ae=_e))||Ae)||Ae);function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const Le=/^[\s\-'.\p{Alphabetic}\p{Decimal_Number}]+$/u,Me=e=>({fn:async(t,{key:r})=>{e=e||(()=>{});const n=t.get(r);return n&&n.length?n.length>50?"Your name must be less than 50 characters":Le.test(n)?e(t):"Your name can only contain alphanumeric characters, apostrophes, spaces, periods, and hyphens.":"Every user needs a name"},remote:!!e});var Fe=(0,y.Pi)(ze=class extends i().Component{render(){const{id:e,name:t,remoteValidator:r,...n}=this.props;return i().createElement(ue.xv,xe({id:e,name:t,type:"text",validator:Me(r)},n))}})||ze},69869:function(e,t,r){"use strict";r.d(t,{p:function(){return h}});var n,i=r(16624),o=r.n(i),a=r(44527),s=r(64267),l=r(76069),c=r(59549),p=r(48743),u=r(87860);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const m=["Design","Product Management","Engineer/Developer","Marketing","Human Resources/People Ops","Recruiting","Finance/Accounting","Operations","IT","Sales","Customer Success","Educator","Student"],h=e=>!m.includes(e),y=/^[\s\-/\p{Alphabetic}]+$/u,g={async fn(e,{key:t}){const r=e.get(t);return r&&r.length?r.length>50?"Role must be shorter than 50 characters":r.length<2?"Role must be longer than 2 characters":y.test(r)?void 0:"Your role can only contain alphanumeric characters, spaces, forward slashes, and hyphens.":"Please enter a role"}};class b extends o().Component{render(){const{store:e,...t}=this.props;return o().createElement(f,d({},t,{id:t.name,values:m,validator:g,otherLabel:"Tell us what you do"}))}}let f=(0,l.f3)("form")(n=(0,c.f3)("window")(n=class extends o().Component{constructor(...e){super(...e),this.state={},this.ref=e=>{if(e){const t=e.querySelector("select");t.value||t.setAttribute("data-empty",""),Object.assign(this,{select:t,container:e});const{form:r,name:n,validator:i}=this.props;r.registerValidator(n,i)}else this.removeInterceptor()},this.focusText=()=>{this.container.querySelector("input").focus(),this.container.lastChild.removeEventListener("animationend",this.focusText)},this.textRef=e=>{e&&this.container.lastChild.addEventListener("animationend",this.focusText)};const{window:{document:t={}},form:r,name:n,otherValue:i}=this.props;this.removeInterceptor=(0,s.Su)(r.values,(e=>e.name!==n?e:"delete"===e.type?null:(t.activeElement===this.select&&(e.newValue?this.select.removeAttribute("data-empty"):this.select.setAttribute("data-empty",""),e.newValue===i?(this.select.blur(),this.setState({isCustomValue:!0}),e=null):this.state.isCustomValue&&this.setState({isCustomValue:!1})),e)))}render(){const{values:e,placeholder:t,otherValue:r,otherLabel:n,...i}=this.props;delete i.validator,delete i.window;const s=Object.keys(e).map((t=>{const r=e[t];return{value:Array.isArray(e)?r:t,label:r}})),{isCustomValue:l}=this.state;return o().createElement(E,{ref:this.ref},o().createElement(a.Ph,d({key:"select"},i),[{value:"",label:t},...s,{value:r,label:r}].map((({value:e,label:t})=>o().createElement("option",{key:e,value:e},t)))),o().createElement(v,{speed:"fast",order:"drop-in-top"},l?o().createElement(a.xv,{key:"text",name:i.name,ref:this.textRef,label:n}):null))}})||n)||n;f.defaultProps={otherValue:"Other"};const E=u.ZP.div.withConfig({displayName:"RoleInput__Container",componentId:"sc-1usz9fh-0"})(["select[data-empty],option[value='']{color:",";}"],(e=>e.theme.palette.text.lighter));class v extends o().Component{constructor(...e){super(...e),this.state={},this.ref=e=>{e&&e.addEventListener("animationend",(()=>{this.state.unmountAnimation&&this.setState({unmountAnimation:null})}))}}render(){const{children:e,...t}=this.props,{unmountAnimation:r}=this.state;if(e)this.lastChildren=e;else if(!r)return null;return r&&(t.order=r),o().createElement(p.Z,d({},t,{passThrough:!0}),o().createElement("div",{ref:this.ref},this.lastChildren))}}v.getDerivedStateFromProps=({children:e,order:t},r)=>e?{mounted:!0}:r.mounted?{unmountAnimation:t.replace("-in-","-out-"),mounted:!1}:r,t.Z=b},66313:function(e,t,r){"use strict";r.d(t,{eO:function(){return C},J6:function(){return h.Z},_t:function(){return T}});var n,i,o,a,s,l,c,p,u,d,m=r(81281),h=r(69869),y=r(16624),g=r.n(y),b=r(5013),f=r(25817),E=r(44527),v=r(88104),O=r(64267),w=r(59549),S=r(32837);function D(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const I=(0,S.kg)("features:sign-up:role-form");n=(0,S.yN)("features:sign-up:role-form"),i=(0,v.oe)("features/sign-up/role-form"),o=(0,w.RR)("features/analytics","features/http"),a=O.aD.bound,n(s=i(s=o((D((l=class{constructor(e,t){this.analytics=e,this.http=t}async submit({role:e}){const t=(0,h.p)(e);try{await this.http.post("/auth-api/onboarding/role",{data:{role:e,isOther:t}})}catch(e){I("Cannot set onboarding role",e)}t&&(e="other-"+e),this.analytics.trackLegacy("Signup.Role.Submitted",{onboarding_role:"Other",onboarding_role_other:e})}}).prototype,"submit",[a],Object.getOwnPropertyDescriptor(l.prototype,"submit"),l.prototype),s=l))||s)||s);var C=(c=(0,v.ei)("features/sign-up/role-form"),p=O.aD.bound,c((D((d=class extends g().Component{async onSubmit({role:e}){const{store:t,onSuccess:r}=this.props;await t.submit({role:e}),r&&await r({role:e})}render(){return g().createElement(g().Fragment,null,g().createElement(b.X6,{heading:"What do you do?",subheading:g().createElement(f.Z,null,"Let us personalize your experience by telling us your role")}),g().createElement(E.l0,{submit:this.onSubmit},g().createElement(h.Z,{name:"role",label:"Your role",placeholder:"Select your role"}),g().createElement(E.k4,null,"Continue")))}}).prototype,"onSubmit",[p],Object.getOwnPropertyDescriptor(d.prototype,"onSubmit"),d.prototype),u=d))||u);const T=({role:e,variantId:t,experiment:r=m.vU.FREE_HAND_ROLE_COLLECTION})=>{if(t===r.DEFAULT)return{};const n={[r.ID]:t};return e&&((0,h.p)(e)&&(e="other-"+e),n.onboarding_role="Other",n.onboarding_role_other=e),n}},20314:function(e,t,r){"use strict";r.d(t,{CA:function(){return o},Jm:function(){return a},AJ:function(){return s},xr:function(){return l},NW:function(){return c},Vu:function(){return p},cW:function(){return u},As:function(){return d},uJ:function(){return m}});var n=r(64870),i=r.n(n);const o="Something went wrong. If it isn't fixed in a few minutes, please contact support.",a="Didn’t get it? Hang tight. You can request a new code in 15 minutes.",s="Hang tight. You can try again in 15 minutes.",l="Hang tight. You can try a new code in 15 minutes.",c="You have entered an incorrect code too many times and your account is temporarily locked. Please try again later.",p="The number you entered is invalid. Please try again.",u="The code you entered is incorrect. Please try again.",d="That format doesn't look right. Make sure there aren't any typos.",m="Could not add user to team: SSO JIT is disabled",h={};h[i().INVALID_EMAIL_DOMAIN]=e=>`Your email domain must match ${e.replace("|"," or ")}`,h[i().JOIN_TEAM_EXISTING_MEMBER]="You are currently a member of the team. Login using your credentials below.",h[i().JOIN_TEAM_SSO_ENABLED]="Please login with your SSO provider to join the team.",h[i().SERVER_ERROR]="Something went wrong. If it isn't fixed in a few minutes, please contact support.",h[i().OPEN_ENROLLMENT_DISABLED]=e=>`${e} turned off open enrollment. Ask your team admin for an invite.`,h[i().OPEN_ENROLLMENT_DOMAIN_INVALID]=e=>`${e} is no longer an approved domain. Try a different email address, or ask your team admin for an invite.`,h[i().OPEN_ENROLLMENT_EXISTING_MEMBER]="You are currently a member of the team. Login using your credentials below.",h.UNAUTHORIZED_LOGIN_ATTEMPT=e=>e?"Looks like you entered an incorrect password. Please try again.":"You have entered an incorrect email address, password, or both."},21609:function(e,t,r){"use strict";var n,i,o,a,s,l=r(16624),c=r.n(l),p=r(83843),u=r.n(p),d=r(59549),m=r(32837),h=r(40072),y=r(64267),g=r(32827);n=(0,d.En)("history"),i=(0,g.RR)("features/analytics"),n(o=(0,d.ri)(o=i((s=function(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}((a=class{constructor(e){var t,r,n,i;t=this,r="location",i=this,(n=s)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0}),this.history=(0,h.lX)(),this.location=this.history.location,this.unlisten=this.history.listen((t=>{(0,y.z)((()=>{e.page(t.pathname),(0,y.t8)(this.location,{pathname:t.pathname,search:t.search,hash:t.hash})}))}))}push(e){this.history.push(e)}replace(e){this.history.replace(e)}goBack(){this.history.goBack()}dispose(){this.unlisten()}}).prototype,"location",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=a))||o)||o);var b,f,E,v,O,w,S=r(20643),D=r.n(S);function I(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}b=(0,d.En)("route"),f=y.LO.ref,E=y.aD.bound,b(v=(0,d.ri)((w=I((O=class{constructor(){var e,t,r,n;e=this,t="current",n=this,(r=w)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}get query(){return D()(this.current,"query")}get params(){return D()(this.current,"params")}get name(){return D()(this.current,"route.name")}get title(){return D()(this.current,"route.title")}get pattern(){return D()(this.current,"route.pattern")}setCurrent(e){this.current=e}}).prototype,"current",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I(O.prototype,"query",[y.Fl],Object.getOwnPropertyDescriptor(O.prototype,"query"),O.prototype),I(O.prototype,"params",[y.Fl],Object.getOwnPropertyDescriptor(O.prototype,"params"),O.prototype),I(O.prototype,"name",[y.Fl],Object.getOwnPropertyDescriptor(O.prototype,"name"),O.prototype),I(O.prototype,"title",[y.Fl],Object.getOwnPropertyDescriptor(O.prototype,"title"),O.prototype),I(O.prototype,"pattern",[y.Fl],Object.getOwnPropertyDescriptor(O.prototype,"pattern"),O.prototype),I(O.prototype,"setCurrent",[E],Object.getOwnPropertyDescriptor(O.prototype,"setCurrent"),O.prototype),v=O))||v);var C=r(85066),T=r.n(C),P=r(7120),A=r.n(P),_=r(75692),N=r.n(_),R=r(32851),k=r(2558),z=r.n(k),j=r(40104),x=r.n(j),L=r(52508),M=r.n(L),F=r(54126);const Z=x()((e=>(0,L.compile)(e)));class U{constructor(e,{params:t={},query:r={},trackHistory:n=!0}={}){this.route=e,this.params=t,this.query=r,this.trackHistory=n}toUrl({query:e=!0}={}){let t=Z(this.route.pattern)(this.params);return e&&Object.keys(this.query).length>0&&(t+=`?${(0,F.stringify)(this.query)}`),t}}const V=x()((e=>{if(z()(e))return{regExp:e,keys:[]};const t=[];return{regExp:M()(e,t),keys:t}}));class G{constructor({pattern:e="/",hooks:t}={}){this.pattern=e,this.hooks=t}match(e){const{regExp:t,keys:r}=V(this.pattern),n=t.exec(e);if(!n)return;const[,...i]=n;return{route:this,params:r.reduce(((e,t,r)=>(e[t.name]=i[r],e)),{})}}}class q extends G{constructor({name:e,pattern:t="/",view:r,title:n,hooks:i}={}){super({pattern:t,hooks:i}),this.name=e,this.title=n,this.view=r}nextState(e,{params:t,query:r}={}){return new U(this,{params:t,query:r})}}var W,B,$,H,K,Y,X,J,Q,ee,te,re,ne,ie,oe,ae,se,le;function ce(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function pe(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const ue=(0,m.kg)("nav:router"),de=(e,t)=>{for(const r of e){const e=r.match(t);if(e)return e}};W=(0,d.En)("router"),B=(0,d.RR)("history","route","window"),$=y.aD.bound,H=y.aD.bound,K=y.aD.bound,Y=y.aD.bound,X=y.aD.bound,J=y.aD.bound,Q=y.aD.bound,ee=y.aD.bound,te=y.aD.bound,re=y.aD.bound,ne=y.aD.bound,ie=y.aD.bound,W(oe=(0,d.ri)(oe=B((se=pe((ae=class{constructor(e,t,r){ce(this,"routes",se,this),ce(this,"isTransitioning",le,this),this._errorHandler=e=>{ue("Unhandled error during route processing",e)},this.history=e,this.route=t,this.window=r}register(e){Array.isArray(e)||(e=[e]);const t=e.map((e=>this._createRoute(e)));this.routes.push(...t),this._updateState(this._matchRoute(this.window.location),{trackHistory:!1})}observeHistory(){return(0,y.N7)(this.history.location,"pathname",(e=>{if("update"!==e.type)return;ue("url updated: %O",e.newValue);const t=this._matchRoute({pathname:e.newValue});this._updateState(t,{trackHistory:!1})}))}onNotFound(e){const t=this._createRoute(e);this.notFound=t}onError(e){this.errorHandler=e}navigate(e,{trackHistory:t=!0,params:r,query:n}={}){if(!e)throw new Error("A route is required to navigate");const i=this.state(e,{params:r,query:n});return this._updateState(i,{trackHistory:t})}state(e,{params:t,query:r}={}){return N()(e)&&(e=this.getRoute(e)),e.nextState(this,{params:t,query:r})}getRoute(e){return T()(this.routes,(t=>t.name===e))}matchRoute(e){const t=de(this.routes,e.pathname);if(t)return t}reset(){this.routes=[]}_createRoute(e){return e instanceof G?e:new q(e)}_matchRoute(e){let t=de(this.routes,e.pathname);t?ue("route match: %O",t.route.name||t.route.pattern):(ue("route not found"),t={route:this.notFound});const{route:r,params:n}=t,i=R.parse(e.search);return r.nextState(this,{params:n,query:i})}async _updateState(e,{trackHistory:t=!0}={}){if(!e)throw new Error("Unable to route to an unknown state");const r=this.route.current;let n=e;(0,y.z)((()=>{this.isTransitioning=!0}));try{n=await(async(e,t)=>{const{beforeExit:r,onExit:n}=D()(e,"route.hooks",{}),{beforeEnter:i,onEnter:o}=D()(t,"route.hooks",{}),a=async(e,{from:t,to:r})=>e&&await e({from:t,to:r})||r;return t=await a(r,{from:e,to:t}),t=await a(n,{from:e,to:t}),t=await a(i,{from:e,to:t}),await a(o,{from:e,to:t})})(r,n);if(!!A()(r,n))return n;(0,y.z)((()=>{if(ue("route change: %O",n),this.route.setCurrent(n),t){const e=this.history.location,t=`${e.pathname}${e.search}`,r=n.toUrl();t!==r&&this.history.push(r)}}))}catch(e){if(this.errorHandler)return this.errorHandler(e);ue("Unable to route to destination: %o",e)}finally{(0,y.z)((()=>{this.isTransitioning=!1}))}}}).prototype,"routes",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),le=pe(ae.prototype,"isTransitioning",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pe(ae.prototype,"register",[$],Object.getOwnPropertyDescriptor(ae.prototype,"register"),ae.prototype),pe(ae.prototype,"observeHistory",[H],Object.getOwnPropertyDescriptor(ae.prototype,"observeHistory"),ae.prototype),pe(ae.prototype,"onNotFound",[K],Object.getOwnPropertyDescriptor(ae.prototype,"onNotFound"),ae.prototype),pe(ae.prototype,"onError",[Y],Object.getOwnPropertyDescriptor(ae.prototype,"onError"),ae.prototype),pe(ae.prototype,"navigate",[X],Object.getOwnPropertyDescriptor(ae.prototype,"navigate"),ae.prototype),pe(ae.prototype,"state",[J],Object.getOwnPropertyDescriptor(ae.prototype,"state"),ae.prototype),pe(ae.prototype,"getRoute",[Q],Object.getOwnPropertyDescriptor(ae.prototype,"getRoute"),ae.prototype),pe(ae.prototype,"matchRoute",[ee],Object.getOwnPropertyDescriptor(ae.prototype,"matchRoute"),ae.prototype),pe(ae.prototype,"reset",[te],Object.getOwnPropertyDescriptor(ae.prototype,"reset"),ae.prototype),pe(ae.prototype,"_createRoute",[re],Object.getOwnPropertyDescriptor(ae.prototype,"_createRoute"),ae.prototype),pe(ae.prototype,"_matchRoute",[ne],Object.getOwnPropertyDescriptor(ae.prototype,"_matchRoute"),ae.prototype),pe(ae.prototype,"_updateState",[ie],Object.getOwnPropertyDescriptor(ae.prototype,"_updateState"),ae.prototype),oe=ae))||oe)||oe);var me,he,ye,ge,be,fe,Ee=r(65695),ve=r(88104);function Oe(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}me=(0,ve.oe)("viewport",{lifecycle:d.ri}),he=y.aD.bound,me((be=Oe((ge=class{constructor(){var e,t,r,n;e=this,t="current",n=this,(r=be)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}setView(e,t={}){this.current={view:e,props:t}}}).prototype,"current",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Oe(ge.prototype,"setView",[he],Object.getOwnPropertyDescriptor(ge.prototype,"setView"),ge.prototype),ye=ge));var we,Se,De,Ie,Ce,Te,Pe,Ae,_e,Ne,Re,ke,ze=(0,d.f3)("features/tracking","features/context/cloud-ui")(fe=(0,ve.ei)("viewport")(fe=class extends c().Component{get tracking(){return this.props["features/tracking"]}componentDidMount(){this.tracking.loadAds()}render(){const{store:e,"features/context/cloud-ui":t}=this.props;t.markInitialRender();const{view:r}=e.current;if(!r)return null;const n=r,{title:i,...o}=e.current.props||{};return c().createElement(c().Fragment,null,c().createElement(Ee.Z,null,i&&c().createElement("title",null,i)),n&&c().createElement(n,o))}})||fe)||fe;function je(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function xe(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Le=async e=>{if(!e.request)return null;const t=await e.request;return t?{data:await t.json(),headers:t.headers,preloaded:!0,status:t.status,statusText:t.statusText}:null};we=(0,d.En)("features/context/cloud-ui"),Se=(0,d.RR)("window"),De=y.aD.bound,Ie=y.aD.bound,Ce=y.aD.bound,Te=y.aD.bound,Pe=y.aD.bound,Ae=y.aD.bound,we(_e=(0,d.ri)(_e=Se((Re=xe((Ne=class{constructor(e){je(this,"markedDataLoaded",Re,this),je(this,"markedInitialRender",ke,this),this.window=e,this.globalContext=e.inGlobalContext,this.featureContext=this.globalContext.appShell.getFeatureContext("auth-ui"),this.featureContext.on("after:unmount",(()=>{this.setMarkedDataLoaded(!1),this.setMarkedInitialRender(!1)}))}setMarkedDataLoaded(e){this.markedDataLoaded=e}setMarkedInitialRender(e){this.markedInitialRender=e}markDataLoaded(){!this.markedDataLoaded&&this.window.rum&&(this.window.rum.markTime("spaDataFullyLoaded",{featureName:"auth-ui"}),this.setMarkedDataLoaded(!0))}markInitialRender(){!this.markedInitialRender&&this.window.rum&&(this.window.rum.markTime("spaInitialRender",{featureName:"auth-ui"}),this.setMarkedInitialRender(!0))}async fetchPreloadedData(e){const t=this.featureContext.dataLoader.consumePreloadItem(e);return t?{response:await Le(t),url:t.url}:null}get oauthMode(){var e,t;return null===(e=this.featureContext)||void 0===e||null===(t=e.envContext)||void 0===t?void 0:t.oauthMode}async requestAccessToken(){var e,t,r;return null===(e=this.globalContext)||void 0===e||null===(t=e.appShell)||void 0===t||null===(r=t.user)||void 0===r?void 0:r.requestNewOAuthAccessToken()}}).prototype,"markedDataLoaded",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ke=xe(Ne.prototype,"markedInitialRender",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xe(Ne.prototype,"setMarkedDataLoaded",[De],Object.getOwnPropertyDescriptor(Ne.prototype,"setMarkedDataLoaded"),Ne.prototype),xe(Ne.prototype,"setMarkedInitialRender",[Ie],Object.getOwnPropertyDescriptor(Ne.prototype,"setMarkedInitialRender"),Ne.prototype),xe(Ne.prototype,"markDataLoaded",[Ce],Object.getOwnPropertyDescriptor(Ne.prototype,"markDataLoaded"),Ne.prototype),xe(Ne.prototype,"markInitialRender",[Te],Object.getOwnPropertyDescriptor(Ne.prototype,"markInitialRender"),Ne.prototype),xe(Ne.prototype,"fetchPreloadedData",[Pe],Object.getOwnPropertyDescriptor(Ne.prototype,"fetchPreloadedData"),Ne.prototype),xe(Ne.prototype,"requestAccessToken",[Ae],Object.getOwnPropertyDescriptor(Ne.prototype,"requestAccessToken"),Ne.prototype),_e=Ne))||_e)||_e);var Me,Fe,Ze,Ue,Ve,Ge=r(76190);Me=(0,d.En)("features/context/geolocation"),Fe=(0,d.RR)("features/context/config"),Me(Ze=(0,d.ri)(Ze=Fe((Ve=function(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}((Ue=class{constructor(e){var t,r,n,i;t=this,r="countryCode",i=this,(n=Ve)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0}),this.countryCode=e.get("COUNTRY_CODE")||""}underGDPR(){return Ge.includes(this.countryCode)}}).prototype,"countryCode",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ze=Ue))||Ze)||Ze);var qe,We,Be,$e=r(50137),He=r.n($e),Ke=r(81701),Ye=r.n(Ke),Xe=r(51351),Je=r.n(Xe),Qe=r(81281);const et=(0,m.kg)("context:response");qe=(0,d.En)("features/context/response"),We=(0,d.RR)("features/context/request","features/context/team","window"),qe(Be=(0,d.ri)(Be=We(Be=class{constructor(e,t,r){this.request=e,this.team=t,this.window=r}parseRedirectUrl(e=""){const t=new(He())(decodeURIComponent(e),{},!0);var r;return"/auth/sign-in"===t.pathname?this.parseRedirectUrl(null===(r=t.query)||void 0===r?void 0:r.redirectTo):t}redirectUrl(e={},{defaultRedirectTo:t="/",host:r}={}){const n=this.request.redirectTo||t,i=this.parseRedirectUrl(n);return i.set("protocol",this.request.protocol),i.set("host",r||this.team.host||this.request.host),i.set("query",{...Je()(this.request.queryobject,Ye()(Qe.az.ALLOWED,"redirectTo")),...i.query,...e}),i}async sendMessageSafe(e,t=500){try{return await this.sendMessage(e,t)}catch(e){et("Unable to call native webview hook: %O",e)}}async sendMessage(e,t){if(et("Sending: %o",e),this.window.dispatchEvent&&CustomEvent)try{const t={source:"auth-ui",...e};et("Calling window dispatchEvent() : %O",t),this.window.dispatchEvent(new CustomEvent("successfulSignin",{detail:t}))}catch(e){et("Unable to call window dispatchEvent()",e)}const{webkit:r}=this.window;if(r&&r.messageHandlers&&r.messageHandlers.observe)return et("Calling webkit postMessage() : %O",e),void r.messageHandlers.observe.postMessage(e);const n=JSON.stringify(e),{ReactNativeWebView:i}=this.window;if(i){const e=e=>new Promise((t=>setTimeout(t,e))),r=async(t,r)=>{let n=0;for(;n<3;){n++;const{ReactNativeWebView:i}=this.window;if("function"==typeof i.postMessage){et("Calling ReactNativeWebView postMessage() : %O",t),i.postMessage(t);break}n<3?(et(`Attempt: ${n}, ReactNativeWebView not present, sleeping ${r} ms ...`),await e(r)):et("ReactNativeWebView.postMessage not available after 3 retries")}};return void await r(n,t)}const{postMessage:o}=this.window;"function"==typeof o&&(et("Calling window postMessage() : %O",n),o(n,`${this.request.protocol}//${this.request.host}`))}})||Be)||Be);var tt,rt,nt,it,ot,at=r(21490);const st=(0,m.kg)("context:v6"),lt=[at.Z.FREEHAND_TEAMS,at.Z.MSTEAMS];tt=(0,d.En)("features/context/v6"),rt=(0,d.RR)("features/context/config","features/context/client","features/context/request","features/http"),nt=y.aD.bound,tt(it=(0,d.ri)(it=rt((function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}((ot=class{constructor(e,t,r,n){this.config=e,this.client=t,this.request=r,this.http=n}async authenticate(e={}){const{email:t,password:r}=e;if(!t||!r)return;const{isEmbedded:n,type:i}=this.client,o=this.config.get("CFPROJECTS_URI")||"https://projects.invisionapp.com",a=this.request.getCookie("XSRF-TOKEN"),s=new FormData;s.append("email",t),s.append("password",r),s.append("webview",!!n&&!lt.includes(i));try{const e=await this.http.post(`${o}/api/account/login`,{data:s,headers:{"X-XSRF-TOKEN":a},maxRedirects:0,withCredentials:!0});return st("V6 session created"),e}catch(e){st("V6 session creation failed: %O",e.message)}}}).prototype,"authenticate",[nt],Object.getOwnPropertyDescriptor(ot.prototype,"authenticate"),ot.prototype),it=ot))||it)||it);var ct,pt,ut,dt,mt,ht,yt,gt,bt=r(28511),ft=r(39982),Et=r.n(ft),vt=r(59407);function Ot(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function wt(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const St=(0,m.kg)("context:config");ct=(0,d.En)("features/context/config"),pt=(0,d.RR)("features/http","window"),ut=y.aD.bound,dt=y.aD.bound,ct(mt=(0,d.ri)(mt=pt((yt=wt((ht=class{constructor(e,t){Ot(this,"map",yt,this),Ot(this,"loaded",gt,this),this.http=e,this.window=t;const r=D()(t,"com.invisionapp.auth.config",{});this.map=new Map(Object.entries(r))}get(e){return this.map.get(e)}set(e,t){this.map.set(e,t)}async load(){if(!this.loaded)try{const e=await this.http.get("/auth-meta/env",{errorKey:"global",errorMap:{"*":()=>({config:{[vt.ew]:!0}})},preloadId:"auth-meta-env"});Et()(e.data,((e,t)=>this.set(t,e))),St("Loaded (%d) %O",e.status,(0,y.ZN)(this.map))}catch(e){throw St("Load failed %O",e),e}}}).prototype,"map",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),gt=wt(ht.prototype,"loaded",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),wt(ht.prototype,"set",[ut],Object.getOwnPropertyDescriptor(ht.prototype,"set"),ht.prototype),wt(ht.prototype,"load",[dt],Object.getOwnPropertyDescriptor(ht.prototype,"load"),ht.prototype),mt=ht))||mt)||mt);var Dt,It,Ct,Tt,Pt,At,_t,Nt,Rt,kt,zt,jt,xt,Lt,Mt=r(72302),Ft=r(66190),Zt=r.n(Ft),Ut=r(73884),Vt=r.n(Ut),Gt=r(4427),qt=r.n(Gt),Wt=r(10052),Bt=r.n(Wt);function $t(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Ht(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Kt=(0,m.kg)("context:request");Dt=(0,d.En)("features/context/request"),It=(0,d.RR)("document","window"),Ct=y.aD.bound,Tt=y.aD.bound,Pt=y.aD.bound,At=y.aD.bound,_t=y.aD.bound,Nt=y.aD.bound,Rt=y.aD.bound,Dt(kt=(0,d.ri)(kt=It((jt=Ht((zt=class{constructor(e,t){$t(this,"query",jt,this),$t(this,"cookies",xt,this),$t(this,"location",Lt,this),this.document=e,this.window=t;const r=D()(t,"location");r&&this.updateLocation(r),this.updateCookiesFromDocument(this.document)}get subdomain(){return Zt()(D()(this.location,"host","").split("."))}get hostdomain(){return Vt()(D()(this.location,"host","").split("."),1).join(".")}get protocol(){return this.location.protocol}get host(){return this.location.host}get pathname(){return this.location.pathname}get hash(){return this.location.hash}get referrer(){return this.document.referrer}get redirectTo(){return this.getParam("redirectTo")}get redirectHash(){return this.getParam("redirectHash")}get querystring(){if(!this.query.size)return"";const e={};for(const[t,r]of this.query.entries())e[t]=r;return`?${R.stringify(e)}`}get queryobject(){const e={};for(const[t,r]of this.query)e[t]=r;return e}delete(e){return this.query.delete(e)}get(e){return this.getParam(e)}getParam(e){return this.query.get(e)}deleteCookie(e){Mt.remove(e,{domain:`.${this.hostdomain}`}),this.updateCookiesFromDocument(this.document)}getCookie(e){return this.cookies.get(e)}setCookie({name:e,value:t,expires:r=30}){Mt.set(e,t,{expires:r,domain:`.${this.hostdomain}`}),this.updateCookiesFromDocument(this.document)}set(e,t){return this.query.set(e,t)}updateLocation(e){e.__normalized||(e=this.normalize(e)),this.location=e,this.query=new Map(Object.entries(e.query)),Kt("Location updated: %O",(0,y.ZN)(this.location))}updateCookies(e){const t=(e=>e.split(";").reduce(((e,t)=>{const[r,n]=t.trim().split("=").map(decodeURIComponent);try{return Object.assign(e,{[r]:JSON.parse(n)})}catch(t){return Object.assign(e,{[r]:n})}}),{}))(e);this.cookies=new Map(Object.entries(t)),Kt("Cookies updated")}updateCookiesFromDocument(e){const t=D()(e,"cookie");t&&this.updateCookies(t)}normalize(e){const t=D()(e,"href",e.toString()),r=new(He())(t,!0),n=D()(r,"query",{}),i=(e,t,r=[])=>{const n=[t,...r],i=((e,t)=>{for(const r of t){const t=D()(e,r);if(t)return t}return null})(e,n);for(const t of n)Bt()(e,t);return i&&qt()(e,t,i),e};if(i(n,"redirectTo",["redir"]),i(n,"embedded",["webview"]),i(n,"redirectHash",["redirHash"]),!n.redirectHash){const e=D()(r,"hash","#").replace(/[#]/g,"");e&&qt()(n,"redirectHash",e)}return r.set("query",n),r.__normalized=!0,r}}).prototype,"query",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),xt=Ht(zt.prototype,"cookies",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Lt=Ht(zt.prototype,"location",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ht(zt.prototype,"redirectTo",[y.Fl],Object.getOwnPropertyDescriptor(zt.prototype,"redirectTo"),zt.prototype),Ht(zt.prototype,"redirectHash",[y.Fl],Object.getOwnPropertyDescriptor(zt.prototype,"redirectHash"),zt.prototype),Ht(zt.prototype,"querystring",[y.Fl],Object.getOwnPropertyDescriptor(zt.prototype,"querystring"),zt.prototype),Ht(zt.prototype,"queryobject",[y.Fl],Object.getOwnPropertyDescriptor(zt.prototype,"queryobject"),zt.prototype),Ht(zt.prototype,"delete",[Ct],Object.getOwnPropertyDescriptor(zt.prototype,"delete"),zt.prototype),Ht(zt.prototype,"deleteCookie",[Tt],Object.getOwnPropertyDescriptor(zt.prototype,"deleteCookie"),zt.prototype),Ht(zt.prototype,"setCookie",[Pt],Object.getOwnPropertyDescriptor(zt.prototype,"setCookie"),zt.prototype),Ht(zt.prototype,"set",[At],Object.getOwnPropertyDescriptor(zt.prototype,"set"),zt.prototype),Ht(zt.prototype,"updateLocation",[_t],Object.getOwnPropertyDescriptor(zt.prototype,"updateLocation"),zt.prototype),Ht(zt.prototype,"updateCookies",[Nt],Object.getOwnPropertyDescriptor(zt.prototype,"updateCookies"),zt.prototype),Ht(zt.prototype,"updateCookiesFromDocument",[Rt],Object.getOwnPropertyDescriptor(zt.prototype,"updateCookiesFromDocument"),zt.prototype),kt=zt))||kt)||kt);var Yt,Xt,Jt,Qt,er;function tr(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const rr=[at.Z.CONV,at.Z.FREEHAND_TEAMS];Yt=(0,d.En)("features/context/client"),Xt=(0,d.RR)("window","features/context/request"),Jt=y.aD.bound,Yt(Qt=(0,d.ri)(Qt=Xt((tr((er=class{constructor(e,t){this.window=e,this.request=t,this.cache=null}get userAgent(){return D()(this.window,"navigator.userAgent","")}get isWebkit(){return!!D()(this.window,"webkit.messageHandlers")&&!this.userAgent.includes("CriOS")}get isEmbedded(){const e=!!this.request.get("webview"),t=!!this.request.get("embedded"),r=this.type===at.Z.WEB||this.type===at.Z.DEBUG;return e||t||!r}get requiresPostMessage(){return!!this.request.get("webview")||!!this.request.get("embedded")||this.type===at.Z.ANDROID||this.type===at.Z.IOS}get current(){if(this.cache)return this.cache;const e=this.request.get("client"),t=e?e.replace(" ","+"):this.userAgent,r=at.Z.decode(t);return this.cache=r}get sessionType(){return rr.includes(this.current.type)?at.Z.WEB:this.current.type}get type(){return this.current.type}get version(){return this.current.version}get build(){return this.current.build}reset(){this.cache=null}}).prototype,"userAgent",[y.Fl],Object.getOwnPropertyDescriptor(er.prototype,"userAgent"),er.prototype),tr(er.prototype,"isWebkit",[y.Fl],Object.getOwnPropertyDescriptor(er.prototype,"isWebkit"),er.prototype),tr(er.prototype,"isEmbedded",[y.Fl],Object.getOwnPropertyDescriptor(er.prototype,"isEmbedded"),er.prototype),tr(er.prototype,"requiresPostMessage",[y.Fl],Object.getOwnPropertyDescriptor(er.prototype,"requiresPostMessage"),er.prototype),tr(er.prototype,"current",[y.Fl],Object.getOwnPropertyDescriptor(er.prototype,"current"),er.prototype),tr(er.prototype,"sessionType",[y.Fl],Object.getOwnPropertyDescriptor(er.prototype,"sessionType"),er.prototype),tr(er.prototype,"type",[y.Fl],Object.getOwnPropertyDescriptor(er.prototype,"type"),er.prototype),tr(er.prototype,"version",[y.Fl],Object.getOwnPropertyDescriptor(er.prototype,"version"),er.prototype),tr(er.prototype,"build",[y.Fl],Object.getOwnPropertyDescriptor(er.prototype,"build"),er.prototype),tr(er.prototype,"reset",[Jt],Object.getOwnPropertyDescriptor(er.prototype,"reset"),er.prototype),Qt=er))||Qt)||Qt);var nr,ir,or,ar,sr;function lr(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const cr=(0,m.kg)("context:domain");nr=(0,d.En)("features/context/domain"),ir=(0,d.RR)("features/http","features/toggles"),nr(or=(0,d.ri)(or=ir((sr=lr((ar=class{constructor(e,t){var r,n,i,o;r=this,n="controlSettings",o=this,(i=sr)&&Object.defineProperty(r,n,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0}),this.http=e,this.toggles=t}get isControlled(){return D()(this.controlSettings,"controlled",!1)}async load(){await this.loadDomainControlSettings()}async loadDomainControlSettings(){try{if(this.controlSettings)return;const e=await this.http.get("/auth-api/domain-control/active",{errorKey:"global",errorMap:{"*":()=>({config:{[vt.ew]:!0}})}});cr("Loaded (%d) %O",e.status,e.data),(0,y.z)((()=>{this.controlSettings=e.data}))}catch(e){cr("Load failed %O",e)}}}).prototype,"controlSettings",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lr(ar.prototype,"isControlled",[y.Fl],Object.getOwnPropertyDescriptor(ar.prototype,"isControlled"),ar.prototype),or=ar))||or)||or);var pr,ur,dr,mr,hr,yr;function gr(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const br=(0,m.kg)("context:team"),fr="login";pr=(0,d.En)("features/context/team"),ur=(0,d.RR)("features/http","features/context/request","navigator"),dr=y.aD.bound,pr(mr=(0,d.ri)(mr=ur((yr=gr((hr=class{constructor(e,t,r){var n,i,o,a;n=this,i="current",a=this,(o=yr)&&Object.defineProperty(n,i,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(a):void 0}),this.http=e,this.request=t,this.nav=r,this.cache={}}get subdomain(){return this.request.subdomain}get isGlobal(){return this.subdomain===fr}get id(){return D()(this.current,"id")}get name(){return D()(this.current,"name")}get logo(){return D()(this.current,"logo")}get domain(){return D()(this.current,"domain")}get host(){return D()(this.current,"host")}get passwordPolicy(){return D()(this.current,"passwordPolicy")}get teamLogin(){return D()(this.current,"teamLogin")}get teamLoginRestriction(){return D()(this.current,"teamLogin.loginRestriction",{})}get isLocked(){return"locked"===D()(this.teamLoginRestriction,"key","")}get useAltAuth(){return this.samlInfo.enabled&&D()(this.current,"teamLogin.samlSettings.useAltAuth",!1)}get version(){return D()(this.current,"version","v7")}get isV6(){return"v6"===this.version}get isV7(){return"v7"===this.version}get rootUrl(){return this.isV6?"/d/main":"/"}get type(){return this.samlInfo.enabled?Qe.$u.SAML:(this.emailInfo.enabled,Qe.$u.EMAIL)}get samlInfo(){const{teamLogin:e}=this,t=D()(e,"loginType")===Qe.$u.SAML;return t?{enabled:t,buttonLabel:D()(e,"samlSettings.label")||"Sign In With SSO"}:{enabled:!1}}get emailInfo(){return{enabled:!0}}get openEnrollment(){return D()(this.current,"openEnrollment",{enabled:!1})}async load(){return this.cache.loader||(this.cache.loader=(async()=>{if(this.isGlobal)return null;try{const e=await this.http.get("/auth-api/teams",{errorKey:"global",errorMap:{"400|404":()=>({config:{[vt.ew]:!0}})},preloadId:"auth-api-teams"});return(0,y.z)((()=>{const{data:t}=e,r=D()(t,"signupModeID",Qe.RL.DEFAULT);this.current={id:t.id,name:t.name,domain:`${t.subdomain}.${this.request.hostdomain}`,host:`${t.subdomain}.${this.request.hostdomain}`,logo:t.logo,logoAssetKey:t.logoAssetKey,openEnrollment:{enabled:r===Qe.RL.OPEN_ENROLLMENT,domains:t.approvedDomains},passwordPolicy:t.passwordPolicy,teamLogin:t.teamLogin,version:"v7",subdomain:t.subdomain,approvedDomains:t.approvedDomains,signupModeID:t.signupModeID}})),br("Loaded (%d) %O",e.status,(0,y.ZN)(this.current)),this.current}catch(e){return br("Load failed %O",e),this.nav.goTo(this.request.pathname,{subdomain:fr,query:this.request.queryobject}),null}})()),this.cache.loader}reset(){br("Clearing cached team data"),this.current=null,this.cache={}}}).prototype,"current",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gr(hr.prototype,"subdomain",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"subdomain"),hr.prototype),gr(hr.prototype,"isGlobal",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"isGlobal"),hr.prototype),gr(hr.prototype,"id",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"id"),hr.prototype),gr(hr.prototype,"name",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"name"),hr.prototype),gr(hr.prototype,"logo",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"logo"),hr.prototype),gr(hr.prototype,"domain",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"domain"),hr.prototype),gr(hr.prototype,"host",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"host"),hr.prototype),gr(hr.prototype,"passwordPolicy",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"passwordPolicy"),hr.prototype),gr(hr.prototype,"teamLogin",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"teamLogin"),hr.prototype),gr(hr.prototype,"teamLoginRestriction",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"teamLoginRestriction"),hr.prototype),gr(hr.prototype,"isLocked",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"isLocked"),hr.prototype),gr(hr.prototype,"useAltAuth",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"useAltAuth"),hr.prototype),gr(hr.prototype,"version",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"version"),hr.prototype),gr(hr.prototype,"isV6",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"isV6"),hr.prototype),gr(hr.prototype,"isV7",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"isV7"),hr.prototype),gr(hr.prototype,"rootUrl",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"rootUrl"),hr.prototype),gr(hr.prototype,"type",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"type"),hr.prototype),gr(hr.prototype,"samlInfo",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"samlInfo"),hr.prototype),gr(hr.prototype,"emailInfo",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"emailInfo"),hr.prototype),gr(hr.prototype,"openEnrollment",[y.Fl],Object.getOwnPropertyDescriptor(hr.prototype,"openEnrollment"),hr.prototype),gr(hr.prototype,"load",[y.aD],Object.getOwnPropertyDescriptor(hr.prototype,"load"),hr.prototype),gr(hr.prototype,"reset",[dr],Object.getOwnPropertyDescriptor(hr.prototype,"reset"),hr.prototype),mr=hr))||mr)||mr);var Er,vr,Or,wr,Sr,Dr,Ir,Cr,Tr,Pr,Ar,_r,Nr,Rr,kr,zr,jr,xr,Lr,Mr,Fr=r(7976),Zr=r.n(Fr),Ur=r(24302),Vr=r.n(Ur),Gr=r(82641),qr=r.n(Gr),Wr=r(7419),Br=r(64870),$r=r.n(Br);function Hr(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Kr(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Yr=(0,m.kg)("context:user");Er=(0,d.En)("features/context/user"),vr=(0,d.RR)("features/http","features/toggles","features/context/request"),Or=y.aD.bound,wr=y.aD.bound,Sr=y.aD.bound,Dr=y.aD.bound,Ir=y.aD.bound,Cr=y.aD.bound,Tr=y.aD.bound,Er(Pr=(0,d.ri)(Pr=vr((_r=Kr((Ar=class{constructor(e,t,r){Hr(this,"current",_r,this),Hr(this,"migrationStatus",Nr,this),Hr(this,"teams",Rr,this),Hr(this,"teamsErrors",kr,this),Hr(this,"joinables",zr,this),Hr(this,"passwordUpdate",jr,this),Hr(this,"credentials",xr,this),Hr(this,"_authToken",Lr,this),Hr(this,"session",Mr,this),this.http=e,this.toggles=t,this.request=r,(0,y.U5)((()=>this.email),(e=>this.toggles.useEmail(e)))}get authenticated(){return!!D()(this.current,"profile")}get profile(){return D()(this.current,"profile")}get email(){return D()(this.profile,"email")||D()(this.credentials,"email")}get name(){return D()(this.profile,"name")}get avatar(){return D()(this.profile,"avatarURL")}get analyticsID(){return D()(this.current,"vendorID")}get isMigrating(){return this.migrationStatus===Wr.P.IN_PROGRESS}get isV6Only(){return this.isV6&&!this.isV7}get isV6(){return Vr()(this.teams,{version:"v6"})}get isV7(){return Vr()(this.teams,{version:"v7"})}get authToken(){return this._authToken||this.request.get("authToken")||this.request.get("jwt")}get hasSession(){return!qr()(this.session)}get isOauth(){return"oauth"===this.request.get("action")}get marketingSettingsRequired(){var e;return null===(e=this.current)||void 0===e?void 0:e.marketingSettingsRequired}usingAuthToken(e){this._authToken=e}usingCredentials(e){this.credentials=e}updatePassword(e){this.credentials.password=e}async loadSession(){try{const e=await this.http.get("/auth-api/session",{errorKey:"global",errorMap:{401:()=>({config:{[vt.ew]:!1},data:{errorCode:$r().SIGN_IN_UNAUTHORIZED,message:null}})}});return(0,y.z)((()=>{this.session=D()(e,"data")})),Yr("Check session success: (%d) %O",e.status,e.data),this.session}catch(e){return Yr("Check session failed: (%d) %s",e.status,e.message),!1}}async checkSession(){try{const e=await this.load();return Yr("Check session success: (%d) %o",200,(0,y.ZN)(e)),e}catch(e){return Yr("Check session failed: (%d) %s",e.status,e.message),!1}}async load({suppressMsg:e=!1,errorKey:t="global"}={}){try{const r=await this.http.get("/auth-api/account",{errorKey:t,errorMap:{401:()=>({config:{[vt.ew]:e},data:{errorCode:$r().SIGN_IN_UNAUTHORIZED_TEAM,message:null}})}});return(0,y.z)((()=>{this.current=D()(r,"data")})),Yr("Loaded: (%d) %O",r.status,r.data),this.current}catch(e){throw Yr("Load failed: %O",e.message),this.current={},e}}async loadTeams(){try{const e=await this.http.get("/auth-api/account/teams");return(0,y.z)((()=>{this.migrationStatus=D()(e,"data.migrationStatus",""),this.teams=Zr()(D()(e,"data.teams",[]),(e=>{const[t]=e.host.split(".");return e.subdomain=t,e})),this.teamsErrors=D()(e,"data.errors",[]),this.joinables=D()(e,"data.joinables",[]),Yr("Teams loaded: (%d) %O",e.status,this.teams)})),this.teams}catch(e){throw Yr("Teams load failed: %O",e.message),this.teams={},e}}}).prototype,"current",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Nr=Kr(Ar.prototype,"migrationStatus",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Rr=Kr(Ar.prototype,"teams",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),kr=Kr(Ar.prototype,"teamsErrors",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),zr=Kr(Ar.prototype,"joinables",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),jr=Kr(Ar.prototype,"passwordUpdate",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xr=Kr(Ar.prototype,"credentials",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lr=Kr(Ar.prototype,"_authToken",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mr=Kr(Ar.prototype,"session",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Kr(Ar.prototype,"authenticated",[y.Fl],Object.getOwnPropertyDescriptor(Ar.prototype,"authenticated"),Ar.prototype),Kr(Ar.prototype,"profile",[y.Fl],Object.getOwnPropertyDescriptor(Ar.prototype,"profile"),Ar.prototype),Kr(Ar.prototype,"email",[y.Fl],Object.getOwnPropertyDescriptor(Ar.prototype,"email"),Ar.prototype),Kr(Ar.prototype,"name",[y.Fl],Object.getOwnPropertyDescriptor(Ar.prototype,"name"),Ar.prototype),Kr(Ar.prototype,"avatar",[y.Fl],Object.getOwnPropertyDescriptor(Ar.prototype,"avatar"),Ar.prototype),Kr(Ar.prototype,"analyticsID",[y.Fl],Object.getOwnPropertyDescriptor(Ar.prototype,"analyticsID"),Ar.prototype),Kr(Ar.prototype,"isMigrating",[y.Fl],Object.getOwnPropertyDescriptor(Ar.prototype,"isMigrating"),Ar.prototype),Kr(Ar.prototype,"isV6Only",[y.Fl],Object.getOwnPropertyDescriptor(Ar.prototype,"isV6Only"),Ar.prototype),Kr(Ar.prototype,"isV6",[y.Fl],Object.getOwnPropertyDescriptor(Ar.prototype,"isV6"),Ar.prototype),Kr(Ar.prototype,"isV7",[y.Fl],Object.getOwnPropertyDescriptor(Ar.prototype,"isV7"),Ar.prototype),Kr(Ar.prototype,"authToken",[y.Fl],Object.getOwnPropertyDescriptor(Ar.prototype,"authToken"),Ar.prototype),Kr(Ar.prototype,"hasSession",[y.Fl],Object.getOwnPropertyDescriptor(Ar.prototype,"hasSession"),Ar.prototype),Kr(Ar.prototype,"isOauth",[y.Fl],Object.getOwnPropertyDescriptor(Ar.prototype,"isOauth"),Ar.prototype),Kr(Ar.prototype,"marketingSettingsRequired",[y.Fl],Object.getOwnPropertyDescriptor(Ar.prototype,"marketingSettingsRequired"),Ar.prototype),Kr(Ar.prototype,"usingAuthToken",[Or],Object.getOwnPropertyDescriptor(Ar.prototype,"usingAuthToken"),Ar.prototype),Kr(Ar.prototype,"usingCredentials",[wr],Object.getOwnPropertyDescriptor(Ar.prototype,"usingCredentials"),Ar.prototype),Kr(Ar.prototype,"updatePassword",[Sr],Object.getOwnPropertyDescriptor(Ar.prototype,"updatePassword"),Ar.prototype),Kr(Ar.prototype,"loadSession",[Dr],Object.getOwnPropertyDescriptor(Ar.prototype,"loadSession"),Ar.prototype),Kr(Ar.prototype,"checkSession",[Ir],Object.getOwnPropertyDescriptor(Ar.prototype,"checkSession"),Ar.prototype),Kr(Ar.prototype,"load",[Cr],Object.getOwnPropertyDescriptor(Ar.prototype,"load"),Ar.prototype),Kr(Ar.prototype,"loadTeams",[Tr],Object.getOwnPropertyDescriptor(Ar.prototype,"loadTeams"),Ar.prototype),Pr=Ar))||Pr)||Pr);var Xr,Jr,Qr,en=r(57090),tn=r.n(en);Xr=(0,d.En)("features/context/token"),Jr=(0,d.RR)("features/context/request"),Xr(Qr=(0,d.ri)(Qr=Jr(Qr=class{constructor(e){this.request=e}get decoded(){let e;try{e=tn().decode(this.token)}catch{e={}}return e}get analyticsProps(){var e;return(null===(e=this.decoded)||void 0===e?void 0:e.analytics)||{}}get omitted(){var e,t;return(null===(e=this.decoded)||void 0===e||null===(t=e.ux)||void 0===t?void 0:t.omit)||[]}get requirements(){var e,t,r;return null!==(e=null===(t=this.decoded)||void 0===t||null===(r=t.ux)||void 0===r?void 0:r.requirements)&&void 0!==e?e:[]}get token(){return this.request.get("token")}get type(){var e;return null===(e=this.decoded)||void 0===e?void 0:e.type}getClaim(e){var t;return null!==(t=this.decoded[e])&&void 0!==t?t:""}get planKey(){return this.decoded&&this.getClaim("plan_key")}})||Qr)||Qr);var rn,nn,on,an,sn,ln;function cn(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const pn=(0,m.kg)("flow:context");rn=(0,d.En)("context/flow"),nn=y.aD.bound,on=y.aD.bound,rn(an=(0,d.ri)((ln=cn((sn=class{constructor(){var e,t,r,n;e=this,t="stack",n=this,(r=ln)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0}),this.stack.observe((e=>{"splice"===e.type&&(e.added.length?pn("↓ %O",...Zr()(e.added,"meta.name")):e.removed.length&&pn("↑ %O",...Zr()(e.removed,"meta.name")))}))}get current(){return this.stack.length?this.stack[this.stack.length-1]:null}visit(e){let t=this.stack.length-1;for(;t>=0&&e(this.stack[t]);)t--}find(e){let t=null;return this.visit((r=>(t=e(r),!t))),t}pop(){this.stack.pop()}push(e){this.stack.push(e)}}).prototype,"stack",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),cn(sn.prototype,"pop",[nn],Object.getOwnPropertyDescriptor(sn.prototype,"pop"),sn.prototype),cn(sn.prototype,"push",[on],Object.getOwnPropertyDescriptor(sn.prototype,"push"),sn.prototype),an=sn))||an);var un,dn,mn,hn,yn;function gn(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const bn={Global:"SignIn.Global",Team:"SignIn.Team"};un=(0,d.En)("features/flow"),dn=y.aD.bound,un(mn=(0,d.ri)((yn=gn((hn=class{constructor(){var e,t,r,n;e=this,t="current",n=this,(r=yn)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}start(e){this.current=e}}).prototype,"current",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return bn.Global}}),gn(hn.prototype,"start",[dn],Object.getOwnPropertyDescriptor(hn.prototype,"start"),hn.prototype),mn=hn))||mn);r(98715),r(1177);var fn,En,vn,On,wn,Sn=r(52867),Dn=r.n(Sn);function In(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Cn=(0,m.kg)("features:scim");fn=(0,d.En)("features/scim/api"),En=(0,d.RR)("features/analytics","features/context/team","features/http"),fn(vn=(0,d.ri)(vn=En((wn=In((On=class{constructor(e,t,r){var n,i,o,a;n=this,i="current",a=this,(o=wn)&&Object.defineProperty(n,i,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(a):void 0}),this.analytics=e,this.team=t,this.http=r}get initialScimValue(){return D()(this.current,"enabled",!1)}get samlEnabled(){return this.team.type===Dn().SAML}async isScimEnabled(){return!!this.samlEnabled&&(await this.getScimSettings(),D()(this.current,"enabled",!1))}async getScimSettings(){if(qr()(this.current))try{this.current=await this.http.get("/auth-api/scim/settings",{errorKey:"global"}).then((e=>e.data))}catch(e){Cn("Failed to get SCIM settings: %s",e.message)}}async canChangeEnterpriseSettings(){const e="Team.ChangeEnterpriseSettings",t=await this.http.get("/auth-api/permissions/authorize",{params:{permissionName:e},errorKey:"global"});return D()(t,`data['${e}']`,!1)}async toggleScim(e){return this.http.clearErrors("global"),this.current.enabled=await this.http.post("/auth-api/scim/update",{data:{action:e?"enable":"disable"},errorKey:"global"}).then((e=>D()(e,"data.enabled",!1))),this.current.enabled}async generateToken(e="global"){this.http.clearErrors(e);const t=await this.http.post("/auth-api/scim/token",{errorKey:e}).then((e=>D()(e,"data.auth_token"))).catch((async e=>{throw await this.analytics.track(bt.zW.SCIM_TOKEN,bt.p$.FAILED),e}));return await this.analytics.track(bt.zW.SCIM_TOKEN,bt.p$.UPDATED),t}}).prototype,"current",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),In(On.prototype,"initialScimValue",[y.Fl],Object.getOwnPropertyDescriptor(On.prototype,"initialScimValue"),On.prototype),In(On.prototype,"samlEnabled",[y.Fl],Object.getOwnPropertyDescriptor(On.prototype,"samlEnabled"),On.prototype),vn=On))||vn)||vn);r(40895),r(66756),r(48031),r(12860);var Tn,Pn,An,_n,Nn,Rn,kn,zn,jn,xn,Ln,Mn=r(92810),Fn=r.n(Mn),Zn=r(33671),Un=r.n(Zn),Vn=r(28154);function Gn(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function qn(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const Wn=(0,m.kg)("flags");Tn=(0,d.En)("features/toggles"),Pn=(0,d.RR)("features/http"),An=y.aD.bound,_n=y.aD.bound,Nn=y.aD.bound,Rn=y.aD.bound,kn=y.aD.bound,Tn(zn=(0,d.ri)(zn=Pn((xn=qn((jn=class{constructor(e){Gn(this,"values",xn,this),Gn(this,"email",Ln,this),this.http=e}get(e){const t=e.name,r=e.DEFAULT||!1,n=this.values.get(t);return Fn()(n)?r:n}async fetch(e){return await this.ensureLoaded(),this.get(e)}async fetchAll(){const e=await this.http.get("/auth-api/flags",{params:{keys:Zr()(Vn.Z,(({name:e})=>e)),email:this.email},paramsSerializer:e=>F.stringify(e),errorHandler:e=>(Wn("Unable to fetch flags",e),Un()(Vn.Z,((e,{DEFAULT:t},r)=>Object.assign(e,{[r]:t})),{}))}).then((e=>e.data));Et()(e,((e,t)=>{Wn("%s => %o",t,e),this.values.set(t,e)}))}ensureLoaded({force:e=!1}={}){return!e&&this.loading?this.loading:this.loading=this.fetchAll()}async useEmail(e){if(e=qr()(e)?null:e,this.email!==e)return this.email=e,this.ensureLoaded({force:!0})}load(){return this.ensureLoaded()}}).prototype,"values",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Ln=qn(jn.prototype,"email",[y.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qn(jn.prototype,"fetch",[An],Object.getOwnPropertyDescriptor(jn.prototype,"fetch"),jn.prototype),qn(jn.prototype,"fetchAll",[_n],Object.getOwnPropertyDescriptor(jn.prototype,"fetchAll"),jn.prototype),qn(jn.prototype,"ensureLoaded",[Nn],Object.getOwnPropertyDescriptor(jn.prototype,"ensureLoaded"),jn.prototype),qn(jn.prototype,"useEmail",[Rn],Object.getOwnPropertyDescriptor(jn.prototype,"useEmail"),jn.prototype),qn(jn.prototype,"load",[kn],Object.getOwnPropertyDescriptor(jn.prototype,"load"),jn.prototype),zn=jn))||zn)||zn);var Bn,$n,Hn,Kn,Yn,Xn,Jn;r(16887);function Qn(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}const ei=(0,m.kg)("tracking");Bn=(0,d.En)("features/tracking"),$n=(0,d.RR)("window"),Hn=y.aD.bound,Kn=y.aD.bound,Yn=y.aD.bound,Bn(Xn=$n(Xn=(0,d.ri)((Qn((Jn=class{constructor(e){this.window=e}get thirdPartyManager(){var e,t;return null===(e=this.window)||void 0===e||null===(t=e.inGlobalContext)||void 0===t?void 0:t.thirdPartyManager}get thirdParties(){var e;return null===(e=this.thirdPartyManager)||void 0===e?void 0:e.thirdParties}createRollworksPixel(){try{const t=this.window.adroll||[];t.track=(e=t,function(){e.push(["track",arguments])}),t.track("pageView",{segment_name:"f84e17b0"})}catch(e){ei("Failed to create Rollworks pixel",e)}var e}load({thirdParty:e,onLoad:t=(()=>{}),options:r={}}){try{ei("Loading third-party script",e,r),this.thirdPartyManager.load(e,{onLoad:t,mountWindow:window,...r})}catch(e){ei("Failed to load third-party",e)}}loadAds(){if(!this.thirdParties)return;const{GOOGLE_ANALYTICS:e}=this.thirdParties;this.load({thirdParty:e,onLoad:this.sendGoogle})}loadRollworks(){if(!this.thirdParties)return;const{ROLLWORKS:e}=this.thirdParties;this.load({thirdParty:e,onLoad:this.createRollworksPixel})}sendGoogle(){const{ga:e}=this.window;if("function"!=typeof e)return;e("create","UA-24306919-3","projects.invisionapp.com"),e("create","UA-24306919-1","invisionapp.com",{name:"rollupTracker"}),e("create","UA-24306919-2","invisionapp.com",{name:"wwwTracker"}),e("create","UA-24306919-4","invisionapp.com",{name:"blogTracker"});const t={};t.dimension1=function(e){let t="";return t="Existing Customer",t}(),t.metric1=window.devicePixelRatio||1,e("send","pageview",t),e("rollupTracker.send","pageview",t)}}).prototype,"createRollworksPixel",[Hn],Object.getOwnPropertyDescriptor(Jn.prototype,"createRollworksPixel"),Jn.prototype),Qn(Jn.prototype,"load",[Kn],Object.getOwnPropertyDescriptor(Jn.prototype,"load"),Jn.prototype),Qn(Jn.prototype,"sendGoogle",[Yn],Object.getOwnPropertyDescriptor(Jn.prototype,"sendGoogle"),Jn.prototype),Xn=Jn))||Xn)||Xn);var ti,ri,ni,ii,oi,ai,si;function li(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}ti=(0,d.En)("features/tracking/marketo"),ri=(0,d.RR)("features/context/config","features/context/request","features/tracking","window"),ni=y.aD.bound,ii=y.aD.bound,oi=y.aD.bound,ti(ai=ri(ai=(0,d.ri)((li((si=class{constructor(e,t,r,n){var i,o;this.config=e,this.request=t,this.tracking=r,this.window=n,this.tracking.load({thirdParty:null===(i=this.tracking)||void 0===i||null===(o=i.thirdParties)||void 0===o?void 0:o.MARKETO,onLoad:this.load})}getPlanName(e){return e.split("-").join(" ").replace(/\w\S*/g,(e=>e.replace(/^\w/,(e=>e.toUpperCase()))))}async load(){const{MktoForms2:e}=this.window;e&&e.loadForm("//pages.invisionapp.com",this.config.get("MARKETO_MUNCHKIN_ID"),this.config.get("MARKETO_FORM_ID"),(e=>{null==e||e.onSuccess((()=>!1))}))}submit({userId:e,email:t,name:r,marketingOptOut:n,planKey:i="free"}){const{MktoForms2:o}=this.window;o&&o.whenReady((o=>{if(o.getId()!==this.config.get("MARKETO_FORM_ID"))return;const a=r.split(" ");o.addHiddenFields({userId:e,Email:t,FirstName:a.shift(),LastName:a.join(" "),Plan_Name__c:this.getPlanName(i),Marketo_Consent_Opt_In__c:!n,UTM_source__c:this.request.get("utm_source"),UTM_campaign__c:this.request.get("utm_campaign"),UTM_medium__c:this.request.get("utm_medium")}),o.submit()}))}}).prototype,"getPlanName",[ni],Object.getOwnPropertyDescriptor(si.prototype,"getPlanName"),si.prototype),li(si.prototype,"load",[ii],Object.getOwnPropertyDescriptor(si.prototype,"load"),si.prototype),li(si.prototype,"submit",[oi],Object.getOwnPropertyDescriptor(si.prototype,"submit"),si.prototype),ai=si))||ai)||ai);r(69529);(0,m.kg)()("Configuring container"),d.ZP.register({window:{type:d.S7.AsValue,value:window},document:{type:d.S7.AsValue,value:document}});var ci,pi=d.ZP,ui=r(25817),di=r(59953),mi=r(97105),hi=r.n(mi),yi=r(50650),gi=r(5013),bi=r(47714);var fi,Ei=(0,d.f3)("features/context/config","window")(ci=class extends c().Component{onLoading(){return c().createElement(gi.gb,null)}onError(){const{window:e}=this.props;return c().createElement(bi.wC.A,null,c().createElement(gi.Q0.Ar,{heading:"Sorry about that!",subheading:c().createElement(ui.Z,null,"We're having trouble loading this section.",c().createElement("br",null),"Try ",c().createElement(di.Z,{role:"link",element:"a",onClick:t=>{t.preventDefault(),e.location.reload()}},"refreshing")," the page.")},c().createElement(hi(),null)))}render(){const{"features/context/config":e,children:t}=this.props;return c().createElement(yi.Z,{stores:[e],loading:this.onLoading(),rejected:this.onError()},t)}})||ci;var vi,Oi=(0,d.f3)("window")(fi=class extends c().Component{constructor(e){super(e);const{handleMounted:t,window:r}=e;this.window=r,t()}async componentDidMount(){const e=this.window.inGlobalContext.appShell.getFeatureContext("auth-ui"),t=await e.getRuntimeProvidedResource("bugsnag");this.bugsnag=null==t?void 0:t.getClient()}componentDidCatch(e,t){const r=D()(this.window,"rum.markError");r&&r(e,t);const n=this.bugsnag;n&&n.notify(e)}render(){return this.props.children}})||fi;var wi=(0,d.f3)("viewport")(vi=class extends c().Component{constructor(e){super(e),this.router=e.router,this.viewport=e.viewport,(0,y.EH)((()=>{const{current:e}=this.router.route;if(e){const{params:t,route:r}=e;this.viewport.setView(r.view(),{title:r.title,...t})}}))}componentDidMount(){this.disposeHistoryObserver=this.router.observeHistory()}componentWillUnmount(){this.disposeHistoryObserver()}render(){return c().createElement(ze,null)}})||vi,Si=r(87860),Di=r(71047);const Ii=Si.vJ`
  html, body {
    font-family: 'Aktiv Grotesk', -apple-system, BlinkMacSystemFont, 'Open Sans', open-sans, sans-serif;
    font-size: 14px;
    line-height: 20px;
    font-weight: 300;

    box-sizing: border-box;
    height: 100%;
    margin: 0;
    padding: 0;
  }

  #app {
    height: 100%;
  }

  * {
    box-sizing: inherit;

    &::before,
    &::after {
      box-sizing: inherit;
    }
  }

  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  .no-print {
    @media print {
      display: none;
    }
  }
`;(0,m.kg)()("Configuring shell");var Ci,Ti=({children:e})=>c().createElement(Si.f6,{theme:Di.ZP},c().createElement(c().Fragment,null,c().createElement(Ii,null),c().createElement(gi.So,null,e)));const Pi=(0,m.kg)("routes");var Ai,_i=(0,d.f3)("router")(Ci=class extends c().Component{constructor(e){super(e);const{router:t}=e;t.onNotFound({pattern:"/auth/sign-in",view:()=>r(48031).ZP,title:"InVision - Sign In"}),t.onError((e=>Pi("Unhandled error: %O",e))),t.register([{name:"2fa-settings",pattern:"/auth/2fa/settings",view:()=>r(64060).Ar,title:"InVision - Two-Factor Authentication"},{name:"2fa-team-settings",pattern:"/auth/2fa/team-settings",view:()=>r(30730).u,title:"InVision - Two-Factor Authentication"},{name:"access-document",pattern:"/auth/access-document",view:()=>r(98021).Z,title:"InVision - Collaborate as a visitor"},{name:"domain-control-settings",pattern:"/auth/domain-control/settings",view:()=>r(32600).Z,title:"InVision - Domain Control"},{name:"document",pattern:"/auth/join-team/document",view:()=>r(65346).Z,title:"InVision - Join Team"},{name:"email-update",pattern:"/auth/email-update",view:()=>r(627).Z,title:"InVision - Update your email"},{name:"get-started",pattern:"/auth/get-started",view:()=>r(21106).Z,title:"InVision - Get Started"},{name:"join-team-invite",pattern:"/auth/join-team/invite",view:()=>r(98715).Ko,title:"InVision - Join Team"},{name:"join-team-invite-legacy",pattern:"/auth/accept-invite/:inviteToken",view:()=>r(98715).Ko,title:"InVision - Join Team"},{name:"join-team-auto-provision",pattern:"/auth/join-team/auto-provision",view:()=>r(98715).Ko,title:"InVision - Join Team"},{name:"no-teams",pattern:"/auth/no-teams",view:()=>r(9343).Z,title:"InVision - No Teams"},{name:"open-enrollment",pattern:"/auth/join-team/open-enrollment",view:()=>r(41901).Z,title:"InVision - Join Team"},{name:"oauth-consent",pattern:"/auth/oauth/consent",view:()=>r(3608).y,title:"InVision - OAuth Consent"},{name:"public-link",pattern:"/auth/public-link",view:()=>r(66756).Z,title:"InVision - Sign in to Comment"},{name:"request-access",pattern:"/auth/request-access",view:()=>r(70273).Z,title:"InVision - Request access to team"},{name:"request-access-settings",pattern:"/auth/request-access/settings",view:()=>r(59468).Z,title:"InVision - Request access settings"},{name:"request-reset",pattern:"/auth/password/request-reset",view:()=>r(48526).A,title:"InVision - Request a new password"},{name:"reset",pattern:"/auth/password/reset",view:()=>r(48526).A,title:"InVision - Reset your password"},{name:"scim-settings",pattern:"/auth/scim/settings",view:()=>r(40895).Z,title:"SCIM settings"},{name:"select-a-team",pattern:"/auth/select-a-team",view:()=>r(9343).Z,title:"InVision - Select a Team"},{name:"sign-in-subdomain",pattern:"/auth/sign-in/subdomain",view:()=>r(48749).A,title:"InVision - Team Subdomain"},{name:"sign-in",pattern:"/auth/sign-in",view:()=>r(48031).ZP,title:"InVision - Sign In"},{name:"sign-in-action",pattern:"/auth/sign-in/:action",view:()=>r(48031).ZP,title:"InVision - Sign In"},{name:"sign-out",pattern:"/auth/sign-out",view:()=>r(12860).Z,title:"InVision - Sign Out"},{name:"sign-up",pattern:"/auth/sign-up",view:()=>r(41274).A,title:"InVision - Sign Up"},{name:"sign-up-alias-new-user",pattern:"/auth/sign-up/new-user",view:()=>r(41274).A,title:"InVision - New User"},{name:"success",pattern:"/auth/success",title:"InVision"},{name:"team-create",pattern:"/auth/team-create",view:()=>r(63970).C,title:"InVision - Create a team"},{name:"team-domain",pattern:"/auth/team-domain",view:()=>r(48749).A,title:"InVision - Team Subdomain"},{name:"team-reserve",pattern:"/auth/team-reserve",view:()=>r(83879).Z,title:"InVision - Sign Up"},{name:"team-selection",pattern:"/auth/team-selection",view:()=>r(9343).Z,title:"InVision - Select a Team"},{name:"team-select",pattern:"/auth/team-select",view:()=>r(9343).Z,title:"InVision - Select a Team"}]),this.router=t}render(){const{children:e}=this.props;return e(this.router)}})||Ci,Ni=(r(88821),r(76069));var Ri=(0,Ni.Pi)(Ai=class extends c().Component{constructor(e){super(e),this.scope=d.ZP.current.child()}render(){const{children:e}=this.props;return c().createElement(Ni.zt,this.providers,e)}})||Ai;var ki=({handleMounted:e})=>((0,l.useEffect)((()=>{const e=pi.resolve("features/context/request"),t=pi.resolve("window");e.updateLocation(t.location)}),[]),c().createElement(Ri,{scope:pi.current},c().createElement(Ti,null,c().createElement(Ei,null,c().createElement(Oi,{handleMounted:e},c().createElement(_i,null,(e=>c().createElement(wi,{router:e}))))))));const zi=["__mobxInstanceCount","__mobxGlobals","intlTelInputUtils"];var ji=new class{constructor(){this.globals={}}removeGlobals(){zi.forEach((e=>{this.globals[e]=window[e],delete window[e]}))}restoreGlobals(){Object.keys(this.globals).forEach((e=>{const t=this.globals[e];window[e]=t,delete this.globals[e]}))}};const{appShell:xi}=window.inGlobalContext,Li=xi.getFeatureContext("auth-ui"),{MOUNT:Mi,UNMOUNT:Fi}=xi.events.COMMAND_TYPES,Zi=(e,t)=>{t({reactComponent:c().createElement(e,{handleMounted:()=>{return e=Mi,Li.resolveCommand(e);var e}}),reactDom:u(),react:c()})};Li.onCommandDeferred(Mi,(({renderReactComponent:e})=>{ji.restoreGlobals(),Zi(ki,e)})),Li.supportsComposition&&Li.supportsComposition()&&Li.onCommand(Fi,(({mountElement:e})=>{ji.removeGlobals(),u().unmountComponentAtNode(e)}))},94446:function(e,t,r){"use strict";var n=r(16624),i=r.n(n),o=r(59549),a=r(59953),s=r(64870);const l=()=>{o.ZP.resolve("navigator").goTo("get-started")},c={[s.CHALLENGE_PASSWORD_UNAUTHORIZED]:"That password is incorrect.",[s.SAML_DISABLED]:i().createElement("span",null,"Please configure SSO before enabling SCIM provisioning."," ",i().createElement(a.Z,{key:0,element:"a",href:"/teams/settings/sso"},"Set up SSO.")),[s.SIGN_IN_ATTEMPTS_EXCEEDED]:()=>i().createElement("span",null,"Too many failed login attempts. Please try again later or"," ",i().createElement(a.Z,{href:"https://support.invisionapp.com/hc/en-us/articles/360028450211",target:"_blank",rel:"noreferrer"},"contact support.")),[s.SIGN_IN_UNAUTHORIZED]:({showSignUp:e})=>i().createElement("span",null,"You entered an incorrect email, password, or both.",e&&i().createElement("span",{"data-component":"get-started-link"}," Need an account? ",i().createElement(a.Z,{onClick:l,element:"a"},"Sign up"))),[s.SIGN_IN_UNAUTHORIZED_INVITE]:"Looks like you entered an incorrect password. Please try again.",[s.SIGN_IN_UNAUTHORIZED_TEAM]:"You aren't a member of this team; reach out to a team admin for your invite.",[s.MFA_INVALID_CODE]:"Please make sure you have entered a valid verification code and try again.",[s.MFA_UNSUPPORTED_CLIENT]:"You have two-factor authentication enabled on this account. In order to login, please update to the latest version.",[s.MFA_TEAM_UNSUPPORTED_CLIENT]:"One of your teams requires two-factor authentication. In order to login, please update to the latest version.",[s.INVALID_FORM_FIELD]:"One of your fields is invalid. Please try again or contact customer support.",[s.INVALID_EMAIL_INVITES]:"Invitations weren’t delivered to these addresses. Make sure there aren’t any typos.",[s.INVALID_INVITATION]:"Invalid invite.  Please reach out to your team admin to be invited to this team.",[s.DOMAIN_NOT_FOUND]:"Please make sure you have entered a valid InVision domain.",[s.OPEN_ENROLLMENT_DISABLED]:"${teamName} turned off open enrollment. Ask your team admin for an invite.",[s.OPEN_ENROLLMENT_DOMAIN_INVALID]:"${domain} is no longer an approved domain. Try a different email address, or ask your team admin for an invite.",[s.OPEN_ENROLLMENT_EXISTING_MEMBER]:"You are currently a member of the team. Login using your credentials below.",[s.PASSWORD_RESET_NOT_FOUND]:"Your password reset request has expired.  Please try again.",[s.JOIN_TEAM_EXISTING_MEMBER]:"You are currently a member of the team. Login using your credentials below.",[s.TIMED_OUT]:"Our servers aren't responding right now. Please try again in a few minutes.",[s.TOO_MANY_REQUESTS]:"Something went wrong. If it isn't fixed in a few minutes, please contact support.",[s.UNEXPECTED]:"Something went wrong. If it isn't fixed in a few minutes, please contact support."};t.Z=Object.assign(c,{default:c[s.UNEXPECTED]})},21490:function(e,t,r){"use strict";var n=r(32837),i=r(85811),o=r.n(i),a=r(66748),s=r.n(a);const l=(0,n.kg)("clientTypes"),c={ANDROID:"IMA",CONNECT:"Connect",CONV:"Conv",CRAFT:"Craft",DEBUG:"Debug",FREEHAND_TEAMS:"FreehandTeams",IOS:"IFI",MSTEAMS:"MSTeams",STUDIO:"Studio",WEB:"App",WEBEX:"Webex",ZOOM:"Zoom"},p={ANDROID:"IMA",CONNECT:"Connect",CONV:"Conv",CRAFT:"CraftManager",DEBUG:"⬆️⬆️⬇️⬇️⬅️➡️⬅️➡️🅱️🅰️",FREEHAND_TEAMS:"FreehandTeams",IOS:"IFI",MSTEAMS:"MSTeams",STUDIO:"InVisionStudio",WEBEX:"Webex",ZOOM:"Zoom"},u=s()(p).join("|"),d=()=>new RegExp(`(${u})(?:(?:[^\\s\\da-zA-Z](([\\S]+)))?)?`),m=()=>new RegExp(`(${u})(?:(?:[^\\s\\da-zA-Z]+((?:\\d+\\.)+(?:\\d)+))?(?:[^\\s\\da-zA-Z]+(\\w+))?)?`),h=({type:e=c.WEB,version:t="",build:r="",semver:n=""}={})=>Object.freeze({type:e,version:t,build:r,semver:n});t.Z={...c,create:h,decode:e=>{const t=d().exec(e);if(!t)return h();const[,r,n]=t,i=(e=>({[p.ANDROID]:c.ANDROID,[p.CONNECT]:c.CONNECT,[p.CONV]:c.CONV,[p.CRAFT]:c.CRAFT,[p.DEBUG]:c.DEBUG,[p.FREEHAND_TEAMS]:c.FREEHAND_TEAMS,[p.IOS]:c.IOS,[p.MSTEAMS]:c.MSTEAMS,[p.STUDIO]:c.STUDIO,[p.WEBEX]:c.WEBEX,[p.ZOOM]:c.ZOOM}[e]))(r),a=o().parse(n);if(!a){const t=m().exec(e);if(t){const[,,r,n]=t,o={type:i,version:r,build:n};return l("Identified client via legacy identifier: ",{client:o,clientString:e}),h(o)}return h()}const{version:s,build:u,raw:y}=a,g={type:i,version:s,build:u.join("."),semver:y};return l("Identified client: ",{client:g,clientString:e}),h(g)}}},64870:function(e){e.exports={BAD_REQUEST:"BAD_REQUEST",CONFLICT:"CONFLICT",EXPECTATION_FAILED:"EXPECTATION_FAILED",FORBIDDEN:"FORBIDDEN",NOT_FOUND:"NOT_FOUND",NOT_IMPLEMENTED:"NOT_IMPLEMENTED",SERVER_ERROR:"SERVER_ERROR",SERVICE_UNAVAILABLE:"SERVICE_UNAVAILABLE",TIMED_OUT:"TIMED_OUT",TOO_MANY_REQUESTS:"TOO_MANY_REQUESTS",UNAUTHORIZED:"UNAUTHORIZED",UNEXPECTED:"UNEXPECTED",CLAIM_ASSERTION:"CLAIM_ASSERTION",CHALLENGE_PASSWORD_UNAUTHORIZED:"CHALLENGE_PASSWORD_UNAUTHORIZED",CHALLENGE_EMAIL_UNAUTHORIZED:"CHALLENGE_EMAIL_UNAUTHORIZED",EMAIL_VALIDATION_FAILED:"EMAIL_VALIDATION_FAILED",MFA_INVALID_CODE:"MFA_INVALID_CODE",MFA_CONFIGURATION_REQUIRED:"MFA_CONFIGURATION_REQUIRED",MFA_REQUIRED:"MFA_REQUIRED",MFA_UNSUPPORTED_CLIENT:"MFA_UNSUPPORTED_CLIENT",MFA_TEAM_UNSUPPORTED_CLIENT:"MFA_TEAM_UNSUPPORTED_CLIENT",INVALID_EMAIL_DOMAIN:"INVALID_EMAIL_DOMAIN",INVALID_FORM_FIELD:"INVALID_FORM_FIELD",INVALID_EMAIL_INVITES:"INVALID_EMAIL_INVITES",INVALID_INVITATION:"INVALID_INVITATION",DOMAIN_NOT_FOUND:"DOMAIN_NOT_FOUND",DOCUMENT_LINK_DISABLED:"DOCUMENT_LINK_DISABLED",INVITATION_EXISTING_MEMBER:"INVITATION_EXISTING_MEMBER",INVITATION_TOKEN_INVALID:"INVITATION_TOKEN_INVALID",JOIN_TEAM_EXISTING_MEMBER:"JOIN_TEAM_ALREADY_MEMBER",JOIN_TEAM_MISSING_PARAMS:"JOIN_TEAM_MISSING_PARAMS",JOIN_TEAM_SSO_ENABLED:"JOIN_TEAM_SSO_ENABLED",DOCUMENT_LINK_TOKEN_INVALID:"DOCUMENT_LINK_TOKEN_INVALID",DOCUMENT_LINK_EXISTING_MEMBER:"DOCUMENT_LINK_EXISTING_MEMBER",OPEN_ENROLLMENT_DISABLED:"OPEN_ENROLLMENT_DISABLED",OPEN_ENROLLMENT_TOKEN_INVALID:"OPEN_ENROLLMENT_TOKEN_INVALID",OPEN_ENROLLMENT_DOMAIN_INVALID:"OPEN_ENROLLMENT_DOMAIN_INVALID",OPEN_ENROLLMENT_EXISTING_MEMBER:"OPEN_ENROLLMENT_EXISTING_MEMBER",SAML_DISABLED:"SAML_DISABLED",SIGN_IN_ATTEMPTS_EXCEEDED:"SIGN_IN_ATTEMPTS_EXCEEDED",SIGN_IN_UNAUTHORIZED:"SIGN_IN_UNAUTHORIZED",SIGN_IN_UNAUTHORIZED_INVITE:"SIGN_IN_UNAUTHORIZED_INVITE",SIGN_IN_UNAUTHORIZED_TEAM:"SIGN_IN_UNAUTHORIZED_TEAM",SIGN_UP_BLOCKED:"SIGN_UP_BLOCKED",PASSWORD_EXPIRED:"PASSWORD_EXPIRED",PASSWORD_COMPLEXITY:"PASSWORD_COMPLEXITY",PASSWORD_RESET_NOT_FOUND:"PASSWORD_RESET_NOT_FOUND"}},28154:function(e,t,r){"use strict";r.d(t,{s:function(){return n}});const n={DEPLOY:Symbol("Deployment"),EXPERIMENT:Symbol("Experimental"),OPS:Symbol("Operational")},i={TEAM_SWITCHER_MIGRATION_UPDATES:{NAME:"auth-ui-auth-1666-migration-team-switcher-updates",DEFAULT:!1},V7_SIGN_UP:{NAME:"auth-ui-green-2945-v-7-sign-up",DEFAULT:!1},FREE_HAND_ROLE_COLLECTION:{ID:"auth-ui-fh-169-role-collection",DEFAULT:!1},FREE_HAND_TEAM_ROLE_COLLECTION:{ID:"auth-ui-growth-1-onboard-role-invited",DEFAULT:null},FREEHAND_USECASES:{ID:"auth-ui-growth-81-freehand-usecases",DEFAULT:!1},CLOUD_SIGNUP_TOAST:{ID:"auth-ui-growth-239-cloud-signup-toast",DEFAULT:!1,TYPE:n.EXPERIMENT},AUTO_PROVISION:{ID:"auth-ui-growth-249-auto-provision",DEFAULT:!1}};Object.keys(i).forEach((e=>{i[e].name=e,i[e].toString=()=>e})),t.Z=i},76190:function(e){const t={AT:"Austria",BE:"Belgium",BG:"Bulgaria",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DK:"Denmark",EE:"Estonia",EL:"Greece",ES:"Spain",FI:"Finland",FR:"France",GB:"Great Britain (alternative)",GR:"Greece (alternative)",HR:"Croatia",HU:"Hungary",IE:"Ireland",IT:"Italy",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",MT:"Malta",NL:"Netherlands",PL:"Poland",PT:"Portugal",RO:"Romania",SE:"Sweden",SI:"Slovenia",SK:"Slovakia",UK:"United Kingdom",GF:"French Guiana",GP:"Guadeloupe",ME:"Montenegro",MF:"Saint Martin",MQ:"Martinique",RE:"Reunion",YT:"Mayotte",AX:"Aland Islands",GI:"Gibraltar",AI:"Anguilla",AW:"Aruba",BL:"Saint Bartelemey",BM:"Bermuda",CW:"Curacao",FK:"Falkland Islands (Malvinas)",GL:"Greenland",GS:"South Georgia and the South Sandwich Islands",IO:"British Indian Ocean Territory",KY:"Cayman Islands",MS:"Montserrat",NC:"New Caledonia",PF:"French Polynesia",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",SH:"Saint Helena",SX:"Sint Maarten",TC:"Turks and Caicos Islands",TF:"French Southern Territories",VG:"Virgin Islands, British",WF:"Wallis and Futuna",AD:"Andorra",MC:"Monaco",SM:"San Marino",VA:"Vatican City",IS:"Iceland",LI:"Liechtenstein",NO:"Norway",JE:"Jersey",GG:"Guernsey"};e.exports=t,e.exports.includes=function(e){return!!t[e]}},81281:function(e,t,r){"use strict";r.d(t,{Qv:function(){return n},X5:function(){return i.Z},SM:function(){return a()},vU:function(){return s.Z},ND:function(){return c()},$u:function(){return u()},_B:function(){return g()},az:function(){return d},RL:function(){return h()}});var n={Challenges:{VerifyAccount:{Email:"account:email",Password:"account:password"},VerifyEmail:"email"},Intentions:{UpdateEmail:"update-email",Update2FA:"update-2fa",VerifyAccount:"verify-account"},Scopes:{UpdateEmail:"user:email:write",Update2FA:"user:2fa:write"}},i=r(21490),o=r(64870),a=r.n(o),s=r(28154),l=r(79684),c=r.n(l),p=r(52867),u=r.n(p),d=(r(19277),{ALLOWED:["utm_term","analytics-force-disallow","forceStandalone","inviteToken","redirectTo"]}),m=r(98775),h=r.n(m),y=r(96921),g=r.n(y)},79684:function(e){e.exports={DOCUMENT_LINK:"DOCUMENT_LINK",OPEN_ENROLLMENT:"OPEN_ENROLLMENT",INVITATION:"INVITATION"}},52867:function(e){e.exports={EMAIL:"email",SAML:"saml",DEFAULT:"default"}},19277:function(e){const t={PRIMARY_OWNER:1,OWNER:2,ADMIN:3,MEMBER:4,GUEST:5},r={1:"primary owner",2:"owner",3:"admin",4:"member",5:"guest"};Object.freeze(t),Object.freeze(r),e.exports={MemberRoles:t,RoleNames:r}},96921:function(e){e.exports={FREEHAND_FREE:"freehand-free"}},98775:function(e){e.exports={DEFAULT:1,INVITE_ONLY:1,OPEN_ENROLLMENT:2}},48397:function(e){e.exports=function(e){if(!Array.isArray(e))throw new TypeError("Middleware stack must be an array!");for(const t of e)if("function"!=typeof t)throw new TypeError("Middleware must be composed of functions!");const t=e;return(e,r)=>{const n=i=>{let o=t[i];if(i===t.length&&(o=r),!o)return Promise.resolve();try{return Promise.resolve(o(e,n.bind(null,i+1)))}catch(e){return Promise.reject(e)}};return n(0)}}},28552:function(e,t,r){var n=r(16624);function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Arrows"),n.createElement("g",{id:"Arrows",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:1},n.createElement("path",{d:"M6.4793991,12.1267834 C6.77756837,11.8392631 7.25236363,11.8478957 7.539884,12.146065 L7.539884,12.146065 L11.3970269,16.146065 L11.4726689,16.2379736 C11.674381,16.5269287 11.649167,16.9257897 11.3970269,17.1872683 L11.3970269,17.1872683 L7.539884,21.1872683 L7.45709958,21.2614037 C7.16749694,21.4845596 6.75046207,21.467932 6.4793991,21.2065499 L6.4793991,21.2065499 L6.40526377,21.1237655 C6.1821078,20.8341628 6.1987354,20.417128 6.46011756,20.146065 L6.46011756,20.146065 L9.092,17.4166659 L1,17.4166659 C0.585786438,17.4166659 0.25,17.0808795 0.25,16.6666659 C0.25,16.2869701 0.532153882,15.9731749 0.898229443,15.9235125 L1,15.9166659 L9.092,15.9166659 L6.46011756,13.1872683 L6.38904058,13.1018437 C6.17655962,12.8043204 6.20833613,12.3881656 6.4793991,12.1267834 Z M5.37774454,1.12678345 C5.64880751,1.3881656 5.68058401,1.80432039 5.46810306,2.1018437 L5.39702608,2.18726834 L2.764,4.91666589 L10.3571429,4.91666589 C10.7713564,4.91666589 11.1071429,5.25245233 11.1071429,5.66666589 C11.1071429,6.04636165 10.824989,6.36015685 10.4589134,6.40981927 L10.3571429,6.41666589 L2.764,6.41666589 L5.39702608,9.14606499 C5.65840823,9.41712796 5.67503583,9.83416283 5.45187986,10.1237655 L5.37774454,10.2065499 C5.10668156,10.467932 4.6896467,10.4845596 4.40004406,10.2614037 L4.31725964,10.1872683 L0.460116778,6.18726834 C0.207976644,5.92578969 0.182762631,5.52692869 0.384474738,5.23797356 L0.460116778,5.14606499 L4.31725964,1.14606499 C4.60478,0.847895719 5.07957527,0.839263078 5.37774454,1.12678345 Z",id:"Combined-Shape",fill:"#8E8E8F",fillRule:"nonzero",transform:"translate(5.928572, 11.166667) scale(-1, 1) translate(-5.928572, -11.166667) "}))])}i.defaultProps={width:"12px",height:"22px",viewBox:"0 0 12 22",version:"1.1"},e.exports=i,i.default=i},47323:function(e,t,r){var n=r(16624);function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"DB956AEF-E27A-4678-B0C6-DAD2544019F1"),n.createElement("defs",{key:1},n.createElement("linearGradient",{x1:"0%",y1:"0%",x2:"100.931692%",y2:"100%",id:"linearGradient-1"},[n.createElement("stop",{stopColor:"#FF009F",offset:"0%",key:0}),n.createElement("stop",{stopColor:"#FF0066",offset:"100%",key:1})])),n.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},n.createElement("g",{id:"Artboard",transform:"translate(-2514.000000, -505.000000)"},n.createElement("g",{id:"Group",transform:"translate(1769.000000, 344.000000)"},n.createElement("g",{id:"InV",transform:"translate(745.000000, 161.000000)"},[n.createElement("rect",{id:"Rectangle",fill:"url(#linearGradient-1)",x:"0",y:"0",width:"40",height:"40",key:0}),n.createElement("path",{d:"M24.9736842,15.8333333 C26.64,15.8333333 28.0157895,16.9867155 28.0157895,19.1956483 C28.0157895,19.7610116 27.9368421,20.3758055 27.7252632,21.0688646 L26.8778947,24.0223468 C26.7989474,24.3323182 26.7452632,24.5887398 26.7452632,24.8194162 C26.7452632,25.3332892 26.9578947,25.5897108 27.3547368,25.5897108 C27.7515789,25.5897108 28.2536842,25.3065143 28.8357895,23.7401801 L30,24.1768176 C29.3126316,26.5144761 28.0684211,27.4907318 26.5073684,27.4907318 C24.6821053,27.4907318 23.8094737,26.4382705 23.8094737,24.9986024 C23.8094737,24.58771 23.8621053,24.1510725 23.9936842,23.7144349 L24.8673684,20.6826875 C24.9736842,20.3490305 25,20.0400889 25,19.7579221 C25,18.7816665 24.3915789,18.1905582 23.4126316,18.1905582 C22.1684211,18.1905582 21.3484211,19.0576544 20.9252632,20.7279989 L19.2315789,27.3228735 L16.2684211,27.3228735 L16.8,25.249875 C15.9294737,26.6390826 14.72,27.5 13.2273684,27.5 C11.4284211,27.5 10.5821053,26.49388 10.5821053,24.9780063 C10.5821053,24.592859 10.6347368,24.1212081 10.7410526,23.6845706 L12.0894737,18.3316415 L10,18.3316415 L10.6347368,16.0568011 L15.6621053,16.0568011 L13.6768421,23.7010475 C13.5452632,24.1891753 13.4926316,24.5938888 13.4926316,24.8760556 C13.4926316,25.3652132 13.74,25.5083561 14.1273684,25.5928002 C14.3631579,25.6442905 16.2431579,25.6082473 17.2673684,23.3993144 L18.5705263,18.3316415 L16.4536842,18.3316415 L17.0884211,16.0568011 L21.6126316,16.0568011 L21.0305263,18.6395534 C21.8242105,17.2009151 23.4126316,15.8333333 24.9736842,15.8333333 Z M14.4669646,11.25 C15.5101279,11.25 16.3829787,12.061023 16.3829787,13.1244391 C16.3829787,14.1878552 15.5101279,15 14.4669646,15 C13.4260424,15 12.5531915,14.1878552 12.5531915,13.1244391 C12.5531915,12.061023 13.4260424,11.25 14.4669646,11.25 Z",id:"InVision-Logo",fill:"#FFFFFF",key:1})]))))])}i.defaultProps={width:"40px",height:"40px",viewBox:"0 0 40 40",version:"1.1"},e.exports=i,i.default=i},68056:function(e,t,r){var n=r(16624);function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"1574F7D9-BF3F-4522-91D3-ADB4124899B8"),n.createElement("defs",{key:1},[n.createElement("path",{d:"M1.43478671,0.0115139345 L9.49481351,0.00155761617 C10.1844353,0.000705746297 10.7441748,0.559064084 10.7450267,1.24868587 C10.7450317,1.2527592 10.7450168,1.25683253 10.744982,1.26090571 L10.5957362,18.7138674 L10.5957362,18.7138674 L6.21861332,23.4781355 C5.75204674,23.9859687 4.96213964,24.0194219 4.45430645,23.5528554 C4.42837458,23.5290307 4.40346216,23.5041198 4.37963601,23.4781893 L0,18.7117449 L0,18.7117449 L0.187729636,1.24676354 C0.195079168,0.56301723 0.751001424,0.0123585948 1.43478671,0.0115139345 Z",id:"path-1",key:0}),n.createElement("filter",{x:"-69.7%",y:"-30.6%",width:"239.4%",height:"158.8%",filterUnits:"objectBoundingBox",id:"filter-2",key:1},[n.createElement("feOffset",{dx:"0",dy:"0",in:"SourceAlpha",result:"shadowOffsetOuter1",key:0}),n.createElement("feGaussianBlur",{stdDeviation:"2.5",in:"shadowOffsetOuter1",result:"shadowBlurOuter1",key:1}),n.createElement("feColorMatrix",{values:"0 0 0 0 0.262745112   0 0 0 0 0.298039228   0 0 0 0 0.368627459  0 0 0 0.300101902 0",type:"matrix",in:"shadowBlurOuter1",key:2})])]),n.createElement("g",{id:"Experiment_1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},n.createElement("g",{id:"2.-Large---scale-&-fix-left",transform:"translate(-85.000000, -1277.000000)"},n.createElement("g",{id:"Quote",transform:"translate(0.000000, 1126.000000)"},n.createElement("g",{id:"Chris-Copy-5",transform:"translate(92.327170, 158.554574)"},n.createElement("g",{id:"Icon",transform:"translate(12.457342, 12.457342) rotate(-315.000000) translate(-12.457342, -12.457342) translate(7.079460, 0.217882)"},[n.createElement("g",{id:"Shape",transform:"translate(5.377882, 12.239459) rotate(-360.000000) translate(-5.377882, -12.239459) ",key:0},[n.createElement("use",{fill:"black",fillOpacity:"1",filter:"url(#filter-2)",xlinkHref:"#path-1",key:0}),n.createElement("use",{fill:"#FFFFFF",fillRule:"evenodd",xlinkHref:"#path-1",key:1})]),n.createElement("polygon",{id:"Shape",fill:"#182237",points:"2.35282345 7.16886051 8.40294091 7.16886051 8.40294091 17.7565661 5.37788218 20.7816248 2.35282345 17.7565661",key:1}),n.createElement("polygon",{id:"Shape",fill:"#182237",points:"2.35282345 2.63127242 8.40118738 2.63127242 8.40294091 5.65633115 2.35457698 5.65633115",key:2})])))))])}i.defaultProps={width:"40px",height:"40px",viewBox:"0 0 40 40",version:"1.1"},e.exports=i,i.default=i},96290:function(e,t,r){e.exports=r.p+"3fe21de3473b603dc85959cf052b2f85.jpg"},63001:function(e,t,r){e.exports=r.p+"7a1e0a264f75ac9534239b4b356a1aed.jpg"},53270:function(e,t,r){e.exports=r.p+"217ccab5e8f2e14bec25730f8b501a94.png"},68228:function(e,t,r){e.exports=r.p+"5d9317e03ac6f062f7616bedfce5e2ae.png"},62522:function(e,t,r){e.exports=r.p+"8b131dbd6ee9717dac8e769b7cce80e8.png"},33134:function(e,t,r){e.exports=r.p+"be1f08c3db10994630420fe2947ae44c.png"},34241:function(e,t,r){e.exports=r.p+"4e221e58addbc2f5158cad37399b7873.png"},11592:function(e,t,r){e.exports=r.p+"5553ef310fb0f4a52c8ed204990684da.png"},5063:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAQKADAAQAAAABAAAAQAAAAABGUUKwAAADoUlEQVR4Ae1bW08UMRT+FpZFxHiBEESiQFAeDBrvdx80Bo2PvpqY+DOMmmj8ISb+B1AjUR/w8gAaiTFG5OYFRF1ERbktrOfYTHZntrCTbrtsM21ymGmnPT3n65l2tl+J3ahJdwI4TxLF1BUjANJR9Nzzucy7ierVARDVkff8dhHgIRHVq4uAqI6857eLAA+JqF5dBER15D2/497NqlxjQMMuoIysmHgDpGaLb8WqArD/EtB2Vji9OAd86gOGe4Av/UB6qThgGAWgrALY3A7MTgGTw7kONZ/IlJVXAk3HhMz9Aj48JzCeAMmBTB0Td0YBOHMdqN0uzO67A7y753chTk7LUuV6YEeHkOkJYISAYPk9LqtdWJkxANbVZ5xnE5uP5gIQxnTW035BSHIQGH0qZPZnmNb56xgDIJ7wd16+xp+X5QYfAVsPAYlq2VMCtFXI3os0T7wmICgqRulVWVqQ1w9TagyAMJ0H6/TeBli27KGIOQ407qMVoiJYC4jR10vDbiFt54Dum8DifG69MCUlBQAbvJSi1aBXSEUVRcRhAUb9TnpIy2Yw1bSIifbzi+CTcPmSAyDb7IUZYOixkKoaWiFoHmmhlWNjU3YtgCdN1VTwp3B1nfiQUTUgbLuZSeAt7V/fvUIrQk/YVvnrKUcAv5unrwJ1bcBMEnhwC/jzNX+HOmrwa6IrKUcAT1TsPKeqWvqi6xD3tv1VBiC4VCXW2ua6sFcZADvdzbXaAZCLiaYSyZqtSbNWNeYiIK3VTmPKzAFgzGS9ih0AevG0T5uLAPvGTK/FLgL04mmfNhcB9o2ZXotdBOjF0z5tyhGw8Nfv7Hwg73+qN8dcoq6krGrsFfBjBNjUDDCVNfhQl0lyPf83RY/QpujJ3E1ReYtwpcoAMJl5/xqwoRGY/maG2Y3TLtO2g7QtTjvBy22Ls5s8AKpJGQDukBncqY+qXcvbcXjnI0ayWzLpyiyRaioIANVOl2t34PLK1JjXjoGfIKeZPWYWuSSpsVSAqloMcfih9ZTnovw6OSRYYiZIS54cZVo7+T7DEI88kzuVr9Raepwd6yayZKUDEimaSBOSl5AnNWZ9mf39PpAPosKeS7ovTGF2a343x15ml/jvmeIKHpHhgxDjtMQW64jM6v7DBO0cR/qQFGjneLzfHxXFzil/ChfbUFP9OQBMIWuLXhcBtoyUKTtdBJhC1ha9LgJsGSlTdroIMIWsLXo5ArpsMVa3nfRbrPMfgnbQWyxGfXAAAAAASUVORK5CYII="},83843:function(e){"use strict";e.exports=inGlobalContext.runtimeProvidedResources.mappings["react-dom"]["16.x.x"]},16624:function(e){"use strict";e.exports=inGlobalContext.runtimeProvidedResources.mappings.react["16.x.x"]},32574:function(){},63906:function(){},61758:function(){}},t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=e,r.x=function(){},r.amdD=function(){throw new Error("define cannot be used indirect")},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r.p="https://static.invisionapp-cdn.com/spa/auth-ui-static/",function(){var e={670:0},t=[[11283,297],[77588,297],[21609,297]],n=function(){},i=function(i,o){for(var a,s,l=o[0],c=o[1],p=o[2],u=o[3],d=0,m=[];d<l.length;d++)s=l[d],r.o(e,s)&&e[s]&&m.push(e[s][0]),e[s]=0;for(a in c)r.o(c,a)&&(r.m[a]=c[a]);for(p&&p(r),i&&i(o);m.length;)m.shift()();return u&&t.push.apply(t,u),n()},o=self.webpackChunkauthUIWebpackJsonpGlobal=self.webpackChunkauthUIWebpackJsonpGlobal||[];function a(){for(var n,i=0;i<t.length;i++){for(var o=t[i],a=!0,s=1;s<o.length;s++){var l=o[s];0!==e[l]&&(a=!1)}a&&(t.splice(i--,1),n=r(r.s=o[0]))}return 0===t.length&&(r.x(),r.x=function(){}),n}o.forEach(i.bind(null,0)),o.push=i.bind(null,o.push.bind(o));var s=r.x;r.x=function(){return r.x=s||function(){},(n=a)()}}(),r.x()}();
//# sourceMappingURL=auth-ui.694f6adc2eb43f941b45.js.map