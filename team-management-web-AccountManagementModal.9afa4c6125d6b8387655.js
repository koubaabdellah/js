(window.teamManagementWebWebpackJsonpGlobal=window.teamManagementWebWebpackJsonpGlobal||[]).push([[2],{161:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var s=a(0),n=a.n(s),r=a(1),i=a.n(r),o=a(25),c=a(80),l=a(92);const d=e=>{const{name:t,subdomain:a,logo:s,renderOptionsColumn:r=(()=>{}),disabled:i=!1}=e;return n.a.createElement(c.e,{key:a},n.a.createElement(c.c,{disabled:i},n.a.createElement(u,null,n.a.createElement(l.a,{size:"larger",order:"team",color:s?"light":"dark",name:t,src:s,alt:t})),n.a.createElement(m,null,n.a.createElement(o.a,{order:"subtitle",color:"text-darker"},t),n.a.createElement(o.a,{order:"subtitle",size:"smallest",color:"text-lighter"},a,".invisionapp.com"))),n.a.createElement(h,{align:"right"},r()))},u=i.a.div.withConfig({displayName:"TeamRowInfo__TeamAvatar",componentId:"sc-604xzh-0"})(["display:inline-block;margin-right:",";vertical-align:middle;"],({theme:e})=>e.spacing.s),m=i.a.div.withConfig({displayName:"TeamRowInfo__TextWrap",componentId:"sc-604xzh-1"})(["display:inline-block;vertical-align:middle;"]),h=i()(c.a).withConfig({displayName:"TeamRowInfo__OptionsColumn",componentId:"sc-604xzh-2"})(["display:flex;flex:none;align-items:center;padding-right:",";"],e=>e.theme.spacing.s)},279:function(e,t,a){var s=a(360),n=a(361),r=a(178);e.exports=function(e,t){return s(e,r(t,3),n)}},360:function(e,t){e.exports=function(e,t,a){var s;return a(e,(function(e,a,n){if(t(e,a,n))return s=a,!1})),s}},361:function(e,t,a){var s=a(362),n=a(195);e.exports=function(e,t){return e&&s(e,t,n)}},362:function(e,t,a){var s=a(363)();e.exports=s},363:function(e,t){e.exports=function(e){return function(t,a,s){for(var n=-1,r=Object(t),i=s(t),o=i.length;o--;){var c=i[e?o:++n];if(!1===a(r[c],c,r))break}return t}}},711:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a(23),r=a(26),i=a(3),o=a.n(i),c=a(0),l=a.n(c),d=a(1),u=a.n(d),m=a(234),h=a.n(m),p=a(279),g=a.n(p),f=a(19),b=a(432),w=a(25),v=a(334),y=a(69),P=a(108),E=a(79),O=a(141),S=a(136),j=a(170),x=a(71),C=a(185),N=a(95),I=a(215),D=a(24);const _=u()(I.a).withConfig({displayName:"UpdateButton__CenteredLoadingDots",componentId:"gjzfmb-0"})(["margin:0 auto;"]),T=u.a.div.withConfig({displayName:"UpdateButton__Div",componentId:"gjzfmb-1"})(["padding-top:",";text-align:center;"],e=>e.theme.spacing.s),k=u.a.div.withConfig({displayName:"UpdateButton__Wrapper",componentId:"gjzfmb-2"})(["position:relative;display:inline-block;"]);var M=function(e){const{isDisabled:t,isSubmitting:a,success:n,successMessage:r}=e,[i,o]=Object(c.useState)(!0),d=Object(s.useDispatch)(),u=Object(c.useCallback)(()=>{o(!0),d(D.b.showFlash({message:r,status:"success"})),setTimeout(()=>{o(!1)},900)},[d,r]);return Object(c.useEffect)(()=>{!0===n&&u()},[u,n,r]),l.a.createElement(T,null,l.a.createElement(k,null,l.a.createElement(S.a,{type:"submit",order:"primary",size:"larger",disabled:t||a},function(){const e=l.a.createElement(_,{color:"white",loaded:i,"data-testid":"update-button-checkmark"});return a?l.a.createElement(_,{color:"white"}):n&&i?e:"Update"}())))},U=a(117),R=a(92),A=a(7);function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}class W extends c.Component{constructor(e){super(e),o()(this,"UNSAFE_componentWillReceiveProps",e=>{if(e.profile.name!==this.props.profile.name||e.profile.email!==this.props.profile.email||e.profile.avatarID!==this.props.profile.avatarID){const t=this.generateInitialState(F({},e.profile,{avatarURL:e.profile.avatarID!==this.props.profile.avatarID?e.profile.avatarURL:this.props.profile.avatarURL}));this.setState(F({},t))}e.success&&!this.props.success&&(this.state.name.value&&this.state.name.touched&&Object(A.i)(),this.updateInitialValues(),this.props.setPristine(!0))}),o()(this,"onHandleChange",({target:e})=>{let{value:t}=e;"function"==typeof t.trimStart&&(t=t.trimStart()),this.setState(e=>({name:{touched:e.initialValues.name!==t,error:Object(N.a)("Please add your name.",t),value:t}}),this.setPristine)}),o()(this,"onHandleUpload",e=>{const t=e.target.files[0];if(!this.isImage(t))return void this.props.setAccountSettingsError("Avatar must have a .jpg, .png, or .gif extension.");const a=new FileReader;a.readAsDataURL(t),a.onloadend=()=>{const e={avatarURL:{touched:!0,error:"",value:a.result},avatarFile:t};this.isEmptyAvatar()&&(e.avatarID="temp-ID"),this.setState(e,this.setPristine),Object(A.f)()}}),o()(this,"onHandleDeleteAvatar",e=>{e.preventDefault(),this.setState({avatarURL:{touched:!this.isEmptyAvatar(),error:"",value:""},avatarFile:null},this.setPristine),Object(A.e)()}),o()(this,"onHandleSubmit",e=>{if(this.isDisabled())return;e.preventDefault();const t={name:this.state.name.value};this.state.avatarFile?t.avatar={file:this.state.avatarFile}:this.state.avatarURL.value===this.state.initialValues.avatarURL||this.state.avatarURL.value||(t.avatar={delete:!0}),this.props.updateUserProfile(t)}),o()(this,"setPristine",()=>{let e;this.setState(t=>(e=t.name.touched||t.avatarURL.touched,{isPristine:!1===e})),this.props.setPristine(!e)}),o()(this,"generateInitialState",e=>({name:{touched:!1,error:"",value:e.name},email:{value:e.email},avatarURL:{touched:!1,error:"",value:e.avatarURL},avatarID:e.avatarID,initialValues:F({},e),isPristine:!0})),o()(this,"updateInitialValues",()=>{this.setState(e=>F({},this.generateInitialState({name:e.name.value,email:e.email.value,avatarURL:e.avatarURL.value,avatarID:e.avatarID})))}),o()(this,"isImage",e=>/\.(gif|jpe?g|png)$/i.test(e.name)),o()(this,"isEmptyAvatar",()=>!this.state.avatarURL.value),o()(this,"profileHasErrors",()=>!!this.state.name.error||!!this.state.avatarURL.error),o()(this,"isDisabled",()=>this.state.isPristine||this.profileHasErrors());const t=this.generateInitialState(this.props.profile);this.state=F({isPristine:!0},t)}render(){const{isUpdating:e,success:t}=this.props,{name:a,email:s,avatarURL:n}=this.state;return l.a.createElement("form",{onSubmit:this.onHandleSubmit},l.a.createElement(B,null,l.a.createElement(q,{key:n.value,order:"user",color:"dark",name:this.state.initialValues.name,src:n.value,size:"larger",exactSize:80}),l.a.createElement(V,{order:"subtitle",size:"larger"},this.state.initialValues.name||""),l.a.createElement(Y,null,l.a.createElement(S.a,{size:"smaller",order:"tertiary",element:"label",htmlFor:"avatar-chooser"},"Add photo"),l.a.createElement(C.a,{id:"avatar-chooser",name:"input",onChange:this.onHandleUpload,disableCursor:!0})),l.a.createElement(S.a,{order:"tertiary",size:"smaller",onClick:this.onHandleDeleteAvatar,disabled:this.isEmptyAvatar()},"Remove photo")),l.a.createElement(x.a,{name:"name",id:"name",type:"text",label:"Preferred name",meta:a,value:a.value,onChange:this.onHandleChange,hideStatusIcon:!a.error,maxLength:U.ProfileNameLength}),l.a.createElement(H,{name:"email",id:"email",type:"email",label:"Email",meta:s,value:s.value,disabled:!0}),l.a.createElement(w.a,{prose:!0},"To update your email address you will need to verify your account credentials as well as your new email address."," ",l.a.createElement(j.a,{href:"/auth/email-update?originURL=".concat(encodeURIComponent("/teams/account"))},"Update email")),l.a.createElement(z,null,l.a.createElement(M,{isSubmitting:e,isDisabled:this.isDisabled(),success:t,successMessage:"Your profile settings have been saved"})))}}const H=u()(x.a).withConfig({displayName:"ProfileForm__EmailWrapper",componentId:"sc-19ihkts-0"})(["padding-bottom:",";"],({theme:e})=>e.spacing.xs),z=u.a.div.withConfig({displayName:"ProfileForm__ButtonWrapper",componentId:"sc-19ihkts-1"})(["display:flex;justify-content:center;"]),V=u()(w.a).withConfig({displayName:"ProfileForm__Name",componentId:"sc-19ihkts-2"})(["margin-bottom:",";"],({theme:e})=>e.spacing.s),q=u()(R.a).withConfig({displayName:"ProfileForm__UserAvatar",componentId:"sc-19ihkts-3"})(["width:80px;height:80px;margin-right:",";float:left;font-size:24px !important;font-weight:400;line-height:80px !important;@media (min-width:","px){margin-right:",";}"],({theme:e})=>e.spacing.xxs,({theme:e})=>e.breakpoints.s,({theme:e})=>e.spacing.m),B=u.a.div.withConfig({displayName:"ProfileForm__UserAvatarWrapper",componentId:"sc-19ihkts-4"})(["margin-bottom:",";a:hover{border-color:transparent;&:after{opacity:1;}}"],({theme:e})=>e.spacing.xxl),Y=u.a.div.withConfig({displayName:"ProfileForm__MiniButtonWrap",componentId:"sc-19ihkts-5"})(["position:relative;display:inline-block;margin-right:",";"],e=>e.theme.spacing.s);var G=Object(s.connect)(e=>{const t=Object(r.A)(e);return{isUpdating:t.isUpdating,success:t.didUpdate||t.didAvatarUpdate}},e=>({updateUserProfile:t=>e(r.F.request(t))}))(W);function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}class $ extends l.a.PureComponent{constructor(...e){super(...e),o()(this,"state",{profile:K({},this.props.profile)}),o()(this,"UNSAFE_componentWillReceiveProps",e=>{this.setState({profile:K({},e.profile)})})}componentDidMount(){this.props.setPristine(!0)}render(){return l.a.createElement("div",null,l.a.createElement(G,{profile:this.state.profile,setAccountSettingsError:this.props.setAccountSettingsError,setPristine:this.props.setPristine,showMessage:this.props.showMessage}))}}var Q=Object(s.connect)(e=>({profile:Object(r.t)(e)}))($),X=a(358);const Z=u()(w.a).withConfig({displayName:"Notifications__Title",componentId:"sc-14pe0ij-0"})(["margin-bottom:",";"],e=>e.theme.spacing.xs),ee=u.a.form.withConfig({displayName:"Notifications__Form",componentId:"sc-14pe0ij-1"})(["margin:"," 0;text-align:left;"],e=>e.theme.spacing.l),te=u.a.div.withConfig({displayName:"Notifications__RadiosWrap",componentId:"sc-14pe0ij-2"})(["display:inline-block;margin-bottom:",";"],e=>e.theme.spacing.s),ae=u.a.div.withConfig({displayName:"Notifications__RadioWrap",componentId:"sc-14pe0ij-3"})(["margin-bottom:",";"],e=>e.theme.spacing.s);var se=function(e){const{setPristine:t}=e,a=Object(s.useSelector)(r.y),n=Object(s.useSelector)(r.v),i=Object(s.useSelector)(r.r),[o,d]=Object(c.useState)(!0),[u,m]=Object(c.useState)(i),[h,p]=Object(c.useState)(i),g=Object(s.useDispatch)(),f=Object(c.useCallback)(()=>{void 0!==u&&g(r.D.request(u))},[u,g]),b=Object(c.useCallback)(()=>g(r.m.request()),[g]);function v(e){const t=e.target;null!==t&&m(Number(t.value))}return Object(c.useEffect)(()=>{b()},[b]),Object(c.useEffect)(()=>{t(o)},[o,t]),Object(c.useEffect)(()=>{void 0===u&&(m(i),p(i))},[u,i,h]),Object(c.useEffect)(()=>{d(h===u)},[u,h]),l.a.createElement("div",null,l.a.createElement(Z,{element:"h2",order:"subtitle",size:"larger",color:"text-darker"},"Comment notifications"),l.a.createElement(w.a,{element:"h3",order:"subtitle",size:"smaller",color:"text-lighter"},"Configure the frequency in which comments are sent to your email inbox."),l.a.createElement(ee,{onSubmit:function(e){e.preventDefault(),void 0!==u&&void 0!==h&&(f(),Object(A.k)(h,u),p(u),d(!0))}},l.a.createElement(te,null,l.a.createElement(ae,null,l.a.createElement(X.a,{id:"notificationsMode-instant",name:"notificationsMode",value:2,onChange:v,checked:2===u,unstyled:!0},"Instant")),l.a.createElement(ae,null,l.a.createElement(X.a,{id:"notificationsMode-never",name:"notificationsMode",type:"radio",value:0,onChange:v,checked:0===u,unstyled:!0},"Never"))),l.a.createElement(M,{isSubmitting:a,isDisabled:o,success:!!n,successMessage:"Your notification settings have been saved"})))},ne=a(85),re=a.n(ne),ie=a(189),oe=a(100),ce=a.n(oe),le=a(131),de=a(176),ue=a(668),me=a(208),he=a(76),pe=a(18),ge=a(22);class fe extends c.PureComponent{constructor(...e){super(...e),o()(this,"state",{is2faEnabled:!1}),o()(this,"handleConfigure2FA",()=>{const e=this.state.is2faEnabled?"enabled":"disabled";Object(A.h)(e);const t=encodeURIComponent("/teams/account?tab=Security&next=/");Object(pe.c)("/auth/2fa/settings?originURL=".concat(t))})}componentDidMount(){ge.a.get("/teams/api/user/2fa-settings").then(e=>{this.setState({is2faEnabled:ce()(e,"data.activated",!1)})})}render(){const{is2faEnabled:e}=this.state;return l.a.createElement(be,{onClick:this.handleConfigure2FA},l.a.createElement(le.a,{alignItems:"center",justifyContent:"space-between"},l.a.createElement(w.a,null,"Two-step authentication",l.a.createElement(de.a,{left:"s"},l.a.createElement(we,{compact:!0,inert:!0,selected:e},e?"On":"Off"))),l.a.createElement(S.a,{order:"tertiary"},e?"Settings":"Set up 2FA")))}}const be=u()(ue.a).withConfig({displayName:"TwoFA__Settings",componentId:"sc-1okpwh1-0"})(["width:100%;height:80px;padding:24px;margin-top:40px;"]),we=u()(me.a).withConfig({displayName:"TwoFA__Status",componentId:"sc-1okpwh1-1"})(["width:45px;height:20px;padding:inherit;border:1px solid ",";background:",";color:",";font-weight:400;"],({selected:e})=>e?he.colors.greenDarker:he.colors.grayDarker,({selected:e})=>e?he.colors.greenLighter:he.colors.grayLightest,({selected:e})=>e?he.colors.green:"#596377");var ve=fe,ye=a(94),Pe=a(44);function Ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}const Oe={currentPassword:{value:""},newPassword:{value:"",touched:!1,error:""},confirmPassword:{value:"",touched:!1,error:""}};class Se extends c.PureComponent{constructor(...e){super(...e),o()(this,"state",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ee(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({isSubmitting:!1,success:!1},Oe)),o()(this,"onDebounceHandleChange",re()((e,t)=>this.updatePasswords(e,t),Pe.a)),o()(this,"onHandleBlur",({target:e})=>this.updatePasswords(e.name,e.value)),o()(this,"onHandleChange",({target:e})=>{switch(e.name){case"currentPassword":return this.setCurrentPassword(e.value);case"newPassword":return this.setNewPassword(e.value);case"confirmPassword":return this.setConfirmPassword(e.value);default:return null}}),o()(this,"setCurrentPassword",e=>this.setState({currentPassword:{value:e}})),o()(this,"setNewPassword",e=>this.setState(t=>({newPassword:{value:e,touched:t.newPassword.touched,error:t.newPassword.error}}),this.onDebounceHandleChange("newPassword",e))),o()(this,"setConfirmPassword",e=>this.setState(t=>({confirmPassword:{value:e,touched:t.confirmPassword.touched,error:t.confirmPassword.error}}),this.onDebounceHandleChange("confirmPassword",e))),o()(this,"resetNewPasswordFields",()=>this.setState({confirmPassword:{touched:!1,error:"",value:""},newPassword:{touched:!1,error:"",value:""}})),o()(this,"validateNewPassword",(e,t)=>{const a=this.passwordMeetsRequirements(e),s=this.props.settings.data.minimumPasswordLength||Pe.b;if(a&&!t)return null;let n;return a&&e===t||(n=t?ye.e:e?e.length<parseInt(s,10)?"Your password must be at least ".concat(s," characters long."):ye.e:ye.a),n}),o()(this,"updatePasswords",(e,t)=>{switch(e){case"newPassword":return this.caseManagement("newPassword","confirmPassword",t);case"confirmPassword":return this.caseManagement("confirmPassword","newPassword",t);default:return()=>{}}}),o()(this,"caseManagement",(e,t,a)=>{if(!a&&!this.state[t].value)return this.resetNewPasswordFields();if(this.state[t].error){if(!this.passwordMeetsRequirements(a)){const s=this.props.settings.data.minimumPasswordLength||Pe.b;return this.setState(n=>({[t]:{touched:!0,error:"",value:n[t].value},[e]:{touched:!0,error:"Your password must be at least ".concat(s," characters long."),value:a}}))}return this.areNewPasswordsValidAndMatching()?this.setState(s=>({[t]:{touched:!0,error:"",value:s[t].value},[e]:{touched:!0,error:"",value:a}})):this.setState({[e]:{touched:!0,error:"",value:a}})}const s=this.validateNewPassword(a,this.state[t].value);return this.setState({[e]:{touched:!0,error:s,value:a}})}),o()(this,"arePasswordsValid",()=>!!this.state.currentPassword.value&&this.state.newPassword.value===this.state.confirmPassword.value&&this.passwordMeetsRequirements(this.state.newPassword.value)&&!this.state.newPassword.error&&this.passwordMeetsRequirements(this.state.confirmPassword.value)&&!this.state.confirmPassword.error),o()(this,"passwordMeetsRequirements",e=>{const t=this.props.settings.data.minimumPasswordLength||Pe.b;return!!e&&e.length>=parseInt(t,10)}),o()(this,"areNewPasswordsValidAndMatching",()=>this.passwordMeetsRequirements(this.state.newPassword.value)&&this.passwordMeetsRequirements(this.state.confirmPassword.value)&&this.state.newPassword.value===this.state.confirmPassword.value),o()(this,"handleSubmit",e=>{e.preventDefault(),this.setState({isSubmitting:!0,success:!1}),this.arePasswordsValid()&&this.props.updatePasswordRequest({currentPassword:this.state.currentPassword.value,newPassword:this.state.newPassword.value,onDone:()=>{this.setState({isSubmitting:!1,success:!0}),Object(A.l)()},onError:({response:e})=>{var t;this.setState({isSubmitting:!1,success:!1}),this.props.showErrorNotification(null!==(t=e.data.message)&&void 0!==t?t:"Something went wrong, please try again")}})})}render(){const{settings:e,isPasswordNotifEnabled:t}=this.props,a=e.data.minimumPasswordLength||Pe.b;return l.a.createElement("div",null,e.enablePasswordComplexity&&l.a.createElement(ie.a,{status:"info"},"Your team's password requirements got stronger. Make sure to use at least"," ",a," characters, including 1 uppercase, 1 lowercase, and a numeral."),t&&l.a.createElement(ie.a,{status:"info"},"This only affects the teams you use a password to sign in with."),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement(x.a,{id:"current-password",name:"currentPassword",onBlur:this.onHandleBlur,onChange:this.onHandleChange,type:"password",meta:this.state.currentPassword,label:"Current password",value:this.state.currentPassword.value}),l.a.createElement(x.a,{id:"new-password",name:"newPassword",onBlur:this.onHandleBlur,onChange:this.onHandleChange,type:"password",meta:this.state.newPassword,label:"New password",value:this.state.newPassword.value}),l.a.createElement(x.a,{id:"confirm-passowrd",name:"confirmPassword",onBlur:this.onHandleBlur,onChange:this.onHandleChange,type:"password",meta:this.state.confirmPassword,label:"Re-enter new password",value:this.state.confirmPassword.value}),l.a.createElement("div",null,l.a.createElement(M,{isSubmitting:this.state.isSubmitting,isDisabled:!this.arePasswordsValid(),success:this.state.success,successMessage:"Your security settings have been saved"}))),l.a.createElement(ve,null))}}var je=Object(s.connect)(null,e=>({updatePasswordRequest:({currentPassword:t,newPassword:a,onDone:s,onError:n})=>e(Object(r.E)({currentPassword:t,newPassword:a,onDone:s,onError:n})),showErrorNotification:t=>e(D.b.showFlash({message:t,status:"warning"}))}))(Se),xe=a(142),Ce=a(161);const Ne=u.a.div.withConfig({displayName:"Teams__Header",componentId:"sc-80jmss-0"})(["display:flex;justify-content:space-between;padding-right:",";padding-left:",";"],({theme:e})=>e.spacing.s,e=>e.theme.spacing.s);var Ie=({teams:e})=>{const t="".concat(window.location.host.split(".").slice(1).join(".")),a=e.filter(e=>!1===e.isHidden),[s,n]=Object(c.useState)(!1);Object(c.useEffect)(()=>{ge.a.get("/teams/api/domain-control").then(e=>n(e.data)).catch(()=>{n(!0)})},[]);return l.a.createElement("div",null,l.a.createElement(Ne,null,l.a.createElement(w.a,{order:"subtitle",size:"larger",color:"text-darker"},"My teams"),!s&&l.a.createElement(S.a,{order:"primary",onClick:()=>{Object(A.j)(),Object(pe.c)("//login.".concat(t,"/auth/team-create"))}},"New team")),l.a.createElement(de.a,{top:"m"},l.a.createElement(xe.a,{items:a,renderRow:e=>l.a.createElement(Ce.a,{name:e.name,logo:e.logo,subdomain:e.subdomain,renderOptionsColumn:()=>l.a.createElement(S.a,{order:"tertiary",onClick:()=>{return a=e.subdomain,Object(A.m)(),void Object(pe.c)("//".concat(a,".").concat(t));var a}},"Go to team")}),willLoad:!1,rowKey:e=>e.id,hideBulk:!0})))},De=a(31),_e=a.n(De),Te=a(6),ke=a.n(Te);const Me=Object(d.keyframes)(["from{transform:translate(0px,-5px);opacity:0;}to{transform:translate(0px 0px);opacity:1;}"]),Ue=Object(d.keyframes)(["from{transform:translate(0px,5px);opacity:0;}to{transform:translate(0px 0px);opacity:1;}"]),Re=Object(d.keyframes)(["from{opacity:0;}to{opacity:1;}"]),Ae=Object(d.keyframes)(["from{opacity:1;}to{opacity:0;}"]),Le=u.a.div.withConfig({displayName:"FadingGroup__FadingDiv",componentId:"d8jxh0-0"})(["opacity:0;position:absolute;width:100%;",";animation:",";z-index:",";"],({visibility:e})=>e,({animation:e})=>e,({isVisible:e})=>e?"1":"");var Fe=function(e){const{children:t,fadeInDelay:a="0s",fadeInTime:s="0.2s",fadeOutDelay:n="0s",fadeOutTime:r="0.2s",isVisible:i=!1,slideDown:o=!1,slideUp:c=!1}=e,u=ke()(e,["children","fadeInDelay","fadeInTime","fadeOutDelay","fadeOutTime","isVisible","slideDown","slideUp"]);let m=!1===i;return l.a.createElement(Le,_e()({visibility:m?(m=!1,i?"visibility: visible":"visibility: hidden"):"",animation:i?o?Object(d.css)([""," "," ease-in-out "," forwards"],Me,s,a):c?Object(d.css)([""," "," ease-in-out "," forwards"],Ue,s,a):Object(d.css)([""," "," ease-in-out "," forwards"],Re,s,a):Object(d.css)([""," "," ease-in-out "," forwards"],Ae,r,n),isVisible:i},u),t)},We=a(228);class He extends l.a.PureComponent{constructor(...e){super(...e),o()(this,"state",{activeTab:"Profile",accountSettingsSuccess:this.props.userStatus.accountSettingsSuccess,portalOpened:!0,accountSettingsError:this.props.userStatus.accountSettingsError,showCloseWarning:!1}),o()(this,"getNextURL",()=>{const{multipleTeams:e,team:t}=this.props,a="".concat(t.data.subdomain,".").concat(window.location.host.split(".").slice(1).join("."));let s=this.getRelativeNextpath();return!s&&e&&(s="".concat(s,"/auth/team-select")),"//".concat(a).concat(s)}),o()(this,"setPristine",e=>{this.setState(()=>({showCloseWarning:!e}))}),o()(this,"setAccountSettingsError",e=>{this.setState({accountSettingsError:e,accountSettingsSuccess:!1})}),o()(this,"getTabNavItems",()=>{const{teams:e,team:t}=this.props,a=["Profile","Security","Notifications","Teams"];if(e&&1===e.length){const e=h()(t.settings.teamLogins,["loginType","SAML"]);e&&e.isActive&&a.splice(1,1)}return a}),o()(this,"handleNextURL",()=>{const e=this.getNextURL();0===this.getRelativeNextpath().indexOf("/teams")?f.f.push(e):Object(pe.c)(e)}),o()(this,"handleOnClose",()=>{this.state.showCloseWarning?Object(A.n)():Object(A.g)(),this.setState(()=>({portalOpened:!1}),this.handleNextURL)}),o()(this,"switchTabs",e=>{this.setState({activeTab:e,accountSettingsError:!1,accountSettingsSuccess:!1})}),o()(this,"renderTeamsTab",()=>l.a.createElement(Ie,{teams:this.props.teams})),o()(this,"renderSecurityTab",()=>{const{teams:e}=this.props;return l.a.createElement(je,{isPasswordNotifEnabled:e&&e.length>1,settings:this.props.team.settings})}),o()(this,"renderProfileTab",()=>l.a.createElement(Q,{fetchProfile:this.props.fetchProfile,profile:this.props.profile,setAccountSettingsError:this.setAccountSettingsError,setPristine:this.setPristine,showMessage:this.props.showMessage})),o()(this,"renderActiveTab",()=>{const{isLoading:e}=this.props.userStatus;return l.a.createElement(Je,null,l.a.createElement(Fe,{slideUp:!0,isVisible:!e&&"Security"===this.state.activeTab},l.a.createElement(Be,null,this.renderSecurityTab())),l.a.createElement(Fe,{slideUp:!0,isVisible:!e&&"Notifications"===this.state.activeTab},l.a.createElement(Be,null,this.renderNotificationsTab())),l.a.createElement(Fe,{slideUp:!0,isVisible:!e&&"Teams"===this.state.activeTab},l.a.createElement(Be,null,this.renderTeamsTab())),l.a.createElement(Fe,{slideUp:!0,isVisible:!e&&"Profile"===this.state.activeTab},l.a.createElement(Be,null,this.renderProfileTab())))})}componentDidMount(){this.props.fetchSettings(),this.props.fetchAccountTeams(),Object(A.o)();const e=g()(Object(We.a)("tab"),e=>!0===e);this.getTabNavItems().includes(e)&&this.switchTabs(e)}UNSAFE_componentWillReceiveProps(e){this.setState({accountSettingsError:e.userStatus.accountSettingsError,accountSettingsSuccess:e.userStatus.accountSettingsSuccess})}getRelativeNextpath(){return this.props.router.location.query.next||""}renderNotificationsTab(){return l.a.createElement(se,{setPristine:this.setPristine})}renderTabNav(){const e=this.getTabNavItems().map(e=>({active:this.state.activeTab===e,label:e,onClick:()=>this.switchTabs(e)}));return l.a.createElement(Ke,{orientation:"horizontal",color:"dark",items:e,withUnderline:!0})}renderLoaded(){const{accountSettingsError:e,accountSettingsSuccess:t}=this.state;return l.a.createElement(ze,null,l.a.createElement(Ge,{order:"title",size:"smaller",color:"text-darker"},"Manage account"),this.renderTabNav(),l.a.createElement(Ve,null),"Teams"!==this.state.activeTab?l.a.createElement(qe,null,e&&l.a.createElement(b.a,{status:"danger"},e),!e&&t&&l.a.createElement(b.a,{status:"success"},t)):l.a.createElement("div",null),this.renderActiveTab())}renderLoading(){return null}render(){return l.a.createElement(P.a,{closeOnEsc:!1,isOpened:this.state.portalOpened,onClose:this.handleOnClose},l.a.createElement(O.a,{backButton:!0},l.a.createElement(Ye,{displayLogo:!0,showWarning:this.state.showCloseWarning,closeWarning:l.a.createElement(E.a,null)},this.props.isLoading?this.renderLoading():this.renderLoaded())))}}const ze=u.a.div.withConfig({displayName:"AccountManagementModal__Wrapper",componentId:"fon9gt-0"})(["width:100%;max-width:100%;"]),Ve=u.a.div.withConfig({displayName:"AccountManagementModal__Separator",componentId:"fon9gt-1"})(["width:100%;border-top:1px solid ",";margin:0 auto ",";"],({theme:e})=>e.palette.structure.lighter,e=>e.theme.spacing.xl),qe=u.a.div.withConfig({displayName:"AccountManagementModal__AlertWrapper",componentId:"fon9gt-2"})(["max-width:672px;padding:0 ",";margin:0 auto 32px;& > div{margin-bottom:",";}"],({theme:e})=>e.spacing.l,({theme:e})=>e.spacing.sm),Be=u()(ze).withConfig({displayName:"AccountManagementModal__WrapperContent",componentId:"fon9gt-3"})(["max-width:540px;padding:0 ",";margin-right:auto;margin-left:auto;"],({theme:e})=>e.spacing.l),Ye=u()(y.a).withConfig({displayName:"AccountManagementModal__WrapperModalContent",componentId:"fon9gt-4"})(["padding-right:0;padding-left:0;.modal-content{justify-content:flex-start;}"]),Ge=u()(w.a).withConfig({displayName:"AccountManagementModal__StyledHeading",componentId:"fon9gt-5"})(["margin-top:",";margin-bottom:",";text-align:center;"],({theme:e})=>e.spacing.xxl,({theme:e})=>e.spacing.xxl),Je=u.a.div.withConfig({displayName:"AccountManagementModal__FadingWrapper",componentId:"fon9gt-6"})(["position:relative;"]),Ke=u()(v.a).withConfig({displayName:"AccountManagementModal__StyledNav",componentId:"fon9gt-7"})(["display:flex;justify-content:center;li:last-child{margin-right:0;}"]);Object(f.g)(He);const $e=Object(s.connect)(e=>{const t=Object(r.B)(e),a=Object(r.s)(e),s=Object(n.w)(e);return{isLoading:"loaded"!==a||"loaded"!==s,multipleTeams:t&&t.length>1,team:Object(n.y)(e),teams:t,userStatus:Object(r.A)(e)}},e=>({fetchSettings:()=>{e(n.m.request())},fetchAccountTeams:()=>{ge.a.get("/teams/api/team/account-teams").then(t=>{e(r.l.success(t.data))})},showMessage(t,a){e(D.b.showFlash({message:t,status:a}))}}))(He);t.default=$e}}]);
//# sourceMappingURL=team-management-web-AccountManagementModal.9afa4c6125d6b8387655.js.map