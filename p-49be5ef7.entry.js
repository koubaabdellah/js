import{r as t,d as o,h as a,g as e}from"./p-ae706b1d.js";import{B as i}from"./p-150435d0.js";const r=class{constructor(o){t(this,o),this.audioState={playing:!1},this.hostStyle={},this.autoplay=!1,this.controls=!0,this.loop=!1,this.muted=!1,this.muteunmuteLabel="Toggle Mute Unmute Button",this.playpause=!1,this.playpauseLabel="Toggle Play Pause Button",this.preload="auto",this.type="mpeg"}componentWillLoad(){this.base=new i(this,o)}async componentDidLoad(){this.autoplay&&await this.audioRef.play().then((()=>{this.audioState=Object.assign(Object.assign({},this.audioState),{playing:!0})})).catch((()=>{this.playpause=!0,this.audioState=Object.assign(Object.assign({},this.audioState),{playing:!1}),o.log.error(this.element.tagName,"componentDidLoad()","Audio Play() method is failed")})),this.audioRef.addEventListener("ended",(()=>{this.audioState=Object.assign(Object.assign({},this.audioState),{playing:!1})})),this.updateTopPosition()}windowResize(){this.updateTopPosition()}hideAudioControls(){return a("div",null,this.playpause?a("a",{role:"button",href:"javascript:void(0)",onClick:()=>{this.toggleAudio()},"aria-label":o.localeTranslator.translate(this.playpauseLabel),class:"audio-control"},a("i",{class:"dxp-icons dxp-i-circle "+(this.audioState.playing?"dxp-i-pause":"dxp-i-play")})):"",this.playpause||this.autoplay?a("a",{role:"button",href:"javascript:void(0)",onClick:()=>{this.toggleMute()},"aria-label":o.localeTranslator.translate(this.muteunmuteLabel),class:"audio-control"},a("i",{class:"dxp-icons dxp-i-circle "+(this.muted?"dxp-i-mute":"dxp-i-sound")})):a("a",{role:"button",href:"javascript:void(0)",onClick:()=>{this.toggleAudio()},"aria-label":o.localeTranslator.translate(this.muteunmuteLabel),class:"audio-control"},a("i",{class:"dxp-icons dxp-i-circle "+(this.audioState.playing?"dxp-i-sound":"dxp-i-mute")})))}async toggleAudio(){this.audioState.playing?(this.audioState=Object.assign(Object.assign({},this.audioState),{playing:!1}),this.audioRef.pause()):(this.audioState=Object.assign(Object.assign({},this.audioState),{playing:!0}),await this.audioRef.play())}toggleMute(){this.muted=!this.muted}updateTopPosition(){if(this.position&&this.position.startsWith("top")){let t=document.querySelector("dxp-header");t=t||document.querySelector("dxp-header-rich"),t?t.componentOnReady().then((o=>{const a="dxp-header"===t.tagName.toLowerCase()?o.querySelector("header"):o.querySelector(".header");a&&(this.hostStyle=Object.assign(Object.assign({},this.hostStyle),{top:`${a.offsetHeight+5}px`}))})):document.querySelector("header")&&(this.hostStyle=Object.assign(Object.assign({},this.hostStyle),{top:`${document.querySelector("header").offsetHeight+5}px`}))}}render(){return o.log.debug(this.element.tagName,"render()","in dxp-audio render() : PRODUCTION"),a("div",{style:this.hostStyle,class:`${this.base.componentClass()} ${this.position}`,dir:this.dir,"data-theme":this.theme},a("audio",{autoplay:this.autoplay,muted:this.muted,ref:t=>{this.audioRef=t},controls:!0,class:this.controls?" ":"hide-default",loop:this.loop,preload:this.preload},a("source",{src:this.src,type:`audio/${this.type}`})),this.controls?"":this.hideAudioControls())}get element(){return e(this)}};r.style="@keyframes animate-pop{0%{transform:scale(1)}30%{transform:scale(1.2)}80%{transform:scale(.9)}to{transform:scale(1)}}@keyframes animate-moveup{0%{top:2.5rem;opacity:0}to{top:0;opacity:1}}@keyframes animate-fade-out{0%{opacity:1}70%{opacity:0;transform:scale(2)}75%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.dxp .dxp-theme-white.dxp-audio{background-color:transparent}.dxp .dxp-theme-white.dxp-audio .audio-control{background-color:rgba(85,85,85,.4)}.dxp .dxp-theme-white.dxp-audio i.dxp-icons{font-size:1.5rem;color:#fff}@keyframes animate-pop{0%{transform:scale(1)}30%{transform:scale(1.2)}80%{transform:scale(.9)}to{transform:scale(1)}}@keyframes animate-moveup{0%{top:2.5rem;opacity:0}to{top:0;opacity:1}}@keyframes animate-fade-out{0%{opacity:1}70%{opacity:0;transform:scale(2)}75%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.dxp .dxp-theme-black.dxp-audio{background-color:transparent}.dxp .dxp-theme-black.dxp-audio .audio-control{background-color:rgba(85,85,85,.4)}.dxp .dxp-theme-black.dxp-audio i.dxp-icons{font-size:1.5rem;color:#fff}@keyframes animate-pop{0%{transform:scale(1)}30%{transform:scale(1.2)}80%{transform:scale(.9)}to{transform:scale(1)}}@keyframes animate-moveup{0%{top:2.5rem;opacity:0}to{top:0;opacity:1}}@keyframes animate-fade-out{0%{opacity:1}70%{opacity:0;transform:scale(2)}75%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.dxp .dxp-theme-light-grey.dxp-audio{background-color:transparent}.dxp .dxp-theme-light-grey.dxp-audio .audio-control{background-color:rgba(85,85,85,.4)}.dxp .dxp-theme-light-grey.dxp-audio i.dxp-icons{font-size:1.5rem;color:#fff}@keyframes animate-pop{0%{transform:scale(1)}30%{transform:scale(1.2)}80%{transform:scale(.9)}to{transform:scale(1)}}@keyframes animate-moveup{0%{top:2.5rem;opacity:0}to{top:0;opacity:1}}@keyframes animate-fade-out{0%{opacity:1}70%{opacity:0;transform:scale(2)}75%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.dxp .dxp-theme-rich-grey.dxp-audio{background-color:transparent}.dxp .dxp-theme-rich-grey.dxp-audio .audio-control{background-color:rgba(85,85,85,.4)}.dxp .dxp-theme-rich-grey.dxp-audio i.dxp-icons{font-size:1.5rem;color:#fff}@keyframes animate-pop{0%{transform:scale(1)}30%{transform:scale(1.2)}80%{transform:scale(.9)}to{transform:scale(1)}}@keyframes animate-moveup{0%{top:2.5rem;opacity:0}to{top:0;opacity:1}}@keyframes animate-fade-out{0%{opacity:1}70%{opacity:0;transform:scale(2)}75%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.dxp .dxp-theme-b2b.dxp-audio{background-color:transparent}.dxp .dxp-theme-b2b.dxp-audio .audio-control{background-color:rgba(85,85,85,.4)}.dxp .dxp-theme-b2b.dxp-audio i.dxp-icons{font-size:1.5rem;color:#fff}.dxp-audio{z-index:100;}.dxp-audio .audio-control{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;height:2.5rem;width:2.5rem;bottom:0.9375rem;right:0.9375rem;margin:0.125rem;border-radius:50%;overflow:hidden;-webkit-backdrop-filter:blur(1.25rem);backdrop-filter:blur(1.25rem)}.dxp-audio .audio-control:hover{text-decoration:none}.dxp-audio.top-left{position:fixed;top:10px;left:10px}.dxp-audio.top-right{position:fixed;top:10px;right:10px}.dxp-audio.bottom-left{position:fixed;bottom:10px;left:10px}.dxp-audio.bottom-right{position:fixed;bottom:10px;right:10px}.dxp-audio .hide-default{display:none}";export{r as dxp_audio}