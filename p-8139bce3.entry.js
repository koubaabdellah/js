import{r as t,c as i,d as e,h as o,g as s}from"./p-ae706b1d.js";import{B as h}from"./p-150435d0.js";const a=class{constructor(e){t(this,e),this.analyticsDataEmitter=i(this,"dxp_comp",7),this.autoplay=!1,this.customMuteButton=!1,this.customMuteButtonPosition="top-right",this.disableControls=!1,this.fullHeight=!1,this.iconType="light",this.iframeText="Video frame",this.loop=!0,this.muted=!0,this.muteUnmuteAriaLabel="Toggle mute unmute",this.nocookie=!0,this.playText="Play video",this.posterImgAlt="Poster Image"}componentWillLoad(){this.base=new h(this,e),this.propOverride&&this.base.overrideProperties(e,this.element,this.propOverride),this.loadResource(),this.disableControls&&(this.autoplay=!0),this.videoSrc?this.formVideoSource():e.log.debug(this.element.tagName,"componentWillLoad()","Source id is missing")}componentDidLoad(){this.videoElementRef&&(this.autoplay&&this.videoElementRef.setAttribute("autoplay","true"),this.loop?this.videoElementRef.setAttribute("loop","true"):this.videoElementRef.removeAttribute("loop")),(this.autoplay&&"hostedInternally"===this.type||"hostedExternally"===this.type&&this.videoSrc.toLowerCase().indexOf("akamai")>=0)&&(this.width||this.videoElementRef.setAttribute("width","100%")),this.applyWidthOnVideo(),this.autoplay&&this.emitAnalyticsData("play"),this.schemaScript(),this.lazyLoadVideo()}componentDidUpdate(){this.lazyLoadVideo()}keyDownHandler(t){13!==t.keyCode&&32!==t.keyCode||this.iframePoster&&"none"!==this.iframePoster.style.display&&(t.preventDefault(),this.onPosterClick())}resizeEventHandler(){this.applyWidthOnVideo(),clearTimeout(this.timeOut),this.timeOut=setTimeout((()=>{this.loadResource(),this.videoSrc&&(this.formVideoSource(),"hostedInternally"!==this.type&&this.videoSrc&&-1===this.videoSrc.toLowerCase().indexOf("akamai")?this.iframeRef.src=this.autoplay||!this.posterSrc||"none"===this.iframePoster.style.display?this.videoSource:"":(this.videoElementRef.src=this.videoSource,this.videoElementRef.load()))}),300)}async pauseVideo(){this.element.querySelector("video").pause()}async playVideo(){this.element.querySelector("video").play()}applyWidthOnVideo(){if(this.width){const t=window.innerWidth>=992,i=t?`${this.width}`:"100%",e=this.videoWidth&&this.videoHeight?""+parseInt(this.width,10)*(parseInt(this.videoHeight,10)/parseInt(this.videoWidth,10)):"";this.videoContainerRef&&(this.videoContainerRef.style.width=t?`${i}px`:i),this.videoElementRef&&(this.videoElementRef.setAttribute("width",i),this.videoElementRef.setAttribute("height",e))}}disableVideoControls(){return this.disableControls&&this.customMuteButton?o("button",{ref:t=>this.customMuteRef=t,"aria-label":e.localeTranslator.translate(this.muteUnmuteAriaLabel),onClick:()=>{this.toggleMute()},class:`${this.customMuteButtonPosition} custom-control`},o("i",{class:"dxp-i-circle dxp-icons "+(this.muted?"dxp-i-mute":"dxp-i-sound")})):""}emitAnalyticsData(t){const i={di_comp_name:this.element.tagName,di_comp_title:this.name?this.name:this.videoSrc,di_comp_videoname:this.name,di_comp_videoaction:t};this.analyticsDataEmitter.emit(i),e.log.info(this.element.tagName,"emitAnalyticsData()",i)}fallBack(){const t=this.element.querySelector("video"),i=this.element.querySelector("img");setTimeout((()=>{const e=window.scrollY;t&&t.offsetTop<window.innerHeight+e&&(t.src=t.dataset.src),i&&i.offsetTop<window.innerHeight+e&&(i.src=i.dataset.src)}),20)}formVideoSource(){this.type&&"youtube"===this.type.toLocaleLowerCase()?this.handleYoutube():this.type&&"vimeo"===this.type.toLocaleLowerCase()?this.handleVimeo():this.type&&"youku"===this.type.toLocaleLowerCase()?this.handleYouku():this.videoSource=this.autoplay?`${this.videoSrc}?autoplay=1`:this.videoSrc}handleAkamai(){const t=o("div",{ref:t=>this.iframePoster=t,onClick:()=>this.onPosterClick(),class:"video-thumbnail","aria-label":e.localeTranslator.translate(this.playText),style:{display:this.autoplay?"none":"block"}},o("picture",null,o("source",{type:this.altImageMimeType,srcSet:this.altImageSrc}),o("img",{width:this.videoWidth,height:this.videoHeight,alt:e.localeTranslator.translate(this.posterImgAlt),"data-src":this.posterSrc,style:{display:this.posterSrc?"block":"none"}})),o("div",{class:"video-poster"},o("button",{class:"bg-transparent","aria-label":e.localeTranslator.translate(this.playText)},o("span",null,e.localeTranslator.translate(this.playText)),o("i",{class:`dxp-icons dxp-i-play dxp-i-circle ${this.iconType}`}))));return o("div",{tabindex:""+(this.autoplay?0:-1),class:this.fullHeight?"full-height-video":"dxp-embed-responsive embed-responsive-16by9"},o("iframe",{width:this.videoWidth,height:this.videoHeight,ref:t=>this.iframeRef=t,style:{display:this.autoplay||!this.posterSrc?"block":"none"},class:this.fullHeight?"full-height-video":"dxp-embed-responsive-item",src:this.autoplay||!this.posterSrc?this.videoSource:"",frameborder:"0",allowFullScreen:!0,title:e.localeTranslator.translate(this.iframeText)}),t)}handleVimeo(){this.videoSource=this.is_url(this.videoSrc)?this.videoSrc.slice(this.videoSrc.lastIndexOf("/")+1,this.videoSrc.length):this.videoSrc;const t="https://player.vimeo.com/video/"+this.videoSource,i=t.split("?")[1]?`?${t.split("?")[1]}`:"?1=1";if(this.videoSource=this.autoplay?`${t.split("?")[0]}${i}&autoplay=1`:t,this.disableControls){const e=t.split("?")[0];this.videoSource=t.split("?")[1]?`${e}${i}&autoplay=1&api=1&background=1&loop=1`:`${e}?autoplay=1&api=1&background=1&loop=1`}}handleYouku(){let t;const i="https://player.youku.com/embed/";this.is_url(this.videoSrc)?-1===this.videoSrc.indexOf("/embed/")?(t=this.videoSrc.split("id_"),t=t[1].split(".html"),this.videoSource=t[0].slice(0),this.videoSource=i+this.videoSource):this.videoSource=this.videoSrc:(this.videoSource=this.videoSrc,this.videoSource=i+this.videoSource),this.videoSource=this.autoplay?`${this.videoSource}?autoplay=1`:this.videoSource}handleYoutube(){let t,i;const e=this.nocookie?"https://www.youtube-nocookie.com/embed/":"https://www.youtube.com/embed/";if(this.is_url(this.videoSrc)?-1===this.videoSrc.indexOf("/embed/")?(t=i=this.videoSrc.split("?"),t=t[1].split("=")[1],i=i[1].split("&"),this.videoSource=i[0].slice(2),this.videoSource=e+this.videoSource):(this.videoSource=this.videoSrc,t=this.videoSrc.split("embed/")[1].split("?")[0]):(t=this.videoSrc,this.videoSource=this.videoSrc,this.videoSource=e+this.videoSource),this.videoSource=this.autoplay?`${this.videoSource}?autoplay=1`:this.videoSource,this.disableControls){const i=this.videoSource.split("?")[0];this.videoSource=`${i}?autoplay=1&controls=0&showinfo=0&rel=0&version=3&loop=1&playlist=${t}`}}is_url(t){return!!/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/.test(t)}lazyLoadVideo(){let t,i;if(window.IntersectionObserver){t=this.element.querySelector("video"),i=this.element.querySelector("img");const e=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const i=t.target;i.src=i.dataset.src,e.unobserve(i)}}))})),o=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const i=t.target;i.src=i.dataset.src,o.unobserve(i)}}))}));t&&e.observe(t),i&&o.observe(i)}else this.fallBack()}loadResource(){const t=this.base.getDeviceWidthType(),i={sm:this.srcSm?this.srcSm:this.srcMd?this.srcMd:this.srcLg?this.srcLg:this.src,md:this.srcMd?this.srcMd:this.srcLg?this.srcLg:this.src,lg:this.srcLg?this.srcLg:this.src,xl:this.src};this.videoSrc=i[t]?i[t]:this.src}onPosterClick(){this.iframeRef.setAttribute("src",`${this.videoSource}?autoplay=1`),this.iframeRef.setAttribute("style","display:block"),this.iframeRef.setAttribute("tabindex","0"),this.iframePoster.setAttribute("style","display:none"),this.iframePoster.parentElement.setAttribute("tabindex","0"),this.iframePoster.setAttribute("tabindex","0"),this.iframePoster.parentElement.focus(),this.emitAnalyticsData("play")}schemaScript(){const t={"@context":"http://schema.org","@type":"VideoObject",name:this.name,description:e.localeTranslator.translate(this.description),thumbnailUrl:this.posterSrc,uploadDate:this.uploadedDate,contentUrl:this.videoSource},i=JSON.stringify(t);this.base.createSeoSchema(e,this.element,i)}toggleMute(){this.muted=!this.muted,this.emitAnalyticsData(this.muted?"mute":"unmute")}render(){e.log.debug(this.element.tagName,"render()","in dxp-video render() : PRODUCTION");const t=o("span",null,this.dtmUrl&&o("script",{src:this.dtmUrl}));return o("div",{ref:t=>this.videoContainerRef=t,class:this.base.componentClass(),"data-theme":this.theme,style:{height:this.fullHeight?"100%":""}},t,(()=>"hostedInternally"!==this.type&&this.videoSrc&&-1===this.videoSrc.toLowerCase().indexOf("akamai")?this.handleAkamai():o("div",{class:this.fullHeight?"full-height-video":"dxp-embed-responsive embed-responsive-16by9"},o("video",{preload:this.preload,ref:t=>this.videoElementRef=t,class:this.fullHeight?"full-height-video":"dxp-embed-responsive-item",poster:this.posterSrc,"data-src":this.videoSource,playsinline:this.autoplay,muted:this.muted,controls:!this.disableControls}),this.disableVideoControls()))())}get element(){return s(this)}};a.style='@keyframes animate-pop{0%{transform:scale(1)}30%{transform:scale(1.2)}80%{transform:scale(.9)}to{transform:scale(1)}}@keyframes animate-moveup{0%{top:2.5rem;opacity:0}to{top:0;opacity:1}}@keyframes animate-fade-out{0%{opacity:1}70%{opacity:0;transform:scale(2)}75%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.dxp .dxp-theme-white.dxp-video .video-poster .dark{color:#000}.dxp .dxp-theme-white.dxp-video .video-poster .light{color:#fff}.dxp .dxp-theme-white.dxp-video .custom-control{background-color:#3c3c3c}.dxp .dxp-theme-white.dxp-video .custom-control .dxp-icons{color:#fff}.dxp .dxp-theme-white.dxp-video .bg-transparent{background:transparent;border:none}@keyframes animate-pop{0%{transform:scale(1)}30%{transform:scale(1.2)}80%{transform:scale(.9)}to{transform:scale(1)}}@keyframes animate-moveup{0%{top:2.5rem;opacity:0}to{top:0;opacity:1}}@keyframes animate-fade-out{0%{opacity:1}70%{opacity:0;transform:scale(2)}75%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.dxp .dxp-theme-black.dxp-video .video-poster .dark{color:#000}.dxp .dxp-theme-black.dxp-video .video-poster .light{color:#fff}.dxp .dxp-theme-black.dxp-video .custom-control{background-color:#3c3c3c}.dxp .dxp-theme-black.dxp-video .custom-control .dxp-icons{color:#fff}.dxp .dxp-theme-black.dxp-video .bg-transparent{background:transparent;border:none}@keyframes animate-pop{0%{transform:scale(1)}30%{transform:scale(1.2)}80%{transform:scale(.9)}to{transform:scale(1)}}@keyframes animate-moveup{0%{top:2.5rem;opacity:0}to{top:0;opacity:1}}@keyframes animate-fade-out{0%{opacity:1}70%{opacity:0;transform:scale(2)}75%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.dxp .dxp-theme-light-grey.dxp-video .video-poster .dark{color:#000}.dxp .dxp-theme-light-grey.dxp-video .video-poster .light{color:#fff}.dxp .dxp-theme-light-grey.dxp-video .custom-control{background-color:#3c3c3c}.dxp .dxp-theme-light-grey.dxp-video .custom-control .dxp-icons{color:#fff}.dxp .dxp-theme-light-grey.dxp-video .bg-transparent{background:transparent;border:none}@keyframes animate-pop{0%{transform:scale(1)}30%{transform:scale(1.2)}80%{transform:scale(.9)}to{transform:scale(1)}}@keyframes animate-moveup{0%{top:2.5rem;opacity:0}to{top:0;opacity:1}}@keyframes animate-fade-out{0%{opacity:1}70%{opacity:0;transform:scale(2)}75%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.dxp .dxp-theme-rich-grey.dxp-video .video-poster .dark{color:#000}.dxp .dxp-theme-rich-grey.dxp-video .video-poster .light{color:#fff}.dxp .dxp-theme-rich-grey.dxp-video .custom-control{background-color:#3c3c3c}.dxp .dxp-theme-rich-grey.dxp-video .custom-control .dxp-icons{color:#fff}.dxp .dxp-theme-rich-grey.dxp-video .bg-transparent{background:transparent;border:none}@keyframes animate-pop{0%{transform:scale(1)}30%{transform:scale(1.2)}80%{transform:scale(.9)}to{transform:scale(1)}}@keyframes animate-moveup{0%{top:2.5rem;opacity:0}to{top:0;opacity:1}}@keyframes animate-fade-out{0%{opacity:1}70%{opacity:0;transform:scale(2)}75%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.dxp .dxp-theme-b2b.dxp-video .video-poster .dark{color:#000}.dxp .dxp-theme-b2b.dxp-video .video-poster .light{color:#fff}.dxp .dxp-theme-b2b.dxp-video .custom-control{background-color:#3c3c3c}.dxp .dxp-theme-b2b.dxp-video .custom-control .dxp-icons{color:#fff}.dxp .dxp-theme-b2b.dxp-video .bg-transparent{background:transparent;border:none}.dxp-video{background:transparent;width:100%}.dxp-video .top-left{position:absolute;top:0;left:0}.dxp-video .top-right{position:absolute;top:0;right:0}.dxp-video .bottom-right{position:absolute;bottom:0;right:0}.dxp-video .bottom-left{position:absolute;bottom:0;left:0}.dxp-video .custom-control{cursor:pointer;display:inline-block;z-index:100;height:2.5rem;padding:0;width:2.5rem;bottom:0.9375rem;right:0.9375rem;margin:0.125rem;border-radius:50%;overflow:hidden;border:none;-webkit-backdrop-filter:blur(1.25rem);backdrop-filter:blur(1.25rem);display:flex;justify-content:center;align-items:center}.dxp-video .custom-control i{font-size:1.4rem}.dxp-video .full-height-video{height:100%;width:100%}.dxp-video .full-height-video iframe,.dxp-video .full-height-video video{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:auto;width:auto;min-height:100%;min-width:100%}.dxp-video .full-height-video video{height:100%;width:100%;object-fit:cover;object-position:center}.dxp-video .dxp-embed-responsive{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);padding:0}.dxp-video .dxp-embed-responsive::before{display:block;content:"";padding-top:56.25%}.dxp-video .dxp-embed-responsive video.dxp-embed-responsive-item{margin-top:-56.25%;max-height:100vh}.dxp-video .dxp-embed-responsive iframe{position:absolute;width:100%;height:100%;top:0;left:0}.dxp-video .video-thumbnail{cursor:pointer;position:absolute;text-align:center;top:0;width:100%;height:100%}.dxp-video .video-thumbnail img{width:100%;height:100%}.dxp-video .video-poster,.dxp-video .video-overlay{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.dxp-video .video-poster span{text-indent:-1000px;display:block;height:0;width:0;opacity:0;overflow:hidden}.dxp-video .video-poster .dxp-icons{font-size:5.5rem;cursor:pointer}.dxp-video .video-overlay{display:block;height:80px;width:80px}@media (min-width: 768px){.dxp-video .dxp-embed-responsive{position:relative;left:0;top:0;display:block;width:100%;padding:0;height:auto;overflow:hidden;transform:none}.dxp-video .dxp-embed-responsive-item{position:relative;max-width:100%;max-height:100%;width:auto;display:block;margin:0 auto}}@media (max-width: 767.98px){.dxp-video .dxp-embed-responsive{position:relative;left:0;top:0;display:block;width:100% !important;padding:0;height:auto !important;overflow:hidden;transform:none}.dxp-video iframe,.dxp-video video{position:absolute;top:0;bottom:0;left:0;width:100%;height:100%;border:0}.dxp-video .dxp-embed-responsive-item{position:static;width:100%;height:100%}.dxp-video .video-thumbnail{position:absolute;top:0px}}';export{a as dxp_video}