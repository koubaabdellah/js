/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var t=function(t,n){var r=function(t){return t.getAttribute(n)||(t.parentElement?r(t.parentElement):"data-theme"===n?"dxp-theme-white":"dir"===n?"ltr":void 0)};return t?r(t):void 0},n=function(){function n(n,r){this.getComponentTheme=t,this.getComponentDir=t,this.component=n,this.dxp=r;var e=t(this.component.element,"data-theme");e||(e=t(document.body,"data-theme")),this.component.theme=e||"dxp-theme-white";var i=t(this.component.element,"dir");i||(i=t(document.body,"dir")),this.component.dir=i||"ltr";var a=t(this.component.element,"data-dtm-url");a||(a=t(document.body,"data-dtm-url")),this.component.dtmUrl=a||r.config.get("DTM_URL")}return n.prototype.componentClass=function(){var t=[];this.component.theme&&t.push(this.component.theme);var n=this.component.element?this.component.element.tagName.toLowerCase():"";return t.push(n),t.join(" ")},n.prototype.i18Init=function(t,n,r){var e=this;t.i18n.language=t.locale(),t.i18n.languages=[];var i=function(e){var i,a=e;e.includes("-")&&(a=e.split("-")[0],i=e),t.i18n.languages.push(a),t.i18n.addResourceBundle(a,n,r[a]),i&&(t.i18n.languages.push(i),t.i18n.addResourceBundle(i,n,r[i]))};this.component.locale=t.i18n.language,t.i18n.loadNamespaces(n,(function(){i(t.i18n.language)})),t.i18n.on("languageChanged",(function(n){t.log.trace("dxp-base-component","loadResources()","language changed: "+n),i(n),e.component.locale=n}))},n.prototype.createNestedMarkup=function(t,n,r){var e=this,i=document.createDocumentFragment(),a=[];return r&&n&&t&&(r.forEach((function(t){var r=document.createElement(n),o=e.formatDataObjectKeys(t);Object.assign(r,o),i.appendChild(r),a.push(r)})),t.innerHTML="",t.appendChild(i)),a},n.prototype.createSeoSchema=function(t,n,r){t.seo(n,r)},n.prototype.overrideProperties=function(t,n,r){return e=this,void 0,a=function(){var e,i;return function(t,n){var r,e,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,e&&(i=2&a[0]?e.return:a[0]?e.throw||((i=e.return)&&i.call(e),0):e.next)&&!(i=i.call(e,a[1])).done)return i;switch(e=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,e=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=n.call(t,o)}catch(t){a=[6,t],e=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,(function(a){switch(a.label){case 0:if(!r)return[3,6];a.label=1;case 1:return a.trys.push([1,5,,6]),r.startsWith("http")?[4,t.api(r)]:[3,3];case 2:return e=a.sent(),[3,4];case 3:e=JSON.parse(r),a.label=4;case 4:return Object.keys(e).forEach((function(t){n.setAttribute(t,e[t])})),[3,6];case 5:return i=a.sent(),t.log.error(n.tagName,"componentWillLoad()","fetch failed for "+r,i),[3,6];case 6:return[2]}}))},new((i=void 0)||(i=Promise))((function(t,n){function r(t){try{u(a.next(t))}catch(t){n(t)}}function o(t){try{u(a.throw(t))}catch(t){n(t)}}function u(n){n.done?t(n.value):new i((function(t){t(n.value)})).then(r,o)}u((a=a.apply(e,[])).next())}));var e,i,a},n.prototype.formatDataObjectKeys=function(t){var n=this,r={};return Object.keys(t).forEach((function(e){r[n.dxp.util.kebabToCamelCase(e)]=t[e]})),r},n.prototype.routingEventListener=function(t){var n=t.composedPath&&t.composedPath()||function(t){for(var n=[];t;){if(n.push(t),"HTML"===t.tagName)return n.push(document),n.push(window),n;t=t.parentElement}return n}(t.target);if(n){for(var r=void 0,e=0,i=n;e<i.length;e++){var a=i[e];if(a instanceof HTMLAnchorElement){r=a;break}}this.targetAnchor(r,t)}},n.prototype.getDeviceWidthType=function(){var t=window.matchMedia("screen and (min-width: 1024px)"),n=window.matchMedia("screen and (min-width: 992px)"),r=window.matchMedia("screen and (min-width: 768px)");switch(!0){case t.matches:return"xl";case n.matches:return"lg";case r.matches:return"md";default:return"sm"}},n.prototype.returnBooleanValue=function(t){var n=!1;return t&&(n=!0),n},n.prototype.targetAnchor=function(t,n){if(t&&t.getAttribute("href")){var r=t.getAttribute("href")||"",e="_blank"===t.getAttribute("target"),i=r.startsWith("http://")||r.startsWith("https://")||r.startsWith("www")||r.startsWith("//")||r.startsWith("data:")||r.startsWith("mailto:")||r.startsWith("javascript:void(0)");e||i||!window.navigateByRouting||(n.preventDefault(),window.navigateByRouting(r))}},n}();export{n as B}