import{r as i,c as t,d as e,h as n,g as s}from"./p-ae706b1d.js";import{B as a}from"./p-150435d0.js";const o="dxp-deep-nav",l="dxp-deep-nav-item",h=".dxp-icons",d=class{constructor(e){i(this,e),this.parentIcon=t(this,"parentIcon",7),this.currentURL=window.location.href,this.disableActive=!1,this.deepNavLinkAccessibilityText="Press up or down arrow key to access other menus"}componentWillLoad(){this.base=new a(this,e)}componentDidLoad(){if(this.quickLinks&&this.base.createNestedMarkup(this.container,"dxp-cta-list",this.quickLinks),this.addLevel(this.element,"0"),this.addFirstLevel(),this.currentURL.split("?")[0]){let i;i=this.deepNavData?Array.from(this.element.querySelectorAll(l)):this.element.querySelectorAll(l),Array.from(i).forEach((async i=>{"md"!==this.base.getDeviceWidthType()&&"sm"!==this.base.getDeviceWidthType()||i.querySelector(".link-icon-container").classList.add("outer-item");const t=await i.getHref();this.currentURL.split("?")[0].endsWith(t)&&t&&(i.setActive(),i.triggerEvent(),this.getDeepNavInsideItem(i),this.disableActive=!0,this.addCollapseClass(i))}))}}async deepNavIconItemEmitter(i){const t=i.target,e=t.querySelector(h);e&&e.classList.contains("dxp-i-angle-right")?await this.getAllDeepNavItem(i):await this.hideDeepNavItemForSmallDevice(i),"md"!==this.base.getDeviceWidthType()&&"sm"!==this.base.getDeviceWidthType()||this.parentIcon.emit(t)}async itemMouseHover(i){"xl"!==this.base.getDeviceWidthType()&&"lg"!==this.base.getDeviceWidthType()||await this.getAllDeepNavItem(i)}itemMouseLeave(i){"xl"!==this.base.getDeviceWidthType()&&"lg"!==this.base.getDeviceWidthType()||this.hideDeepNavItem(i)}routingHandler(i){this.base.routingEventListener(i)}async hideNestedNavItem(i){i.forEach((i=>{i&&(this.showHideDeepNav(i,!1),i.querySelectorAll(l).forEach((i=>{i.classList.remove("active-item"),i.querySelector("a").classList.remove("activelink");const t=i.querySelector(h);t&&(t.classList.remove("activelink","dxp-i-minus"),t.classList.add("dxp-i-angle-right"))})))}))}addAccessLabels(i,t){if(i&&this.deepNavData&&t){const i=t.querySelector(o),n=t.querySelector("a")&&t.querySelector("a span").getAttribute("title");null===i&&t.querySelector(".nav-icon")&&(t.querySelector(".nav-icon").remove(),t.querySelector("a")&&(t.querySelector("a").setAttribute("aria-haspopup","false"),t.querySelector("a").setAttribute("aria-label",`${n}. ${e.localeTranslator.translate(this.deepNavLinkAccessibilityText)}.`)))}}addCollapseClass(i){"md"!==this.base.getDeviceWidthType()&&"sm"!==this.base.getDeviceWidthType()||(i.querySelector(h)&&i.querySelector(h).classList.add("dxp-i-minus"),i.querySelector(o)&&this.addRemoveIndentation(i.querySelector(o).querySelector("ul"),!0))}addFirstLevel(){let i,t,e;this.deepNavData?(i=this.element.querySelector(o),t=i.getAttribute("level")):this.element&&this.element.querySelector(o)&&(i=this.element.querySelectorAll(o),t=i[0].getAttribute("level")),"1"===t&&i&&(this.deepNavData?(e=i.querySelector("ul"),e.classList.add("first-level-nav")):(e=i[0].querySelector("ul"),e.classList.add("first-level-nav")))}addLevel(i,t){this.getRenderedDeepNav(i).forEach((i=>{const e=t.includes(".")?`${t}.1`:Number(t)+1;i.setAttribute("level",e.toString());const n=Array.from(i.getElementsByTagName("ul")[0].children);let s=0;n.forEach((i=>{const t=i.querySelectorAll(o);t.forEach((i=>{Array.from(i.getElementsByTagName("ul")[0].children).forEach((i=>{i&&this.ifFourthLevelNav(i)}))})),this.addAccessLabels(t,i);const a=this.setAttributes(s,t,i,e,n);s++,this.addLevel(i,a)}))}))}addRemoveIndentation(i,t){i.childNodes&&i.childNodes.forEach((i=>{"DXP-DEEP-NAV-ITEM"===i.tagName&&(t?i.querySelector(".link-icon-container").classList.remove("outer-item"):i.querySelector(".link-icon-container").classList.add("outer-item"))}))}async getAllDeepNavItem(i){let t,e;this.getAllDeepNavItemsLargeDevices(),this.deepNavData?(e=i.target,t=e.querySelector(o)):(e=i.target,t=e.querySelectorAll(o)[0]),"md"!==this.base.getDeviceWidthType()&&"sm"!==this.base.getDeviceWidthType()||(await this.getAllDeepNavItemForSmallDevice(e),this.addRemoveIndentation(t.querySelector("ul"),!0));const n=e.querySelector(h);e.querySelector("a").classList.add("activelink"),e.classList.add("active-item"),this.nestedDeepNav(t,n)}async getAllDeepNavItemForSmallDevice(i){const t=i.closest(o).parentElement,e=this.deepNavData?t.classList.contains("deep-container"):!!t.querySelector(".deep-container")&&t.querySelector(".deep-container").classList.contains("deep-container");if("md"!==this.base.getDeviceWidthType()&&"sm"!==this.base.getDeviceWidthType()||this.addRemoveIndentation(i.parentElement,!1),!e){const t=i.closest(o).parentElement.querySelector(h);t&&(t.classList.remove("dxp-i-angle-right"),t.classList.add("dxp-i-minus"))}const n=i.parentElement.querySelector(".active-item");if(n){n.querySelector("a").classList.remove("activelink"),n.querySelector("a span").classList.remove("navigation-active");const i=n.querySelector(h);i&&(i.classList.remove("activelink","navigation-active","dxp-i-minus"),i.classList.add("dxp-i-angle-right")),n.classList.remove("active-item");const t=n.querySelectorAll(o);await this.hideNestedNavItem(t)}}getAllDeepNavItemsLargeDevices(){if(this.disableActive&&"md"!==this.base.getDeviceWidthType()&&"sm"!==this.base.getDeviceWidthType()){let i=this.element.querySelectorAll(o),t=this.element.querySelectorAll(l);i=0===i.length?this.element.querySelectorAll(o):i,t=0===t.length?this.element.querySelectorAll(l):t,Array.from(i).forEach((async i=>{i.classList.remove("dxp-block")})),Array.from(t).forEach((async i=>{i&&(i.querySelector("a span").classList.remove("navigation-active"),i.querySelector(".nav-icon")&&(i.querySelector(".nav-icon span").classList.remove("navigation-active","dxp-i-minus","activelink"),i.querySelector(".nav-icon span").classList.add("dxp-i-angle-right")))})),this.disableActive=!1}}getArrayFromNodeList(i){return[].slice.call(i)}getDeepNavInsideItem(i){const t=i.querySelector(o);t&&this.showHideDeepNav(t,!0)}getRenderedDeepNav(i){let t=this.getArrayFromNodeList(i.querySelectorAll(o));return t=t.length>0?t:this.getArrayFromNodeList(i.childNodes).filter((i=>i.tagName&&i.tagName.toLowerCase()===o)),t}hideDeepNavItem(i){let t,e;if(this.deepNavData){const n=i.target;t=n.querySelector(o),e=n.querySelectorAll(h),n.querySelector("a").classList.remove("activelink")}else t=i.target.querySelectorAll(o)[0],e=i.target.querySelectorAll(h),i.target.querySelector("a").classList.remove("activelink");this.hideIcons(t,e)}async hideDeepNavItemForSmallDevice(i){const t=i.target,e=t.closest(o).parentElement,n=this.deepNavData?e.classList.contains("deep-container"):!!e.querySelector(".deep-container")&&e.querySelector(".deep-container").classList.contains("deep-container");if("md"!==this.base.getDeviceWidthType()&&"sm"!==this.base.getDeviceWidthType()||this.addRemoveIndentation(t.parentElement,!0),!n){const i=t.closest(o).parentElement.querySelector(h);i&&i.classList.add("dxp-i-minus")}const s=this.getRenderedDeepNav(t);t.querySelector("a").classList.remove("activelink"),t.querySelector("a span").classList.remove("navigation-active");const a=t.querySelector(h);a.classList.remove("activelink","navigation-active","dxp-i-minus"),a.classList.add("dxp-i-angle-right"),await this.hideNestedNavItem(s)}hideIcons(i,t){i&&(this.showHideDeepNav(i,!1),t)&&(null===i.querySelector(l)&&t[0]?t[0].classList.remove("dxp-i-angle-right"):t[0]&&(t[0].classList.remove("activelink","dxp-i-minus"),t[0].classList.add("dxp-i-angle-right")))}ifFourthLevelNav(i){const t=i.querySelectorAll("li");t&&t.length>0&&t[0].classList.add("nav-item-li");const e=i.querySelectorAll("a span");e&&e.length>0&&e[0].classList.remove("dxp-title-first");const n=i.querySelectorAll("a");n&&n.length>0&&n[0].classList.add("second-level");const s=i.querySelectorAll(h);s[0]&&(s[0].classList.remove("dxp-icon-medium"),s[0].classList.add("dxp-icon-small"))}nestedDeepNav(i,t){i&&t&&(null===i.querySelector(l)||t.classList.add("dxp-i-minus","activelink"),t.classList.remove("dxp-i-angle-right")),i&&this.showHideDeepNav(i,!0)}renderItems(i){return n("dxp-deep-nav",null,i&&i.map((i=>n("dxp-deep-nav-item",{menuRouteLink:i.menuRouteLink,"open-in-new-tab":i.openInNewTab,"navigation-title":i.navigationTitle,"is-internal-link":i.isInternalLink},i.child&&i.child.length>0?this.renderItems(i.child):""))),this.quickLinks?n("section",{class:"cta-list",ref:i=>this.container=i}):!this.deepNavData&&n("section",{class:"cta-list"},n("slot",null)))}setAttributes(i,t,e,n,s){(null===t||0===t.length)&&e&&e.querySelector(h)&&e.querySelector(".nav-icon")&&(e.querySelector(".nav-icon").remove(),e.querySelector("a").setAttribute("aria-haspopup","false"));const a=`${n}.${i+1}`;return e.setAttribute("level",a),e.querySelector("a")&&(e.querySelector("a").setAttribute("aria-posinset",(i+1).toString()),e.querySelector("a").setAttribute("aria-setsize",(s.length-1).toString())),a}showHideDeepNav(i,t){t?(i.classList.remove("dxp-none"),i.classList.add("dxp-block","dxp-menu-collapse")):(i.classList.add("dxp-none"),i.classList.remove("dxp-block","dxp-menu-collapse"))}render(){return e.log.debug(this.element.tagName,"render()","in dxp-deep-nav-container render() : PRODUCTION"),n("nav",{dir:this.dir,class:`${this.base.componentClass()} nav-deep`,"data-theme":this.theme,role:"navigation"},n("div",{class:"deep-container"},this.deepNavData?this.renderItems(this.deepNavData):n("slot",null)))}get element(){return s(this)}};d.style=".dxp.dxp-deep-nav-container.nav-deep{margin:0;width:25%}.dxp.dxp-deep-nav-container.nav-deep .deep-container{width:25%;overflow:hidden;position:relative}.dxp.dxp-deep-nav-container.nav-deep .deep-container .dxp-deep-nav{width:25%}";export{d as dxp_deep_nav_container}