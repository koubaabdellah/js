import{r as t,c as s,d as e,h as a,g as i}from"./p-ae706b1d.js";import{B as o}from"./p-150435d0.js";const r=class{constructor(e){t(this,e),this.closedWidget=s(this,"closedWidget",7),this.donationResponse=s(this,"donationResponse",7),this.closeCallback=()=>{this.closedWidget.emit({buttonId:this.buttonId})},this.donationCallback=t=>{this.donationResponse.emit(t)},this.jsLoaded=()=>{this.setConfig(),this.objDonate=new DonateWidget,this.launchMode&&"embedded"===this.launchMode.trim().toLowerCase()&&this.launchWidget("embedded")},this.aemRequired=!0,this.alignIcon="right",this.buttonAriaLabel="Dxp Donate button",this.buttonId="dxp-donate-widget",this.buttonType="primary",this.disabled=!1,this.disablePreview=!1,this.disableSkip=!1,this.donateButtonStyle="button",this.donationType="once",this.dynamicHeight=!0,this.footerHidden=!1,this.guestOnly=!1,this.headerHidden=!1,this.performanceMode=!1,this.trackEvent=!0,this.webIntegrated=!1}componentWillLoad(){this.base=new o(this,e),this.programId&&""!==this.programId.trim()&&this.loadJs()}ctaClickEventHandler(t){this.launchWidget(),t.stopPropagation()}handleKeyDownEvent(t){this.handleEscapeCharacter(t)}routingHandler(t){this.base.routingEventListener(t)}handleEscapeCharacter(t){if("escape"===t.code.toLowerCase()&&this.launchMode&&"lightbox"===this.launchMode.trim().toLowerCase()){const t=document.querySelector("#donate-widget-container");t&&t.remove()}}launchWidget(t=this.launchMode){switch(t.trim().toLowerCase()){case"redirect":this.objDonate.launchRedirect(this.config,this.redirectUrl);break;case"lightbox":this.setLightboxParam(),this.objDonate.launchLightbox(this.config,this.lightboxParam,this.donationCallback,this.closeCallback);break;case"embedded":this.setEmbeddedParam(),this.objDonate.launchEmbedded(this.config,this.embeddedParam,this.donationCallback);break;case"popup":this.setPopupParam(),this.objDonate.launchPopUp(this.config,this.popupParams,this.donationCallback,this.closeCallback)}}loadJs(){const t=document.getElementsByTagName("script")[0],s=document.createElement("script");s.id=`donate-${e.util.getUniqueId()}`,s.src=this.loadJsSrc(),s.async=!0,s.onload=this.jsLoaded,t.parentNode.insertBefore(s,t)}loadJsSrc(){let t;if(this.env)switch(this.env.trim().toLowerCase()){case"mtf":t="https://mtf.donate.mastercard.com/widget/p2/assets/sdk/donate-widget.min.js";break;case"perf":t="https://stage.perf.donate.mastercard.com/widget/p1/assets/sdk/donate-widget.min.js";break;case"prod":t="https://donate.mastercard.com/widget/p2/assets/sdk/donate-widget.min.js";break;case"stage":t="https://stage.donate.mastercard.com/widget/p1/assets/sdk/donate-widget.min.js";break;default:t=e.config.get("DXP_DONATE_JS_URL")}else t=e.config.get("DXP_DONATE_JS_URL");return t}removeEmptyKeys(t){Object.keys(t).forEach((s=>(null==t[s]||t[s]&&Object.getPrototypeOf(t[s])===Object.prototype&&0===Object.keys(t[s]).length)&&delete t[s]))}setConfig(){this.donationType.split(",").forEach((t=>{this.setDonationConfig(t)})),this.setDedicationConfig(),this.setDonateItemConfig(),this.config={programId:this.programId,charityId:this.charityId,donations:this.donationConfig,theme:this.themeWidget,guestOnly:this.guestOnly,cid:this.campaignId,trackEvent:this.trackEvent,aemRequired:this.aemRequired,webIntegrated:this.webIntegrated,performanceMode:this.performanceMode,headerHidden:this.headerHidden,footerHidden:this.footerHidden,lang:this.langWidget,aemResource:this.aemResource,dedication:this.dedication,donateItem:this.donateItem,sourceId:this.sourceId,minHeight:this.minHeight,dynamicHeight:this.dynamicHeight},this.removeEmptyKeys(this.config)}setDedicationConfig(){this.dedication={disableSkip:this.disableSkip,disablePreview:this.disablePreview}}setDonateItemConfig(){this.donateItem={name:this.itemName,icon:this.itemIcon,value:this.itemValue},this.removeEmptyKeys(this.donateItem)}setDonationAmount(t){return t?"string"==typeof t?JSON.parse(t):t:{}}setDonationConfig(t){let s;switch(t.trim().toLowerCase()){case"monthly":this.amountMonthly=this.setDonationAmount(this.amountMonthly),s={MONTHLY:this.amountMonthly};break;case"once":this.amountOnce=this.setDonationAmount(this.amountOnce),s={"ONE-TIME":this.amountOnce};break;case"micro":this.amountMicroPerTransaction=this.setDonationAmount(this.amountMicroPerTransaction);const t={perTransaction:this.amountMicroPerTransaction};this.amountMicroPerMonth=this.setDonationAmount(this.amountMicroPerMonth);const e={perMonth:this.amountMicroPerMonth};s={MICRO:Object.assign(Object.assign({},t),e)};break;case"roundup":this.amountRoundup=this.setDonationAmount(this.amountRoundup),s={ROUNDUP:this.amountRoundup}}this.donationConfig=Object.assign(Object.assign({},this.donationConfig),s)}setEmbeddedParam(){this.embeddedParam={container:this.embeddedContainer,backgroundColor:this.embeddedBgColor}}setLightboxParam(){this.lightboxParam={backgroundColor:this.lightboxBgColor}}setPopupParam(){this.popupParams={title:this.popupTitle,top:this.popupTop,left:this.popupLeft,width:this.popupWidth,height:this.popupHeight}}render(){return e.log.debug(this.element.tagName,"render()","in dxp-donate-button render() : PRODUCTION"),a("div",{class:this.base.componentClass(),dir:this.dir,"data-theme":this.theme},this.launchMode&&"embedded"!==this.launchMode.trim().toLowerCase()&&this.text?a("dxp-cta",{type:this.donateButtonStyle,"cta-id":this.buttonId,"button-type":this.buttonType,text:this.text,"aria-label":this.buttonAriaLabel,"align-icon":this.alignIcon,disabled:this.disabled,"link-type":this.linkType,href:"javascript:void(0)",alt:this.alt,"accent-color":this.accentColor,"dtm-cta-title":this.dtmCtaTitle,src:this.src,"link-icon":this.linkIconClass}):"")}get element(){return i(this)}};r.style="@keyframes animate-pop{0%{transform:scale(1)}30%{transform:scale(1.2)}80%{transform:scale(.9)}to{transform:scale(1)}}@keyframes animate-moveup{0%{top:2.5rem;opacity:0}to{top:0;opacity:1}}@keyframes animate-fade-out{0%{opacity:1}70%{opacity:0;transform:scale(2)}75%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.dxp .dxp-theme-white.dxp-donate-button{background-color:transparent}@keyframes animate-pop{0%{transform:scale(1)}30%{transform:scale(1.2)}80%{transform:scale(.9)}to{transform:scale(1)}}@keyframes animate-moveup{0%{top:2.5rem;opacity:0}to{top:0;opacity:1}}@keyframes animate-fade-out{0%{opacity:1}70%{opacity:0;transform:scale(2)}75%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.dxp .dxp-theme-black.dxp-donate-button{background-color:transparent}@keyframes animate-pop{0%{transform:scale(1)}30%{transform:scale(1.2)}80%{transform:scale(.9)}to{transform:scale(1)}}@keyframes animate-moveup{0%{top:2.5rem;opacity:0}to{top:0;opacity:1}}@keyframes animate-fade-out{0%{opacity:1}70%{opacity:0;transform:scale(2)}75%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.dxp .dxp-theme-light-grey.dxp-donate-button{background-color:transparent}@keyframes animate-pop{0%{transform:scale(1)}30%{transform:scale(1.2)}80%{transform:scale(.9)}to{transform:scale(1)}}@keyframes animate-moveup{0%{top:2.5rem;opacity:0}to{top:0;opacity:1}}@keyframes animate-fade-out{0%{opacity:1}70%{opacity:0;transform:scale(2)}75%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.dxp .dxp-theme-rich-grey.dxp-donate-button{background-color:transparent}@keyframes animate-pop{0%{transform:scale(1)}30%{transform:scale(1.2)}80%{transform:scale(.9)}to{transform:scale(1)}}@keyframes animate-moveup{0%{top:2.5rem;opacity:0}to{top:0;opacity:1}}@keyframes animate-fade-out{0%{opacity:1}70%{opacity:0;transform:scale(2)}75%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.dxp .dxp-theme-b2b.dxp-donate-button{background-color:transparent}.dxp-donate-button{background:transparent}";export{r as dxp_donate_button}