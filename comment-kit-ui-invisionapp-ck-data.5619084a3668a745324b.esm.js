(window["commentKitUI1.x.xWebpackJSONP"]=window["commentKitUI1.x.xWebpackJSONP"]||[]).push([[3],{"/jln":function(t,e,r){var o=r("tWqV"),i=r("EHfO"),n=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=i.init,t.prototype["@@transducer/result"]=i.result,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},t}(),s=o((function(t,e){return new n(t,e)}));t.exports=s},"2cbP":function(t,e,r){var o=r("wmFa")(r("VYKz"));t.exports=o},"7w3v":function(t,e,r){var o=r("tWqV"),i=r("Avji"),n=r("tkI8"),s=o((function(t,e){return t.map((function(t){for(var r,o=e,s=0;s<t.length;){if(null==o)return;o=i(r=t[s])?n(r,o):o[r],s+=1}return o}))}));t.exports=s},"9bph":function(t,e,r){var o=r("tWqV"),i=r("7w3v"),n=o((function(t,e){return i([t],e)[0]}));t.exports=n},Avji:function(t,e){t.exports=Number.isInteger||function(t){return t<<0===t}},HgcS:function(t,e,r){var o=r("tWqV"),i=r("9bph"),n=o((function(t,e){return i([t],e)}));t.exports=n},HlJK:function(t,e,r){var o=r("QHRA"),i=r("AmWX"),n=r("Nyay"),s=o((function(t){return!!i(t)||!!t&&"object"==typeof t&&!n(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1))}));t.exports=s},Hu8g:function(t,e,r){var o=r("tWqV")((function(t,e){for(var r={},o={},i=0,n=t.length;i<n;)o[t[i]]=1,i+=1;for(var s in e)o.hasOwnProperty(s)||(r[s]=e[s]);return r}));t.exports=o},IHxi:function(t,e){var r=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();t.exports=function(t){return new r(t)}},NWRd:function(t,e,r){var o=r("QHRA"),i=r("TlCh"),n=r("tO9Q"),s=r("z3ss"),a=r("2cbP"),c=o((function(t){return i(a(n,0,s("length",t)),(function(){for(var e=0,r=t.length;e<r;){if(!t[e].apply(this,arguments))return!1;e+=1}return!0}))}));t.exports=c},OkiC:function(t,e,r){var o=r("Uw16"),i=r("QDN1")(o);t.exports=i},P1mm:function(t,e,r){var o=r("tWqV"),i=r("ZP4Z"),n=r("Xjf4"),s=r("VYKz"),a=r("/jln"),c=r("TlCh"),p=r("MHWA"),d=o(i(["fantasy-land/map","map"],a,(function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return c(e.length,(function(){return t.call(this,e.apply(this,arguments))}));case"[object Object]":return s((function(r,o){return r[o]=t(e[o]),r}),{},p(e));default:return n(t,e)}})));t.exports=d},QDN1:function(t,e,r){var o=r("rWoH"),i=r("tWqV");t.exports=function(t){return i((function(e,r){return o(Math.max(0,e.length-r.length),(function(){return e.apply(this,t(r,arguments))}))}))}},Qd0r:function(t,e,r){var o=r("93UI"),i=r("QHRA")(o("tail",r("YCXO")(1,1/0)));t.exports=i},TlCh:function(t,e,r){var o=r("rWoH"),i=r("QHRA"),n=r("tWqV"),s=r("o6dO"),a=n((function(t,e){return 1===t?i(e):o(t,s(t,[],e))}));t.exports=a},Tml1:function(t,e,r){var o=r("rWoH"),i=r("tWqV")((function(t,e){return o(t.length,(function(){return t.apply(e,arguments)}))}));t.exports=i},Ua0o:function(t,e,r){"use strict";r.r(e),r.d(e,"CKData",(function(){return fi})),r.d(e,"CKCoreData",(function(){return mi})),r.d(e,"DraftComment",(function(){return lo})),r.d(e,"DraftDomain",(function(){return Nr})),r.d(e,"DraftThread",(function(){return Gt})),r.d(e,"AnonymousUserSingleton",(function(){return mr})),r.d(e,"DraftUser",(function(){return gr})),r.d(e,"ImmutableComment",(function(){return yo})),r.d(e,"ImmutableDomain",(function(){return go})),r.d(e,"ImmutableThread",(function(){return fo})),r.d(e,"ImmutableUser",(function(){return bo})),r.d(e,"MultipleIRNDomain",(function(){return Oo})),r.d(e,"Operations",(function(){return Jo})),r.d(e,"bindOperations",(function(){return Yo})),r.d(e,"Projection",(function(){return ei}));var o={};r.r(o),r.d(o,"getThreadsSortedByCreatedAt",(function(){return fr})),r.d(o,"getThreadsSortedByRecency",(function(){return br})),r.d(o,"getChildDomains",(function(){return Or})),r.d(o,"getRootDomain",(function(){return vr})),r.d(o,"createInitialConfigState",(function(){return wr}));var i=r("cDcd"),n=r.n(i),s=r("8hdL"),a=r("EuEm"),c=Object(a.a)(0),p=r("RA3J"),d=r("rzuo"),l=r("4dTN");function u(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}var h,m,y=r("zfRh"),g=function(){function t(t,e){this.xf=e,this.f=t,this.found=!1}return t.prototype["@@transducer/init"]=y.a.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,void 0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.found=!0,t=u(this.xf["@@transducer/step"](t,e))),t},t}(),f=Object(d.a)((function(t,e){return new g(t,e)})),b=Object(d.a)(Object(l.a)(["find"],f,(function(t,e){for(var r=0,o=e.length;r<o;){if(t(e[r]))return e[r];r+=1}}))),O=r("VqDq");let v=(w=(h=class{constructor(t){var e;this.core=void 0,(e=m)&&Object.defineProperty(this,"state",{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(this):void 0}),this.core=t,this.state=this.createInitialState(),Object(s.l)(this)}}).prototype,j="state",D=[s.m],C={configurable:!0,enumerable:!0,writable:!0,initializer:null},P={},Object.keys(C).forEach((function(t){P[t]=C[t]})),P.enumerable=!!P.enumerable,P.configurable=!!P.configurable,("value"in P||P.initializer)&&(P.writable=!0),void 0===(P=D.slice().reverse().reduce((function(t,e){return e(w,j,t)||t}),P)).initializer&&(Object.defineProperty(w,j,P),P=null),m=P,h);var w,j,D,C,P;class I{constructor(t,e){this.indices=void 0,this.retainedKeys=void 0,this.references=void 0,this.keys=void 0,this.retainedKeys=new s.a,this.references=new s.b,this.keys=t,this.indices={};for(const r of t)this.indices[r]=new s.a;if(e)for(const r of e)this.set(r);Object(s.l)(this,{indices:s.m.deep,set:s.d,delete:s.d})}get size(){return this.references.size}get(t,e){var r;return(null===(r=this.getBucket(t,e))||void 0===r?void 0:r.values.slice())||[]}set(t){Object(s.j)(t)||t.constructor||console.warn("IndexedCollection members should be observables or instances of a constructor; anonymous objects may cause unexpected behavior");const e=[];return this.delete(t),this.keys.forEach(r=>{this.has(r,t[r])?this.indices[r].get(t[r]).add(t):this.indices[r].set(t[r],new T([t])),e.push(t[r])}),this.retainedKeys.set(t,e),this.references.add(t),this}has(t,e){return void 0!==e?this.indices[t].has(e):this.references.has(t)}delete(t,e){if(void 0!==e){const r=this.getBucket(t,e);if(r){for(;r.values.length>0;)this.delete(r.values.pop());this.deleteBucket(t,e)}}else{const e=this.retainedKeys.get(t);e&&(this.keys.forEach((r,o)=>{const i=this.getBucket(r,e[o]);i.remove(t),0===i.size&&this.deleteBucket(r,e[o])}),this.retainedKeys.delete(t),this.references.delete(t))}return this}clear(){this.keys.forEach(t=>{this.indices[t].clear()}),this.references.clear(),delete this.retainedKeys,this.retainedKeys=new WeakMap}entries(){return this.references.entries()}values(){return this.references.values()}indexHasKey(t){return Boolean(this.indices[t])}getIndexBuckets(t){return this.indexHasKey(t)?Array.from(this.indices[t].keys()):[]}getBucket(t,e){return this.indices[t].get(e)}deleteBucket(t,e){return this.indices[t].delete(e)}_stats(){const t=this.keys.map(t=>this.indices[t]);let e=0,r=0,o=0;for(const i of t){e+=i.size;for(const[,t]of i.entries())r+=t.size,1===t.size&&o++}return{keys:this.keys,object_count:this.size,bucket_count:e,entry_count:r,unique_buckets:o}}}class T{constructor(t=[]){this.values=void 0,this.values=t,Object(s.l)(this,{values:s.m,size:s.g})}add(t){return this.has(t)||this.values.push(t),this}remove(t){const e=this.values.indexOf(t);return-1!==e&&this.values.splice(e,1),this}has(t){return this.values.indexOf(t)>=0}get size(){return this.values.length}}var z,R,S,A,U=r("fADB");function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function N(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function k(t,e,r,o,i){var n={};return Object.keys(o).forEach((function(t){n[t]=o[t]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null),n}let x=(z=s.g.struct,R=s.g.struct,S=s.g.struct,k((A=class extends v{constructor(...t){super(...t),this.modelConstructor=void 0}createInitialState(t=[]){return{records:new I(["id","refId"].concat(t)),pendingRecords:s.m.map()}}get(t){return c(this.state.records.get("id",t))}getByRefId(t){return c(this.state.records.get("refId",t))}findBy(t,e){return this.state.records.keys.includes(t)?c(this.state.records.get(t,e))||null:this.find(Object(p.a)(t,e))}find(t){return b(t)(this.dataArray)}filterBy(t,e){return this.state.records.keys.includes(t)?this.state.records.get(t,e):this.filter(Object(p.a)(t,e))}filter(t){return Object(O.a)(t)(this.dataArray)}all(){return this.dataArray}insert(t){if(this.state.records.has("refId",t.refId))throw new Error(`Model with refId ${t.refId} already exists`);if(this.state.records.has("id",t.id))throw new Error(`Model with id ${t.id} already exists`);return this.state.records.set(t),c(this.state.records.get("refId",t.refId))}upsert(t){var e;const r=null!==(e=this.get(t.id))&&void 0!==e?e:this.getByRefId(t.refId);return r?(t.refId=r.refId,this.state.records.delete(r),this.state.records.set(t),c(this.state.records.get("refId",t.refId))):(this.state.records.set(t),c(this.state.records.get("refId",t.refId)))}insertMany(t){return t.map(t=>{try{return this.insert(t)}catch(e){return e.model=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){N(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t),Object(U.reportError)(e),e}})}upsertMany(t){return t.map(t=>this.upsert(t))}replace(t){if(!this.state.records.has("refId",t.refId))throw new Error("No such model with refId "+t.refId);return this.state.records.delete("refId",t.refId),this.state.records.set(t),c(this.state.records.get("refId",t.refId))}remove(t){return"string"==typeof t?this.state.records.delete("refId",t):this.state.records.delete(t)}removeBy(t,e){return this.state.records.delete(t,e)}get dataArray(){return Array.from(this.state.records.values())}get pending(){return Array.from(this.state.pendingRecords.keys()).map(t=>c(this.state.records.get("refId",t)))}get idList(){return this.state.records.getIndexBuckets("id")}}).prototype,"insert",[s.d],Object.getOwnPropertyDescriptor(A.prototype,"insert"),A.prototype),k(A.prototype,"upsert",[s.d],Object.getOwnPropertyDescriptor(A.prototype,"upsert"),A.prototype),k(A.prototype,"replace",[s.d],Object.getOwnPropertyDescriptor(A.prototype,"replace"),A.prototype),k(A.prototype,"remove",[s.d],Object.getOwnPropertyDescriptor(A.prototype,"remove"),A.prototype),k(A.prototype,"removeBy",[s.d],Object.getOwnPropertyDescriptor(A.prototype,"removeBy"),A.prototype),k(A.prototype,"dataArray",[z],Object.getOwnPropertyDescriptor(A.prototype,"dataArray"),A.prototype),k(A.prototype,"pending",[R],Object.getOwnPropertyDescriptor(A.prototype,"pending"),A.prototype),k(A.prototype,"idList",[S],Object.getOwnPropertyDescriptor(A.prototype,"idList"),A.prototype),A);var B=r("Hu8g"),M=r.n(B);class _ extends x{constructor(t){super(t),this.editingCommentId=void 0,this.commentToDeleteId=void 0,this.modelConstructor=void 0,this.modelConstructor=this.core.constructors.Comment}get editingComment(){return this.get(this.editingCommentId)}get commentToDelete(){return this.get(this.commentToDeleteId)}createInitialState(){return super.createInitialState(["threadId","authorId"])}init(t){return new this.modelConstructor(this,Object(U.sanitizeID)(t||{}))}initDraft(t){return new this.modelConstructor.draftConstructor(t)}commitDraft(t){const e=new this.modelConstructor(this,M()(["draft"],t));return this.replace(e),e}setEditingComment(t){this.editingCommentId=null==t?void 0:t.id}setCommentToDelete(t){this.commentToDeleteId=null==t?void 0:t.id}}var H,V,L=r("zXQ7"),F=r.n(L);function K(t,e,r,o,i){var n={};return Object.keys(o).forEach((function(t){n[t]=o[t]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null),n}const W=/[^@]+@[^\\.]+\..+$/;let $=(V=K((H=class extends x{constructor(t){super(t),function(t,e,r,o){r&&Object.defineProperty(t,"isVisitor",{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}(this,0,V,this),this.modelConstructor=void 0,this.modelConstructor=this.core.constructors.Domain}createInitialState(){return super.createInitialState(["irn"])}init(t){return new this.modelConstructor(this,Object(U.sanitizeID)(t))}initDraft(t){return new this.modelConstructor.draftConstructor(t)}commitDraft(t){const e=new this.modelConstructor(this,M()(["draft"],t));return this.replace(e),e}setIsVisitor(t){this.isVisitor=t}searchCollaborators(t,e,r){let o=e;if(!o||!o.length)return[];"@"===t&&(o=o.filter(t=>null==t?void 0:t.isMember));const i=new F.a(o,{keys:["handle","email","name"],minMatchCharLength:5,threshold:.2,sortFn:(t,e)=>t.item.isMember?e.item.isMember?t.score-e.score:-1:1}),n=null==t?void 0:t.slice(1),s=i.search(n||t);return(W.test(t)&&r&&-1===s.findIndex(e=>e.email===t)?[{id:"email-invite",email:t}]:[]).concat(s.slice(0,30))}}).prototype,"isVisitor",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K(H.prototype,"setIsVisitor",[s.d],Object.getOwnPropertyDescriptor(H.prototype,"setIsVisitor"),H.prototype),H);var q=r("b5tk");function Q(t,e,r){var o,i=typeof t;switch(i){case"string":case"number":return 0===t&&1/t==-1/0?!!r._items["-0"]||(e&&(r._items["-0"]=!0),!1):null!==r._nativeSet?e?(o=r._nativeSet.size,r._nativeSet.add(t),r._nativeSet.size===o):r._nativeSet.has(t):i in r._items?t in r._items[i]||(e&&(r._items[i][t]=!0),!1):(e&&(r._items[i]={},r._items[i][t]=!0),!1);case"boolean":if(i in r._items){var n=t?1:0;return!!r._items[i][n]||(e&&(r._items[i][n]=!0),!1)}return e&&(r._items[i]=t?[!1,!0]:[!0,!1]),!1;case"function":return null!==r._nativeSet?e?(o=r._nativeSet.size,r._nativeSet.add(t),r._nativeSet.size===o):r._nativeSet.has(t):i in r._items?!!Object(q.a)(t,r._items[i])||(e&&r._items[i].push(t),!1):(e&&(r._items[i]=[t]),!1);case"undefined":return!!r._items[i]||(e&&(r._items[i]=!0),!1);case"object":if(null===t)return!!r._items.null||(e&&(r._items.null=!0),!1);default:return(i=Object.prototype.toString.call(t))in r._items?!!Object(q.a)(t,r._items[i])||(e&&r._items[i].push(t),!1):(e&&(r._items[i]=[t]),!1)}}var X=function(){function t(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return t.prototype.add=function(t){return!Q(t,!0,this)},t.prototype.has=function(t){return Q(t,!1,this)},t}(),G=Object(d.a)((function(t,e){for(var r,o,i=new X,n=[],s=0;s<e.length;)r=t(o=e[s]),i.add(r)&&n.push(o),s+=1;return n})),J=r("li6o"),Y=r("yY6d"),Z=r("DJbE"),tt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),et=new Uint8Array(16);function rt(){if(!tt)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return tt(et)}for(var ot=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,it=function(t){return"string"==typeof t&&ot.test(t)},nt=[],st=0;st<256;++st)nt.push((st+256).toString(16).substr(1));var at=function(t,e,r){var o=(t=t||{}).random||(t.rng||rt)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=o[i];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(nt[t[e+0]]+nt[t[e+1]]+nt[t[e+2]]+nt[t[e+3]]+"-"+nt[t[e+4]]+nt[t[e+5]]+"-"+nt[t[e+6]]+nt[t[e+7]]+"-"+nt[t[e+8]]+nt[t[e+9]]+"-"+nt[t[e+10]]+nt[t[e+11]]+nt[t[e+12]]+nt[t[e+13]]+nt[t[e+14]]+nt[t[e+15]]).toLowerCase();if(!it(r))throw TypeError("Stringified UUID is invalid");return r}(o)},ct=r("t0gM"),pt=r.n(ct),dt=r("og9/"),lt=r.n(dt),ut=r("Qd0r"),ht=r.n(ut);let mt;var yt,gt,ft,bt,Ot,vt,wt,jt,Dt,Ct,Pt,It,Tt,zt,Rt,St,At,Ut,Et,Nt,kt,xt,Bt,Mt,_t,Ht,Vt,Lt,Ft,Kt;function Wt(t,e,r,o){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function $t(t,e,r,o,i){var n={};return Object.keys(o).forEach((function(t){n[t]=o[t]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null),n}!function(t){t.Thread="Thread",t.Comment="Comment",t.Domain="Domain",t.User="User"}(mt||(mt={}));const qt=G(J.a),Qt=["draft"];let Xt=(Kt=Ft=class{constructor(t,e){this.modelType=mt.Thread,this.draft=!1,Wt(this,"id",Et,this),Wt(this,"refId",Nt,this),Wt(this,"domainId",kt,this),Wt(this,"irn",xt,this),Wt(this,"isHighlighted",Bt,this),Wt(this,"privatized",Mt,this),Wt(this,"resolved",_t,this),Wt(this,"type",Ht,this),Wt(this,"position",Vt,this),Wt(this,"_anchorComment",Lt,this),this.draftConstructor=Gt,this.storeRef=void 0,this.storeRef=t,this.id=e.id||"",this.domainId=e.domainId||"",this.irn=e.irn||"",this.isHighlighted=e.isHighlighted||!1,this.privatized=e.privatized||!1,this.resolved=e.resolved||!1,this.type=e.type||0,this.position=e.position||"",this.refId=e.refId||at(),Object(s.l)(this)}get domain(){return this.storeRef.core.stores.domain.get(this.domainId)}get comments(){return this.storeRef.core.stores.comment.filterBy("threadId",this.id).sort((t,e)=>!t.createdAt||t.isNew?1:!e.createdAt||e.isNew?-1:t.createdAt.getTime()-e.createdAt.getTime())}get unreadComments(){return this.savedComments.filter(t=>t.unread)}get commentUpdateStamps(){return this.comments.map(t=>t.updatedAt.getTime())}get commentIds(){return this.comments.map(t=>t.id).join("-")}get savedComments(){return this.comments.filter(t=>!t.isNew)}get totalComments(){return this.savedComments.length}get userIds(){const t=Object(Y.a)(Object(Z.a)("authorId"),this.savedComments);return qt(t)}get unreadCommentAuthors(){const t=this.comments.filter(t=>!t.isNew&&t.unread).map(t=>this.storeRef.core.stores.user.get(t.authorId),[]);return qt(t)}get replyAuthors(){const t=this.comments.filter((t,e)=>0!==e&&!t.isNew).map(t=>this.storeRef.core.stores.user.get(t.authorId),[]);return qt(t)}get allAuthors(){return qt([this.author,...this.replyAuthors])}get totalUsers(){return this.userIds.length}get author(){return this.storeRef.core.stores.user.get(this.comments[0].authorId)}get anchorComment(){return pt()(this.comments)}get currentColor(){return Object(U.getThreadColorFromType)(this.type)}get markerNumber(){const t=this.domain.threadsSortedByCreatedAt.findIndex(t=>t.id===this.id);return t<0?""+(this.domain.threadsSortedByCreatedAt.length+1):""+(t+1)}get isTemp(){return this.isNew}get isNew(){return""===this.id||Boolean(this.id.match("temp-"))}get unread(){return this.comments.some(t=>t.unread)}get lastSavedComment(){let t=this.comments.length-1;for(;t>=0;){if(!this.comments[t].isNew)return this.comments[t];t--}return this.comments[0]}get oldestUnreadComment(){return this.comments.find(t=>!0===t.unread)}get relevantComment(){return this.unread?this.oldestUnreadComment:this.lastSavedComment}get unreadCount(){return this.comments.reduce((t,e)=>e.unread?t+1:t,0)}get isPending(){const t=this.getDraftOf();return!!t&&Boolean(t.pending)}getDraftOf(){return this.storeRef.core.stores.draft.getDraftOf(this)}getAnchorComment(){return pt()(this.comments)}getReplies(){return ht()(this.comments)}getLastComment(){return this.comments?lt()(this.comments):null}},Ft.draftConstructor=void 0,Et=$t((Ut=Kt).prototype,"id",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt=$t(Ut.prototype,"refId",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kt=$t(Ut.prototype,"domainId",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xt=$t(Ut.prototype,"irn",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bt=$t(Ut.prototype,"isHighlighted",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mt=$t(Ut.prototype,"privatized",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_t=$t(Ut.prototype,"resolved",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ht=$t(Ut.prototype,"type",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vt=$t(Ut.prototype,"position",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt=$t(Ut.prototype,"_anchorComment",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$t(Ut.prototype,"domain",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"domain"),Ut.prototype),$t(Ut.prototype,"comments",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"comments"),Ut.prototype),$t(Ut.prototype,"unreadComments",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"unreadComments"),Ut.prototype),$t(Ut.prototype,"commentUpdateStamps",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"commentUpdateStamps"),Ut.prototype),$t(Ut.prototype,"commentIds",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"commentIds"),Ut.prototype),$t(Ut.prototype,"savedComments",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"savedComments"),Ut.prototype),$t(Ut.prototype,"totalComments",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"totalComments"),Ut.prototype),$t(Ut.prototype,"userIds",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"userIds"),Ut.prototype),$t(Ut.prototype,"unreadCommentAuthors",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"unreadCommentAuthors"),Ut.prototype),$t(Ut.prototype,"replyAuthors",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"replyAuthors"),Ut.prototype),$t(Ut.prototype,"allAuthors",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"allAuthors"),Ut.prototype),$t(Ut.prototype,"totalUsers",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"totalUsers"),Ut.prototype),$t(Ut.prototype,"author",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"author"),Ut.prototype),$t(Ut.prototype,"anchorComment",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"anchorComment"),Ut.prototype),$t(Ut.prototype,"currentColor",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"currentColor"),Ut.prototype),$t(Ut.prototype,"markerNumber",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"markerNumber"),Ut.prototype),$t(Ut.prototype,"isTemp",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"isTemp"),Ut.prototype),$t(Ut.prototype,"isNew",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"isNew"),Ut.prototype),$t(Ut.prototype,"unread",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"unread"),Ut.prototype),$t(Ut.prototype,"lastSavedComment",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"lastSavedComment"),Ut.prototype),$t(Ut.prototype,"oldestUnreadComment",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"oldestUnreadComment"),Ut.prototype),$t(Ut.prototype,"relevantComment",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"relevantComment"),Ut.prototype),$t(Ut.prototype,"unreadCount",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"unreadCount"),Ut.prototype),$t(Ut.prototype,"isPending",[s.g],Object.getOwnPropertyDescriptor(Ut.prototype,"isPending"),Ut.prototype),Ut),Gt=(yt=Object(s.g)({equals:s.f.shallow}),gt=s.d.bound,ft=s.d.bound,bt=s.d.bound,At=St=class{constructor(t){Wt(this,"pending",vt,this),this.modelType=mt.Thread,this.draft=!0,this.refId=void 0,this.original=void 0,this.writableKeys=void 0,this.storeRef=void 0,this.concreteConstructor=Xt,Wt(this,"id",wt,this),Wt(this,"irn",jt,this),Wt(this,"domainId",Dt,this),Wt(this,"isHighlighted",Ct,this),Wt(this,"position",Pt,this),Wt(this,"privatized",It,this),Wt(this,"resolved",Tt,this),Wt(this,"type",zt,this),Wt(this,"_anchorComment",Rt,this),this.refId=at(),this.original=t,this.storeRef=t.storeRef,Object(s.l)(this),Object.assign(this,M()(Qt,t)),this.writableKeys=["irn","domainId","domain","isHighlighted","position","privatized","resolved","type"],Object.defineProperty(this,"refId",{writable:!1})}set(t,e){if("id"===t)throw new Error("Violation -- set('id', ...): Cannot set the `id` property of a draft via the set() method. This is probably not what you want to do.\n        To update the ID of a draft, use the setIdentity() method instead.");if("refId"===t)throw new Error("Violation -- set('refId', ...): The `refId` draft attribute cannot be changed.");if(!this.writableKeys.includes(t))throw new Error(`Violation -- set('${t}', ...): \`${t}\` is not a writable key of Draft${this.modelType}.`);this[t]=e}setIdentity(t){this.id=t}setPending(t){this.pending=t}get _original(){return this.original}get domain(){return this.storeRef.core.stores.domain.get(this.domainId)}set domain(t){this.domainId=t.id}get comments(){return this.storeRef.core.stores.comment.filterBy("threadId",this.id)}get unreadComments(){return this.savedComments.filter(t=>t.unread)}get savedComments(){return this.comments.filter(t=>!t.isNew)}get totalComments(){return this.savedComments.length}get userIds(){const t=Object(Y.a)(Object(Z.a)("authorId"),this.savedComments);return qt(t)}get unreadCommentAuthors(){const t=this.comments.filter(t=>!t.isNew&&t.unread).map(t=>this.storeRef.core.stores.user.get(t.authorId),[]);return qt(t)}get replyAuthors(){const t=this.comments.filter(t=>!t.isNew).map(t=>this.storeRef.core.stores.user.get(t.authorId),[]);return qt(t)}get totalUsers(){return this.userIds.length}get author(){return this.storeRef.core.stores.user.get(pt()(this.comments).authorId)}get anchorComment(){return this._anchorComment||pt()(this.comments)}get currentColor(){return U.ThreadColorOptions[this.type]}get markerNumber(){const t=this.domain.threadsSortedByCreatedAt.indexOf(this._original);return t<0?""+(this.domain.threadsSortedByCreatedAt.length+1):""+(t+1)}get isTemp(){return this.isNew}get isNew(){return""===this.id||Boolean(this.id.match("temp-"))}get computeCanInvite(){return!1}get unread(){return this.comments.some(t=>t.unread)}get lastSavedComment(){let t=this.comments.length-1;for(;t>=0;){if(!this.comments[t].isNew)return this.comments[t];t--}return this.comments[0]}get oldestUnreadComment(){return this.comments.find(t=>!0===t.unread)}get relevantComment(){return this.unread?this.oldestUnreadComment:this.lastSavedComment}get unreadCount(){return this.comments.reduce((t,e)=>e.unread?t+1:t,0)}setPrivacy(t){this.privatized=t}setResolved(t){this.resolved=!t}setColor(t){this.type=t}setAnchorComment(t){if(this.comments.length>0)throw new Error("Violation -- DraftThread#setAnchorComment(): Cannot alter the anchorComment of a Thread that already has replies.");this._anchorComment=t}getAnchorComment(){return pt()(this.comments)}getReplies(){return ht()(this.comments)}getLastComment(){return lt()(this.comments)}},St.concreteConstructor=void 0,vt=$t((Ot=At).prototype,"pending",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wt=$t(Ot.prototype,"id",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jt=$t(Ot.prototype,"irn",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dt=$t(Ot.prototype,"domainId",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ct=$t(Ot.prototype,"isHighlighted",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pt=$t(Ot.prototype,"position",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),It=$t(Ot.prototype,"privatized",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tt=$t(Ot.prototype,"resolved",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zt=$t(Ot.prototype,"type",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rt=$t(Ot.prototype,"_anchorComment",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$t(Ot.prototype,"set",[s.d],Object.getOwnPropertyDescriptor(Ot.prototype,"set"),Ot.prototype),$t(Ot.prototype,"setIdentity",[s.d],Object.getOwnPropertyDescriptor(Ot.prototype,"setIdentity"),Ot.prototype),$t(Ot.prototype,"setPending",[s.d],Object.getOwnPropertyDescriptor(Ot.prototype,"setPending"),Ot.prototype),$t(Ot.prototype,"domain",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"domain"),Ot.prototype),$t(Ot.prototype,"comments",[yt],Object.getOwnPropertyDescriptor(Ot.prototype,"comments"),Ot.prototype),$t(Ot.prototype,"unreadComments",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"unreadComments"),Ot.prototype),$t(Ot.prototype,"savedComments",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"savedComments"),Ot.prototype),$t(Ot.prototype,"totalComments",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"totalComments"),Ot.prototype),$t(Ot.prototype,"userIds",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"userIds"),Ot.prototype),$t(Ot.prototype,"unreadCommentAuthors",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"unreadCommentAuthors"),Ot.prototype),$t(Ot.prototype,"replyAuthors",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"replyAuthors"),Ot.prototype),$t(Ot.prototype,"totalUsers",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"totalUsers"),Ot.prototype),$t(Ot.prototype,"author",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"author"),Ot.prototype),$t(Ot.prototype,"anchorComment",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"anchorComment"),Ot.prototype),$t(Ot.prototype,"currentColor",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"currentColor"),Ot.prototype),$t(Ot.prototype,"markerNumber",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"markerNumber"),Ot.prototype),$t(Ot.prototype,"isTemp",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"isTemp"),Ot.prototype),$t(Ot.prototype,"isNew",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"isNew"),Ot.prototype),$t(Ot.prototype,"computeCanInvite",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"computeCanInvite"),Ot.prototype),$t(Ot.prototype,"unread",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"unread"),Ot.prototype),$t(Ot.prototype,"lastSavedComment",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"lastSavedComment"),Ot.prototype),$t(Ot.prototype,"oldestUnreadComment",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"oldestUnreadComment"),Ot.prototype),$t(Ot.prototype,"relevantComment",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"relevantComment"),Ot.prototype),$t(Ot.prototype,"unreadCount",[s.g],Object.getOwnPropertyDescriptor(Ot.prototype,"unreadCount"),Ot.prototype),$t(Ot.prototype,"setPrivacy",[gt],Object.getOwnPropertyDescriptor(Ot.prototype,"setPrivacy"),Ot.prototype),$t(Ot.prototype,"setResolved",[ft],Object.getOwnPropertyDescriptor(Ot.prototype,"setResolved"),Ot.prototype),$t(Ot.prototype,"setColor",[bt],Object.getOwnPropertyDescriptor(Ot.prototype,"setColor"),Ot.prototype),$t(Ot.prototype,"setAnchorComment",[s.d],Object.getOwnPropertyDescriptor(Ot.prototype,"setAnchorComment"),Ot.prototype),Ot);var Jt,Yt,Zt,te;function ee(t,e,r,o){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function re(t,e,r,o,i){var n={};return Object.keys(o).forEach((function(t){n[t]=o[t]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null),n}Xt.draftConstructor=Gt;let oe=(Yt=re((Jt=class extends x{constructor(t){super(t),ee(this,"lastViewedThreadId",Yt,this),ee(this,"isModalClicked",Zt,this),ee(this,"areCollaboratorsLoaded",te,this),this.modelConstructor=void 0,this.modelConstructor=Xt}createInitialState(){return super.createInitialState(["domainId","irn","type"])}init(t){return new this.modelConstructor(this,Object(U.sanitizeID)(t||{}))}initDraft(t){return new this.modelConstructor.draftConstructor(t)}initDefault(t){return Object.assign(t,{currentColor:U.DEFAULT_COLOR}),new this.modelConstructor.draftConstructor(t)}clear(){this.state.records.clear()}commitDraft(t){const e=new this.modelConstructor(this,M()(["draft"],t));return this.replace(e),e}setLastViewedThread(t){this.lastViewedThread=t}get lastViewedThread(){return this.get(this.lastViewedThreadId)}set lastViewedThread(t){var e;this.lastViewedThreadId=null!==(e=null==t?void 0:t.id)&&void 0!==e?e:null}setThreadModalClicked(t){this.isModalClicked=t}setCollaboratorsLoaded(){this.areCollaboratorsLoaded=!0}}).prototype,"lastViewedThreadId",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zt=re(Jt.prototype,"isModalClicked",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=re(Jt.prototype,"areCollaboratorsLoaded",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),re(Jt.prototype,"setLastViewedThread",[s.d],Object.getOwnPropertyDescriptor(Jt.prototype,"setLastViewedThread"),Jt.prototype),re(Jt.prototype,"setThreadModalClicked",[s.d],Object.getOwnPropertyDescriptor(Jt.prototype,"setThreadModalClicked"),Jt.prototype),re(Jt.prototype,"setCollaboratorsLoaded",[s.d],Object.getOwnPropertyDescriptor(Jt.prototype,"setCollaboratorsLoaded"),Jt.prototype),Jt);class ie extends x{constructor(t){super(t),this.modelConstructor=void 0,this.modelConstructor=this.core.constructors.User}createInitialState(){return super.createInitialState(["email","name","canPrivate","canMention","canComment","mentionable"])}init(t){return new this.modelConstructor(this,Object(U.sanitizeID)(t))}initDraft(t){return new this.modelConstructor.draftConstructor(t)}commitDraft(t){const e=new this.modelConstructor(this,M()(["draft"],t));return this.replace(e),e}}var ne;function se(t,e,r,o,i){var n={};return Object.keys(o).forEach((function(t){n[t]=o[t]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null),n}let ae=(se((ne=class extends v{createInitialState(){return{records:new I(["id","refId"])}}all(){return Array.from(this.state.records.values())}get(t){return this.state.records.get("id",t)[0]||this.state.records.get("refId",t)[0]}has(t){return this.state.records.has("id",t)||this.state.records.has("refId",t)}hasDraftOf(t){return this.has(t.refId)}getDraftOf(t){return this.get(t.refId)}insert(t){this.state.records.set(t)}remove(t){let e=t;"string"==typeof t&&(e=this.get(t)),this.state.records.delete(e)}}).prototype,"insert",[s.d],Object.getOwnPropertyDescriptor(ne.prototype,"insert"),ne.prototype),se(ne.prototype,"remove",[s.d],Object.getOwnPropertyDescriptor(ne.prototype,"remove"),ne.prototype),ne);var ce;function pe(t,e,r,o,i){var n={};return Object.keys(o).forEach((function(t){n[t]=o[t]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null),n}let de=(pe((ce=class extends v{constructor(...t){super(...t),this.logLimit=1e4}createInitialState(){return{errors:[],events:[]}}log(t){this.state.events.push(t)}error(t,e){this.state.errors.push({timestamp:Date.now(),message:t.message,errorObject:t,refId:null==e?void 0:e.refId,metadata:e})}getLastError(){return this.state.errors[this.state.errors.length-1]}getErrorsForRef(t){return this.state.errors.filter(e=>e.refId===t)}getLastErrorForRef(t){for(let e=this.state.errors.length-1;e>=0;e--)if(this.state.errors[e].refId===t)return this.state.errors[e];return null}}).prototype,"log",[s.d],Object.getOwnPropertyDescriptor(ce.prototype,"log"),ce.prototype),pe(ce.prototype,"error",[s.d],Object.getOwnPropertyDescriptor(ce.prototype,"error"),ce.prototype),ce);var le,ue=r("7fF4"),he=r("AWS9"),me=r("26cw"),ye=Object(d.a)((function(t,e){return e>t?e:t})),ge=r("j4OS"),fe=r("AXde"),be=Object(d.a)((function(t,e){return Object(me.a)(Object(fe.a)(ye,0,Object(ge.a)("length",e)),(function(){var r=arguments,o=this;return t.apply(o,Object(he.a)((function(t){return t.apply(o,r)}),e))}))})),Oe=Object(d.a)((function(t,e){for(var r=0,o=Math.min(t.length,e.length),i={};r<o;)i[t[r]]=e[r],r+=1;return i})),ve=Object(d.a)((function(t,e){for(var r={},o=0;o<t.length;)t[o]in e&&(r[t[o]]=e[t[o]]),o+=1;return r})),we=r("HbXv"),je=Object(we.a)((function(t){return Object(me.a)(Object(fe.a)(ye,0,Object(ge.a)("length",t)),(function(){for(var e=0,r=t.length;e<r;){if(!t[e].apply(this,arguments))return!1;e+=1}return!0}))})),De=r("sEWo"),Ce=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.found=!1}return t.prototype["@@transducer/init"]=y.a.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.found=!0,t=u(this.xf["@@transducer/step"](t,this.idx))),t},t}(),Pe=Object(d.a)((function(t,e){return new Ce(t,e)})),Ie=Object(d.a)(Object(l.a)([],Pe,(function(t,e){for(var r=0,o=e.length;r<o;){if(t(e[r]))return r;r+=1}return-1}))),Te=Object(we.a)((function(t){return function(){return t}})),ze=r("W0Zu"),Re=Object(ze.a)((function(t,e,r){var o=t(e),i=t(r);return o<i?-1:o>i?1:0})),Se=r("1LUG"),Ae=r("t1nR"),Ue=r("ByYx"),Ee=r("uOlb"),Ne=Object(d.a)((function(t,e){return Object(Y.a)(t,function(t){var e=function(t){return{"@@transducer/init":y.a.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,r){var o=t["@@transducer/step"](e,r);return o["@@transducer/reduced"]?{"@@transducer/value":o,"@@transducer/reduced":!0}:o}}}(t);return{"@@transducer/init":y.a.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,r){return Object(Ue.a)(r)?Object(Ee.a)(e,t,r):Object(Ee.a)(e,t,[r])}}}(e))})),ke=Object(d.a)(Object(l.a)(["fantasy-land/chain","chain"],Ne,(function(t,e){return"function"==typeof e?function(r){return t(e(r))(r)}:function(t){for(var e,r,o,i=[],n=0,s=t.length;n<s;){if(Object(Ue.a)(t[n]))for(o=0,r=(e=t[n]).length;o<r;)i[i.length]=e[o],o+=1;else i[i.length]=t[n];n+=1}return i}(Object(Y.a)(t,e))})))(Ae.a),xe=Object(ze.a)((function(t,e,r){var o=t(e),i=t(r);return o>i?-1:o<i?1:0}));function Be(t,e,r,o,i){var n={};return Object.keys(o).forEach((function(t){n[t]=o[t]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null),n}const Me=Object(p.a)("name"),_e=Object(Z.a)("enabled");let He=(Be((le=class extends v{createInitialState(){return{rules:[],globalSort:null}}get rules(){return this.state.rules}get enabledRules(){return this.state.rules.filter(_e).map(t=>t.negated?Object(ue.a)(t.test):t.test)}get ruleNames(){return this.state.rules.map(t=>t.name)}get enabledRuleNames(){return this.state.rules.filter(_e).map(t=>t.name)}get ruleStates(){return be(Oe,[Object(Y.a)(Object(Z.a)("name")),Object(Y.a)(ve(["enabled","negated"]))])(this.state.rules)}get globalSort(){return this.state.globalSort}filter(t){const e=je(this.enabledRules);return t.filter(e).sort(this.globalSortComparator)}test(t){return je(this.enabledRules)(t)}setGlobalSort(t,e){this.state.globalSort=t?{prop:t,direction:e}:null}getRule(t){return this.state.rules.find(Me(t))}enableRule(t){this.getRuleOrThrow(t).enable()}disableRule(t){this.getRuleOrThrow(t).disable()}toggleRule(t){this.getRuleOrThrow(t).toggle()}negateRule(t){this.getRuleOrThrow(t).negate()}disableAllRules(){this.state.rules.forEach(Object(De.a)(0,"disable"))}addRule(t,e){if(this.getRule(t))throw new U.DuplicateFilterError("Filter Rule with name "+t+" already exists.");const r=this.ruleFactory(t,e);return this.state.rules.push(r),r}removeRule(t){const e=this.getRuleIndex(t);e<0||this.state.rules.splice(e,1)}removeAllRules(){this.state.rules.splice(0,this.state.rules.length)}getRuleIndex(t){return Ie(Me(t))(this.state.rules)}getRuleOrThrow(t){const e=this.getRule(t);if(!e)throw new U.FilterNotFoundError("No such rule: "+t);return e}get globalSortComparator(){return this.state.globalSort?"asc"===this.state.globalSort.direction?Re(Object(Se.a)(ke([this.state.globalSort.prop]))):xe(Object(Se.a)(ke([this.state.globalSort.prop]))):Te(0)}ruleFactory(t,e){return Object(s.k)({name:t,test:e,enabled:!0,negated:!1,enable(){return this.enabled=!0,this},disable(){return this.enabled=!1,this},toggle(){return this.enabled=!this.enabled,this},negate(){return this.negated=!this.negated,this}})}}).prototype,"enabledRules",[s.g],Object.getOwnPropertyDescriptor(le.prototype,"enabledRules"),le.prototype),Be(le.prototype,"ruleNames",[s.g],Object.getOwnPropertyDescriptor(le.prototype,"ruleNames"),le.prototype),Be(le.prototype,"enabledRuleNames",[s.g],Object.getOwnPropertyDescriptor(le.prototype,"enabledRuleNames"),le.prototype),Be(le.prototype,"ruleStates",[s.g],Object.getOwnPropertyDescriptor(le.prototype,"ruleStates"),le.prototype),Be(le.prototype,"setGlobalSort",[s.d],Object.getOwnPropertyDescriptor(le.prototype,"setGlobalSort"),le.prototype),Be(le.prototype,"enableRule",[s.d],Object.getOwnPropertyDescriptor(le.prototype,"enableRule"),le.prototype),Be(le.prototype,"disableRule",[s.d],Object.getOwnPropertyDescriptor(le.prototype,"disableRule"),le.prototype),Be(le.prototype,"toggleRule",[s.d],Object.getOwnPropertyDescriptor(le.prototype,"toggleRule"),le.prototype),Be(le.prototype,"negateRule",[s.d],Object.getOwnPropertyDescriptor(le.prototype,"negateRule"),le.prototype),Be(le.prototype,"disableAllRules",[s.d],Object.getOwnPropertyDescriptor(le.prototype,"disableAllRules"),le.prototype),Be(le.prototype,"addRule",[s.d],Object.getOwnPropertyDescriptor(le.prototype,"addRule"),le.prototype),Be(le.prototype,"removeRule",[s.d],Object.getOwnPropertyDescriptor(le.prototype,"removeRule"),le.prototype),Be(le.prototype,"removeAllRules",[s.d],Object.getOwnPropertyDescriptor(le.prototype,"removeAllRules"),le.prototype),Be(le.prototype,"globalSortComparator",[s.g],Object.getOwnPropertyDescriptor(le.prototype,"globalSortComparator"),le.prototype),le);var Ve;function Le(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function Fe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Le(Object(r),!0).forEach((function(e){Ke(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ke(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function We(t,e,r,o,i){var n={};return Object.keys(o).forEach((function(t){n[t]=o[t]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null),n}let $e=(We((Ve=class extends v{createInitialState(){return Fe({},U.FEATURE_DEFAULTS)}get(t){return this.state[t]}all(){return this.state}set(t,e){this.state[t]=e}replace(t){this.state=t}merge(t){this.state=Fe(Fe({},this.state),t)}}).prototype,"set",[s.d],Object.getOwnPropertyDescriptor(Ve.prototype,"set"),Ve.prototype),We(Ve.prototype,"replace",[s.d],Object.getOwnPropertyDescriptor(Ve.prototype,"replace"),Ve.prototype),We(Ve.prototype,"merge",[s.d],Object.getOwnPropertyDescriptor(Ve.prototype,"merge"),Ve.prototype),Ve);var qe;function Qe(t,e,r,o,i){var n={};return Object.keys(o).forEach((function(t){n[t]=o[t]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null),n}let Xe=(Qe((qe=class extends v{createInitialState(){return{}}get hasKeys(){return Object.keys(this.state).length>0}get(t){return this.state[t]}set(t,e){this.state[t]=e}}).prototype,"hasKeys",[s.g],Object.getOwnPropertyDescriptor(qe.prototype,"hasKeys"),qe.prototype),Qe(qe.prototype,"set",[s.d],Object.getOwnPropertyDescriptor(qe.prototype,"set"),qe.prototype),qe);var Ge,Je,Ye,Ze,tr,er,rr,or,ir,nr,sr,ar,cr,pr,dr=r("E3at");function lr(t,e,r,o){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function ur(t,e,r,o,i){var n={};return Object.keys(o).forEach((function(t){n[t]=o[t]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null),n}const hr=["draft"],mr={modelType:"User",draft:!1,id:"-1",refId:"-1",name:"",email:"",avatarUrl:"",canPrivate:!1,canMention:!1,canComment:!1,mentionable:!1,anonymous:!0,isMember:!1};class yr{constructor(t,e){this.modelType=mt.User,this.draft=!1,this.anonymous=void 0,this.avatarUrl=void 0,this.canPrivate=void 0,this.canMention=void 0,this.canComment=void 0,this.email=void 0,this.id=void 0,this.mentionable=void 0,this.name=void 0,this.refId=void 0,this.isMember=void 0,this.storeRef=void 0,this.storeRef=t,this.anonymous=e.anonymous||!1,this.avatarUrl=e.avatarUrl||"",this.canPrivate=e.canPrivate||!1,this.canMention=e.canMention||!1,this.canComment=e.canComment||!1,this.isMember=e.isMember||!1,this.email=e.email||"",this.mentionable=e.mentionable,this.name=e.name||"",this.id=e.id||"",this.refId=e.refId||at(),Object(s.k)(this)}}yr.draftConstructor=void 0;let gr=(pr=cr=class{constructor(t){lr(this,"pending",Je,this),this.modelType=mt.User,this.draft=!0,this._original=void 0,lr(this,"anonymous",Ye,this),lr(this,"avatarUrl",Ze,this),lr(this,"canPrivate",tr,this),lr(this,"canMention",er,this),lr(this,"canComment",rr,this),lr(this,"isMember",or,this),lr(this,"email",ir,this),lr(this,"id",nr,this),lr(this,"name",sr,this),lr(this,"refId",ar,this),this.original=void 0,this.storeRef=void 0,this.writableKeys=void 0,this.refId=at(),this.original=t,this.storeRef=t.storeRef,Object(s.l)(this),Object.assign(this,M()(hr,t)),this.writableKeys=["anonymous","avatarUrl","canPrivate","canMention","canComment","isMember","email","name"],Object.defineProperty(this,"refId",{writable:!1})}set(t,e){if("id"===t)throw new Error("Violation -- set('id', ...): Cannot set the `id` property of a draft via the set() method. This is probably not what you want to do.\n        To update the ID of a draft, use the setIdentity() method instead.");if("refId"===t)throw new Error("Violation -- set('refId', ...): The `refId` draft attribute cannot be changed.");if(!this.writableKeys.includes(t))throw new Error(`Violation -- set('${t}', ...): \`${t}\` is not a writable key of Draft${this.modelType}.`);this[t]=e}setIdentity(t){this.id=t}setPending(t){this.pending=t}},cr.concreateConstructor=void 0,Je=ur((Ge=pr).prototype,"pending",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ye=ur(Ge.prototype,"anonymous",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ze=ur(Ge.prototype,"avatarUrl",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tr=ur(Ge.prototype,"canPrivate",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),er=ur(Ge.prototype,"canMention",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rr=ur(Ge.prototype,"canComment",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),or=ur(Ge.prototype,"isMember",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ir=ur(Ge.prototype,"email",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nr=ur(Ge.prototype,"id",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sr=ur(Ge.prototype,"name",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ar=ur(Ge.prototype,"refId",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ur(Ge.prototype,"set",[s.d],Object.getOwnPropertyDescriptor(Ge.prototype,"set"),Ge.prototype),ur(Ge.prototype,"setIdentity",[s.d],Object.getOwnPropertyDescriptor(Ge.prototype,"setIdentity"),Ge.prototype),ur(Ge.prototype,"setPending",[s.d],Object.getOwnPropertyDescriptor(Ge.prototype,"setPending"),Ge.prototype),Ge);function fr(t){return Array.from(t).sort((t,e)=>{var r,o;return t.isNew||!(null===(r=t.comments)||void 0===r?void 0:r.length)?1:e.isNew||!(null===(o=e.comments)||void 0===o?void 0:o.length)?-1:t.getAnchorComment().createdAt.getTime()-e.getAnchorComment().createdAt.getTime()})}function br(t){return Array.from(t).sort((t,e)=>{var r,o;if(t.isNew||!(null===(r=t.comments)||void 0===r?void 0:r.length))return 1;if(e.isNew||!(null===(o=e.comments)||void 0===o?void 0:o.length))return-1;const i=t.lastSavedComment;return e.lastSavedComment.createdAt.getTime()-i.createdAt.getTime()})}function Or(t){if(!t.isRoot)return[];const{integrationType:e,integrationId:r}=Object(U.parseIRN)(t.irn);return t.storeRef.filter(t=>{const o=Object(U.parseIRN)(t.irn);return"root"!==o.subtype&&o.integrationId===r&&o.integrationType===e})}function vr(t){if(t.isRoot)return t;const{integrationType:e,integrationId:r}=Object(U.parseIRN)(t.irn),o=Object(U.generateIRN)({integrationType:e,integrationId:r});return t.storeRef.filterBy("irn",o),t}function wr(){return{environment:"unknown",tier:"unknown",user:mr,loginType:"",mode:"",permissions:{canDiscoverUsers:!1,canInviteGuests:!1,canInviteMembers:!1},signInUrl:{primary:"",secondary:""}}}var jr,Dr,Cr,Pr,Ir,Tr,zr,Rr;function Sr(t,e,r,o){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function Ar(t,e,r,o,i){var n={};return Object.keys(o).forEach((function(t){n[t]=o[t]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null),n}yr.draftConstructor=gr;const Ur=["draft"];let Er=(Rr=zr=class{constructor(t,e){this.modelType=mt.Domain,this.draft=!1,this.id=void 0,this.irn=void 0,this.refId=void 0,this.isMultiIRNDomain=!1,this.storeRef=void 0,Sr(this,"configState",Tr,this),this.storeRef=t,this.refId=e.refId||at(),this.id=e.irn||"",this.irn=e.irn||"",e.config&&(this.configState=e.config),Object(s.l)(this)}searchCollaborators(t){const e=this.users.filter(t=>t.mentionable||t.canComment);return this.storeRef.searchCollaborators(t,e,!1)}clearAllThreads(){this.storeRef.core.stores.thread.clear()}get config(){return this.configState}get features(){return this.storeRef.core.stores.feature.state}get threads(){return this.storeRef.core.stores.thread.filterBy("irn",this.irn)}get savedThreads(){return this.threads.filter(t=>!t.isNew)}get hasUnreads(){return this.threads.some(t=>t.unread)}get unreads(){return this.threads.filter(t=>t.unread)}get comments(){return this.threads.reduce((t,e)=>t.concat(e.comments),[])}get totalUnreadThreads(){return this.threads.filter(t=>t.unread).length}get totalUnreadComments(){return this.threads.reduce((t,e)=>{const r=e.comments.filter(t=>t.unread);return t.concat(r)},[]).length}get user(){return this.storeRef.core.stores.user.get(this.config.user.id)}get tier(){return this.config.tier}get environment(){return this.config.environment}get loginType(){return this.config.loginType}get mode(){return this.config.mode}get signInUrl(){return this.config.signInUrl}get users(){return this.storeRef.core.stores.user.all()}get threadsSortedByCreatedAt(){return fr(this.threads)}get threadsSortedByRecency(){return br(this.threads)}get isRoot(){return this.irn.endsWith(":root")}get isChild(){return!this.irn.endsWith(":root")}get root(){return vr(this)}get children(){return Or(this)}},zr.draftConstructor=void 0,zr.createInitialConfigState=wr,Tr=Ar((Ir=Rr).prototype,"configState",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return wr()}}),Ar(Ir.prototype,"clearAllThreads",[s.d],Object.getOwnPropertyDescriptor(Ir.prototype,"clearAllThreads"),Ir.prototype),Ar(Ir.prototype,"config",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"config"),Ir.prototype),Ar(Ir.prototype,"features",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"features"),Ir.prototype),Ar(Ir.prototype,"threads",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"threads"),Ir.prototype),Ar(Ir.prototype,"savedThreads",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"savedThreads"),Ir.prototype),Ar(Ir.prototype,"hasUnreads",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"hasUnreads"),Ir.prototype),Ar(Ir.prototype,"unreads",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"unreads"),Ir.prototype),Ar(Ir.prototype,"comments",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"comments"),Ir.prototype),Ar(Ir.prototype,"totalUnreadThreads",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"totalUnreadThreads"),Ir.prototype),Ar(Ir.prototype,"totalUnreadComments",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"totalUnreadComments"),Ir.prototype),Ar(Ir.prototype,"user",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"user"),Ir.prototype),Ar(Ir.prototype,"tier",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"tier"),Ir.prototype),Ar(Ir.prototype,"environment",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"environment"),Ir.prototype),Ar(Ir.prototype,"loginType",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"loginType"),Ir.prototype),Ar(Ir.prototype,"mode",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"mode"),Ir.prototype),Ar(Ir.prototype,"signInUrl",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"signInUrl"),Ir.prototype),Ar(Ir.prototype,"users",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"users"),Ir.prototype),Ar(Ir.prototype,"threadsSortedByCreatedAt",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"threadsSortedByCreatedAt"),Ir.prototype),Ar(Ir.prototype,"threadsSortedByRecency",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"threadsSortedByRecency"),Ir.prototype),Ar(Ir.prototype,"isRoot",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"isRoot"),Ir.prototype),Ar(Ir.prototype,"isChild",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"isChild"),Ir.prototype),Ar(Ir.prototype,"root",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"root"),Ir.prototype),Ar(Ir.prototype,"children",[s.g],Object.getOwnPropertyDescriptor(Ir.prototype,"children"),Ir.prototype),Ir),Nr=(Pr=Cr=class{constructor(t){Sr(this,"pending",Dr,this),this.modelType=mt.Domain,this.draft=!0,this.isMultiIRNDomain=void 0,this.id=void 0,this.irn=void 0,this.refId=void 0,this.original=void 0,this.writableKeys=void 0,this.storeRef=void 0,this.refId=at(),this.original=t,this.storeRef=t.storeRef,Object(s.l)(this),Object.assign(this,M()(Ur,Object(s.p)(t))),this.writableKeys=["irn"],Object.defineProperty(this,"refId",{writable:!1})}clearAllThreads(){throw new Error("Method not implemented.")}set(t,e){if("id"===t)throw new Error("Violation -- set('id', ...): Cannot set the `id` property of a draft via the set() method. This is probably not what you want to do.\n        To update the ID of a draft, use the setIdentity() method instead.");if("refId"===t)throw new Error("Violation -- set('refId', ...): The `refId` draft attribute cannot be changed.");if(!this.writableKeys.includes(t))throw new Error(`Violation -- set('${t}', ...): \`${t}\` is not a writable key of Draft${this.modelType}.`);this[t]=e}get config(){return this.original.configState}get features(){return this.storeRef.core.stores.feature.state}setIdentity(t){this.id=t}setPending(t){this.pending=t}get _original(){return this.original}get threads(){return this.storeRef.core.stores.thread.filterBy("irn",this.irn)}get savedThreads(){return this.threads.filter(t=>!t.isNew)}get hasUnreads(){return this.threads.some(t=>t.unread)}get unreads(){return this.threads.filter(t=>t.unread)}get comments(){return this.threads.reduce((t,e)=>t.concat(e.comments),[])}get totalUnreadThreads(){return this.threads.filter(t=>t.unread).length}get totalUnreadComments(){return this.threads.reduce((t,e)=>{const r=e.comments.filter(t=>t.unread);return t.concat(r)},[]).length}get user(){return this.storeRef.core.stores.user.get(this.config.user.id)}get tier(){return this.config.tier}get environment(){return this.config.environment}get loginType(){return this.config.loginType}get mode(){return this.config.mode}get signInUrl(){return this.config.signInUrl}get users(){return this.storeRef.core.stores.user.all()}get threadsSortedByCreatedAt(){return fr(this.original.threads)}get threadsSortedByRecency(){return br(this.original.threads)}get isRoot(){return this.original.irn.endsWith(":root")}get isChild(){return!this.original.irn.endsWith(":root")}get root(){return vr(this.original)}get children(){return Or(this.original)}},Cr.concreteConstructor=void 0,Dr=Ar((jr=Pr).prototype,"pending",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ar(jr.prototype,"set",[s.d],Object.getOwnPropertyDescriptor(jr.prototype,"set"),jr.prototype),Ar(jr.prototype,"config",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"config"),jr.prototype),Ar(jr.prototype,"features",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"features"),jr.prototype),Ar(jr.prototype,"setIdentity",[s.d],Object.getOwnPropertyDescriptor(jr.prototype,"setIdentity"),jr.prototype),Ar(jr.prototype,"setPending",[s.d],Object.getOwnPropertyDescriptor(jr.prototype,"setPending"),jr.prototype),Ar(jr.prototype,"threads",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"threads"),jr.prototype),Ar(jr.prototype,"savedThreads",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"savedThreads"),jr.prototype),Ar(jr.prototype,"hasUnreads",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"hasUnreads"),jr.prototype),Ar(jr.prototype,"unreads",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"unreads"),jr.prototype),Ar(jr.prototype,"comments",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"comments"),jr.prototype),Ar(jr.prototype,"totalUnreadThreads",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"totalUnreadThreads"),jr.prototype),Ar(jr.prototype,"totalUnreadComments",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"totalUnreadComments"),jr.prototype),Ar(jr.prototype,"user",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"user"),jr.prototype),Ar(jr.prototype,"tier",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"tier"),jr.prototype),Ar(jr.prototype,"environment",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"environment"),jr.prototype),Ar(jr.prototype,"loginType",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"loginType"),jr.prototype),Ar(jr.prototype,"mode",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"mode"),jr.prototype),Ar(jr.prototype,"signInUrl",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"signInUrl"),jr.prototype),Ar(jr.prototype,"users",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"users"),jr.prototype),Ar(jr.prototype,"threadsSortedByCreatedAt",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"threadsSortedByCreatedAt"),jr.prototype),Ar(jr.prototype,"threadsSortedByRecency",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"threadsSortedByRecency"),jr.prototype),Ar(jr.prototype,"isRoot",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"isRoot"),jr.prototype),Ar(jr.prototype,"isChild",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"isChild"),jr.prototype),Ar(jr.prototype,"root",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"root"),jr.prototype),Ar(jr.prototype,"children",[s.g],Object.getOwnPropertyDescriptor(jr.prototype,"children"),jr.prototype),jr);var kr,xr,Br,Mr,_r,Hr,Vr,Lr,Fr,Kr,Wr,$r,qr,Qr,Xr,Gr,Jr,Yr,Zr,to,eo,ro,oo,io,no;function so(t,e,r,o){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function ao(t,e,r,o,i){var n={};return Object.keys(o).forEach((function(t){n[t]=o[t]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null),n}Er.draftConstructor=Nr;const co=["draft"];let po=(no=io=class{constructor(t,e){var r,o,i;this.modelType=mt.Comment,this.draft=!1,so(this,"id",Xr,this),so(this,"refId",Gr,this),so(this,"status",Jr,this),so(this,"comment",Yr,this),so(this,"authorId",Zr,this),so(this,"createdAt",to,this),so(this,"updatedAt",eo,this),so(this,"threadId",ro,this),so(this,"unread",oo,this),this.draftConstructor=lo,this.storeRef=void 0,this.storeRef=t,this.id=e.id||"",this.refId=e.refId||at(),this.threadId=e.threadId||"",this.comment=e.comment||"",this.authorId=null!==(r=e.authorId)&&void 0!==r?r:"",this.createdAt=null!==(o=e.createdAt)&&void 0!==o?o:new Date(0),this.updatedAt=null!==(i=e.updatedAt)&&void 0!==i?i:new Date(0),this.status=e.status||null,this.unread=e.unread||!1,Object(s.l)(this)}get thread(){return this.storeRef.core.stores.thread.get(this.threadId)}get author(){return this.storeRef.core.stores.user.get(this.authorId)}get isAnchor(){var t,e;return(null===(t=this.thread)||void 0===t||null===(e=t.comments[0])||void 0===e?void 0:e.id)===this.id}get commentStatus(){var t,e;return this.status?this.status:this.comment||1!==(null===(t=this.thread)||void 0===t?void 0:t.comments.length)?!this.comment&&(null===(e=this.thread)||void 0===e?void 0:e.comments.length)>1?U.CommentState.isReply:U.CommentState.isExisting:U.CommentState.isNew}get isTemp(){return this.isNew}get isNew(){return""===this.id||Boolean(this.id.match("temp-"))}get isPending(){const t=this.getDraftOf();return!!t&&Boolean(t.pending)}getDraftOf(){return this.storeRef.core.stores.draft.getDraftOf(this)}},io.draftConstructor=void 0,Xr=ao((Qr=no).prototype,"id",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gr=ao(Qr.prototype,"refId",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jr=ao(Qr.prototype,"status",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yr=ao(Qr.prototype,"comment",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zr=ao(Qr.prototype,"authorId",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),to=ao(Qr.prototype,"createdAt",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eo=ao(Qr.prototype,"updatedAt",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ro=ao(Qr.prototype,"threadId",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oo=ao(Qr.prototype,"unread",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ao(Qr.prototype,"thread",[s.g],Object.getOwnPropertyDescriptor(Qr.prototype,"thread"),Qr.prototype),ao(Qr.prototype,"author",[s.g],Object.getOwnPropertyDescriptor(Qr.prototype,"author"),Qr.prototype),ao(Qr.prototype,"isAnchor",[s.g],Object.getOwnPropertyDescriptor(Qr.prototype,"isAnchor"),Qr.prototype),ao(Qr.prototype,"commentStatus",[s.g],Object.getOwnPropertyDescriptor(Qr.prototype,"commentStatus"),Qr.prototype),ao(Qr.prototype,"isTemp",[s.g],Object.getOwnPropertyDescriptor(Qr.prototype,"isTemp"),Qr.prototype),ao(Qr.prototype,"isNew",[s.g],Object.getOwnPropertyDescriptor(Qr.prototype,"isNew"),Qr.prototype),ao(Qr.prototype,"isPending",[s.g],Object.getOwnPropertyDescriptor(Qr.prototype,"isPending"),Qr.prototype),Qr),lo=(kr=s.d.bound,qr=$r=class{constructor(t){so(this,"pending",Br,this),this.modelType=mt.Comment,this.draft=!0,this.refId=void 0,this.original=void 0,this.writableKeys=void 0,this.storeRef=void 0,this.concreteConstructor=po,so(this,"authorId",Mr,this),so(this,"comment",_r,this),so(this,"createdAt",Hr,this),so(this,"id",Vr,this),so(this,"threadId",Lr,this),so(this,"updatedAt",Fr,this),so(this,"status",Kr,this),so(this,"unread",Wr,this),this.refId=at(),this.original=t,this.storeRef=t.storeRef,Object(s.l)(this),Object.assign(this,M()(co,t)),this.writableKeys=["authorId","threadId","createdAt","updatedAt","comment","thread","status"],Object.defineProperty(this,"refId",{writable:!1})}get _original(){return this.original}set(t,e){if("id"===t)throw new Error("Violation -- set('id', ...): Cannot set the `id` property of a draft via the set() method. This is probably not what you want to do.\n        To update the ID of a draft, use the setIdentity() method instead.");if("refId"===t)throw new Error("Violation -- set('refId', ...): The `refId` draft attribute cannot be changed.");if(!this.writableKeys.includes(t))throw new Error(`Violation -- set('${t}', ...): \`${t}\` is not a writable key of Draft${this.modelType}.`);this[t]=e}setIdentity(t){this.id=t}setPending(t){this.pending=t}get author(){return this.storeRef.core.stores.user.get(this.authorId)}get thread(){return this.storeRef.core.stores.thread.get(this.threadId)}get isTemp(){return this.isNew}get isNew(){return""===this.id||Boolean(this.id.match("temp-"))}setStatus(t){this.status=t}get commentStatus(){var t,e;return this.status?this.status:this.comment||1!==(null===(t=this.thread)||void 0===t?void 0:t.comments.length)?!this.comment&&(null===(e=this.thread)||void 0===e?void 0:e.comments.length)>1?U.CommentState.isReply:U.CommentState.isExisting:U.CommentState.isNew}get isAnchor(){var t,e;return(null===(t=this.thread)||void 0===t||null===(e=t.comments[0])||void 0===e?void 0:e.id)===this.id}},$r.concreteConstructor=void 0,Br=ao((xr=qr).prototype,"pending",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mr=ao(xr.prototype,"authorId",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_r=ao(xr.prototype,"comment",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hr=ao(xr.prototype,"createdAt",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vr=ao(xr.prototype,"id",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lr=ao(xr.prototype,"threadId",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fr=ao(xr.prototype,"updatedAt",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kr=ao(xr.prototype,"status",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wr=ao(xr.prototype,"unread",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ao(xr.prototype,"set",[s.d],Object.getOwnPropertyDescriptor(xr.prototype,"set"),xr.prototype),ao(xr.prototype,"setIdentity",[s.d],Object.getOwnPropertyDescriptor(xr.prototype,"setIdentity"),xr.prototype),ao(xr.prototype,"setPending",[s.d],Object.getOwnPropertyDescriptor(xr.prototype,"setPending"),xr.prototype),ao(xr.prototype,"author",[s.g],Object.getOwnPropertyDescriptor(xr.prototype,"author"),xr.prototype),ao(xr.prototype,"thread",[s.g],Object.getOwnPropertyDescriptor(xr.prototype,"thread"),xr.prototype),ao(xr.prototype,"isTemp",[s.g],Object.getOwnPropertyDescriptor(xr.prototype,"isTemp"),xr.prototype),ao(xr.prototype,"isNew",[s.g],Object.getOwnPropertyDescriptor(xr.prototype,"isNew"),xr.prototype),ao(xr.prototype,"setStatus",[kr],Object.getOwnPropertyDescriptor(xr.prototype,"setStatus"),xr.prototype),ao(xr.prototype,"commentStatus",[s.g],Object.getOwnPropertyDescriptor(xr.prototype,"commentStatus"),xr.prototype),ao(xr.prototype,"isAnchor",[s.g],Object.getOwnPropertyDescriptor(xr.prototype,"isAnchor"),xr.prototype),xr);var uo;function ho(t,e,r,o,i){var n={};return Object.keys(o).forEach((function(t){n[t]=o[t]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null),n}po.draftConstructor=lo;let mo=(ho((uo=class{constructor(t){this.isMultiIRNDomain=!0,this.draft=!1,this.modelType="Domain",this.rootDomain=void 0,Object(s.l)(this),this.rootDomain=t.root}clearAllThreads(){this.children.forEach(t=>{t.clearAllThreads()})}get id(){return this.rootDomain.id}get refId(){return null}get irn(){return this.rootDomain.irn}get irnList(){return[this.rootDomain.irn,...this.children.map(t=>t.irn)]}get config(){return this.rootDomain.config}get features(){return this.rootDomain.features}get tier(){return this.rootDomain.tier}get environment(){return this.rootDomain.environment}get loginType(){return this.rootDomain.loginType}get mode(){return this.rootDomain.mode}get signInUrl(){return this.rootDomain.signInUrl}get user(){return this.rootDomain.user}get users(){return this.rootDomain.users}searchCollaborators(t){return this.rootDomain.searchCollaborators(t)}get threads(){return this.rootDomain.storeRef.core.stores.thread.filter(t=>this.irnList.includes(t.irn))}get savedThreads(){return this.threads.filter(t=>!t.isNew)}get comments(){return this.threads.reduce((t,e)=>t.concat(e.comments),[])}get hasUnreads(){return this.threads.some(t=>t.unread)}get totalUnreadThreads(){return this.threads.filter(t=>t.unread).length}get totalUnreadComments(){return this.threads.reduce((t,e)=>{const r=e.comments.filter(t=>t.unread);return t.concat(r)},[]).length}get isRoot(){return!0}get isChild(){return!1}get root(){return this}get children(){return this.rootDomain.children}get threadsSortedByCreatedAt(){return fr(this.threads)}get threadsSortedByRecency(){return br(this.threads)}}).prototype,"clearAllThreads",[s.d],Object.getOwnPropertyDescriptor(uo.prototype,"clearAllThreads"),uo.prototype),ho(uo.prototype,"irnList",[s.g],Object.getOwnPropertyDescriptor(uo.prototype,"irnList"),uo.prototype),ho(uo.prototype,"threads",[s.g],Object.getOwnPropertyDescriptor(uo.prototype,"threads"),uo.prototype),ho(uo.prototype,"savedThreads",[s.g],Object.getOwnPropertyDescriptor(uo.prototype,"savedThreads"),uo.prototype),ho(uo.prototype,"comments",[s.g],Object.getOwnPropertyDescriptor(uo.prototype,"comments"),uo.prototype),ho(uo.prototype,"hasUnreads",[s.g],Object.getOwnPropertyDescriptor(uo.prototype,"hasUnreads"),uo.prototype),ho(uo.prototype,"totalUnreadThreads",[s.g],Object.getOwnPropertyDescriptor(uo.prototype,"totalUnreadThreads"),uo.prototype),ho(uo.prototype,"totalUnreadComments",[s.g],Object.getOwnPropertyDescriptor(uo.prototype,"totalUnreadComments"),uo.prototype),ho(uo.prototype,"threadsSortedByCreatedAt",[s.g],Object.getOwnPropertyDescriptor(uo.prototype,"threadsSortedByCreatedAt"),uo.prototype),ho(uo.prototype,"threadsSortedByRecency",[s.g],Object.getOwnPropertyDescriptor(uo.prototype,"threadsSortedByRecency"),uo.prototype),uo);const yo=po,go=Er,fo=Xt,bo=yr,Oo=mo;var vo=r("5eTJ"),wo=r("P1mm"),jo=r.n(wo),Do=r("OkiC"),Co=r.n(Do),Po=r("bwK2"),Io=r.n(Po),To=r("G5xW"),zo=r.n(To),Ro=r("NWRd"),So=r.n(Ro);const Ao=zo()("unread",!1),Uo=zo()("unread",!0),Eo=zo()("resolved",!0),No=zo()("resolved",!1),ko=zo()("isNew",!1),xo=So()([Uo,No]),Bo=So()([Ao,No,ko]);let Mo;function _o(t,e="",r){try{return e?t.stores.domain.findBy("irn",e)[r]:t.stores[r]}catch(o){return Object(U.reportError)(o),[]}}function Ho(t,e,r){Object(s.o)(()=>{const o=t.operations.createDraft(e);r(o),t.operations.commitDraft(o),t.stores.draft.remove(o)})}!function(t){t.threads="threads",t.comments="comments",t.users="users"}(Mo||(Mo={}));const Vo=(t,e)=>(null==e?void 0:e._original[t])!==e[t]?{value:e[t]}:null;function Lo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function Fo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Lo(Object(r),!0).forEach((function(e){Ko(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ko(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function $o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Wo(Object(r),!0).forEach((function(e){qo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qo(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const Qo={"request-source":"comment-kit-ui","calling-service":"comment-kit-ui"},Xo=/[0-9]+/,Go=/@?<@U(\S+)>/,Jo={async loadDomainById(t,e){throw"loadDomainById not implemenated"},async loadConfiguration(t,e){try{return await t.publicTransport.getConfig({irn:e},Qo)}catch(r){throw console.warn("TODO: handle Error"),r}},async updateConfiguration(t,e,r){const o=await Object(U.initFeaturesClient)(r.tier,r.toObject());t.stores.feature.merge(Object(U.getFeatureVariations)(o));const i=Object(U.sanitizeID)(r.user),n=$o($o({},r),{},{user:i});try{t.stores.user.insert(t.stores.user.init(i))}catch(s){}return Jo.createDomain(t,e,n)},createDomain(t,e,r=Er.createInitialConfigState()){const o=t.stores.domain.get(e);if(o)return o;const i=t.stores.domain.init({id:e,irn:e,config:r});return t.stores.domain.insert(i),t.stores.domain.get(e)},async loadThreadsByIRN(t,e){try{return await t.publicTransport.getThreads({irn:e,includeUnreads:!0},Qo)}catch(r){throw console.warn("TODO: handle Error"),r}},syncMultiIRNDomains(t,e,r){try{const i=null==(o=e)?void 0:o.threads.reduce((t,e)=>{const r=t.findIndex(t=>t.irn===e.irn);if(-1!==r){const o=t[r].payload;return o.threads.push(e),o.totalThreads=o.threads.length,e.userIds.forEach(t=>{o.userIds.add(t)}),t}const o=new Set;return e.userIds.forEach(t=>{o.add(t)}),t.push({irn:e.irn,payload:{threads:[e],totalThreads:1,userIds:o}}),t},[]).map(({irn:t,payload:e})=>{const{userIds:r}=e,i=function(t,e){if(null==t)return{};var r,o,i=function(t,e){if(null==t)return{};var r,o,i={},n=Object.keys(t);for(o=0;o<n.length;o++)e.indexOf(r=n[o])>=0||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(o=0;o<n.length;o++)e.indexOf(r=n[o])>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}(e,["userIds"]),n=[...r].map(t=>o.users.find(e=>e.id===t));return{irn:t,payload:Fo(Fo({},i),{},{users:n,totalUsers:n.length})}});let n=[];return i.forEach(e=>{Jo.createDomain(t,e.irn,r);const{threads:o,comments:i}=Jo.fullThreadsHydrate(t,e.irn,e.payload);n=n.concat(o);const s=[];e.payload.threads.forEach(t=>{t.unreadCommentIds&&s.push(...t.unreadCommentIds)}),Jo.syncUnreadsStatus(t,s,i)}),n}catch(i){Object(U.reportError)(i)}var o},createPagination(t,e){t.stores.pagination.set(e.irn,{nextPageToken:e.nextPageToken})},async loadThreadsByMultiIRN(t,e,r){try{if(!e)throw new Error("IRN param is missing");const{includes:o=[vo.Includes.INCLUDES_SUBRESOURCES],filterBy:i=vo.FilterBy.FILTERBY_NONE,limit:n=U.DEFAULT_PAGINATION_LIMIT,nextPageToken:s}=null!=r?r:{};return await t.privateTransport.getThreadsFiltered({irn:e,includes:o,filterBy:i,nextPageToken:s,limit:n>100?100:n},Qo)}catch(o){throw Object(U.reportError)(o),o}},async getUnreads(t,e){const r=await Jo.loadThreadsByIRN(t,e);return Jo.syncUnreadsStatus(t,r.unreads.unreads),r.unreads},fullThreadsHydrate(t,e,r){const o=t.stores.domain.findBy("irn",e);let i=[];const n=r.threads.map(e=>{var r;const{comments:n}=e,s=function(t,e){if(null==t)return{};var r,o,i=function(t,e){if(null==t)return{};var r,o,i={},n=Object.keys(t);for(o=0;o<n.length;o++)e.indexOf(r=n[o])>=0||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(o=0;o<n.length;o++)e.indexOf(r=n[o])>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}(e,["comments"]),a=t.stores.thread.get(s.id)||{},c=((null==a?void 0:a.comments)||[]).reduce((t,e)=>(e.isNew||(t[e.id]=e),t),{}),p=t.stores.thread.init($o($o($o({},a),s),{},{domainId:o.id,type:null!==(r=s.type)&&void 0!==r?r:1}));return i=i.concat(n.map(r=>{const o=t.stores.comment.get(r.id)||{};return c[r.id]&&delete c[r.id],t.stores.comment.init($o($o($o({},o),r),{},{authorId:r.userId,createdAt:new Date(r.createdAt),updatedAt:new Date(r.updatedAt),threadId:String(e.id)}))})),Object.values(c).forEach(e=>{t.stores.comment.remove(e.refId)}),p}),s=r.users.map(e=>{const r=t.stores.user.get(e.id)||{};return t.stores.user.init($o($o({},r),{},{id:String(e.id),email:e.email,name:e.name,anonymous:e.anonymous,canPrivate:e.canPrivate,avatarUrl:e.avatarUrl,mentionable:!1,canComment:e.canComment}))});t.stores.thread.upsertMany(n),t.stores.comment.upsertMany(i);try{t.stores.user.upsertMany(s)}catch(a){}return n.forEach(e=>{e.getLastComment().isNew||Jo.startNewBlankThreadReply(t,e,e.domain.user)}),{threads:n,comments:i,users:s}},async refreshThreadsByIRN(t,e){const r=await Jo.loadThreadsByIRN(t,e);Jo.fullThreadsHydrate(t,e,r),Jo.syncUnreadsStatus(t,r.unreads.unreads)},syncUnreadsStatus(t,e,r=t.stores.comment.all()){Object(s.o)(()=>{const o=e.reduce((t,e)=>t.add("string"==typeof e?e:e.commentId),new Set);r.forEach(e=>{const r=e.unread,i=o.has(e.id);r?i||Ho(t,e,t=>t.unread=!1):i&&Ho(t,e,t=>t.unread=!0)})})},getCommentCount(t,e){throw new Error("Not implemented")},getOrCreateDraftOf(t,e){if(t.stores.draft.hasDraftOf(e))return t.stores.draft.getDraftOf(e);const r=Jo.createDraft(t,e);return t.stores.draft.insert(r),r},commitDraft(t,e){switch(e.modelType){case"Comment":return t.stores.comment.commitDraft(e);case"Domain":return t.stores.domain.commitDraft(e);case"Thread":return t.stores.thread.commitDraft(e);case"User":return t.stores.user.commitDraft(e)}},createDraft(t,e){switch(e.modelType){case"Comment":return t.stores.comment.initDraft(e);case"Domain":return t.stores.domain.initDraft(e);case"Thread":return t.stores.thread.initDraft(e);case"User":return t.stores.user.initDraft(e)}},startThread(t,e,r="new:thread"){if(t.stores.draft.has(r))return t.stores.draft.get(r);{const o=t.stores.thread.initDraft(t.stores.thread.init({id:r,domainId:e.id,irn:e.irn})),i=t.stores.comment.initDraft(t.stores.comment.init({threadId:r}));return o.setAnchorComment(i),t.stores.draft.insert(o),o}},async saveThread(t,e){e.setPending(!0);const r=await t.privateTransport.createThread({irn:e.domain.irn,comment:e.anchorComment.comment,position:e.position,isHighlighted:e.isHighlighted,isPrivate:e.privatized,type:e.type},Qo),{commentId:o,threadId:i}=r;e.setIdentity(i),e.anchorComment&&e.anchorComment.setIdentity(o)},async saveUpdatedThread(t,e){e.setPending(!0);const r=Io()(t=>null!==t,{position:Vo("position",e),isHighlighted:Vo("isHighlighted",e),isPrivate:Vo("privatized",e),type:Vo("type",e),resolved:Vo("resolved",e),threadId:e.id});await t.privateTransport.updateThread(r,Qo),e.setPending(!1);const o=t.stores.thread.replace(t.stores.thread.init(e));return t.stores.draft.remove(e),o},async fetchUpdatedThread(t,e,r){const{thread:o,users:i,unreads:n}=await t.privateTransport.getThread({threadId:r},Qo);return Object(s.o)(()=>{Jo.fullThreadsHydrate(t,e,{threads:[o],users:i});const r=t.stores.thread.get(o.id);r&&Jo.syncUnreadsStatus(t,n,r.comments)}),t.stores.thread.get(r)},startReply(t,e){const r="reply:"+e.id;if(t.stores.draft.has(r))return t.stores.draft.get(r);const o=t.stores.comment.initDraft(t.stores.comment.init({id:r,threadId:e.id}));return t.stores.draft.insert(o),o},async saveReply(t,e){try{e.setPending(!0);const r=await t.privateTransport.createComment({threadId:e.threadId,comment:e.comment},Qo),{commentId:o}=r;e.setIdentity(o),e.setPending(!1);const i=t.stores.comment.insert(t.stores.comment.init(e));return t.stores.draft.remove(e),i}catch(r){throw t.stores.log.error(r,e),e.setPending(!1),r}},async deleteReply(t,e){let r;try{return!e.isAnchor&&(r=t.stores.comment.initDraft(e),t.stores.draft.insert(r),r.setPending(!0),await t.privateTransport.deleteComment({commentId:e.id},Qo),t.stores.comment.remove(e.refId),r.setPending(!1),t.stores.draft.remove(r),!0)}catch(i){var o;throw t.stores.log.error(i,e),null===(o=r)||void 0===o||o.setPending(!1),t.stores.draft.remove(r),i}},async deleteThread(t,e){let r;try{return Object(s.o)(()=>{r=t.stores.thread.initDraft(e),t.stores.draft.insert(r),r.setPending(!0)}),await t.privateTransport.deleteThread({threadId:e.id},Qo),Object(s.o)(()=>(Jo.removeThreadFromStore(t,e),r.setPending(!1),t.stores.draft.remove(r),!0))}catch(o){throw Object(s.o)(()=>{var n;t.stores.log.error(o,e),null===(n=r)||void 0===n||n.setPending(!1),t.stores.draft.remove(r)}),o}},removeThreadFromStore(t,e){try{Object(s.o)(()=>{e.comments.forEach(e=>t.stores.comment.remove(e.refId)),t.stores.thread.remove(e.refId)})}catch(r){throw t.stores.log.error(r,e),r}},async getCollaborators(t,e){try{return await t.privateTransport.getCollaborators({irn:e},Qo)}catch(r){return!1}},getUnreadComments:(t,e)=>_o(t,e,Mo.comments).filter(Uo),getReadComments:(t,e)=>_o(t,e,Mo.comments).filter(Ao),getUnreadThreads:(t,e)=>_o(t,e,Mo.threads).filter(xo),getReadThreads:(t,e)=>_o(t,e,Mo.threads).filter(Bo),getResolvedThreads:(t,e)=>_o(t,e,Mo.threads).filter(Eo),getResolvedCommentsCount:(t,e)=>Jo.getResolvedThreads(t,e).reduce((t,e)=>t+e.totalComments,0),getCommentsCount:(t,e)=>_o(t,e,Mo.comments).filter(ko).length,getThreadsCount:(t,e)=>_o(t,e,Mo.threads).filter(ko).length,async getCounts(t,e){try{const r=Jo.getUnreadThreads(t,e).length,o=Jo.getReadThreads(t,e).length;return{unreadThreads:r,readThreads:o,resolvedThreads:Jo.getResolvedThreads(t,e).length,unresolvedThreads:r+o,totalThreadCount:Jo.getThreadsCount(t,e),totalCommentCount:Jo.getCommentsCount(t,e)}}catch(r){return Object(U.reportError)(r),null}},async fetchCounts(t,e){const{irn:r,includeSubResources:o=!1}=e;return t.privateTransport.getAggregatesCount({irn:r,includeSubResources:o})},fullHydrateCollaborators(t,e){let r;Object(s.o)(()=>{const o=e.collaborators.filter(e=>t.stores.user.get(e.entityId)?t.stores.user.get(e.entityId).isMember!==e.isMember?e:void 0:e);r=o.map(e=>{var r,o;return t.stores.user.init({id:e.entityId,email:e.email,name:e.name,anonymous:e.anonymous,canPrivate:e.canPrivate,avatarUrl:e.avatarUrl,isMember:e.isMember,mentionable:!0,canMention:(null===(r=t.stores.user.get(e.entityId))||void 0===r?void 0:r.canMention)||!1,canComment:(null===(o=t.stores.user.get(e.entityId))||void 0===o?void 0:o.canComment)||!1})});try{t.stores.user.upsertMany(r)}catch(i){Object(U.reportError)(i)}return{users:r}})},startRevision:(t,e)=>t.stores.draft.insert(t.stores.comment.initDraft(e)),updateUsersTaggedInComment(t,e,r){Object(s.o)(()=>{e.comment.split(" ").forEach(e=>{if(Go.exec(e)){const o=pt()(Xo.exec(e)),i=t.stores.user.get(o);if(i){const e=Object.assign(i,r),o=t.stores.user.init($o({},e));t.stores.user.upsert(o)}}})})},async saveRevision(t,e){try{e.setPending(!0);const r=await t.privateTransport.updateComment({comment:e.comment,commentId:e.id},Qo),{commentId:o}=r;e.set("updatedAt",new Date),e.setIdentity(o),e.setPending(!1),t.stores.comment.replace(t.stores.comment.init(e)),Jo.updateUsersTaggedInComment(t,e,{isMember:!0})}catch(r){throw Object(U.reportError)(r),e.setPending(!1),r}},discardDraft(t,e){t.stores.draft.remove(e)},discardDraftOf(t,e){t.stores.draft.hasDraftOf(e)&&Jo.discardDraft(t,t.stores.draft.getDraftOf(e))},createEmptyDraftThread(t,e,r){const o=t.stores.domain.get(e),{threadModelData:i,commentModelData:n}=function(t,e,r){var o,i,n,s,a,c;const p=`temp-new-thread-${t}-${e.user.id}`,d="temp-anchor-comment--"+p,l={isHighlighted:null!==(o=r.isHighlighted)&&void 0!==o&&o,privatized:null!==(i=r.isPrivate)&&void 0!==i&&i,resolved:null!==(n=r.isResolved)&&void 0!==n&&n,createdAt:new Date,updatedAt:new Date,type:null!==(s=r.type)&&void 0!==s?s:1,position:null!==(a=r.position)&&void 0!==a?a:"",id:p,domainId:e.id,irn:t};return{commentModelData:{id:d,createdAt:new Date,updatedAt:new Date,threadId:p,comment:null!==(c=r.comment)&&void 0!==c?c:"",authorId:e.user.id},threadModelData:l}}(e,o,r),s=t.stores.thread.upsert(t.stores.thread.init(i)),a=Jo.getOrCreateDraftOf(t,s),c=Jo.getOrCreateNewDraftComment(t,s,n);return{thread:a._original,comment:c._original,draftThread:a,draftComment:c}},updateDraftComment(t,e,r){const o=Jo.getOrCreateNewDraftComment(t,e.thread,e);return Object.entries(r).forEach(([t,e])=>{o.set(t,e)}),o},updateDraftThread(t,e,r){const o=Jo.getOrCreateDraftOf(t,e);return Object.entries(r).forEach(([t,e])=>{o.set(t,e)}),o},startNewBlankThreadReply:(t,e,r)=>Jo.getOrCreateNewDraftComment(t,e,{id:"temp-draft-comment-"+e.id,authorId:r.id}),getOrCreateNewDraftComment(t,e,r){var o;const i=new Date,n=null!==(o=r.id&&t.stores.comment.get(r.id))&&void 0!==o?o:t.stores.comment.insert(t.stores.comment.init($o($o({updatedAt:i,createdAt:i},r),{},{threadId:e.id})));return Jo.getOrCreateDraftOf(t,n)},async saveNewCommentToThread(t,e){e.setPending(!0);const r=await t.privateTransport.createComment({comment:e.comment,threadId:e.thread.id},Qo).catch(t=>(console.warn("[commentkit] error saving comment"),e.setPending(!1),null));return r?Object(s.o)(()=>{Jo.updateUsersTaggedInComment(t,e,{isMember:!0}),e.setPending(!1),e.setIdentity(r.commentId);const o=new Date;e.set("createdAt",o),e.set("updatedAt",o);const i=Jo.commitDraft(t,e);return Ho(t,e.thread,t=>{t.resolved=!1}),i}):null},async saveNewThread(t,e,r){const o=e.domain.irn,i=t.stores.draft.getDraftOf(e),n=t.stores.draft.getDraftOf(r);try{i.setPending(!0),n.setPending(!0);const e=await t.privateTransport.createThread({irn:o,comment:n.comment,isHighlighted:i.isHighlighted,isPrivate:i.privatized,type:i.type,position:i.position},Qo);return Object(s.o)(()=>{i.setIdentity(e.threadId),n.setIdentity(e.commentId),n.set("threadId",e.threadId),i.setPending(!1),n.setPending(!1);const r=new Date;n.set("createdAt",r),n.set("updatedAt",r);const o=t.stores.thread.commitDraft(i),s=t.stores.comment.commitDraft(n);return t.stores.draft.remove(i),t.stores.draft.remove(n),{threadModel:o,commentModel:s}})}catch(a){return i.setPending(!1),n.setPending(!1),null}},async markReadThread(t,e){try{await t.privateTransport.markReadThread({threadId:e.id},Qo),Object(s.o)(()=>{for(const r of e.comments)Ho(t,r,t=>{t.unread=!1})})}catch(r){Object(U.reportError)(r)}},async markReadComment(t,e){try{await t.privateTransport.markReadComment({commentId:e.id},Qo),Ho(t,e,t=>{t.unread=!1})}catch(r){Object(U.reportError)(r)}},async markUnreadComment(t,e){try{await t.privateTransport.markUnreadComment({commentId:e.id},Qo),Ho(t,e,t=>{t.unread=!0})}catch(r){Object(U.reportError)(r)}},getThreadFromCommentID(t,e){var r;return null===(r=t.stores.comment.get(e))||void 0===r?void 0:r.thread}};function Yo(t){return jo()(e=>Co()(e,[t]),Jo)}var Zo,ti=r("qCtS");let ei=(function(t,e,r,o,i){var n={};Object.keys(o).forEach((function(t){n[t]=o[t]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null)}((Zo=class{constructor(t,e,r){this.core=void 0,this.selector=void 0,this.actions=void 0,this.core=t,this.selector=e,this.actions=Object(Y.a)(t=>Object(s.d)(t.bind(this)),r||{}),Object(s.l)(this)}get data(){return this.selector()}subscribe(t){return Object(s.e)(()=>t(this.data))}snapshot(){return Object(s.p)(this.data)}}).prototype,"data",[s.g],Object.getOwnPropertyDescriptor(Zo.prototype,"data"),Zo.prototype),Zo);var ri,oi,ii,ni;function si(t,e,r,o){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function ai(t,e,r,o,i){var n={};return Object.keys(o).forEach((function(t){n[t]=o[t]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null),n}let ci=(oi=ai((ri=class{constructor(){si(this,"storage",oi,this),this.storage=new s.a}query(t,e,r=1/0){return this.has(t)?this.get(t):this.set(t,e(),r)}get(t){const e=this.storage.get(t);if(e.expireAt>Date.now())return e.data;this.delete(t)}has(t){return this.storage.get(t).expireAt>Date.now()}set(t,e,r=1/0){this.storage.set(t,{data:e,expireAt:r})}delete(t){this.storage.delete(t)}clear(){this.storage.clear()}}).prototype,"storage",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ri),pi=(ni=ai((ii=class{constructor(){si(this,"storage",ni,this)}set(t,e){this.storage.set(t,Date.now()+e)}get(t){this.storage.get(t)}check(t){return this.storage.get(t)>Date.now()}expired(t){return!this.check(t)}reset(t){this.storage.delete(t)}clear(){this.storage.clear()}}).prototype,"storage",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s.a}}),ii);var di,li,ui;let hi=null,mi=(ui=li=class t{constructor(t,e=dr.API){this.privateTransport=void 0,this.publicTransport=void 0,this.cache=void 0,this.configuration=void 0,this.hooks=void 0,this.domain=void 0,this.comment=void 0,this.config=void 0,this.stores=void 0,this.constructors={Domain:go,User:bo,Comment:yo,Thread:fo,DomainStore:$,UserStore:ie,CommentStore:_,ThreadStore:oe,DraftStore:ae,FeatureStore:$e,LogStore:de,FilterStore:He,Projection:ei,PaginationStore:Xe},this.initializationPromise=Object(U.defer)(),this.operations=void 0,this.domainHelpers=void 0,this.TTL=void 0,this.domain=go,this.comment=yo,this.domainHelpers=o,this.config=t,this.hooks=t.callHookImpl,this.publicTransport=e.createPublicClient(t.apiHostname),this.privateTransport=e.createPrivateClient(t.apiHostname),t.constructors&&Object.assign(this.constructors,t.constructors);const r=new this.constructors.DraftStore(this),i=new this.constructors.DomainStore(this),n=new this.constructors.ThreadStore(this),s=new this.constructors.CommentStore(this),a=new this.constructors.UserStore(this),c=new this.constructors.FeatureStore(this),p=new this.constructors.LogStore(this),d=new this.constructors.FilterStore(this),l=new this.constructors.PaginationStore(this);this.stores={domain:i,thread:n,comment:s,user:a,draft:r,log:p,filter:d,feature:c,pagination:l},this.operations=Yo(this),this.TTL=new pi,this.cache=new ci}static makeObserver(t){return Object(ti.a)(t)}clearCollaboratorCache(t){this.TTL.reset("collaborators-"+t)}static destroyStoreSingleton(){hi&&(hi=null)}static async initializeDataStore(e,r,o){if(hi)return hi;const i=Object(U.generateIRN)(r);hi=new t({apiHostname:e,callHookImpl:(t,e)=>{console.info("hook call",t,e),console.warn("initializeDataStore needs to be refactored up a level. If you are seeing this, you are using the old implementation.")}},o);try{const[t,e]=await Promise.all([hi.operations.loadConfiguration(i),hi.operations.loadThreadsByIRN(i)]).then(t=>(hi.initializationPromise.resolve(),t));await hi.operations.updateConfiguration(i,t),hi.operations.fullThreadsHydrate(i,e),hi.operations.syncUnreadsStatus(e.unreads.unreads,hi.stores.comment.all())}catch(n){Object(U.reportError)(n)}return hi}async refreshCollaborators(t,e){try{if(this.TTL.expired("collaborators-"+t)){const r=await this.operations.getCollaborators(t);if(!r)throw new Error(`Operation - getCollaborators() failed for IRN: ${t} `);this.hydrateCollaborators(r),this.TTL.set("collaborators-"+t,6e4),e&&e({error:!1})}}catch(r){e({error:!0}),Object(U.reportError)(r)}}hydrateCollaborators(t){this.operations.fullHydrateCollaborators(t)}getUsers(t){return this.stores.domain.findBy("irn",t).users}getConfig(){return console.warn("\n\nCKCoreData.getConfig() is deprecated.\n\n"),this.stores.domain.all()[0].config}getFeature(t){return this.stores.feature.get(t)}getDomain(t){const e="string"!=typeof t?Object(U.generateIRN)(t):t;return this.stores.domain.findBy("irn",e)}getMultipleIRNDomainType(t){return new Oo(this.getDomain(t))}getCommentDraft(t){return t.getDraftOf()}getOrCreateDraftOf(t){return this.operations.getOrCreateDraftOf(t)}getEditingComment(){return this.stores.comment.editingComment}setEditingComment(t){return this.stores.comment.setEditingComment(t)}getThread(t,e,r){this.findOrFetch(t,e,r)}findOrFetch(t,e,r){var o=this;let i;i="string"==typeof t?t:Object(U.generateIRN)(t);const n=this.stores.thread.findBy("id",e);this.initializationPromise&&!n&&this.initializationPromise.then((async function(){await o.getUpdatedThread(i,e)})).then(()=>{r(this.stores.thread.findBy("id",e))}),n&&r(this.stores.thread.findBy("id",e))}async getUpdatedThread(t,e){try{return await this.operations.fetchUpdatedThread(t,e)}catch(r){Object(U.reportError)(r)}}startNewBlankThreadReply(t){return this.operations.startNewBlankThreadReply(t,t.domain.user)}loadConfig(t){return this.operations.loadConfiguration(t)}async saveNewCommentToThread(t){const e=t.draft?t:this.operations.getOrCreateNewDraftComment(t.thread,t);return this.operations.saveNewCommentToThread(e)}updateComment(t,e){const r=t.draft?t:this.operations.getOrCreateNewDraftComment(t.thread,t);return r.setStatus(e),this.operations.commitDraft(r)}setThreadModalClicked(t){this.stores.thread.setThreadModalClicked(t)}async saveRevision(t){const e=t.draft?t:this.operations.getOrCreateNewDraftComment(t.thread,t);return await this.operations.saveRevision(e).then(()=>this.updateComment(t,U.CommentState.isExisting))}discardDraft(t){const e=t.draft?t:this.operations.getOrCreateNewDraftComment(t.thread,t);return this.operations.discardDraft(e),this.updateComment(t,U.CommentState.isExisting)}discardTempThread(t){if(!t)return!1;const e=t.getAnchorComment();return(null==e?void 0:e.isNew)||(null==t?void 0:t.isNew)?(Object(s.o)(()=>{this.operations.discardDraftOf(e),this.operations.discardDraftOf(t),this.stores.comment.remove(e),this.stores.thread.remove(t)}),!0):(console.warn(`Attempted to discard a non-temp thread or comment,\n          ${t.id} & ${e.id}`),!1)}async deleteReply(t){return this.operations.deleteReply(t)}async deleteThread(t){return this.operations.deleteThread(t)}async saveNewThread(t,e){return this.operations.saveNewThread(t,e)}newDraftThread(t,e){return window.console&&console.warn("DEPRECATED call to coreData.newDraftThread. Use startNewThread instead."),this.startNewThread(t,e)}newTempThread(t,e){return window.console&&console.warn("DEPRECATED call to coreData.newTempThread. Use startNewThread instead."),this.startNewThread(t,e)}startNewThread(t,e){const r="object"==typeof t?Object(U.generateIRN)(t):t,{thread:o}=this.operations.createEmptyDraftThread(r,e);return o}isDraftingA(t){return this.stores.draft.hasDraftOf(t)}createProjection(t){return new this.constructors.Projection(this,t)}startNewReply(t){return this.operations.getOrCreateNewDraftComment(t,{})}updateDraftComment(t,e){return this.operations.updateDraftComment(t,e)}updateDraftThread(t,e){return this.operations.updateDraftThread(t,e)}async saveAndUpdateThread(t,e){const r=this.operations.updateDraftThread(t,e);return await this.operations.saveUpdatedThread(r)}markReadThread(t){return this.operations.markReadThread(t)}markReadComment(t){return this.operations.markReadComment(t)}async getThreadFromCommentID(t){return await this.initializationPromise,this.operations.getThreadFromCommentID(t)}},li.models={Domain:go,Comment:yo,Thread:fo},function(t,e,r,o,i){var n={};Object.keys(o).forEach((function(t){n[t]=o[t]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null)}((di=ui).prototype,"refreshCollaborators",[s.d],Object.getOwnPropertyDescriptor(di.prototype,"refreshCollaborators"),di.prototype),di);function yi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function gi(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const fi=t=>{let{children:e}=t,r=function(t,e){if(null==t)return{};var r,o,i=function(t,e){if(null==t)return{};var r,o,i={},n=Object.keys(t);for(o=0;o<n.length;o++)e.indexOf(r=n[o])>=0||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(o=0;o<n.length;o++)e.indexOf(r=n[o])>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}(t,["children"]);return n.a.createElement(i.Fragment,null,e(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yi(Object(r),!0).forEach((function(e){gi(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({DATA:mi},r)))};e.default=fi},Uw16:function(t,e){t.exports=function(t,e){var r,o=(t=t||[]).length,i=(e=e||[]).length,n=[];for(r=0;r<o;)n[n.length]=t[r],r+=1;for(r=0;r<i;)n[n.length]=e[r],r+=1;return n}},VYKz:function(t,e,r){var o=r("HlJK"),i=r("IHxi"),n=r("Tml1");function s(t,e,r){for(var o=r.next();!o.done;){if((e=t["@@transducer/step"](e,o.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}o=r.next()}return t["@@transducer/result"](e)}function a(t,e,r,o){return t["@@transducer/result"](r[o](n(t["@@transducer/step"],t),e))}var c="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";t.exports=function(t,e,r){if("function"==typeof t&&(t=i(t)),o(r))return function(t,e,r){for(var o=0,i=r.length;o<i;){if((e=t["@@transducer/step"](e,r[o]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}o+=1}return t["@@transducer/result"](e)}(t,e,r);if("function"==typeof r["fantasy-land/reduce"])return a(t,e,r,"fantasy-land/reduce");if(null!=r[c])return s(t,e,r[c]());if("function"==typeof r.next)return s(t,e,r);if("function"==typeof r.reduce)return a(t,e,r,"reduce");throw new TypeError("reduce: list must be array or iterable")}},Xjf4:function(t,e){t.exports=function(t,e){for(var r=0,o=e.length,i=Array(o);r<o;)i[r]=t(e[r]),r+=1;return i}},bwK2:function(t,e,r){var o=r("tWqV")((function(t,e){var r={};for(var o in e)t(e[o],o,e)&&(r[o]=e[o]);return r}));t.exports=o},o6dO:function(t,e,r){var o=r("rWoH"),i=r("SNaX");t.exports=function t(e,r,n){return function(){for(var s=[],a=0,c=e,p=0;p<r.length||a<arguments.length;){var d;p<r.length&&(!i(r[p])||a>=arguments.length)?d=r[p]:(d=arguments[a],a+=1),s[p]=d,i(d)||(c-=1),p+=1}return c<=0?n.apply(this,s):o(c,t(e,s,n))}}},rWoH:function(t,e){t.exports=function(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,r){return e.apply(this,arguments)};case 3:return function(t,r,o){return e.apply(this,arguments)};case 4:return function(t,r,o,i){return e.apply(this,arguments)};case 5:return function(t,r,o,i,n){return e.apply(this,arguments)};case 6:return function(t,r,o,i,n,s){return e.apply(this,arguments)};case 7:return function(t,r,o,i,n,s,a){return e.apply(this,arguments)};case 8:return function(t,r,o,i,n,s,a,c){return e.apply(this,arguments)};case 9:return function(t,r,o,i,n,s,a,c,p){return e.apply(this,arguments)};case 10:return function(t,r,o,i,n,s,a,c,p,d){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}},tO9Q:function(t,e,r){var o=r("tWqV")((function(t,e){return e>t?e:t}));t.exports=o},z3ss:function(t,e,r){var o=r("tWqV"),i=r("P1mm"),n=r("HgcS"),s=o((function(t,e){return i(n(t),e)}));t.exports=s}}]);